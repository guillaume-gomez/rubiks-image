(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var Tp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var pb={exports:{}},yy={},mb={exports:{}},dn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg=Symbol.for("react.element"),Cz=Symbol.for("react.portal"),Rz=Symbol.for("react.fragment"),bz=Symbol.for("react.strict_mode"),Pz=Symbol.for("react.profiler"),Lz=Symbol.for("react.provider"),Iz=Symbol.for("react.context"),Oz=Symbol.for("react.forward_ref"),Dz=Symbol.for("react.suspense"),Uz=Symbol.for("react.memo"),Nz=Symbol.for("react.lazy"),PA=Symbol.iterator;function Fz(n){return n===null||typeof n!="object"?null:(n=PA&&n[PA]||n["@@iterator"],typeof n=="function"?n:null)}var gb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_b=Object.assign,vb={};function Md(n,e,t){this.props=n,this.context=e,this.refs=vb,this.updater=t||gb}Md.prototype.isReactComponent={};Md.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Md.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function yb(){}yb.prototype=Md.prototype;function kE(n,e,t){this.props=n,this.context=e,this.refs=vb,this.updater=t||gb}var BE=kE.prototype=new yb;BE.constructor=kE;_b(BE,Md.prototype);BE.isPureReactComponent=!0;var LA=Array.isArray,xb=Object.prototype.hasOwnProperty,HE={current:null},Sb={key:!0,ref:!0,__self:!0,__source:!0};function wb(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)xb.call(e,i)&&!Sb.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var h=Array(a),d=0;d<a;d++)h[d]=arguments[d+2];r.children=h}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Mg,type:n,key:s,ref:o,props:r,_owner:HE.current}}function zz(n,e){return{$$typeof:Mg,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function VE(n){return typeof n=="object"&&n!==null&&n.$$typeof===Mg}function kz(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var IA=/\/+/g;function o1(n,e){return typeof n=="object"&&n!==null&&n.key!=null?kz(""+n.key):e.toString(36)}function gv(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Mg:case Cz:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+o1(o,0):i,LA(r)?(t="",n!=null&&(t=n.replace(IA,"$&/")+"/"),gv(r,e,t,"",function(d){return d})):r!=null&&(VE(r)&&(r=zz(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(IA,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",LA(n))for(var a=0;a<n.length;a++){s=n[a];var h=i+o1(s,a);o+=gv(s,e,t,h,r)}else if(h=Fz(n),typeof h=="function")for(n=h.call(n),a=0;!(s=n.next()).done;)s=s.value,h=i+o1(s,a++),o+=gv(s,e,t,h,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Q0(n,e,t){if(n==null)return n;var i=[],r=0;return gv(n,i,"","",function(s){return e.call(t,s,r++)}),i}function Bz(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Yr={current:null},_v={transition:null},Hz={ReactCurrentDispatcher:Yr,ReactCurrentBatchConfig:_v,ReactCurrentOwner:HE};dn.Children={map:Q0,forEach:function(n,e,t){Q0(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Q0(n,function(){e++}),e},toArray:function(n){return Q0(n,function(e){return e})||[]},only:function(n){if(!VE(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};dn.Component=Md;dn.Fragment=Rz;dn.Profiler=Pz;dn.PureComponent=kE;dn.StrictMode=bz;dn.Suspense=Dz;dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hz;dn.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=_b({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=HE.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(h in e)xb.call(e,h)&&!Sb.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&a!==void 0?a[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=t;else if(1<h){a=Array(h);for(var d=0;d<h;d++)a[d]=arguments[d+2];i.children=a}return{$$typeof:Mg,type:n.type,key:r,ref:s,props:i,_owner:o}};dn.createContext=function(n){return n={$$typeof:Iz,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Lz,_context:n},n.Consumer=n};dn.createElement=wb;dn.createFactory=function(n){var e=wb.bind(null,n);return e.type=n,e};dn.createRef=function(){return{current:null}};dn.forwardRef=function(n){return{$$typeof:Oz,render:n}};dn.isValidElement=VE;dn.lazy=function(n){return{$$typeof:Nz,_payload:{_status:-1,_result:n},_init:Bz}};dn.memo=function(n,e){return{$$typeof:Uz,type:n,compare:e===void 0?null:e}};dn.startTransition=function(n){var e=_v.transition;_v.transition={};try{n()}finally{_v.transition=e}};dn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};dn.useCallback=function(n,e){return Yr.current.useCallback(n,e)};dn.useContext=function(n){return Yr.current.useContext(n)};dn.useDebugValue=function(){};dn.useDeferredValue=function(n){return Yr.current.useDeferredValue(n)};dn.useEffect=function(n,e){return Yr.current.useEffect(n,e)};dn.useId=function(){return Yr.current.useId()};dn.useImperativeHandle=function(n,e,t){return Yr.current.useImperativeHandle(n,e,t)};dn.useInsertionEffect=function(n,e){return Yr.current.useInsertionEffect(n,e)};dn.useLayoutEffect=function(n,e){return Yr.current.useLayoutEffect(n,e)};dn.useMemo=function(n,e){return Yr.current.useMemo(n,e)};dn.useReducer=function(n,e,t){return Yr.current.useReducer(n,e,t)};dn.useRef=function(n){return Yr.current.useRef(n)};dn.useState=function(n){return Yr.current.useState(n)};dn.useSyncExternalStore=function(n,e,t){return Yr.current.useSyncExternalStore(n,e,t)};dn.useTransition=function(){return Yr.current.useTransition()};dn.version="18.2.0";mb.exports=dn;var K=mb.exports;const Vz=zE(K);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gz=K,Wz=Symbol.for("react.element"),Xz=Symbol.for("react.fragment"),Yz=Object.prototype.hasOwnProperty,qz=Gz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zz={key:!0,ref:!0,__self:!0,__source:!0};function Eb(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)Yz.call(e,i)&&!Zz.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:Wz,type:n,key:s,ref:o,props:r,_owner:qz.current}}yy.Fragment=Xz;yy.jsx=Eb;yy.jsxs=Eb;pb.exports=yy;var Ce=pb.exports,BS={},Mb={exports:{}},Hs={},Tb={exports:{}},Ab={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(Y,te){var ee=Y.length;Y.push(te);e:for(;0<ee;){var ce=ee-1>>>1,ve=Y[ce];if(0<r(ve,te))Y[ce]=te,Y[ee]=ve,ee=ce;else break e}}function t(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var te=Y[0],ee=Y.pop();if(ee!==te){Y[0]=ee;e:for(var ce=0,ve=Y.length,he=ve>>>1;ce<he;){var Me=2*(ce+1)-1,Ie=Y[Me],Ye=Me+1,qe=Y[Ye];if(0>r(Ie,ee))Ye<ve&&0>r(qe,Ie)?(Y[ce]=qe,Y[Ye]=ee,ce=Ye):(Y[ce]=Ie,Y[Me]=ee,ce=Me);else if(Ye<ve&&0>r(qe,ee))Y[ce]=qe,Y[Ye]=ee,ce=Ye;else break e}}return te}function r(Y,te){var ee=Y.sortIndex-te.sortIndex;return ee!==0?ee:Y.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var h=[],d=[],p=1,m=null,g=3,y=!1,S=!1,A=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(Y){for(var te=t(d);te!==null;){if(te.callback===null)i(d);else if(te.startTime<=Y)i(d),te.sortIndex=te.expirationTime,e(h,te);else break;te=t(d)}}function C(Y){if(A=!1,E(Y),!S)if(t(h)!==null)S=!0,me(P);else{var te=t(d);te!==null&&de(C,te.startTime-Y)}}function P(Y,te){S=!1,A&&(A=!1,_(F),F=-1),y=!0;var ee=g;try{for(E(te),m=t(h);m!==null&&(!(m.expirationTime>te)||Y&&!G());){var ce=m.callback;if(typeof ce=="function"){m.callback=null,g=m.priorityLevel;var ve=ce(m.expirationTime<=te);te=n.unstable_now(),typeof ve=="function"?m.callback=ve:m===t(h)&&i(h),E(te)}else i(h);m=t(h)}if(m!==null)var he=!0;else{var Me=t(d);Me!==null&&de(C,Me.startTime-te),he=!1}return he}finally{m=null,g=ee,y=!1}}var D=!1,O=null,F=-1,L=5,N=-1;function G(){return!(n.unstable_now()-N<L)}function Q(){if(O!==null){var Y=n.unstable_now();N=Y;var te=!0;try{te=O(!0,Y)}finally{te?le():(D=!1,O=null)}}else D=!1}var le;if(typeof T=="function")le=function(){T(Q)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,oe=Z.port2;Z.port1.onmessage=Q,le=function(){oe.postMessage(null)}}else le=function(){w(Q,0)};function me(Y){O=Y,D||(D=!0,le())}function de(Y,te){F=w(function(){Y(n.unstable_now())},te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_continueExecution=function(){S||y||(S=!0,me(P))},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(Y){switch(g){case 1:case 2:case 3:var te=3;break;default:te=g}var ee=g;g=te;try{return Y()}finally{g=ee}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Y,te){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ee=g;g=Y;try{return te()}finally{g=ee}},n.unstable_scheduleCallback=function(Y,te,ee){var ce=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ce+ee:ce):ee=ce,Y){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=ee+ve,Y={id:p++,callback:te,priorityLevel:Y,startTime:ee,expirationTime:ve,sortIndex:-1},ee>ce?(Y.sortIndex=ee,e(d,Y),t(h)===null&&Y===t(d)&&(A?(_(F),F=-1):A=!0,de(C,ee-ce))):(Y.sortIndex=ve,e(h,Y),S||y||(S=!0,me(P))),Y},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(Y){var te=g;return function(){var ee=g;g=te;try{return Y.apply(this,arguments)}finally{g=ee}}}})(Ab);Tb.exports=Ab;var jz=Tb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cb=K,Bs=jz;function ze(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Rb=new Set,bm={};function dh(n,e){cd(n,e),cd(n+"Capture",e)}function cd(n,e){for(bm[n]=e,n=0;n<e.length;n++)Rb.add(e[n])}var ll=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),HS=Object.prototype.hasOwnProperty,Kz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,OA={},DA={};function Qz(n){return HS.call(DA,n)?!0:HS.call(OA,n)?!1:Kz.test(n)?DA[n]=!0:(OA[n]=!0,!1)}function Jz(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function $z(n,e,t,i){if(e===null||typeof e>"u"||Jz(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qr(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var pr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){pr[n]=new qr(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];pr[e]=new qr(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){pr[n]=new qr(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){pr[n]=new qr(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){pr[n]=new qr(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){pr[n]=new qr(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){pr[n]=new qr(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){pr[n]=new qr(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){pr[n]=new qr(n,5,!1,n.toLowerCase(),null,!1,!1)});var GE=/[\-:]([a-z])/g;function WE(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(GE,WE);pr[e]=new qr(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(GE,WE);pr[e]=new qr(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(GE,WE);pr[e]=new qr(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){pr[n]=new qr(n,1,!1,n.toLowerCase(),null,!1,!1)});pr.xlinkHref=new qr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){pr[n]=new qr(n,1,!1,n.toLowerCase(),null,!0,!0)});function XE(n,e,t,i){var r=pr.hasOwnProperty(e)?pr[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($z(e,t,r,i)&&(t=null),i||r===null?Qz(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var ml=Cb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,J0=Symbol.for("react.element"),zf=Symbol.for("react.portal"),kf=Symbol.for("react.fragment"),YE=Symbol.for("react.strict_mode"),VS=Symbol.for("react.profiler"),bb=Symbol.for("react.provider"),Pb=Symbol.for("react.context"),qE=Symbol.for("react.forward_ref"),GS=Symbol.for("react.suspense"),WS=Symbol.for("react.suspense_list"),ZE=Symbol.for("react.memo"),ou=Symbol.for("react.lazy"),Lb=Symbol.for("react.offscreen"),UA=Symbol.iterator;function Ap(n){return n===null||typeof n!="object"?null:(n=UA&&n[UA]||n["@@iterator"],typeof n=="function"?n:null)}var si=Object.assign,a1;function nm(n){if(a1===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);a1=e&&e[1]||""}return`
`+a1+n}var l1=!1;function u1(n,e){if(!n||l1)return"";l1=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var i=d}Reflect.construct(n,[],e)}else{try{e.call()}catch(d){i=d}n.call(e.prototype)}else{try{throw Error()}catch(d){i=d}n()}}catch(d){if(d&&i&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var h=`
`+r[o].replace(" at new "," at ");return n.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",n.displayName)),h}while(1<=o&&0<=a);break}}}finally{l1=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?nm(n):""}function ek(n){switch(n.tag){case 5:return nm(n.type);case 16:return nm("Lazy");case 13:return nm("Suspense");case 19:return nm("SuspenseList");case 0:case 2:case 15:return n=u1(n.type,!1),n;case 11:return n=u1(n.type.render,!1),n;case 1:return n=u1(n.type,!0),n;default:return""}}function XS(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case kf:return"Fragment";case zf:return"Portal";case VS:return"Profiler";case YE:return"StrictMode";case GS:return"Suspense";case WS:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Pb:return(n.displayName||"Context")+".Consumer";case bb:return(n._context.displayName||"Context")+".Provider";case qE:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ZE:return e=n.displayName||null,e!==null?e:XS(n.type)||"Memo";case ou:e=n._payload,n=n._init;try{return XS(n(e))}catch{}}return null}function tk(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return XS(e);case 8:return e===YE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bu(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ib(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function nk(n){var e=Ib(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function $0(n){n._valueTracker||(n._valueTracker=nk(n))}function Ob(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=Ib(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function Fv(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function YS(n,e){var t=e.checked;return si({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function NA(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=bu(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Db(n,e){e=e.checked,e!=null&&XE(n,"checked",e,!1)}function qS(n,e){Db(n,e);var t=bu(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?ZS(n,e.type,t):e.hasOwnProperty("defaultValue")&&ZS(n,e.type,bu(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function FA(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function ZS(n,e,t){(e!=="number"||Fv(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var im=Array.isArray;function td(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+bu(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function jS(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ze(91));return si({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function zA(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(ze(92));if(im(t)){if(1<t.length)throw Error(ze(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:bu(t)}}function Ub(n,e){var t=bu(e.value),i=bu(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function kA(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Nb(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function KS(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Nb(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var e_,Fb=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(e_=e_||document.createElement("div"),e_.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=e_.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Pm(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var um={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ik=["Webkit","ms","Moz","O"];Object.keys(um).forEach(function(n){ik.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),um[e]=um[n]})});function zb(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||um.hasOwnProperty(n)&&um[n]?(""+e).trim():e+"px"}function kb(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=zb(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var rk=si({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function QS(n,e){if(e){if(rk[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ze(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ze(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ze(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ze(62))}}function JS(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $S=null;function jE(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ew=null,nd=null,id=null;function BA(n){if(n=Cg(n)){if(typeof ew!="function")throw Error(ze(280));var e=n.stateNode;e&&(e=My(e),ew(n.stateNode,n.type,e))}}function Bb(n){nd?id?id.push(n):id=[n]:nd=n}function Hb(){if(nd){var n=nd,e=id;if(id=nd=null,BA(n),e)for(n=0;n<e.length;n++)BA(e[n])}}function Vb(n,e){return n(e)}function Gb(){}var c1=!1;function Wb(n,e,t){if(c1)return n(e,t);c1=!0;try{return Vb(n,e,t)}finally{c1=!1,(nd!==null||id!==null)&&(Gb(),Hb())}}function Lm(n,e){var t=n.stateNode;if(t===null)return null;var i=My(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(ze(231,e,typeof t));return t}var tw=!1;if(ll)try{var Cp={};Object.defineProperty(Cp,"passive",{get:function(){tw=!0}}),window.addEventListener("test",Cp,Cp),window.removeEventListener("test",Cp,Cp)}catch{tw=!1}function sk(n,e,t,i,r,s,o,a,h){var d=Array.prototype.slice.call(arguments,3);try{e.apply(t,d)}catch(p){this.onError(p)}}var cm=!1,zv=null,kv=!1,nw=null,ok={onError:function(n){cm=!0,zv=n}};function ak(n,e,t,i,r,s,o,a,h){cm=!1,zv=null,sk.apply(ok,arguments)}function lk(n,e,t,i,r,s,o,a,h){if(ak.apply(this,arguments),cm){if(cm){var d=zv;cm=!1,zv=null}else throw Error(ze(198));kv||(kv=!0,nw=d)}}function ph(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function Xb(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function HA(n){if(ph(n)!==n)throw Error(ze(188))}function uk(n){var e=n.alternate;if(!e){if(e=ph(n),e===null)throw Error(ze(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return HA(r),n;if(s===i)return HA(r),e;s=s.sibling}throw Error(ze(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(ze(189))}}if(t.alternate!==i)throw Error(ze(190))}if(t.tag!==3)throw Error(ze(188));return t.stateNode.current===t?n:e}function Yb(n){return n=uk(n),n!==null?qb(n):null}function qb(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=qb(n);if(e!==null)return e;n=n.sibling}return null}var Zb=Bs.unstable_scheduleCallback,VA=Bs.unstable_cancelCallback,ck=Bs.unstable_shouldYield,hk=Bs.unstable_requestPaint,Mi=Bs.unstable_now,fk=Bs.unstable_getCurrentPriorityLevel,KE=Bs.unstable_ImmediatePriority,jb=Bs.unstable_UserBlockingPriority,Bv=Bs.unstable_NormalPriority,dk=Bs.unstable_LowPriority,Kb=Bs.unstable_IdlePriority,xy=null,va=null;function pk(n){if(va&&typeof va.onCommitFiberRoot=="function")try{va.onCommitFiberRoot(xy,n,void 0,(n.current.flags&128)===128)}catch{}}var Vo=Math.clz32?Math.clz32:_k,mk=Math.log,gk=Math.LN2;function _k(n){return n>>>=0,n===0?32:31-(mk(n)/gk|0)|0}var t_=64,n_=4194304;function rm(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Hv(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=rm(a):(s&=o,s!==0&&(i=rm(s)))}else o=t&~r,o!==0?i=rm(o):s!==0&&(i=rm(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Vo(e),r=1<<t,i|=n[t],e&=~r;return i}function vk(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yk(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Vo(s),a=1<<o,h=r[o];h===-1?(!(a&t)||a&i)&&(r[o]=vk(a,e)):h<=e&&(n.expiredLanes|=a),s&=~a}}function iw(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Qb(){var n=t_;return t_<<=1,!(t_&4194240)&&(t_=64),n}function h1(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Tg(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Vo(e),n[e]=t}function xk(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-Vo(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function QE(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Vo(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var bn=0;function Jb(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var $b,JE,eP,tP,nP,rw=!1,i_=[],gu=null,_u=null,vu=null,Im=new Map,Om=new Map,uu=[],Sk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function GA(n,e){switch(n){case"focusin":case"focusout":gu=null;break;case"dragenter":case"dragleave":_u=null;break;case"mouseover":case"mouseout":vu=null;break;case"pointerover":case"pointerout":Im.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Om.delete(e.pointerId)}}function Rp(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Cg(e),e!==null&&JE(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function wk(n,e,t,i,r){switch(e){case"focusin":return gu=Rp(gu,n,e,t,i,r),!0;case"dragenter":return _u=Rp(_u,n,e,t,i,r),!0;case"mouseover":return vu=Rp(vu,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return Im.set(s,Rp(Im.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Om.set(s,Rp(Om.get(s)||null,n,e,t,i,r)),!0}return!1}function iP(n){var e=Vc(n.target);if(e!==null){var t=ph(e);if(t!==null){if(e=t.tag,e===13){if(e=Xb(t),e!==null){n.blockedOn=e,nP(n.priority,function(){eP(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function vv(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=sw(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);$S=i,t.target.dispatchEvent(i),$S=null}else return e=Cg(t),e!==null&&JE(e),n.blockedOn=t,!1;e.shift()}return!0}function WA(n,e,t){vv(n)&&t.delete(e)}function Ek(){rw=!1,gu!==null&&vv(gu)&&(gu=null),_u!==null&&vv(_u)&&(_u=null),vu!==null&&vv(vu)&&(vu=null),Im.forEach(WA),Om.forEach(WA)}function bp(n,e){n.blockedOn===e&&(n.blockedOn=null,rw||(rw=!0,Bs.unstable_scheduleCallback(Bs.unstable_NormalPriority,Ek)))}function Dm(n){function e(r){return bp(r,n)}if(0<i_.length){bp(i_[0],n);for(var t=1;t<i_.length;t++){var i=i_[t];i.blockedOn===n&&(i.blockedOn=null)}}for(gu!==null&&bp(gu,n),_u!==null&&bp(_u,n),vu!==null&&bp(vu,n),Im.forEach(e),Om.forEach(e),t=0;t<uu.length;t++)i=uu[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<uu.length&&(t=uu[0],t.blockedOn===null);)iP(t),t.blockedOn===null&&uu.shift()}var rd=ml.ReactCurrentBatchConfig,Vv=!0;function Mk(n,e,t,i){var r=bn,s=rd.transition;rd.transition=null;try{bn=1,$E(n,e,t,i)}finally{bn=r,rd.transition=s}}function Tk(n,e,t,i){var r=bn,s=rd.transition;rd.transition=null;try{bn=4,$E(n,e,t,i)}finally{bn=r,rd.transition=s}}function $E(n,e,t,i){if(Vv){var r=sw(n,e,t,i);if(r===null)S1(n,e,i,Gv,t),GA(n,i);else if(wk(r,n,e,t,i))i.stopPropagation();else if(GA(n,i),e&4&&-1<Sk.indexOf(n)){for(;r!==null;){var s=Cg(r);if(s!==null&&$b(s),s=sw(n,e,t,i),s===null&&S1(n,e,i,Gv,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else S1(n,e,i,null,t)}}var Gv=null;function sw(n,e,t,i){if(Gv=null,n=jE(i),n=Vc(n),n!==null)if(e=ph(n),e===null)n=null;else if(t=e.tag,t===13){if(n=Xb(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Gv=n,null}function rP(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fk()){case KE:return 1;case jb:return 4;case Bv:case dk:return 16;case Kb:return 536870912;default:return 16}default:return 16}}var fu=null,eM=null,yv=null;function sP(){if(yv)return yv;var n,e=eM,t=e.length,i,r="value"in fu?fu.value:fu.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return yv=r.slice(n,1<i?1-i:void 0)}function xv(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function r_(){return!0}function XA(){return!1}function Vs(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?r_:XA,this.isPropagationStopped=XA,this}return si(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=r_)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=r_)},persist:function(){},isPersistent:r_}),e}var Td={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tM=Vs(Td),Ag=si({},Td,{view:0,detail:0}),Ak=Vs(Ag),f1,d1,Pp,Sy=si({},Ag,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nM,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Pp&&(Pp&&n.type==="mousemove"?(f1=n.screenX-Pp.screenX,d1=n.screenY-Pp.screenY):d1=f1=0,Pp=n),f1)},movementY:function(n){return"movementY"in n?n.movementY:d1}}),YA=Vs(Sy),Ck=si({},Sy,{dataTransfer:0}),Rk=Vs(Ck),bk=si({},Ag,{relatedTarget:0}),p1=Vs(bk),Pk=si({},Td,{animationName:0,elapsedTime:0,pseudoElement:0}),Lk=Vs(Pk),Ik=si({},Td,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ok=Vs(Ik),Dk=si({},Td,{data:0}),qA=Vs(Dk),Uk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zk(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Fk[n])?!!e[n]:!1}function nM(){return zk}var kk=si({},Ag,{key:function(n){if(n.key){var e=Uk[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=xv(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Nk[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nM,charCode:function(n){return n.type==="keypress"?xv(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?xv(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Bk=Vs(kk),Hk=si({},Sy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ZA=Vs(Hk),Vk=si({},Ag,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nM}),Gk=Vs(Vk),Wk=si({},Td,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xk=Vs(Wk),Yk=si({},Sy,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),qk=Vs(Yk),Zk=[9,13,27,32],iM=ll&&"CompositionEvent"in window,hm=null;ll&&"documentMode"in document&&(hm=document.documentMode);var jk=ll&&"TextEvent"in window&&!hm,oP=ll&&(!iM||hm&&8<hm&&11>=hm),jA=String.fromCharCode(32),KA=!1;function aP(n,e){switch(n){case"keyup":return Zk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lP(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Bf=!1;function Kk(n,e){switch(n){case"compositionend":return lP(e);case"keypress":return e.which!==32?null:(KA=!0,jA);case"textInput":return n=e.data,n===jA&&KA?null:n;default:return null}}function Qk(n,e){if(Bf)return n==="compositionend"||!iM&&aP(n,e)?(n=sP(),yv=eM=fu=null,Bf=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return oP&&e.locale!=="ko"?null:e.data;default:return null}}var Jk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function QA(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!Jk[n.type]:e==="textarea"}function uP(n,e,t,i){Bb(i),e=Wv(e,"onChange"),0<e.length&&(t=new tM("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var fm=null,Um=null;function $k(n){xP(n,0)}function wy(n){var e=Gf(n);if(Ob(e))return n}function e4(n,e){if(n==="change")return e}var cP=!1;if(ll){var m1;if(ll){var g1="oninput"in document;if(!g1){var JA=document.createElement("div");JA.setAttribute("oninput","return;"),g1=typeof JA.oninput=="function"}m1=g1}else m1=!1;cP=m1&&(!document.documentMode||9<document.documentMode)}function $A(){fm&&(fm.detachEvent("onpropertychange",hP),Um=fm=null)}function hP(n){if(n.propertyName==="value"&&wy(Um)){var e=[];uP(e,Um,n,jE(n)),Wb($k,e)}}function t4(n,e,t){n==="focusin"?($A(),fm=e,Um=t,fm.attachEvent("onpropertychange",hP)):n==="focusout"&&$A()}function n4(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return wy(Um)}function i4(n,e){if(n==="click")return wy(e)}function r4(n,e){if(n==="input"||n==="change")return wy(e)}function s4(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Wo=typeof Object.is=="function"?Object.is:s4;function Nm(n,e){if(Wo(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!HS.call(e,r)||!Wo(n[r],e[r]))return!1}return!0}function eC(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function tC(n,e){var t=eC(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=eC(t)}}function fP(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?fP(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function dP(){for(var n=window,e=Fv();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Fv(n.document)}return e}function rM(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function o4(n){var e=dP(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&fP(t.ownerDocument.documentElement,t)){if(i!==null&&rM(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=tC(t,s);var o=tC(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var a4=ll&&"documentMode"in document&&11>=document.documentMode,Hf=null,ow=null,dm=null,aw=!1;function nC(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;aw||Hf==null||Hf!==Fv(i)||(i=Hf,"selectionStart"in i&&rM(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),dm&&Nm(dm,i)||(dm=i,i=Wv(ow,"onSelect"),0<i.length&&(e=new tM("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Hf)))}function s_(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Vf={animationend:s_("Animation","AnimationEnd"),animationiteration:s_("Animation","AnimationIteration"),animationstart:s_("Animation","AnimationStart"),transitionend:s_("Transition","TransitionEnd")},_1={},pP={};ll&&(pP=document.createElement("div").style,"AnimationEvent"in window||(delete Vf.animationend.animation,delete Vf.animationiteration.animation,delete Vf.animationstart.animation),"TransitionEvent"in window||delete Vf.transitionend.transition);function Ey(n){if(_1[n])return _1[n];if(!Vf[n])return n;var e=Vf[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in pP)return _1[n]=e[t];return n}var mP=Ey("animationend"),gP=Ey("animationiteration"),_P=Ey("animationstart"),vP=Ey("transitionend"),yP=new Map,iC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Du(n,e){yP.set(n,e),dh(e,[n])}for(var v1=0;v1<iC.length;v1++){var y1=iC[v1],l4=y1.toLowerCase(),u4=y1[0].toUpperCase()+y1.slice(1);Du(l4,"on"+u4)}Du(mP,"onAnimationEnd");Du(gP,"onAnimationIteration");Du(_P,"onAnimationStart");Du("dblclick","onDoubleClick");Du("focusin","onFocus");Du("focusout","onBlur");Du(vP,"onTransitionEnd");cd("onMouseEnter",["mouseout","mouseover"]);cd("onMouseLeave",["mouseout","mouseover"]);cd("onPointerEnter",["pointerout","pointerover"]);cd("onPointerLeave",["pointerout","pointerover"]);dh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));dh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));dh("onBeforeInput",["compositionend","keypress","textInput","paste"]);dh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));dh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));dh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c4=new Set("cancel close invalid load scroll toggle".split(" ").concat(sm));function rC(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,lk(i,e,void 0,n),n.currentTarget=null}function xP(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],h=a.instance,d=a.currentTarget;if(a=a.listener,h!==s&&r.isPropagationStopped())break e;rC(r,a,d),s=h}else for(o=0;o<i.length;o++){if(a=i[o],h=a.instance,d=a.currentTarget,a=a.listener,h!==s&&r.isPropagationStopped())break e;rC(r,a,d),s=h}}}if(kv)throw n=nw,kv=!1,nw=null,n}function Wn(n,e){var t=e[fw];t===void 0&&(t=e[fw]=new Set);var i=n+"__bubble";t.has(i)||(SP(e,n,2,!1),t.add(i))}function x1(n,e,t){var i=0;e&&(i|=4),SP(t,n,i,e)}var o_="_reactListening"+Math.random().toString(36).slice(2);function Fm(n){if(!n[o_]){n[o_]=!0,Rb.forEach(function(t){t!=="selectionchange"&&(c4.has(t)||x1(t,!1,n),x1(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[o_]||(e[o_]=!0,x1("selectionchange",!1,e))}}function SP(n,e,t,i){switch(rP(e)){case 1:var r=Mk;break;case 4:r=Tk;break;default:r=$E}t=r.bind(null,e,t,n),r=void 0,!tw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function S1(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var h=o.tag;if((h===3||h===4)&&(h=o.stateNode.containerInfo,h===r||h.nodeType===8&&h.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Vc(a),o===null)return;if(h=o.tag,h===5||h===6){i=s=o;continue e}a=a.parentNode}}i=i.return}Wb(function(){var d=s,p=jE(t),m=[];e:{var g=yP.get(n);if(g!==void 0){var y=tM,S=n;switch(n){case"keypress":if(xv(t)===0)break e;case"keydown":case"keyup":y=Bk;break;case"focusin":S="focus",y=p1;break;case"focusout":S="blur",y=p1;break;case"beforeblur":case"afterblur":y=p1;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=YA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Rk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Gk;break;case mP:case gP:case _P:y=Lk;break;case vP:y=Xk;break;case"scroll":y=Ak;break;case"wheel":y=qk;break;case"copy":case"cut":case"paste":y=Ok;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=ZA}var A=(e&4)!==0,w=!A&&n==="scroll",_=A?g!==null?g+"Capture":null:g;A=[];for(var T=d,E;T!==null;){E=T;var C=E.stateNode;if(E.tag===5&&C!==null&&(E=C,_!==null&&(C=Lm(T,_),C!=null&&A.push(zm(T,C,E)))),w)break;T=T.return}0<A.length&&(g=new y(g,S,null,t,p),m.push({event:g,listeners:A}))}}if(!(e&7)){e:{if(g=n==="mouseover"||n==="pointerover",y=n==="mouseout"||n==="pointerout",g&&t!==$S&&(S=t.relatedTarget||t.fromElement)&&(Vc(S)||S[ul]))break e;if((y||g)&&(g=p.window===p?p:(g=p.ownerDocument)?g.defaultView||g.parentWindow:window,y?(S=t.relatedTarget||t.toElement,y=d,S=S?Vc(S):null,S!==null&&(w=ph(S),S!==w||S.tag!==5&&S.tag!==6)&&(S=null)):(y=null,S=d),y!==S)){if(A=YA,C="onMouseLeave",_="onMouseEnter",T="mouse",(n==="pointerout"||n==="pointerover")&&(A=ZA,C="onPointerLeave",_="onPointerEnter",T="pointer"),w=y==null?g:Gf(y),E=S==null?g:Gf(S),g=new A(C,T+"leave",y,t,p),g.target=w,g.relatedTarget=E,C=null,Vc(p)===d&&(A=new A(_,T+"enter",S,t,p),A.target=E,A.relatedTarget=w,C=A),w=C,y&&S)t:{for(A=y,_=S,T=0,E=A;E;E=sf(E))T++;for(E=0,C=_;C;C=sf(C))E++;for(;0<T-E;)A=sf(A),T--;for(;0<E-T;)_=sf(_),E--;for(;T--;){if(A===_||_!==null&&A===_.alternate)break t;A=sf(A),_=sf(_)}A=null}else A=null;y!==null&&sC(m,g,y,A,!1),S!==null&&w!==null&&sC(m,w,S,A,!0)}}e:{if(g=d?Gf(d):window,y=g.nodeName&&g.nodeName.toLowerCase(),y==="select"||y==="input"&&g.type==="file")var P=e4;else if(QA(g))if(cP)P=r4;else{P=n4;var D=t4}else(y=g.nodeName)&&y.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(P=i4);if(P&&(P=P(n,d))){uP(m,P,t,p);break e}D&&D(n,g,d),n==="focusout"&&(D=g._wrapperState)&&D.controlled&&g.type==="number"&&ZS(g,"number",g.value)}switch(D=d?Gf(d):window,n){case"focusin":(QA(D)||D.contentEditable==="true")&&(Hf=D,ow=d,dm=null);break;case"focusout":dm=ow=Hf=null;break;case"mousedown":aw=!0;break;case"contextmenu":case"mouseup":case"dragend":aw=!1,nC(m,t,p);break;case"selectionchange":if(a4)break;case"keydown":case"keyup":nC(m,t,p)}var O;if(iM)e:{switch(n){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else Bf?aP(n,t)&&(F="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(F="onCompositionStart");F&&(oP&&t.locale!=="ko"&&(Bf||F!=="onCompositionStart"?F==="onCompositionEnd"&&Bf&&(O=sP()):(fu=p,eM="value"in fu?fu.value:fu.textContent,Bf=!0)),D=Wv(d,F),0<D.length&&(F=new qA(F,n,null,t,p),m.push({event:F,listeners:D}),O?F.data=O:(O=lP(t),O!==null&&(F.data=O)))),(O=jk?Kk(n,t):Qk(n,t))&&(d=Wv(d,"onBeforeInput"),0<d.length&&(p=new qA("onBeforeInput","beforeinput",null,t,p),m.push({event:p,listeners:d}),p.data=O))}xP(m,e)})}function zm(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Wv(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Lm(n,t),s!=null&&i.unshift(zm(n,s,r)),s=Lm(n,e),s!=null&&i.push(zm(n,s,r))),n=n.return}return i}function sf(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function sC(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,h=a.alternate,d=a.stateNode;if(h!==null&&h===i)break;a.tag===5&&d!==null&&(a=d,r?(h=Lm(t,s),h!=null&&o.unshift(zm(t,h,a))):r||(h=Lm(t,s),h!=null&&o.push(zm(t,h,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var h4=/\r\n?/g,f4=/\u0000|\uFFFD/g;function oC(n){return(typeof n=="string"?n:""+n).replace(h4,`
`).replace(f4,"")}function a_(n,e,t){if(e=oC(e),oC(n)!==e&&t)throw Error(ze(425))}function Xv(){}var lw=null,uw=null;function cw(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var hw=typeof setTimeout=="function"?setTimeout:void 0,d4=typeof clearTimeout=="function"?clearTimeout:void 0,aC=typeof Promise=="function"?Promise:void 0,p4=typeof queueMicrotask=="function"?queueMicrotask:typeof aC<"u"?function(n){return aC.resolve(null).then(n).catch(m4)}:hw;function m4(n){setTimeout(function(){throw n})}function w1(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),Dm(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);Dm(e)}function yu(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function lC(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Ad=Math.random().toString(36).slice(2),ga="__reactFiber$"+Ad,km="__reactProps$"+Ad,ul="__reactContainer$"+Ad,fw="__reactEvents$"+Ad,g4="__reactListeners$"+Ad,_4="__reactHandles$"+Ad;function Vc(n){var e=n[ga];if(e)return e;for(var t=n.parentNode;t;){if(e=t[ul]||t[ga]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=lC(n);n!==null;){if(t=n[ga])return t;n=lC(n)}return e}n=t,t=n.parentNode}return null}function Cg(n){return n=n[ga]||n[ul],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Gf(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(ze(33))}function My(n){return n[km]||null}var dw=[],Wf=-1;function Uu(n){return{current:n}}function Xn(n){0>Wf||(n.current=dw[Wf],dw[Wf]=null,Wf--)}function Vn(n,e){Wf++,dw[Wf]=n.current,n.current=e}var Pu={},br=Uu(Pu),fs=Uu(!1),nh=Pu;function hd(n,e){var t=n.type.contextTypes;if(!t)return Pu;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function ds(n){return n=n.childContextTypes,n!=null}function Yv(){Xn(fs),Xn(br)}function uC(n,e,t){if(br.current!==Pu)throw Error(ze(168));Vn(br,e),Vn(fs,t)}function wP(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ze(108,tk(n)||"Unknown",r));return si({},t,i)}function qv(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Pu,nh=br.current,Vn(br,n),Vn(fs,fs.current),!0}function cC(n,e,t){var i=n.stateNode;if(!i)throw Error(ze(169));t?(n=wP(n,e,nh),i.__reactInternalMemoizedMergedChildContext=n,Xn(fs),Xn(br),Vn(br,n)):Xn(fs),Vn(fs,t)}var el=null,Ty=!1,E1=!1;function EP(n){el===null?el=[n]:el.push(n)}function v4(n){Ty=!0,EP(n)}function Nu(){if(!E1&&el!==null){E1=!0;var n=0,e=bn;try{var t=el;for(bn=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}el=null,Ty=!1}catch(r){throw el!==null&&(el=el.slice(n+1)),Zb(KE,Nu),r}finally{bn=e,E1=!1}}return null}var Xf=[],Yf=0,Zv=null,jv=0,ao=[],lo=0,ih=null,il=1,rl="";function Uc(n,e){Xf[Yf++]=jv,Xf[Yf++]=Zv,Zv=n,jv=e}function MP(n,e,t){ao[lo++]=il,ao[lo++]=rl,ao[lo++]=ih,ih=n;var i=il;n=rl;var r=32-Vo(i)-1;i&=~(1<<r),t+=1;var s=32-Vo(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,il=1<<32-Vo(e)+r|t<<r|i,rl=s+n}else il=1<<s|t<<r|i,rl=n}function sM(n){n.return!==null&&(Uc(n,1),MP(n,1,0))}function oM(n){for(;n===Zv;)Zv=Xf[--Yf],Xf[Yf]=null,jv=Xf[--Yf],Xf[Yf]=null;for(;n===ih;)ih=ao[--lo],ao[lo]=null,rl=ao[--lo],ao[lo]=null,il=ao[--lo],ao[lo]=null}var zs=null,Ns=null,jn=!1,Fo=null;function TP(n,e){var t=ho(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function hC(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,zs=n,Ns=yu(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,zs=n,Ns=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=ih!==null?{id:il,overflow:rl}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=ho(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,zs=n,Ns=null,!0):!1;default:return!1}}function pw(n){return(n.mode&1)!==0&&(n.flags&128)===0}function mw(n){if(jn){var e=Ns;if(e){var t=e;if(!hC(n,e)){if(pw(n))throw Error(ze(418));e=yu(t.nextSibling);var i=zs;e&&hC(n,e)?TP(i,t):(n.flags=n.flags&-4097|2,jn=!1,zs=n)}}else{if(pw(n))throw Error(ze(418));n.flags=n.flags&-4097|2,jn=!1,zs=n}}}function fC(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;zs=n}function l_(n){if(n!==zs)return!1;if(!jn)return fC(n),jn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!cw(n.type,n.memoizedProps)),e&&(e=Ns)){if(pw(n))throw AP(),Error(ze(418));for(;e;)TP(n,e),e=yu(e.nextSibling)}if(fC(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ze(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Ns=yu(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Ns=null}}else Ns=zs?yu(n.stateNode.nextSibling):null;return!0}function AP(){for(var n=Ns;n;)n=yu(n.nextSibling)}function fd(){Ns=zs=null,jn=!1}function aM(n){Fo===null?Fo=[n]:Fo.push(n)}var y4=ml.ReactCurrentBatchConfig;function Do(n,e){if(n&&n.defaultProps){e=si({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var Kv=Uu(null),Qv=null,qf=null,lM=null;function uM(){lM=qf=Qv=null}function cM(n){var e=Kv.current;Xn(Kv),n._currentValue=e}function gw(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function sd(n,e){Qv=n,lM=qf=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(hs=!0),n.firstContext=null)}function mo(n){var e=n._currentValue;if(lM!==n)if(n={context:n,memoizedValue:e,next:null},qf===null){if(Qv===null)throw Error(ze(308));qf=n,Qv.dependencies={lanes:0,firstContext:n}}else qf=qf.next=n;return e}var Gc=null;function hM(n){Gc===null?Gc=[n]:Gc.push(n)}function CP(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,hM(e)):(t.next=r.next,r.next=t),e.interleaved=t,cl(n,i)}function cl(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var au=!1;function fM(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function RP(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ol(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function xu(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,xn&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,cl(n,t)}return r=i.interleaved,r===null?(e.next=e,hM(i)):(e.next=r.next,r.next=e),i.interleaved=e,cl(n,t)}function Sv(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,QE(n,t)}}function dC(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Jv(n,e,t,i){var r=n.updateQueue;au=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var h=a,d=h.next;h.next=null,o===null?s=d:o.next=d,o=h;var p=n.alternate;p!==null&&(p=p.updateQueue,a=p.lastBaseUpdate,a!==o&&(a===null?p.firstBaseUpdate=d:a.next=d,p.lastBaseUpdate=h))}if(s!==null){var m=r.baseState;o=0,p=d=h=null,a=s;do{var g=a.lane,y=a.eventTime;if((i&g)===g){p!==null&&(p=p.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var S=n,A=a;switch(g=e,y=t,A.tag){case 1:if(S=A.payload,typeof S=="function"){m=S.call(y,m,g);break e}m=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=A.payload,g=typeof S=="function"?S.call(y,m,g):S,g==null)break e;m=si({},m,g);break e;case 2:au=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,g=r.effects,g===null?r.effects=[a]:g.push(a))}else y={eventTime:y,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},p===null?(d=p=y,h=m):p=p.next=y,o|=g;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;g=a,a=g.next,g.next=null,r.lastBaseUpdate=g,r.shared.pending=null}}while(1);if(p===null&&(h=m),r.baseState=h,r.firstBaseUpdate=d,r.lastBaseUpdate=p,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);sh|=o,n.lanes=o,n.memoizedState=m}}function pC(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(ze(191,r));r.call(i)}}}var bP=new Cb.Component().refs;function _w(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:si({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Ay={isMounted:function(n){return(n=n._reactInternals)?ph(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Wr(),r=wu(n),s=ol(i,r);s.payload=e,t!=null&&(s.callback=t),e=xu(n,s,r),e!==null&&(Go(e,n,r,i),Sv(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Wr(),r=wu(n),s=ol(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=xu(n,s,r),e!==null&&(Go(e,n,r,i),Sv(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Wr(),i=wu(n),r=ol(t,i);r.tag=2,e!=null&&(r.callback=e),e=xu(n,r,i),e!==null&&(Go(e,n,i,t),Sv(e,n,i))}};function mC(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Nm(t,i)||!Nm(r,s):!0}function PP(n,e,t){var i=!1,r=Pu,s=e.contextType;return typeof s=="object"&&s!==null?s=mo(s):(r=ds(e)?nh:br.current,i=e.contextTypes,s=(i=i!=null)?hd(n,r):Pu),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ay,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function gC(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&Ay.enqueueReplaceState(e,e.state,null)}function vw(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs=bP,fM(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=mo(s):(s=ds(e)?nh:br.current,r.context=hd(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(_w(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Ay.enqueueReplaceState(r,r.state,null),Jv(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Lp(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(ze(309));var i=t.stateNode}if(!i)throw Error(ze(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===bP&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(ze(284));if(!t._owner)throw Error(ze(290,n))}return n}function u_(n,e){throw n=Object.prototype.toString.call(e),Error(ze(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function _C(n){var e=n._init;return e(n._payload)}function LP(n){function e(_,T){if(n){var E=_.deletions;E===null?(_.deletions=[T],_.flags|=16):E.push(T)}}function t(_,T){if(!n)return null;for(;T!==null;)e(_,T),T=T.sibling;return null}function i(_,T){for(_=new Map;T!==null;)T.key!==null?_.set(T.key,T):_.set(T.index,T),T=T.sibling;return _}function r(_,T){return _=Eu(_,T),_.index=0,_.sibling=null,_}function s(_,T,E){return _.index=E,n?(E=_.alternate,E!==null?(E=E.index,E<T?(_.flags|=2,T):E):(_.flags|=2,T)):(_.flags|=1048576,T)}function o(_){return n&&_.alternate===null&&(_.flags|=2),_}function a(_,T,E,C){return T===null||T.tag!==6?(T=P1(E,_.mode,C),T.return=_,T):(T=r(T,E),T.return=_,T)}function h(_,T,E,C){var P=E.type;return P===kf?p(_,T,E.props.children,C,E.key):T!==null&&(T.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ou&&_C(P)===T.type)?(C=r(T,E.props),C.ref=Lp(_,T,E),C.return=_,C):(C=Cv(E.type,E.key,E.props,null,_.mode,C),C.ref=Lp(_,T,E),C.return=_,C)}function d(_,T,E,C){return T===null||T.tag!==4||T.stateNode.containerInfo!==E.containerInfo||T.stateNode.implementation!==E.implementation?(T=L1(E,_.mode,C),T.return=_,T):(T=r(T,E.children||[]),T.return=_,T)}function p(_,T,E,C,P){return T===null||T.tag!==7?(T=Kc(E,_.mode,C,P),T.return=_,T):(T=r(T,E),T.return=_,T)}function m(_,T,E){if(typeof T=="string"&&T!==""||typeof T=="number")return T=P1(""+T,_.mode,E),T.return=_,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case J0:return E=Cv(T.type,T.key,T.props,null,_.mode,E),E.ref=Lp(_,null,T),E.return=_,E;case zf:return T=L1(T,_.mode,E),T.return=_,T;case ou:var C=T._init;return m(_,C(T._payload),E)}if(im(T)||Ap(T))return T=Kc(T,_.mode,E,null),T.return=_,T;u_(_,T)}return null}function g(_,T,E,C){var P=T!==null?T.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return P!==null?null:a(_,T,""+E,C);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case J0:return E.key===P?h(_,T,E,C):null;case zf:return E.key===P?d(_,T,E,C):null;case ou:return P=E._init,g(_,T,P(E._payload),C)}if(im(E)||Ap(E))return P!==null?null:p(_,T,E,C,null);u_(_,E)}return null}function y(_,T,E,C,P){if(typeof C=="string"&&C!==""||typeof C=="number")return _=_.get(E)||null,a(T,_,""+C,P);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case J0:return _=_.get(C.key===null?E:C.key)||null,h(T,_,C,P);case zf:return _=_.get(C.key===null?E:C.key)||null,d(T,_,C,P);case ou:var D=C._init;return y(_,T,E,D(C._payload),P)}if(im(C)||Ap(C))return _=_.get(E)||null,p(T,_,C,P,null);u_(T,C)}return null}function S(_,T,E,C){for(var P=null,D=null,O=T,F=T=0,L=null;O!==null&&F<E.length;F++){O.index>F?(L=O,O=null):L=O.sibling;var N=g(_,O,E[F],C);if(N===null){O===null&&(O=L);break}n&&O&&N.alternate===null&&e(_,O),T=s(N,T,F),D===null?P=N:D.sibling=N,D=N,O=L}if(F===E.length)return t(_,O),jn&&Uc(_,F),P;if(O===null){for(;F<E.length;F++)O=m(_,E[F],C),O!==null&&(T=s(O,T,F),D===null?P=O:D.sibling=O,D=O);return jn&&Uc(_,F),P}for(O=i(_,O);F<E.length;F++)L=y(O,_,F,E[F],C),L!==null&&(n&&L.alternate!==null&&O.delete(L.key===null?F:L.key),T=s(L,T,F),D===null?P=L:D.sibling=L,D=L);return n&&O.forEach(function(G){return e(_,G)}),jn&&Uc(_,F),P}function A(_,T,E,C){var P=Ap(E);if(typeof P!="function")throw Error(ze(150));if(E=P.call(E),E==null)throw Error(ze(151));for(var D=P=null,O=T,F=T=0,L=null,N=E.next();O!==null&&!N.done;F++,N=E.next()){O.index>F?(L=O,O=null):L=O.sibling;var G=g(_,O,N.value,C);if(G===null){O===null&&(O=L);break}n&&O&&G.alternate===null&&e(_,O),T=s(G,T,F),D===null?P=G:D.sibling=G,D=G,O=L}if(N.done)return t(_,O),jn&&Uc(_,F),P;if(O===null){for(;!N.done;F++,N=E.next())N=m(_,N.value,C),N!==null&&(T=s(N,T,F),D===null?P=N:D.sibling=N,D=N);return jn&&Uc(_,F),P}for(O=i(_,O);!N.done;F++,N=E.next())N=y(O,_,F,N.value,C),N!==null&&(n&&N.alternate!==null&&O.delete(N.key===null?F:N.key),T=s(N,T,F),D===null?P=N:D.sibling=N,D=N);return n&&O.forEach(function(Q){return e(_,Q)}),jn&&Uc(_,F),P}function w(_,T,E,C){if(typeof E=="object"&&E!==null&&E.type===kf&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case J0:e:{for(var P=E.key,D=T;D!==null;){if(D.key===P){if(P=E.type,P===kf){if(D.tag===7){t(_,D.sibling),T=r(D,E.props.children),T.return=_,_=T;break e}}else if(D.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ou&&_C(P)===D.type){t(_,D.sibling),T=r(D,E.props),T.ref=Lp(_,D,E),T.return=_,_=T;break e}t(_,D);break}else e(_,D);D=D.sibling}E.type===kf?(T=Kc(E.props.children,_.mode,C,E.key),T.return=_,_=T):(C=Cv(E.type,E.key,E.props,null,_.mode,C),C.ref=Lp(_,T,E),C.return=_,_=C)}return o(_);case zf:e:{for(D=E.key;T!==null;){if(T.key===D)if(T.tag===4&&T.stateNode.containerInfo===E.containerInfo&&T.stateNode.implementation===E.implementation){t(_,T.sibling),T=r(T,E.children||[]),T.return=_,_=T;break e}else{t(_,T);break}else e(_,T);T=T.sibling}T=L1(E,_.mode,C),T.return=_,_=T}return o(_);case ou:return D=E._init,w(_,T,D(E._payload),C)}if(im(E))return S(_,T,E,C);if(Ap(E))return A(_,T,E,C);u_(_,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,T!==null&&T.tag===6?(t(_,T.sibling),T=r(T,E),T.return=_,_=T):(t(_,T),T=P1(E,_.mode,C),T.return=_,_=T),o(_)):t(_,T)}return w}var dd=LP(!0),IP=LP(!1),Rg={},ya=Uu(Rg),Bm=Uu(Rg),Hm=Uu(Rg);function Wc(n){if(n===Rg)throw Error(ze(174));return n}function dM(n,e){switch(Vn(Hm,e),Vn(Bm,n),Vn(ya,Rg),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:KS(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=KS(e,n)}Xn(ya),Vn(ya,e)}function pd(){Xn(ya),Xn(Bm),Xn(Hm)}function OP(n){Wc(Hm.current);var e=Wc(ya.current),t=KS(e,n.type);e!==t&&(Vn(Bm,n),Vn(ya,t))}function pM(n){Bm.current===n&&(Xn(ya),Xn(Bm))}var ti=Uu(0);function $v(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var M1=[];function mM(){for(var n=0;n<M1.length;n++)M1[n]._workInProgressVersionPrimary=null;M1.length=0}var wv=ml.ReactCurrentDispatcher,T1=ml.ReactCurrentBatchConfig,rh=0,ri=null,Hi=null,rr=null,ey=!1,pm=!1,Vm=0,x4=0;function Sr(){throw Error(ze(321))}function gM(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Wo(n[t],e[t]))return!1;return!0}function _M(n,e,t,i,r,s){if(rh=s,ri=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wv.current=n===null||n.memoizedState===null?M4:T4,n=t(i,r),pm){s=0;do{if(pm=!1,Vm=0,25<=s)throw Error(ze(301));s+=1,rr=Hi=null,e.updateQueue=null,wv.current=A4,n=t(i,r)}while(pm)}if(wv.current=ty,e=Hi!==null&&Hi.next!==null,rh=0,rr=Hi=ri=null,ey=!1,e)throw Error(ze(300));return n}function vM(){var n=Vm!==0;return Vm=0,n}function pa(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rr===null?ri.memoizedState=rr=n:rr=rr.next=n,rr}function go(){if(Hi===null){var n=ri.alternate;n=n!==null?n.memoizedState:null}else n=Hi.next;var e=rr===null?ri.memoizedState:rr.next;if(e!==null)rr=e,Hi=n;else{if(n===null)throw Error(ze(310));Hi=n,n={memoizedState:Hi.memoizedState,baseState:Hi.baseState,baseQueue:Hi.baseQueue,queue:Hi.queue,next:null},rr===null?ri.memoizedState=rr=n:rr=rr.next=n}return rr}function Gm(n,e){return typeof e=="function"?e(n):e}function A1(n){var e=go(),t=e.queue;if(t===null)throw Error(ze(311));t.lastRenderedReducer=n;var i=Hi,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,h=null,d=s;do{var p=d.lane;if((rh&p)===p)h!==null&&(h=h.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),i=d.hasEagerState?d.eagerState:n(i,d.action);else{var m={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};h===null?(a=h=m,o=i):h=h.next=m,ri.lanes|=p,sh|=p}d=d.next}while(d!==null&&d!==s);h===null?o=i:h.next=a,Wo(i,e.memoizedState)||(hs=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=h,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,ri.lanes|=s,sh|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function C1(n){var e=go(),t=e.queue;if(t===null)throw Error(ze(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);Wo(s,e.memoizedState)||(hs=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function DP(){}function UP(n,e){var t=ri,i=go(),r=e(),s=!Wo(i.memoizedState,r);if(s&&(i.memoizedState=r,hs=!0),i=i.queue,yM(zP.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||rr!==null&&rr.memoizedState.tag&1){if(t.flags|=2048,Wm(9,FP.bind(null,t,i,r,e),void 0,null),or===null)throw Error(ze(349));rh&30||NP(t,e,r)}return r}function NP(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=ri.updateQueue,e===null?(e={lastEffect:null,stores:null},ri.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function FP(n,e,t,i){e.value=t,e.getSnapshot=i,kP(e)&&BP(n)}function zP(n,e,t){return t(function(){kP(e)&&BP(n)})}function kP(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Wo(n,t)}catch{return!0}}function BP(n){var e=cl(n,1);e!==null&&Go(e,n,1,-1)}function vC(n){var e=pa();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gm,lastRenderedState:n},e.queue=n,n=n.dispatch=E4.bind(null,ri,n),[e.memoizedState,n]}function Wm(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=ri.updateQueue,e===null?(e={lastEffect:null,stores:null},ri.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function HP(){return go().memoizedState}function Ev(n,e,t,i){var r=pa();ri.flags|=n,r.memoizedState=Wm(1|e,t,void 0,i===void 0?null:i)}function Cy(n,e,t,i){var r=go();i=i===void 0?null:i;var s=void 0;if(Hi!==null){var o=Hi.memoizedState;if(s=o.destroy,i!==null&&gM(i,o.deps)){r.memoizedState=Wm(e,t,s,i);return}}ri.flags|=n,r.memoizedState=Wm(1|e,t,s,i)}function yC(n,e){return Ev(8390656,8,n,e)}function yM(n,e){return Cy(2048,8,n,e)}function VP(n,e){return Cy(4,2,n,e)}function GP(n,e){return Cy(4,4,n,e)}function WP(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function XP(n,e,t){return t=t!=null?t.concat([n]):null,Cy(4,4,WP.bind(null,e,n),t)}function xM(){}function YP(n,e){var t=go();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&gM(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function qP(n,e){var t=go();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&gM(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function ZP(n,e,t){return rh&21?(Wo(t,e)||(t=Qb(),ri.lanes|=t,sh|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,hs=!0),n.memoizedState=t)}function S4(n,e){var t=bn;bn=t!==0&&4>t?t:4,n(!0);var i=T1.transition;T1.transition={};try{n(!1),e()}finally{bn=t,T1.transition=i}}function jP(){return go().memoizedState}function w4(n,e,t){var i=wu(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},KP(n))QP(e,t);else if(t=CP(n,e,t,i),t!==null){var r=Wr();Go(t,n,i,r),JP(t,e,i)}}function E4(n,e,t){var i=wu(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(KP(n))QP(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,Wo(a,o)){var h=e.interleaved;h===null?(r.next=r,hM(e)):(r.next=h.next,h.next=r),e.interleaved=r;return}}catch{}finally{}t=CP(n,e,r,i),t!==null&&(r=Wr(),Go(t,n,i,r),JP(t,e,i))}}function KP(n){var e=n.alternate;return n===ri||e!==null&&e===ri}function QP(n,e){pm=ey=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function JP(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,QE(n,t)}}var ty={readContext:mo,useCallback:Sr,useContext:Sr,useEffect:Sr,useImperativeHandle:Sr,useInsertionEffect:Sr,useLayoutEffect:Sr,useMemo:Sr,useReducer:Sr,useRef:Sr,useState:Sr,useDebugValue:Sr,useDeferredValue:Sr,useTransition:Sr,useMutableSource:Sr,useSyncExternalStore:Sr,useId:Sr,unstable_isNewReconciler:!1},M4={readContext:mo,useCallback:function(n,e){return pa().memoizedState=[n,e===void 0?null:e],n},useContext:mo,useEffect:yC,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Ev(4194308,4,WP.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Ev(4194308,4,n,e)},useInsertionEffect:function(n,e){return Ev(4,2,n,e)},useMemo:function(n,e){var t=pa();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=pa();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=w4.bind(null,ri,n),[i.memoizedState,n]},useRef:function(n){var e=pa();return n={current:n},e.memoizedState=n},useState:vC,useDebugValue:xM,useDeferredValue:function(n){return pa().memoizedState=n},useTransition:function(){var n=vC(!1),e=n[0];return n=S4.bind(null,n[1]),pa().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=ri,r=pa();if(jn){if(t===void 0)throw Error(ze(407));t=t()}else{if(t=e(),or===null)throw Error(ze(349));rh&30||NP(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,yC(zP.bind(null,i,s,n),[n]),i.flags|=2048,Wm(9,FP.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=pa(),e=or.identifierPrefix;if(jn){var t=rl,i=il;t=(i&~(1<<32-Vo(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Vm++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=x4++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},T4={readContext:mo,useCallback:YP,useContext:mo,useEffect:yM,useImperativeHandle:XP,useInsertionEffect:VP,useLayoutEffect:GP,useMemo:qP,useReducer:A1,useRef:HP,useState:function(){return A1(Gm)},useDebugValue:xM,useDeferredValue:function(n){var e=go();return ZP(e,Hi.memoizedState,n)},useTransition:function(){var n=A1(Gm)[0],e=go().memoizedState;return[n,e]},useMutableSource:DP,useSyncExternalStore:UP,useId:jP,unstable_isNewReconciler:!1},A4={readContext:mo,useCallback:YP,useContext:mo,useEffect:yM,useImperativeHandle:XP,useInsertionEffect:VP,useLayoutEffect:GP,useMemo:qP,useReducer:C1,useRef:HP,useState:function(){return C1(Gm)},useDebugValue:xM,useDeferredValue:function(n){var e=go();return Hi===null?e.memoizedState=n:ZP(e,Hi.memoizedState,n)},useTransition:function(){var n=C1(Gm)[0],e=go().memoizedState;return[n,e]},useMutableSource:DP,useSyncExternalStore:UP,useId:jP,unstable_isNewReconciler:!1};function md(n,e){try{var t="",i=e;do t+=ek(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function R1(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function yw(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var C4=typeof WeakMap=="function"?WeakMap:Map;function $P(n,e,t){t=ol(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){iy||(iy=!0,bw=i),yw(n,e)},t}function e3(n,e,t){t=ol(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){yw(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){yw(n,e),typeof i!="function"&&(Su===null?Su=new Set([this]):Su.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function xC(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new C4;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=H4.bind(null,n,e,t),e.then(n,n))}function SC(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function wC(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ol(-1,1),e.tag=2,xu(t,e,1))),t.lanes|=1),n)}var R4=ml.ReactCurrentOwner,hs=!1;function Vr(n,e,t,i){e.child=n===null?IP(e,null,t,i):dd(e,n.child,t,i)}function EC(n,e,t,i,r){t=t.render;var s=e.ref;return sd(e,r),i=_M(n,e,t,i,s,r),t=vM(),n!==null&&!hs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,hl(n,e,r)):(jn&&t&&sM(e),e.flags|=1,Vr(n,e,i,r),e.child)}function MC(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!RM(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,t3(n,e,s,i,r)):(n=Cv(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Nm,t(o,i)&&n.ref===e.ref)return hl(n,e,r)}return e.flags|=1,n=Eu(s,i),n.ref=e.ref,n.return=e,e.child=n}function t3(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(Nm(s,i)&&n.ref===e.ref)if(hs=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(hs=!0);else return e.lanes=n.lanes,hl(n,e,r)}return xw(n,e,t,i,r)}function n3(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vn(jf,Ds),Ds|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Vn(jf,Ds),Ds|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,Vn(jf,Ds),Ds|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,Vn(jf,Ds),Ds|=i;return Vr(n,e,r,t),e.child}function i3(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function xw(n,e,t,i,r){var s=ds(t)?nh:br.current;return s=hd(e,s),sd(e,r),t=_M(n,e,t,i,s,r),i=vM(),n!==null&&!hs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,hl(n,e,r)):(jn&&i&&sM(e),e.flags|=1,Vr(n,e,t,r),e.child)}function TC(n,e,t,i,r){if(ds(t)){var s=!0;qv(e)}else s=!1;if(sd(e,r),e.stateNode===null)Mv(n,e),PP(e,t,i),vw(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var h=o.context,d=t.contextType;typeof d=="object"&&d!==null?d=mo(d):(d=ds(t)?nh:br.current,d=hd(e,d));var p=t.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||h!==d)&&gC(e,o,i,d),au=!1;var g=e.memoizedState;o.state=g,Jv(e,i,o,r),h=e.memoizedState,a!==i||g!==h||fs.current||au?(typeof p=="function"&&(_w(e,t,p,i),h=e.memoizedState),(a=au||mC(e,t,a,i,g,h,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),o.props=i,o.state=h,o.context=d,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,RP(n,e),a=e.memoizedProps,d=e.type===e.elementType?a:Do(e.type,a),o.props=d,m=e.pendingProps,g=o.context,h=t.contextType,typeof h=="object"&&h!==null?h=mo(h):(h=ds(t)?nh:br.current,h=hd(e,h));var y=t.getDerivedStateFromProps;(p=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==m||g!==h)&&gC(e,o,i,h),au=!1,g=e.memoizedState,o.state=g,Jv(e,i,o,r);var S=e.memoizedState;a!==m||g!==S||fs.current||au?(typeof y=="function"&&(_w(e,t,y,i),S=e.memoizedState),(d=au||mC(e,t,d,i,g,S,h)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,S,h),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,S,h)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&g===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&g===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=S),o.props=i,o.state=S,o.context=h,i=d):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&g===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&g===n.memoizedState||(e.flags|=1024),i=!1)}return Sw(n,e,t,i,s,r)}function Sw(n,e,t,i,r,s){i3(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&cC(e,t,!1),hl(n,e,s);i=e.stateNode,R4.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=dd(e,n.child,null,s),e.child=dd(e,null,a,s)):Vr(n,e,a,s),e.memoizedState=i.state,r&&cC(e,t,!0),e.child}function r3(n){var e=n.stateNode;e.pendingContext?uC(n,e.pendingContext,e.pendingContext!==e.context):e.context&&uC(n,e.context,!1),dM(n,e.containerInfo)}function AC(n,e,t,i,r){return fd(),aM(r),e.flags|=256,Vr(n,e,t,i),e.child}var ww={dehydrated:null,treeContext:null,retryLane:0};function Ew(n){return{baseLanes:n,cachePool:null,transitions:null}}function s3(n,e,t){var i=e.pendingProps,r=ti.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),Vn(ti,r&1),n===null)return mw(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Py(o,i,0,null),n=Kc(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Ew(t),e.memoizedState=ww,n):SM(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return b4(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var h={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=Eu(r,h),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Eu(a,s):(s=Kc(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?Ew(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=ww,i}return s=n.child,n=s.sibling,i=Eu(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function SM(n,e){return e=Py({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function c_(n,e,t,i){return i!==null&&aM(i),dd(e,n.child,null,t),n=SM(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function b4(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=R1(Error(ze(422))),c_(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Py({mode:"visible",children:i.children},r,0,null),s=Kc(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&dd(e,n.child,null,o),e.child.memoizedState=Ew(o),e.memoizedState=ww,s);if(!(e.mode&1))return c_(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(ze(419)),i=R1(s,i,void 0),c_(n,e,o,i)}if(a=(o&n.childLanes)!==0,hs||a){if(i=or,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,cl(n,r),Go(i,n,r,-1))}return CM(),i=R1(Error(ze(421))),c_(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=V4.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,Ns=yu(r.nextSibling),zs=e,jn=!0,Fo=null,n!==null&&(ao[lo++]=il,ao[lo++]=rl,ao[lo++]=ih,il=n.id,rl=n.overflow,ih=e),e=SM(e,i.children),e.flags|=4096,e)}function CC(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),gw(n.return,e,t)}function b1(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function o3(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Vr(n,e,i.children,t),i=ti.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&CC(n,t,e);else if(n.tag===19)CC(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Vn(ti,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&$v(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),b1(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&$v(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}b1(e,!0,t,null,s);break;case"together":b1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Mv(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function hl(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),sh|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(ze(153));if(e.child!==null){for(n=e.child,t=Eu(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Eu(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function P4(n,e,t){switch(e.tag){case 3:r3(e),fd();break;case 5:OP(e);break;case 1:ds(e.type)&&qv(e);break;case 4:dM(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Vn(Kv,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Vn(ti,ti.current&1),e.flags|=128,null):t&e.child.childLanes?s3(n,e,t):(Vn(ti,ti.current&1),n=hl(n,e,t),n!==null?n.sibling:null);Vn(ti,ti.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return o3(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Vn(ti,ti.current),i)break;return null;case 22:case 23:return e.lanes=0,n3(n,e,t)}return hl(n,e,t)}var a3,Mw,l3,u3;a3=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Mw=function(){};l3=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,Wc(ya.current);var s=null;switch(t){case"input":r=YS(n,r),i=YS(n,i),s=[];break;case"select":r=si({},r,{value:void 0}),i=si({},i,{value:void 0}),s=[];break;case"textarea":r=jS(n,r),i=jS(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Xv)}QS(t,i);var o;t=null;for(d in r)if(!i.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var a=r[d];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(bm.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in i){var h=i[d];if(a=r!=null?r[d]:void 0,i.hasOwnProperty(d)&&h!==a&&(h!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||h&&h.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in h)h.hasOwnProperty(o)&&a[o]!==h[o]&&(t||(t={}),t[o]=h[o])}else t||(s||(s=[]),s.push(d,t)),t=h;else d==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,a=a?a.__html:void 0,h!=null&&a!==h&&(s=s||[]).push(d,h)):d==="children"?typeof h!="string"&&typeof h!="number"||(s=s||[]).push(d,""+h):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(bm.hasOwnProperty(d)?(h!=null&&d==="onScroll"&&Wn("scroll",n),s||a===h||(s=[])):(s=s||[]).push(d,h))}t&&(s=s||[]).push("style",t);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};u3=function(n,e,t,i){t!==i&&(e.flags|=4)};function Ip(n,e){if(!jn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function wr(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function L4(n,e,t){var i=e.pendingProps;switch(oM(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wr(e),null;case 1:return ds(e.type)&&Yv(),wr(e),null;case 3:return i=e.stateNode,pd(),Xn(fs),Xn(br),mM(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(l_(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Fo!==null&&(Iw(Fo),Fo=null))),Mw(n,e),wr(e),null;case 5:pM(e);var r=Wc(Hm.current);if(t=e.type,n!==null&&e.stateNode!=null)l3(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ze(166));return wr(e),null}if(n=Wc(ya.current),l_(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[ga]=e,i[km]=s,n=(e.mode&1)!==0,t){case"dialog":Wn("cancel",i),Wn("close",i);break;case"iframe":case"object":case"embed":Wn("load",i);break;case"video":case"audio":for(r=0;r<sm.length;r++)Wn(sm[r],i);break;case"source":Wn("error",i);break;case"img":case"image":case"link":Wn("error",i),Wn("load",i);break;case"details":Wn("toggle",i);break;case"input":NA(i,s),Wn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Wn("invalid",i);break;case"textarea":zA(i,s),Wn("invalid",i)}QS(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&a_(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&a_(i.textContent,a,n),r=["children",""+a]):bm.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Wn("scroll",i)}switch(t){case"input":$0(i),FA(i,s,!0);break;case"textarea":$0(i),kA(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Xv)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Nb(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[ga]=e,n[km]=i,a3(n,e,!1,!1),e.stateNode=n;e:{switch(o=JS(t,i),t){case"dialog":Wn("cancel",n),Wn("close",n),r=i;break;case"iframe":case"object":case"embed":Wn("load",n),r=i;break;case"video":case"audio":for(r=0;r<sm.length;r++)Wn(sm[r],n);r=i;break;case"source":Wn("error",n),r=i;break;case"img":case"image":case"link":Wn("error",n),Wn("load",n),r=i;break;case"details":Wn("toggle",n),r=i;break;case"input":NA(n,i),r=YS(n,i),Wn("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=si({},i,{value:void 0}),Wn("invalid",n);break;case"textarea":zA(n,i),r=jS(n,i),Wn("invalid",n);break;default:r=i}QS(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var h=a[s];s==="style"?kb(n,h):s==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&Fb(n,h)):s==="children"?typeof h=="string"?(t!=="textarea"||h!=="")&&Pm(n,h):typeof h=="number"&&Pm(n,""+h):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(bm.hasOwnProperty(s)?h!=null&&s==="onScroll"&&Wn("scroll",n):h!=null&&XE(n,s,h,o))}switch(t){case"input":$0(n),FA(n,i,!1);break;case"textarea":$0(n),kA(n);break;case"option":i.value!=null&&n.setAttribute("value",""+bu(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?td(n,!!i.multiple,s,!1):i.defaultValue!=null&&td(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=Xv)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wr(e),null;case 6:if(n&&e.stateNode!=null)u3(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ze(166));if(t=Wc(Hm.current),Wc(ya.current),l_(e)){if(i=e.stateNode,t=e.memoizedProps,i[ga]=e,(s=i.nodeValue!==t)&&(n=zs,n!==null))switch(n.tag){case 3:a_(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&a_(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[ga]=e,e.stateNode=i}return wr(e),null;case 13:if(Xn(ti),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(jn&&Ns!==null&&e.mode&1&&!(e.flags&128))AP(),fd(),e.flags|=98560,s=!1;else if(s=l_(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(ze(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ze(317));s[ga]=e}else fd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wr(e),s=!1}else Fo!==null&&(Iw(Fo),Fo=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||ti.current&1?Gi===0&&(Gi=3):CM())),e.updateQueue!==null&&(e.flags|=4),wr(e),null);case 4:return pd(),Mw(n,e),n===null&&Fm(e.stateNode.containerInfo),wr(e),null;case 10:return cM(e.type._context),wr(e),null;case 17:return ds(e.type)&&Yv(),wr(e),null;case 19:if(Xn(ti),s=e.memoizedState,s===null)return wr(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Ip(s,!1);else{if(Gi!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=$v(n),o!==null){for(e.flags|=128,Ip(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Vn(ti,ti.current&1|2),e.child}n=n.sibling}s.tail!==null&&Mi()>gd&&(e.flags|=128,i=!0,Ip(s,!1),e.lanes=4194304)}else{if(!i)if(n=$v(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Ip(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!jn)return wr(e),null}else 2*Mi()-s.renderingStartTime>gd&&t!==1073741824&&(e.flags|=128,i=!0,Ip(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Mi(),e.sibling=null,t=ti.current,Vn(ti,i?t&1|2:t&1),e):(wr(e),null);case 22:case 23:return AM(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Ds&1073741824&&(wr(e),e.subtreeFlags&6&&(e.flags|=8192)):wr(e),null;case 24:return null;case 25:return null}throw Error(ze(156,e.tag))}function I4(n,e){switch(oM(e),e.tag){case 1:return ds(e.type)&&Yv(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return pd(),Xn(fs),Xn(br),mM(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return pM(e),null;case 13:if(Xn(ti),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(ze(340));fd()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Xn(ti),null;case 4:return pd(),null;case 10:return cM(e.type._context),null;case 22:case 23:return AM(),null;case 24:return null;default:return null}}var h_=!1,Ar=!1,O4=typeof WeakSet=="function"?WeakSet:Set,ct=null;function Zf(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){fi(n,e,i)}else t.current=null}function Tw(n,e,t){try{t()}catch(i){fi(n,e,i)}}var RC=!1;function D4(n,e){if(lw=Vv,n=dP(),rM(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,h=-1,d=0,p=0,m=n,g=null;t:for(;;){for(var y;m!==t||r!==0&&m.nodeType!==3||(a=o+r),m!==s||i!==0&&m.nodeType!==3||(h=o+i),m.nodeType===3&&(o+=m.nodeValue.length),(y=m.firstChild)!==null;)g=m,m=y;for(;;){if(m===n)break t;if(g===t&&++d===r&&(a=o),g===s&&++p===i&&(h=o),(y=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=y}t=a===-1||h===-1?null:{start:a,end:h}}else t=null}t=t||{start:0,end:0}}else t=null;for(uw={focusedElem:n,selectionRange:t},Vv=!1,ct=e;ct!==null;)if(e=ct,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,ct=n;else for(;ct!==null;){e=ct;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var A=S.memoizedProps,w=S.memoizedState,_=e.stateNode,T=_.getSnapshotBeforeUpdate(e.elementType===e.type?A:Do(e.type,A),w);_.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ze(163))}}catch(C){fi(e,e.return,C)}if(n=e.sibling,n!==null){n.return=e.return,ct=n;break}ct=e.return}return S=RC,RC=!1,S}function mm(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&Tw(e,t,s)}r=r.next}while(r!==i)}}function Ry(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function Aw(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function c3(n){var e=n.alternate;e!==null&&(n.alternate=null,c3(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[ga],delete e[km],delete e[fw],delete e[g4],delete e[_4])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function h3(n){return n.tag===5||n.tag===3||n.tag===4}function bC(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||h3(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Cw(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Xv));else if(i!==4&&(n=n.child,n!==null))for(Cw(n,e,t),n=n.sibling;n!==null;)Cw(n,e,t),n=n.sibling}function Rw(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(Rw(n,e,t),n=n.sibling;n!==null;)Rw(n,e,t),n=n.sibling}var cr=null,No=!1;function Kl(n,e,t){for(t=t.child;t!==null;)f3(n,e,t),t=t.sibling}function f3(n,e,t){if(va&&typeof va.onCommitFiberUnmount=="function")try{va.onCommitFiberUnmount(xy,t)}catch{}switch(t.tag){case 5:Ar||Zf(t,e);case 6:var i=cr,r=No;cr=null,Kl(n,e,t),cr=i,No=r,cr!==null&&(No?(n=cr,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):cr.removeChild(t.stateNode));break;case 18:cr!==null&&(No?(n=cr,t=t.stateNode,n.nodeType===8?w1(n.parentNode,t):n.nodeType===1&&w1(n,t),Dm(n)):w1(cr,t.stateNode));break;case 4:i=cr,r=No,cr=t.stateNode.containerInfo,No=!0,Kl(n,e,t),cr=i,No=r;break;case 0:case 11:case 14:case 15:if(!Ar&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Tw(t,e,o),r=r.next}while(r!==i)}Kl(n,e,t);break;case 1:if(!Ar&&(Zf(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){fi(t,e,a)}Kl(n,e,t);break;case 21:Kl(n,e,t);break;case 22:t.mode&1?(Ar=(i=Ar)||t.memoizedState!==null,Kl(n,e,t),Ar=i):Kl(n,e,t);break;default:Kl(n,e,t)}}function PC(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new O4),e.forEach(function(i){var r=G4.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function bo(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:cr=a.stateNode,No=!1;break e;case 3:cr=a.stateNode.containerInfo,No=!0;break e;case 4:cr=a.stateNode.containerInfo,No=!0;break e}a=a.return}if(cr===null)throw Error(ze(160));f3(s,o,r),cr=null,No=!1;var h=r.alternate;h!==null&&(h.return=null),r.return=null}catch(d){fi(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)d3(e,n),e=e.sibling}function d3(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(bo(e,n),ca(n),i&4){try{mm(3,n,n.return),Ry(3,n)}catch(A){fi(n,n.return,A)}try{mm(5,n,n.return)}catch(A){fi(n,n.return,A)}}break;case 1:bo(e,n),ca(n),i&512&&t!==null&&Zf(t,t.return);break;case 5:if(bo(e,n),ca(n),i&512&&t!==null&&Zf(t,t.return),n.flags&32){var r=n.stateNode;try{Pm(r,"")}catch(A){fi(n,n.return,A)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,h=n.updateQueue;if(n.updateQueue=null,h!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Db(r,s),JS(a,o);var d=JS(a,s);for(o=0;o<h.length;o+=2){var p=h[o],m=h[o+1];p==="style"?kb(r,m):p==="dangerouslySetInnerHTML"?Fb(r,m):p==="children"?Pm(r,m):XE(r,p,m,d)}switch(a){case"input":qS(r,s);break;case"textarea":Ub(r,s);break;case"select":var g=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?td(r,!!s.multiple,y,!1):g!==!!s.multiple&&(s.defaultValue!=null?td(r,!!s.multiple,s.defaultValue,!0):td(r,!!s.multiple,s.multiple?[]:"",!1))}r[km]=s}catch(A){fi(n,n.return,A)}}break;case 6:if(bo(e,n),ca(n),i&4){if(n.stateNode===null)throw Error(ze(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(A){fi(n,n.return,A)}}break;case 3:if(bo(e,n),ca(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Dm(e.containerInfo)}catch(A){fi(n,n.return,A)}break;case 4:bo(e,n),ca(n);break;case 13:bo(e,n),ca(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(MM=Mi())),i&4&&PC(n);break;case 22:if(p=t!==null&&t.memoizedState!==null,n.mode&1?(Ar=(d=Ar)||p,bo(e,n),Ar=d):bo(e,n),ca(n),i&8192){if(d=n.memoizedState!==null,(n.stateNode.isHidden=d)&&!p&&n.mode&1)for(ct=n,p=n.child;p!==null;){for(m=ct=p;ct!==null;){switch(g=ct,y=g.child,g.tag){case 0:case 11:case 14:case 15:mm(4,g,g.return);break;case 1:Zf(g,g.return);var S=g.stateNode;if(typeof S.componentWillUnmount=="function"){i=g,t=g.return;try{e=i,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(A){fi(i,t,A)}}break;case 5:Zf(g,g.return);break;case 22:if(g.memoizedState!==null){IC(m);continue}}y!==null?(y.return=g,ct=y):IC(m)}p=p.sibling}e:for(p=null,m=n;;){if(m.tag===5){if(p===null){p=m;try{r=m.stateNode,d?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=m.stateNode,h=m.memoizedProps.style,o=h!=null&&h.hasOwnProperty("display")?h.display:null,a.style.display=zb("display",o))}catch(A){fi(n,n.return,A)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(A){fi(n,n.return,A)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===n)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===n)break e;for(;m.sibling===null;){if(m.return===null||m.return===n)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:bo(e,n),ca(n),i&4&&PC(n);break;case 21:break;default:bo(e,n),ca(n)}}function ca(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(h3(t)){var i=t;break e}t=t.return}throw Error(ze(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Pm(r,""),i.flags&=-33);var s=bC(n);Rw(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=bC(n);Cw(n,a,o);break;default:throw Error(ze(161))}}catch(h){fi(n,n.return,h)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function U4(n,e,t){ct=n,p3(n)}function p3(n,e,t){for(var i=(n.mode&1)!==0;ct!==null;){var r=ct,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||h_;if(!o){var a=r.alternate,h=a!==null&&a.memoizedState!==null||Ar;a=h_;var d=Ar;if(h_=o,(Ar=h)&&!d)for(ct=r;ct!==null;)o=ct,h=o.child,o.tag===22&&o.memoizedState!==null?OC(r):h!==null?(h.return=o,ct=h):OC(r);for(;s!==null;)ct=s,p3(s),s=s.sibling;ct=r,h_=a,Ar=d}LC(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,ct=s):LC(n)}}function LC(n){for(;ct!==null;){var e=ct;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ar||Ry(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ar)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Do(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&pC(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}pC(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&t.focus();break;case"img":h.src&&(t.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&Dm(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ze(163))}Ar||e.flags&512&&Aw(e)}catch(g){fi(e,e.return,g)}}if(e===n){ct=null;break}if(t=e.sibling,t!==null){t.return=e.return,ct=t;break}ct=e.return}}function IC(n){for(;ct!==null;){var e=ct;if(e===n){ct=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ct=t;break}ct=e.return}}function OC(n){for(;ct!==null;){var e=ct;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Ry(4,e)}catch(h){fi(e,t,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(h){fi(e,r,h)}}var s=e.return;try{Aw(e)}catch(h){fi(e,s,h)}break;case 5:var o=e.return;try{Aw(e)}catch(h){fi(e,o,h)}}}catch(h){fi(e,e.return,h)}if(e===n){ct=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ct=a;break}ct=e.return}}var N4=Math.ceil,ny=ml.ReactCurrentDispatcher,wM=ml.ReactCurrentOwner,po=ml.ReactCurrentBatchConfig,xn=0,or=null,Ui=null,hr=0,Ds=0,jf=Uu(0),Gi=0,Xm=null,sh=0,by=0,EM=0,gm=null,ls=null,MM=0,gd=1/0,Ja=null,iy=!1,bw=null,Su=null,f_=!1,du=null,ry=0,_m=0,Pw=null,Tv=-1,Av=0;function Wr(){return xn&6?Mi():Tv!==-1?Tv:Tv=Mi()}function wu(n){return n.mode&1?xn&2&&hr!==0?hr&-hr:y4.transition!==null?(Av===0&&(Av=Qb()),Av):(n=bn,n!==0||(n=window.event,n=n===void 0?16:rP(n.type)),n):1}function Go(n,e,t,i){if(50<_m)throw _m=0,Pw=null,Error(ze(185));Tg(n,t,i),(!(xn&2)||n!==or)&&(n===or&&(!(xn&2)&&(by|=t),Gi===4&&cu(n,hr)),ps(n,i),t===1&&xn===0&&!(e.mode&1)&&(gd=Mi()+500,Ty&&Nu()))}function ps(n,e){var t=n.callbackNode;yk(n,e);var i=Hv(n,n===or?hr:0);if(i===0)t!==null&&VA(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&VA(t),e===1)n.tag===0?v4(DC.bind(null,n)):EP(DC.bind(null,n)),p4(function(){!(xn&6)&&Nu()}),t=null;else{switch(Jb(i)){case 1:t=KE;break;case 4:t=jb;break;case 16:t=Bv;break;case 536870912:t=Kb;break;default:t=Bv}t=w3(t,m3.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function m3(n,e){if(Tv=-1,Av=0,xn&6)throw Error(ze(327));var t=n.callbackNode;if(od()&&n.callbackNode!==t)return null;var i=Hv(n,n===or?hr:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=sy(n,i);else{e=i;var r=xn;xn|=2;var s=_3();(or!==n||hr!==e)&&(Ja=null,gd=Mi()+500,jc(n,e));do try{k4();break}catch(a){g3(n,a)}while(1);uM(),ny.current=s,xn=r,Ui!==null?e=0:(or=null,hr=0,e=Gi)}if(e!==0){if(e===2&&(r=iw(n),r!==0&&(i=r,e=Lw(n,r))),e===1)throw t=Xm,jc(n,0),cu(n,i),ps(n,Mi()),t;if(e===6)cu(n,i);else{if(r=n.current.alternate,!(i&30)&&!F4(r)&&(e=sy(n,i),e===2&&(s=iw(n),s!==0&&(i=s,e=Lw(n,s))),e===1))throw t=Xm,jc(n,0),cu(n,i),ps(n,Mi()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(ze(345));case 2:Nc(n,ls,Ja);break;case 3:if(cu(n,i),(i&130023424)===i&&(e=MM+500-Mi(),10<e)){if(Hv(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Wr(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=hw(Nc.bind(null,n,ls,Ja),e);break}Nc(n,ls,Ja);break;case 4:if(cu(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-Vo(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Mi()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*N4(i/1960))-i,10<i){n.timeoutHandle=hw(Nc.bind(null,n,ls,Ja),i);break}Nc(n,ls,Ja);break;case 5:Nc(n,ls,Ja);break;default:throw Error(ze(329))}}}return ps(n,Mi()),n.callbackNode===t?m3.bind(null,n):null}function Lw(n,e){var t=gm;return n.current.memoizedState.isDehydrated&&(jc(n,e).flags|=256),n=sy(n,e),n!==2&&(e=ls,ls=t,e!==null&&Iw(e)),n}function Iw(n){ls===null?ls=n:ls.push.apply(ls,n)}function F4(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!Wo(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function cu(n,e){for(e&=~EM,e&=~by,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Vo(e),i=1<<t;n[t]=-1,e&=~i}}function DC(n){if(xn&6)throw Error(ze(327));od();var e=Hv(n,0);if(!(e&1))return ps(n,Mi()),null;var t=sy(n,e);if(n.tag!==0&&t===2){var i=iw(n);i!==0&&(e=i,t=Lw(n,i))}if(t===1)throw t=Xm,jc(n,0),cu(n,e),ps(n,Mi()),t;if(t===6)throw Error(ze(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Nc(n,ls,Ja),ps(n,Mi()),null}function TM(n,e){var t=xn;xn|=1;try{return n(e)}finally{xn=t,xn===0&&(gd=Mi()+500,Ty&&Nu())}}function oh(n){du!==null&&du.tag===0&&!(xn&6)&&od();var e=xn;xn|=1;var t=po.transition,i=bn;try{if(po.transition=null,bn=1,n)return n()}finally{bn=i,po.transition=t,xn=e,!(xn&6)&&Nu()}}function AM(){Ds=jf.current,Xn(jf)}function jc(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,d4(t)),Ui!==null)for(t=Ui.return;t!==null;){var i=t;switch(oM(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Yv();break;case 3:pd(),Xn(fs),Xn(br),mM();break;case 5:pM(i);break;case 4:pd();break;case 13:Xn(ti);break;case 19:Xn(ti);break;case 10:cM(i.type._context);break;case 22:case 23:AM()}t=t.return}if(or=n,Ui=n=Eu(n.current,null),hr=Ds=e,Gi=0,Xm=null,EM=by=sh=0,ls=gm=null,Gc!==null){for(e=0;e<Gc.length;e++)if(t=Gc[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}Gc=null}return n}function g3(n,e){do{var t=Ui;try{if(uM(),wv.current=ty,ey){for(var i=ri.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}ey=!1}if(rh=0,rr=Hi=ri=null,pm=!1,Vm=0,wM.current=null,t===null||t.return===null){Gi=1,Xm=e,Ui=null;break}e:{var s=n,o=t.return,a=t,h=e;if(e=hr,a.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var d=h,p=a,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var g=p.alternate;g?(p.updateQueue=g.updateQueue,p.memoizedState=g.memoizedState,p.lanes=g.lanes):(p.updateQueue=null,p.memoizedState=null)}var y=SC(o);if(y!==null){y.flags&=-257,wC(y,o,a,s,e),y.mode&1&&xC(s,d,e),e=y,h=d;var S=e.updateQueue;if(S===null){var A=new Set;A.add(h),e.updateQueue=A}else S.add(h);break e}else{if(!(e&1)){xC(s,d,e),CM();break e}h=Error(ze(426))}}else if(jn&&a.mode&1){var w=SC(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),wC(w,o,a,s,e),aM(md(h,a));break e}}s=h=md(h,a),Gi!==4&&(Gi=2),gm===null?gm=[s]:gm.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=$P(s,h,e);dC(s,_);break e;case 1:a=h;var T=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof T.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Su===null||!Su.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=e3(s,a,e);dC(s,C);break e}}s=s.return}while(s!==null)}y3(t)}catch(P){e=P,Ui===t&&t!==null&&(Ui=t=t.return);continue}break}while(1)}function _3(){var n=ny.current;return ny.current=ty,n===null?ty:n}function CM(){(Gi===0||Gi===3||Gi===2)&&(Gi=4),or===null||!(sh&268435455)&&!(by&268435455)||cu(or,hr)}function sy(n,e){var t=xn;xn|=2;var i=_3();(or!==n||hr!==e)&&(Ja=null,jc(n,e));do try{z4();break}catch(r){g3(n,r)}while(1);if(uM(),xn=t,ny.current=i,Ui!==null)throw Error(ze(261));return or=null,hr=0,Gi}function z4(){for(;Ui!==null;)v3(Ui)}function k4(){for(;Ui!==null&&!ck();)v3(Ui)}function v3(n){var e=S3(n.alternate,n,Ds);n.memoizedProps=n.pendingProps,e===null?y3(n):Ui=e,wM.current=null}function y3(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=I4(t,e),t!==null){t.flags&=32767,Ui=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Gi=6,Ui=null;return}}else if(t=L4(t,e,Ds),t!==null){Ui=t;return}if(e=e.sibling,e!==null){Ui=e;return}Ui=e=n}while(e!==null);Gi===0&&(Gi=5)}function Nc(n,e,t){var i=bn,r=po.transition;try{po.transition=null,bn=1,B4(n,e,t,i)}finally{po.transition=r,bn=i}return null}function B4(n,e,t,i){do od();while(du!==null);if(xn&6)throw Error(ze(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(ze(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(xk(n,s),n===or&&(Ui=or=null,hr=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||f_||(f_=!0,w3(Bv,function(){return od(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=po.transition,po.transition=null;var o=bn;bn=1;var a=xn;xn|=4,wM.current=null,D4(n,t),d3(t,n),o4(uw),Vv=!!lw,uw=lw=null,n.current=t,U4(t),hk(),xn=a,bn=o,po.transition=s}else n.current=t;if(f_&&(f_=!1,du=n,ry=r),s=n.pendingLanes,s===0&&(Su=null),pk(t.stateNode),ps(n,Mi()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(iy)throw iy=!1,n=bw,bw=null,n;return ry&1&&n.tag!==0&&od(),s=n.pendingLanes,s&1?n===Pw?_m++:(_m=0,Pw=n):_m=0,Nu(),null}function od(){if(du!==null){var n=Jb(ry),e=po.transition,t=bn;try{if(po.transition=null,bn=16>n?16:n,du===null)var i=!1;else{if(n=du,du=null,ry=0,xn&6)throw Error(ze(331));var r=xn;for(xn|=4,ct=n.current;ct!==null;){var s=ct,o=s.child;if(ct.flags&16){var a=s.deletions;if(a!==null){for(var h=0;h<a.length;h++){var d=a[h];for(ct=d;ct!==null;){var p=ct;switch(p.tag){case 0:case 11:case 15:mm(8,p,s)}var m=p.child;if(m!==null)m.return=p,ct=m;else for(;ct!==null;){p=ct;var g=p.sibling,y=p.return;if(c3(p),p===d){ct=null;break}if(g!==null){g.return=y,ct=g;break}ct=y}}}var S=s.alternate;if(S!==null){var A=S.child;if(A!==null){S.child=null;do{var w=A.sibling;A.sibling=null,A=w}while(A!==null)}}ct=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ct=o;else e:for(;ct!==null;){if(s=ct,s.flags&2048)switch(s.tag){case 0:case 11:case 15:mm(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,ct=_;break e}ct=s.return}}var T=n.current;for(ct=T;ct!==null;){o=ct;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,ct=E;else e:for(o=T;ct!==null;){if(a=ct,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ry(9,a)}}catch(P){fi(a,a.return,P)}if(a===o){ct=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,ct=C;break e}ct=a.return}}if(xn=r,Nu(),va&&typeof va.onPostCommitFiberRoot=="function")try{va.onPostCommitFiberRoot(xy,n)}catch{}i=!0}return i}finally{bn=t,po.transition=e}}return!1}function UC(n,e,t){e=md(t,e),e=$P(n,e,1),n=xu(n,e,1),e=Wr(),n!==null&&(Tg(n,1,e),ps(n,e))}function fi(n,e,t){if(n.tag===3)UC(n,n,t);else for(;e!==null;){if(e.tag===3){UC(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Su===null||!Su.has(i))){n=md(t,n),n=e3(e,n,1),e=xu(e,n,1),n=Wr(),e!==null&&(Tg(e,1,n),ps(e,n));break}}e=e.return}}function H4(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Wr(),n.pingedLanes|=n.suspendedLanes&t,or===n&&(hr&t)===t&&(Gi===4||Gi===3&&(hr&130023424)===hr&&500>Mi()-MM?jc(n,0):EM|=t),ps(n,e)}function x3(n,e){e===0&&(n.mode&1?(e=n_,n_<<=1,!(n_&130023424)&&(n_=4194304)):e=1);var t=Wr();n=cl(n,e),n!==null&&(Tg(n,e,t),ps(n,t))}function V4(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),x3(n,t)}function G4(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(ze(314))}i!==null&&i.delete(e),x3(n,t)}var S3;S3=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||fs.current)hs=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return hs=!1,P4(n,e,t);hs=!!(n.flags&131072)}else hs=!1,jn&&e.flags&1048576&&MP(e,jv,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Mv(n,e),n=e.pendingProps;var r=hd(e,br.current);sd(e,t),r=_M(null,e,i,n,r,t);var s=vM();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ds(i)?(s=!0,qv(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,fM(e),r.updater=Ay,e.stateNode=r,r._reactInternals=e,vw(e,i,n,t),e=Sw(null,e,i,!0,s,t)):(e.tag=0,jn&&s&&sM(e),Vr(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Mv(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=X4(i),n=Do(i,n),r){case 0:e=xw(null,e,i,n,t);break e;case 1:e=TC(null,e,i,n,t);break e;case 11:e=EC(null,e,i,n,t);break e;case 14:e=MC(null,e,i,Do(i.type,n),t);break e}throw Error(ze(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Do(i,r),xw(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Do(i,r),TC(n,e,i,r,t);case 3:e:{if(r3(e),n===null)throw Error(ze(387));i=e.pendingProps,s=e.memoizedState,r=s.element,RP(n,e),Jv(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=md(Error(ze(423)),e),e=AC(n,e,i,t,r);break e}else if(i!==r){r=md(Error(ze(424)),e),e=AC(n,e,i,t,r);break e}else for(Ns=yu(e.stateNode.containerInfo.firstChild),zs=e,jn=!0,Fo=null,t=IP(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(fd(),i===r){e=hl(n,e,t);break e}Vr(n,e,i,t)}e=e.child}return e;case 5:return OP(e),n===null&&mw(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,cw(i,r)?o=null:s!==null&&cw(i,s)&&(e.flags|=32),i3(n,e),Vr(n,e,o,t),e.child;case 6:return n===null&&mw(e),null;case 13:return s3(n,e,t);case 4:return dM(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=dd(e,null,i,t):Vr(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Do(i,r),EC(n,e,i,r,t);case 7:return Vr(n,e,e.pendingProps,t),e.child;case 8:return Vr(n,e,e.pendingProps.children,t),e.child;case 12:return Vr(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Vn(Kv,i._currentValue),i._currentValue=o,s!==null)if(Wo(s.value,o)){if(s.children===r.children&&!fs.current){e=hl(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var h=a.firstContext;h!==null;){if(h.context===i){if(s.tag===1){h=ol(-1,t&-t),h.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?h.next=h:(h.next=p.next,p.next=h),d.pending=h}}s.lanes|=t,h=s.alternate,h!==null&&(h.lanes|=t),gw(s.return,t,e),a.lanes|=t;break}h=h.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ze(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),gw(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Vr(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,sd(e,t),r=mo(r),i=i(r),e.flags|=1,Vr(n,e,i,t),e.child;case 14:return i=e.type,r=Do(i,e.pendingProps),r=Do(i.type,r),MC(n,e,i,r,t);case 15:return t3(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Do(i,r),Mv(n,e),e.tag=1,ds(i)?(n=!0,qv(e)):n=!1,sd(e,t),PP(e,i,r),vw(e,i,r,t),Sw(null,e,i,!0,n,t);case 19:return o3(n,e,t);case 22:return n3(n,e,t)}throw Error(ze(156,e.tag))};function w3(n,e){return Zb(n,e)}function W4(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ho(n,e,t,i){return new W4(n,e,t,i)}function RM(n){return n=n.prototype,!(!n||!n.isReactComponent)}function X4(n){if(typeof n=="function")return RM(n)?1:0;if(n!=null){if(n=n.$$typeof,n===qE)return 11;if(n===ZE)return 14}return 2}function Eu(n,e){var t=n.alternate;return t===null?(t=ho(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Cv(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")RM(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case kf:return Kc(t.children,r,s,e);case YE:o=8,r|=8;break;case VS:return n=ho(12,t,e,r|2),n.elementType=VS,n.lanes=s,n;case GS:return n=ho(13,t,e,r),n.elementType=GS,n.lanes=s,n;case WS:return n=ho(19,t,e,r),n.elementType=WS,n.lanes=s,n;case Lb:return Py(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case bb:o=10;break e;case Pb:o=9;break e;case qE:o=11;break e;case ZE:o=14;break e;case ou:o=16,i=null;break e}throw Error(ze(130,n==null?n:typeof n,""))}return e=ho(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Kc(n,e,t,i){return n=ho(7,n,i,e),n.lanes=t,n}function Py(n,e,t,i){return n=ho(22,n,i,e),n.elementType=Lb,n.lanes=t,n.stateNode={isHidden:!1},n}function P1(n,e,t){return n=ho(6,n,null,e),n.lanes=t,n}function L1(n,e,t){return e=ho(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function Y4(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=h1(0),this.expirationTimes=h1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=h1(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function bM(n,e,t,i,r,s,o,a,h){return n=new Y4(n,e,t,a,h),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ho(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},fM(s),n}function q4(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zf,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function E3(n){if(!n)return Pu;n=n._reactInternals;e:{if(ph(n)!==n||n.tag!==1)throw Error(ze(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ds(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ze(171))}if(n.tag===1){var t=n.type;if(ds(t))return wP(n,t,e)}return e}function M3(n,e,t,i,r,s,o,a,h){return n=bM(t,i,!0,n,r,s,o,a,h),n.context=E3(null),t=n.current,i=Wr(),r=wu(t),s=ol(i,r),s.callback=e??null,xu(t,s,r),n.current.lanes=r,Tg(n,r,i),ps(n,i),n}function Ly(n,e,t,i){var r=e.current,s=Wr(),o=wu(r);return t=E3(t),e.context===null?e.context=t:e.pendingContext=t,e=ol(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=xu(r,e,o),n!==null&&(Go(n,r,o,s),Sv(n,r,o)),o}function oy(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function NC(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function PM(n,e){NC(n,e),(n=n.alternate)&&NC(n,e)}function Z4(){return null}var T3=typeof reportError=="function"?reportError:function(n){console.error(n)};function LM(n){this._internalRoot=n}Iy.prototype.render=LM.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(ze(409));Ly(n,e,null,null)};Iy.prototype.unmount=LM.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;oh(function(){Ly(null,n,null,null)}),e[ul]=null}};function Iy(n){this._internalRoot=n}Iy.prototype.unstable_scheduleHydration=function(n){if(n){var e=tP();n={blockedOn:null,target:n,priority:e};for(var t=0;t<uu.length&&e!==0&&e<uu[t].priority;t++);uu.splice(t,0,n),t===0&&iP(n)}};function IM(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Oy(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function FC(){}function j4(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var d=oy(o);s.call(d)}}var o=M3(e,i,n,0,null,!1,!1,"",FC);return n._reactRootContainer=o,n[ul]=o.current,Fm(n.nodeType===8?n.parentNode:n),oh(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var d=oy(h);a.call(d)}}var h=bM(n,0,!1,null,null,!1,!1,"",FC);return n._reactRootContainer=h,n[ul]=h.current,Fm(n.nodeType===8?n.parentNode:n),oh(function(){Ly(e,h,t,i)}),h}function Dy(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var h=oy(o);a.call(h)}}Ly(e,o,n,r)}else o=j4(t,e,n,r,i);return oy(o)}$b=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=rm(e.pendingLanes);t!==0&&(QE(e,t|1),ps(e,Mi()),!(xn&6)&&(gd=Mi()+500,Nu()))}break;case 13:oh(function(){var i=cl(n,1);if(i!==null){var r=Wr();Go(i,n,1,r)}}),PM(n,1)}};JE=function(n){if(n.tag===13){var e=cl(n,134217728);if(e!==null){var t=Wr();Go(e,n,134217728,t)}PM(n,134217728)}};eP=function(n){if(n.tag===13){var e=wu(n),t=cl(n,e);if(t!==null){var i=Wr();Go(t,n,e,i)}PM(n,e)}};tP=function(){return bn};nP=function(n,e){var t=bn;try{return bn=n,e()}finally{bn=t}};ew=function(n,e,t){switch(e){case"input":if(qS(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=My(i);if(!r)throw Error(ze(90));Ob(i),qS(i,r)}}}break;case"textarea":Ub(n,t);break;case"select":e=t.value,e!=null&&td(n,!!t.multiple,e,!1)}};Vb=TM;Gb=oh;var K4={usingClientEntryPoint:!1,Events:[Cg,Gf,My,Bb,Hb,TM]},Op={findFiberByHostInstance:Vc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Q4={bundleType:Op.bundleType,version:Op.version,rendererPackageName:Op.rendererPackageName,rendererConfig:Op.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ml.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Yb(n),n===null?null:n.stateNode},findFiberByHostInstance:Op.findFiberByHostInstance||Z4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var d_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!d_.isDisabled&&d_.supportsFiber)try{xy=d_.inject(Q4),va=d_}catch{}}Hs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K4;Hs.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!IM(e))throw Error(ze(200));return q4(n,e,null,t)};Hs.createRoot=function(n,e){if(!IM(n))throw Error(ze(299));var t=!1,i="",r=T3;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=bM(n,1,!1,null,null,t,!1,i,r),n[ul]=e.current,Fm(n.nodeType===8?n.parentNode:n),new LM(e)};Hs.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(ze(188)):(n=Object.keys(n).join(","),Error(ze(268,n)));return n=Yb(e),n=n===null?null:n.stateNode,n};Hs.flushSync=function(n){return oh(n)};Hs.hydrate=function(n,e,t){if(!Oy(e))throw Error(ze(200));return Dy(null,n,e,!0,t)};Hs.hydrateRoot=function(n,e,t){if(!IM(n))throw Error(ze(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=T3;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=M3(e,null,n,1,t??null,r,!1,s,o),n[ul]=e.current,Fm(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new Iy(e)};Hs.render=function(n,e,t){if(!Oy(e))throw Error(ze(200));return Dy(null,n,e,!1,t)};Hs.unmountComponentAtNode=function(n){if(!Oy(n))throw Error(ze(40));return n._reactRootContainer?(oh(function(){Dy(null,null,n,!1,function(){n._reactRootContainer=null,n[ul]=null})}),!0):!1};Hs.unstable_batchedUpdates=TM;Hs.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!Oy(t))throw Error(ze(200));if(n==null||n._reactInternals===void 0)throw Error(ze(38));return Dy(n,e,t,!1,i)};Hs.version="18.2.0-next-9e3b772b8-20220608";function A3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(A3)}catch(n){console.error(n)}}A3(),Mb.exports=Hs;var C3=Mb.exports,zC=C3;BS.createRoot=zC.createRoot,BS.hydrateRoot=zC.hydrateRoot;function J4(n,e){if(n=Math.abs(n),e=Math.abs(e),e>n){let t=n;n=e,e=t}for(;;){if(e===0)return n;if(n%=e,n===0)return e;e%=n}}function kC(n){const e=n.getContext("2d");if(!e)throw new Error("cannot find the context 2d for the canvas");return e}function BC(n){const e=n.getContext("2d");if(!e)throw new Error("cannot find the context 2d for the canvas");return e}function $4(n,e){const t=e.red-n.red,i=e.green-n.green,r=e.blue-n.blue;return t*t+i*i+r*r}function R3(n,e,t,i){const r=new OffscreenCanvas(n.width*.5,n.height*.5),s=kC(r);s.drawImage(n,0,0,r.width,r.height),s.drawImage(r,0,0,r.width*.5,r.height*.5);const o=kC(e);e.width=t,e.height=i,o.drawImage(r,0,0,r.width*.5,r.height*.5,0,0,t,i)}function eB({initialTileSize:n=32}){const[e,t]=K.useState(0),[i,r]=K.useState(0),[s,o]=K.useState(!0),[a,h]=K.useState(n),[d,p]=K.useState(1);function m(w,_){t(w),r(_)}function g(w){return Math.round(w/(3*a))*(3*a)}function y(w,_,T,E){const C=J4(w,_),P=w/C,D=_/C,O=P*T,F=D*T;if(E){const L=Math.ceil(w/O),N=O*L,G=F*L;return[N,G]}else return[O*d,F*d]}function S(w,_){const T=g(w),E=g(_);return console.log(w,"-> ",T),console.log(_,"-> ",E),y(T,E,a,s)}function A(w,_){const[T,E]=S(w,_);m(T,E)}return{computePossibleSize:A,setPossibleSize:m,possibleWidth:e,possibleHeight:i,ratio:d,setRatio:p,bestProportion:s,setBestProportion:o,tileSize:a,setTileSize:h}}var ay={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */ay.exports;(function(n,e){(function(){var t,i="4.17.21",r=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",d=500,p="__lodash_placeholder__",m=1,g=2,y=4,S=1,A=2,w=1,_=2,T=4,E=8,C=16,P=32,D=64,O=128,F=256,L=512,N=30,G="...",Q=800,le=16,Z=1,oe=2,me=3,de=1/0,Y=9007199254740991,te=17976931348623157e292,ee=0/0,ce=4294967295,ve=ce-1,he=ce>>>1,Me=[["ary",O],["bind",w],["bindKey",_],["curry",E],["curryRight",C],["flip",L],["partial",P],["partialRight",D],["rearg",F]],Ie="[object Arguments]",Ye="[object Array]",qe="[object AsyncFunction]",Tt="[object Boolean]",wt="[object Date]",dt="[object DOMException]",lt="[object Error]",j="[object Function]",Ue="[object GeneratorFunction]",we="[object Map]",He="[object Number]",Le="[object Null]",ut="[object Object]",$e="[object Promise]",rt="[object Proxy]",xt="[object RegExp]",Nt="[object Set]",wn="[object String]",X="[object Symbol]",k="[object Undefined]",fe="[object WeakMap]",ke="[object WeakSet]",De="[object ArrayBuffer]",Ne="[object DataView]",ht="[object Float32Array]",Ge="[object Float64Array]",Ke="[object Int8Array]",bt="[object Int16Array]",un="[object Int32Array]",Be="[object Uint8Array]",gn="[object Uint8ClampedArray]",kt="[object Uint16Array]",Ct="[object Uint32Array]",St=/\b__p \+= '';/g,st=/\b(__p \+=) '' \+/g,sn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ie=/&(?:amp|lt|gt|quot|#39);/g,et=/[&<>"']/g,Ve=RegExp(ie.source),Ae=RegExp(et.source),Xe=/<%-([\s\S]+?)%>/g,Pt=/<%([\s\S]+?)%>/g,ln=/<%=([\s\S]+?)%>/g,Kn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ti=/^\w*$/,En=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,mi=/[\\^$.*+?()[\]{}|]/g,jr=RegExp(mi.source),Ca=/^\s+/,Vu=/\s/,_l=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,qo=/\{\n\/\* \[wrapped with (.+)\] \*/,vl=/,? & /,vh=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,yh=/[()=,{}\[\]\/\s]/,Od=/\\(\\)?/g,Dd=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xh=/\w*$/,H=/^[-+]0x[0-9a-f]+$/i,ae=/^0b[01]+$/i,_e=/^\[object .+?Constructor\]$/,xe=/^0o[0-7]+$/i,ge=/^(?:0|[1-9]\d*)$/,tt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ft=/($^)/,Rt=/['\n\r\u2028\u2029\\]/g,Et="\\ud800-\\udfff",Ht="\\u0300-\\u036f",Bt="\\ufe20-\\ufe2f",Vt="\\u20d0-\\u20ff",Fn=Ht+Bt+Vt,Ai="\\u2700-\\u27bf",Ln="a-z\\xdf-\\xf6\\xf8-\\xff",Ci="\\xac\\xb1\\xd7\\xf7",Lt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ot="\\u2000-\\u206f",Kr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",jt="A-Z\\xc0-\\xd6\\xd8-\\xde",Gn="\\ufe0e\\ufe0f",gs=Ci+Lt+ot+Kr,gr="[']",Ri="["+Et+"]",Yn="["+gs+"]",Pr="["+Fn+"]",Ra="\\d+",Ni="["+Ai+"]",ba="["+Ln+"]",_r="[^"+Et+gs+Ra+Ai+Ln+jt+"]",yl="\\ud83c[\\udffb-\\udfff]",xx="(?:"+Pr+"|"+yl+")",Wg="[^"+Et+"]",xl="(?:\\ud83c[\\udde6-\\uddff]){2}",Sl="[\\ud800-\\udbff][\\udc00-\\udfff]",Gs="["+jt+"]",Gu="\\u200d",Xg="(?:"+ba+"|"+_r+")",Sx="(?:"+Gs+"|"+_r+")",Sh="(?:"+gr+"(?:d|ll|m|re|s|t|ve))?",wh="(?:"+gr+"(?:D|LL|M|RE|S|T|VE))?",wl=xx+"?",Yg="["+Gn+"]?",Ud="(?:"+Gu+"(?:"+[Wg,xl,Sl].join("|")+")"+Yg+wl+")*",_n="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",qg="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Eh=Yg+wl+Ud,Zg="(?:"+[Ni,xl,Sl].join("|")+")"+Eh,wx="(?:"+[Wg+Pr+"?",Pr,xl,Sl,Ri].join("|")+")",Ex=RegExp(gr,"g"),bi=RegExp(Pr,"g"),Wu=RegExp(yl+"(?="+yl+")|"+wx+Eh,"g"),Mx=RegExp([Gs+"?"+ba+"+"+Sh+"(?="+[Yn,Gs,"$"].join("|")+")",Sx+"+"+wh+"(?="+[Yn,Gs+Xg,"$"].join("|")+")",Gs+"?"+Xg+"+"+Sh,Gs+"+"+wh,qg,_n,Ra,Zg].join("|"),"g"),Nd=RegExp("["+Gu+Et+Fn+Gn+"]"),Tx=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Mh=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ws=-1,On={};On[ht]=On[Ge]=On[Ke]=On[bt]=On[un]=On[Be]=On[gn]=On[kt]=On[Ct]=!0,On[Ie]=On[Ye]=On[De]=On[Tt]=On[Ne]=On[wt]=On[lt]=On[j]=On[we]=On[He]=On[ut]=On[xt]=On[Nt]=On[wn]=On[fe]=!1;var In={};In[Ie]=In[Ye]=In[De]=In[Ne]=In[Tt]=In[wt]=In[ht]=In[Ge]=In[Ke]=In[bt]=In[un]=In[we]=In[He]=In[ut]=In[xt]=In[Nt]=In[wn]=In[X]=In[Be]=In[gn]=In[kt]=In[Ct]=!0,In[lt]=In[j]=In[fe]=!1;var Xs={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},yo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Th={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Fd={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},jg=parseFloat,Ax=parseInt,_s=typeof Tp=="object"&&Tp&&Tp.Object===Object&&Tp,Cx=typeof self=="object"&&self&&self.Object===Object&&self,oi=_s||Cx||Function("return this")(),zd=e&&!e.nodeType&&e,Fi=zd&&!0&&n&&!n.nodeType&&n,Xu=Fi&&Fi.exports===zd,El=Xu&&_s.process,zi=function(){try{var $=Fi&&Fi.require&&Fi.require("util").types;return $||El&&El.binding&&El.binding("util")}catch{}}(),Ah=zi&&zi.isArrayBuffer,Ch=zi&&zi.isDate,kd=zi&&zi.isMap,Rh=zi&&zi.isRegExp,bh=zi&&zi.isSet,Pa=zi&&zi.isTypedArray;function zn($,Ee,pe){switch(pe.length){case 0:return $.call(Ee);case 1:return $.call(Ee,pe[0]);case 2:return $.call(Ee,pe[0],pe[1]);case 3:return $.call(Ee,pe[0],pe[1],pe[2])}return $.apply(Ee,pe)}function Ys($,Ee,pe,nt){for(var Ft=-1,Yt=$==null?0:$.length;++Ft<Yt;){var kn=$[Ft];Ee(nt,kn,pe(kn),$)}return nt}function gi($,Ee){for(var pe=-1,nt=$==null?0:$.length;++pe<nt&&Ee($[pe],pe,$)!==!1;);return $}function Bd($,Ee){for(var pe=$==null?0:$.length;pe--&&Ee($[pe],pe,$)!==!1;);return $}function Hd($,Ee){for(var pe=-1,nt=$==null?0:$.length;++pe<nt;)if(!Ee($[pe],pe,$))return!1;return!0}function qi($,Ee){for(var pe=-1,nt=$==null?0:$.length,Ft=0,Yt=[];++pe<nt;){var kn=$[pe];Ee(kn,pe,$)&&(Yt[Ft++]=kn)}return Yt}function vs($,Ee){var pe=$==null?0:$.length;return!!pe&&xs($,Ee,0)>-1}function Ml($,Ee,pe){for(var nt=-1,Ft=$==null?0:$.length;++nt<Ft;)if(pe(Ee,$[nt]))return!0;return!1}function Dn($,Ee){for(var pe=-1,nt=$==null?0:$.length,Ft=Array(nt);++pe<nt;)Ft[pe]=Ee($[pe],pe,$);return Ft}function ys($,Ee){for(var pe=-1,nt=Ee.length,Ft=$.length;++pe<nt;)$[Ft+pe]=Ee[pe];return $}function Ph($,Ee,pe,nt){var Ft=-1,Yt=$==null?0:$.length;for(nt&&Yt&&(pe=$[++Ft]);++Ft<Yt;)pe=Ee(pe,$[Ft],Ft,$);return pe}function Kg($,Ee,pe,nt){var Ft=$==null?0:$.length;for(nt&&Ft&&(pe=$[--Ft]);Ft--;)pe=Ee(pe,$[Ft],Ft,$);return pe}function Yu($,Ee){for(var pe=-1,nt=$==null?0:$.length;++pe<nt;)if(Ee($[pe],pe,$))return!0;return!1}var Lh=vr("length");function Qg($){return $.split("")}function Jg($){return $.match(vh)||[]}function Vd($,Ee,pe){var nt;return pe($,function(Ft,Yt,kn){if(Ee(Ft,Yt,kn))return nt=Yt,!1}),nt}function Tl($,Ee,pe,nt){for(var Ft=$.length,Yt=pe+(nt?1:-1);nt?Yt--:++Yt<Ft;)if(Ee($[Yt],Yt,$))return Yt;return-1}function xs($,Ee,pe){return Ee===Ee?Pl($,Ee,pe):Tl($,qu,pe)}function Al($,Ee,pe,nt){for(var Ft=pe-1,Yt=$.length;++Ft<Yt;)if(nt($[Ft],Ee))return Ft;return-1}function qu($){return $!==$}function Zu($,Ee){var pe=$==null?0:$.length;return pe?Ss($,Ee)/pe:ee}function vr($){return function(Ee){return Ee==null?t:Ee[$]}}function yr($){return function(Ee){return $==null?t:$[Ee]}}function Zo($,Ee,pe,nt,Ft){return Ft($,function(Yt,kn,Ot){pe=nt?(nt=!1,Yt):Ee(pe,Yt,kn,Ot)}),pe}function xo($,Ee){var pe=$.length;for($.sort(Ee);pe--;)$[pe]=$[pe].value;return $}function Ss($,Ee){for(var pe,nt=-1,Ft=$.length;++nt<Ft;){var Yt=Ee($[nt]);Yt!==t&&(pe=pe===t?Yt:pe+Yt)}return pe}function So($,Ee){for(var pe=-1,nt=Array($);++pe<$;)nt[pe]=Ee(pe);return nt}function $g($,Ee){return Dn(Ee,function(pe){return[pe,$[pe]]})}function Ih($){return $&&$.slice(0,Ll($)+1).replace(Ca,"")}function ar($){return function(Ee){return $(Ee)}}function lr($,Ee){return Dn(Ee,function(pe){return $[pe]})}function ki($,Ee){return $.has(Ee)}function Un($,Ee){for(var pe=-1,nt=$.length;++pe<nt&&xs(Ee,$[pe],0)>-1;);return pe}function Cl($,Ee){for(var pe=$.length;pe--&&xs(Ee,$[pe],0)>-1;);return pe}function ws($,Ee){for(var pe=$.length,nt=0;pe--;)$[pe]===Ee&&++nt;return nt}var e0=yr(Xs),t0=yr(yo);function Gd($){return"\\"+Fd[$]}function Wd($,Ee){return $==null?t:$[Ee]}function La($){return Nd.test($)}function ju($){return Tx.test($)}function Rl($){for(var Ee,pe=[];!(Ee=$.next()).done;)pe.push(Ee.value);return pe}function Ku($){var Ee=-1,pe=Array($.size);return $.forEach(function(nt,Ft){pe[++Ee]=[Ft,nt]}),pe}function bl($,Ee){return function(pe){return $(Ee(pe))}}function Es($,Ee){for(var pe=-1,nt=$.length,Ft=0,Yt=[];++pe<nt;){var kn=$[pe];(kn===Ee||kn===p)&&($[pe]=p,Yt[Ft++]=pe)}return Yt}function Qu($){var Ee=-1,pe=Array($.size);return $.forEach(function(nt){pe[++Ee]=nt}),pe}function n0($){var Ee=-1,pe=Array($.size);return $.forEach(function(nt){pe[++Ee]=[nt,nt]}),pe}function Pl($,Ee,pe){for(var nt=pe-1,Ft=$.length;++nt<Ft;)if($[nt]===Ee)return nt;return-1}function i0($,Ee,pe){for(var nt=pe+1;nt--;)if($[nt]===Ee)return nt;return nt}function qs($){return La($)?Zs($):Lh($)}function qn($){return La($)?Xd($):Qg($)}function Ll($){for(var Ee=$.length;Ee--&&Vu.test($.charAt(Ee)););return Ee}var Il=yr(Th);function Zs($){for(var Ee=Wu.lastIndex=0;Wu.test($);)++Ee;return Ee}function Xd($){return $.match(Wu)||[]}function Ol($){return $.match(Mx)||[]}var r0=function $(Ee){Ee=Ee==null?oi:jo.defaults(oi.Object(),Ee,jo.pick(oi,Mh));var pe=Ee.Array,nt=Ee.Date,Ft=Ee.Error,Yt=Ee.Function,kn=Ee.Math,Ot=Ee.Object,Pi=Ee.RegExp,Li=Ee.String,ur=Ee.TypeError,Ko=pe.prototype,Ju=Yt.prototype,Dl=Ot.prototype,_i=Ee["__core-js_shared__"],Ul=Ju.toString,vn=Dl.hasOwnProperty,Yd=0,js=function(){var l=/[^.]+$/.exec(_i&&_i.keys&&_i.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),Lr=Dl.toString,Ia=Ul.call(Ot),Oh=oi._,Dh=Pi("^"+Ul.call(vn).replace(mi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$u=Xu?Ee.Buffer:t,wo=Ee.Symbol,ec=Ee.Uint8Array,qd=$u?$u.allocUnsafe:t,tc=bl(Ot.getPrototypeOf,Ot),Zd=Ot.create,Uh=Dl.propertyIsEnumerable,Qo=Ko.splice,jd=wo?wo.isConcatSpreadable:t,Jo=wo?wo.iterator:t,Ks=wo?wo.toStringTag:t,Nl=function(){try{var l=xc(Ot,"defineProperty");return l({},"",{}),l}catch{}}(),nc=Ee.clearTimeout!==oi.clearTimeout&&Ee.clearTimeout,s0=nt&&nt.now!==oi.Date.now&&nt.now,o0=Ee.setTimeout!==oi.setTimeout&&Ee.setTimeout,ic=kn.ceil,rc=kn.floor,sc=Ot.getOwnPropertySymbols,a0=$u?$u.isBuffer:t,Kd=Ee.isFinite,Rx=Ko.join,l0=bl(Ot.keys,Ot),vi=kn.max,Zi=kn.min,u0=nt.now,c0=Ee.parseInt,Qd=kn.random,h0=Ko.reverse,Fl=xc(Ee,"DataView"),oc=xc(Ee,"Map"),Jd=xc(Ee,"Promise"),zl=xc(Ee,"Set"),Oa=xc(Ee,"WeakMap"),Da=xc(Ot,"create"),Nh=Oa&&new Oa,Ua={},f0=Sc(Fl),d0=Sc(oc),p0=Sc(Jd),m0=Sc(zl),Qs=Sc(Oa),ac=wo?wo.prototype:t,Eo=ac?ac.valueOf:t,kl=ac?ac.toString:t;function z(l){if(ci(l)&&!Zt(l)&&!(l instanceof At)){if(l instanceof ji)return l;if(vn.call(l,"__wrapped__"))return jT(l)}return new ji(l)}var Mo=function(){function l(){}return function(f){if(!ei(f))return{};if(Zd)return Zd(f);l.prototype=f;var x=new l;return l.prototype=t,x}}();function lc(){}function ji(l,f){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=t}z.templateSettings={escape:Xe,evaluate:Pt,interpolate:ln,variable:"",imports:{_:z}},z.prototype=lc.prototype,z.prototype.constructor=z,ji.prototype=Mo(lc.prototype),ji.prototype.constructor=ji;function At(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ce,this.__views__=[]}function bx(){var l=new At(this.__wrapped__);return l.__actions__=er(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=er(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=er(this.__views__),l}function Px(){if(this.__filtered__){var l=new At(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function Ir(){var l=this.__wrapped__.value(),f=this.__dir__,x=Zt(l),b=f<0,U=x?l.length:0,B=eD(0,U,this.__views__),q=B.start,J=B.end,se=J-q,Re=b?J:q-1,be=this.__iteratees__,Oe=be.length,Qe=0,_t=Zi(se,this.__takeCount__);if(!x||!b&&U==se&&_t==se)return ra(l,this.__actions__);var Dt=[];e:for(;se--&&Qe<_t;){Re+=f;for(var on=-1,Ut=l[Re];++on<Oe;){var cn=be[on],pn=cn.iteratee,Ps=cn.type,kr=pn(Ut);if(Ps==oe)Ut=kr;else if(!kr){if(Ps==Z)continue e;break e}}Dt[Qe++]=Ut}return Dt}At.prototype=Mo(lc.prototype),At.prototype.constructor=At;function Qn(l){var f=-1,x=l==null?0:l.length;for(this.clear();++f<x;){var b=l[f];this.set(b[0],b[1])}}function g0(){this.__data__=Da?Da(null):{},this.size=0}function _0(l){var f=this.has(l)&&delete this.__data__[l];return this.size-=f?1:0,f}function v0(l){var f=this.__data__;if(Da){var x=f[l];return x===h?t:x}return vn.call(f,l)?f[l]:t}function y0(l){var f=this.__data__;return Da?f[l]!==t:vn.call(f,l)}function x0(l,f){var x=this.__data__;return this.size+=this.has(l)?0:1,x[l]=Da&&f===t?h:f,this}Qn.prototype.clear=g0,Qn.prototype.delete=_0,Qn.prototype.get=v0,Qn.prototype.has=y0,Qn.prototype.set=x0;function Ms(l){var f=-1,x=l==null?0:l.length;for(this.clear();++f<x;){var b=l[f];this.set(b[0],b[1])}}function S0(){this.__data__=[],this.size=0}function $d(l){var f=this.__data__,x=ea(f,l);if(x<0)return!1;var b=f.length-1;return x==b?f.pop():Qo.call(f,x,1),--this.size,!0}function w0(l){var f=this.__data__,x=ea(f,l);return x<0?t:f[x][1]}function E0(l){return ea(this.__data__,l)>-1}function Fh(l,f){var x=this.__data__,b=ea(x,l);return b<0?(++this.size,x.push([l,f])):x[b][1]=f,this}Ms.prototype.clear=S0,Ms.prototype.delete=$d,Ms.prototype.get=w0,Ms.prototype.has=E0,Ms.prototype.set=Fh;function Qr(l){var f=-1,x=l==null?0:l.length;for(this.clear();++f<x;){var b=l[f];this.set(b[0],b[1])}}function M0(){this.size=0,this.__data__={hash:new Qn,map:new(oc||Ms),string:new Qn}}function ep(l){var f=H0(this,l).delete(l);return this.size-=f?1:0,f}function T0(l){return H0(this,l).get(l)}function A0(l){return H0(this,l).has(l)}function zh(l,f){var x=H0(this,l),b=x.size;return x.set(l,f),this.size+=x.size==b?0:1,this}Qr.prototype.clear=M0,Qr.prototype.delete=ep,Qr.prototype.get=T0,Qr.prototype.has=A0,Qr.prototype.set=zh;function $o(l){var f=-1,x=l==null?0:l.length;for(this.__data__=new Qr;++f<x;)this.add(l[f])}function tp(l){return this.__data__.set(l,h),this}function C0(l){return this.__data__.has(l)}$o.prototype.add=$o.prototype.push=tp,$o.prototype.has=C0;function yi(l){var f=this.__data__=new Ms(l);this.size=f.size}function Lx(){this.__data__=new Ms,this.size=0}function Ix(l){var f=this.__data__,x=f.delete(l);return this.size=f.size,x}function kh(l){return this.__data__.get(l)}function Na(l){return this.__data__.has(l)}function Ox(l,f){var x=this.__data__;if(x instanceof Ms){var b=x.__data__;if(!oc||b.length<r-1)return b.push([l,f]),this.size=++x.size,this;x=this.__data__=new Qr(b)}return x.set(l,f),this.size=x.size,this}yi.prototype.clear=Lx,yi.prototype.delete=Ix,yi.prototype.get=kh,yi.prototype.has=Na,yi.prototype.set=Ox;function je(l,f){var x=Zt(l),b=!x&&wc(l),U=!x&&!b&&jl(l),B=!x&&!b&&!U&&nf(l),q=x||b||U||B,J=q?So(l.length,Li):[],se=J.length;for(var Re in l)(f||vn.call(l,Re))&&!(q&&(Re=="length"||U&&(Re=="offset"||Re=="parent")||B&&(Re=="buffer"||Re=="byteLength"||Re=="byteOffset")||Va(Re,se)))&&J.push(Re);return J}function uc(l){var f=l.length;return f?l[$s(0,f-1)]:t}function np(l,f){return V0(er(l),ta(f,0,l.length))}function R0(l){return V0(er(l))}function ip(l,f,x){(x!==t&&!Co(l[f],x)||x===t&&!(f in l))&&Js(l,f,x)}function Ts(l,f,x){var b=l[f];(!(vn.call(l,f)&&Co(b,x))||x===t&&!(f in l))&&Js(l,f,x)}function ea(l,f){for(var x=l.length;x--;)if(Co(l[x][0],f))return x;return-1}function rp(l,f,x,b){return As(l,function(U,B,q){f(b,U,x(U),q)}),b}function sp(l,f){return l&&es(f,nr(f),l)}function b0(l,f){return l&&es(f,ns(f),l)}function Js(l,f,x){f=="__proto__"&&Nl?Nl(l,f,{configurable:!0,enumerable:!0,value:x,writable:!0}):l[f]=x}function Bh(l,f){for(var x=-1,b=f.length,U=pe(b),B=l==null;++x<b;)U[x]=B?t:Qx(l,f[x]);return U}function ta(l,f,x){return l===l&&(x!==t&&(l=l<=x?l:x),f!==t&&(l=l>=f?l:f)),l}function Or(l,f,x,b,U,B){var q,J=f&m,se=f&g,Re=f&y;if(x&&(q=U?x(l,b,U,B):x(l)),q!==t)return q;if(!ei(l))return l;var be=Zt(l);if(be){if(q=nD(l),!J)return er(l,q)}else{var Oe=xr(l),Qe=Oe==j||Oe==Ue;if(jl(l))return yp(l,J);if(Oe==ut||Oe==Ie||Qe&&!U){if(q=se||Qe?{}:BT(l),!J)return se?k0(l,b0(q,l)):Fx(l,sp(q,l))}else{if(!In[Oe])return U?l:{};q=iD(l,Oe,J)}}B||(B=new yi);var _t=B.get(l);if(_t)return _t;B.set(l,q),mA(l)?l.forEach(function(Ut){q.add(Or(Ut,f,x,Ut,l,B))}):dA(l)&&l.forEach(function(Ut,cn){q.set(cn,Or(Ut,f,x,cn,l,B))});var Dt=Re?se?hn:ui:se?ns:nr,on=be?t:Dt(l);return gi(on||l,function(Ut,cn){on&&(cn=Ut,Ut=l[cn]),Ts(q,cn,Or(Ut,f,x,cn,l,B))}),q}function op(l){var f=nr(l);return function(x){return Hh(x,l,f)}}function Hh(l,f,x){var b=x.length;if(l==null)return!b;for(l=Ot(l);b--;){var U=x[b],B=f[U],q=l[U];if(q===t&&!(U in l)||!B(q))return!1}return!0}function ap(l,f,x){if(typeof l!="function")throw new ur(o);return Ep(function(){l.apply(t,x)},f)}function Fa(l,f,x,b){var U=-1,B=vs,q=!0,J=l.length,se=[],Re=f.length;if(!J)return se;x&&(f=Dn(f,ar(x))),b?(B=Ml,q=!1):f.length>=r&&(B=ki,q=!1,f=new $o(f));e:for(;++U<J;){var be=l[U],Oe=x==null?be:x(be);if(be=b||be!==0?be:0,q&&Oe===Oe){for(var Qe=Re;Qe--;)if(f[Qe]===Oe)continue e;se.push(be)}else B(f,Oe,b)||se.push(be)}return se}var As=Sp(Dr),P0=Sp(Hl,!0);function Dx(l,f){var x=!0;return As(l,function(b,U,B){return x=!!f(b,U,B),x}),x}function cc(l,f,x){for(var b=-1,U=l.length;++b<U;){var B=l[b],q=f(B);if(q!=null&&(J===t?q===q&&!bs(q):x(q,J)))var J=q,se=B}return se}function L0(l,f,x,b){var U=l.length;for(x=$t(x),x<0&&(x=-x>U?0:U+x),b=b===t||b>U?U:$t(b),b<0&&(b+=U),b=x>b?0:_A(b);x<b;)l[x++]=f;return l}function lp(l,f){var x=[];return As(l,function(b,U,B){f(b,U,B)&&x.push(b)}),x}function Ii(l,f,x,b,U){var B=-1,q=l.length;for(x||(x=sD),U||(U=[]);++B<q;){var J=l[B];f>0&&x(J)?f>1?Ii(J,f-1,x,b,U):ys(U,J):b||(U[U.length]=J)}return U}var Bl=$h(),hc=$h(!0);function Dr(l,f){return l&&Bl(l,f,nr)}function Hl(l,f){return l&&hc(l,f,nr)}function za(l,f){return qi(f,function(x){return Ga(l[x])})}function Cs(l,f){f=oa(f,l);for(var x=0,b=f.length;l!=null&&x<b;)l=l[ua(f[x++])];return x&&x==b?l:t}function Vh(l,f,x){var b=f(l);return Zt(l)?b:ys(b,x(l))}function Bi(l){return l==null?l===t?k:Le:Ks&&Ks in Ot(l)?$O(l):fD(l)}function fc(l,f){return l>f}function I0(l,f){return l!=null&&vn.call(l,f)}function up(l,f){return l!=null&&f in Ot(l)}function Ux(l,f,x){return l>=Zi(f,x)&&l<vi(f,x)}function Vl(l,f,x){for(var b=x?Ml:vs,U=l[0].length,B=l.length,q=B,J=pe(B),se=1/0,Re=[];q--;){var be=l[q];q&&f&&(be=Dn(be,ar(f))),se=Zi(be.length,se),J[q]=!x&&(f||U>=120&&be.length>=120)?new $o(q&&be):t}be=l[0];var Oe=-1,Qe=J[0];e:for(;++Oe<U&&Re.length<se;){var _t=be[Oe],Dt=f?f(_t):_t;if(_t=x||_t!==0?_t:0,!(Qe?ki(Qe,Dt):b(Re,Dt,x))){for(q=B;--q;){var on=J[q];if(!(on?ki(on,Dt):b(l[q],Dt,x)))continue e}Qe&&Qe.push(Dt),Re.push(_t)}}return Re}function cp(l,f,x,b){return Dr(l,function(U,B,q){f(b,x(U),B,q)}),b}function Nn(l,f,x){f=oa(f,l),l=WT(l,f);var b=l==null?l:l[ua(no(f))];return b==null?t:zn(b,l,x)}function Kt(l){return ci(l)&&Bi(l)==Ie}function ai(l){return ci(l)&&Bi(l)==De}function li(l){return ci(l)&&Bi(l)==wt}function Jn(l,f,x,b,U){return l===f?!0:l==null||f==null||!ci(l)&&!ci(f)?l!==l&&f!==f:Ur(l,f,x,b,Jn,U)}function Ur(l,f,x,b,U,B){var q=Zt(l),J=Zt(f),se=q?Ye:xr(l),Re=J?Ye:xr(f);se=se==Ie?ut:se,Re=Re==Ie?ut:Re;var be=se==ut,Oe=Re==ut,Qe=se==Re;if(Qe&&jl(l)){if(!jl(f))return!1;q=!0,be=!1}if(Qe&&!be)return B||(B=new yi),q||nf(l)?mt(l,f,x,b,U,B):Qt(l,f,se,x,b,U,B);if(!(x&S)){var _t=be&&vn.call(l,"__wrapped__"),Dt=Oe&&vn.call(f,"__wrapped__");if(_t||Dt){var on=_t?l.value():l,Ut=Dt?f.value():f;return B||(B=new yi),U(on,Ut,x,b,B)}}return Qe?(B||(B=new yi),Xt(l,f,x,b,U,B)):!1}function Gl(l){return ci(l)&&xr(l)==we}function $n(l,f,x,b){var U=x.length,B=U,q=!b;if(l==null)return!B;for(l=Ot(l);U--;){var J=x[U];if(q&&J[2]?J[1]!==l[J[0]]:!(J[0]in l))return!1}for(;++U<B;){J=x[U];var se=J[0],Re=l[se],be=J[1];if(q&&J[2]){if(Re===t&&!(se in l))return!1}else{var Oe=new yi;if(b)var Qe=b(Re,be,se,l,f,Oe);if(!(Qe===t?Jn(be,Re,S|A,b,Oe):Qe))return!1}}return!0}function Wl(l){if(!ei(l)||aD(l))return!1;var f=Ga(l)?Dh:_e;return f.test(Sc(l))}function Xl(l){return ci(l)&&Bi(l)==xt}function Gh(l){return ci(l)&&xr(l)==Nt}function hp(l){return ci(l)&&Z0(l.length)&&!!On[Bi(l)]}function Yl(l){return typeof l=="function"?l:l==null?is:typeof l=="object"?Zt(l)?Wh(l[0],l[1]):pc(l):RA(l)}function Ki(l){if(!wp(l))return l0(l);var f=[];for(var x in Ot(l))vn.call(l,x)&&x!="constructor"&&f.push(x);return f}function fp(l){if(!ei(l))return hD(l);var f=wp(l),x=[];for(var b in l)b=="constructor"&&(f||!vn.call(l,b))||x.push(b);return x}function dc(l,f){return l<f}function ka(l,f){var x=-1,b=ts(l)?pe(l.length):[];return As(l,function(U,B,q){b[++x]=f(U,B,q)}),b}function pc(l){var f=kx(l);return f.length==1&&f[0][2]?VT(f[0][0],f[0][1]):function(x){return x===l||$n(x,l,f)}}function Wh(l,f){return Hx(l)&&HT(f)?VT(ua(l),f):function(x){var b=Qx(x,l);return b===t&&b===f?Jx(x,l):Jn(f,b,S|A)}}function Rs(l,f,x,b,U){l!==f&&Bl(f,function(B,q){if(U||(U=new yi),ei(B))Xh(l,f,q,x,Rs,b,U);else{var J=b?b(Gx(l,q),B,q+"",l,f,U):t;J===t&&(J=B),ip(l,q,J)}},ns)}function Xh(l,f,x,b,U,B,q){var J=Gx(l,x),se=Gx(f,x),Re=q.get(se);if(Re){ip(l,x,Re);return}var be=B?B(J,se,x+"",l,f,q):t,Oe=be===t;if(Oe){var Qe=Zt(se),_t=!Qe&&jl(se),Dt=!Qe&&!_t&&nf(se);be=se,Qe||_t||Dt?Zt(J)?be=J:xi(J)?be=er(J):_t?(Oe=!1,be=yp(se,!0)):Dt?(Oe=!1,be=z0(se,!0)):be=[]:Mp(se)||wc(se)?(be=J,wc(J)?be=vA(J):(!ei(J)||Ga(J))&&(be=BT(se))):Oe=!1}Oe&&(q.set(se,be),U(be,se,b,B,q),q.delete(se)),ip(l,x,be)}function To(l,f){var x=l.length;if(x)return f+=f<0?x:0,Va(f,x)?l[f]:t}function mc(l,f,x){f.length?f=Dn(f,function(B){return Zt(B)?function(q){return Cs(q,B.length===1?B[0]:B)}:B}):f=[is];var b=-1;f=Dn(f,ar(It()));var U=ka(l,function(B,q,J){var se=Dn(f,function(Re){return Re(B)});return{criteria:se,index:++b,value:B}});return xo(U,function(B,q){return Jh(B,q,x)})}function gc(l,f){return Yh(l,f,function(x,b){return Jx(l,b)})}function Yh(l,f,x){for(var b=-1,U=f.length,B={};++b<U;){var q=f[b],J=Cs(l,q);x(J,q)&&Ba(B,oa(q,l),J)}return B}function qh(l){return function(f){return Cs(f,l)}}function ql(l,f,x,b){var U=b?Al:xs,B=-1,q=f.length,J=l;for(l===f&&(f=er(f)),x&&(J=Dn(l,ar(x)));++B<q;)for(var se=0,Re=f[B],be=x?x(Re):Re;(se=U(J,be,se,b))>-1;)J!==l&&Qo.call(J,se,1),Qo.call(l,se,1);return l}function Qi(l,f){for(var x=l?f.length:0,b=x-1;x--;){var U=f[x];if(x==b||U!==B){var B=U;Va(U)?Qo.call(l,U,1):gp(l,U)}}return l}function $s(l,f){return l+rc(Qd()*(f-l+1))}function Jr(l,f,x,b){for(var U=-1,B=vi(ic((f-l)/(x||1)),0),q=pe(B);B--;)q[b?B:++U]=l,l+=x;return q}function Zl(l,f){var x="";if(!l||f<1||f>Y)return x;do f%2&&(x+=l),f=rc(f/2),f&&(l+=l);while(f);return x}function Mt(l,f){return Wx(GT(l,f,is),l+"")}function O0(l){return uc(rf(l))}function dp(l,f){var x=rf(l);return V0(x,ta(f,0,x.length))}function Ba(l,f,x,b){if(!ei(l))return l;f=oa(f,l);for(var U=-1,B=f.length,q=B-1,J=l;J!=null&&++U<B;){var se=ua(f[U]),Re=x;if(se==="__proto__"||se==="constructor"||se==="prototype")return l;if(U!=q){var be=J[se];Re=b?b(be,se,J):t,Re===t&&(Re=ei(be)?be:Va(f[U+1])?[]:{})}Ts(J,se,Re),J=J[se]}return l}var D0=Nh?function(l,f){return Nh.set(l,f),l}:is,na=Nl?function(l,f){return Nl(l,"toString",{configurable:!0,enumerable:!1,value:e1(f),writable:!0})}:is;function U0(l){return V0(rf(l))}function Nr(l,f,x){var b=-1,U=l.length;f<0&&(f=-f>U?0:U+f),x=x>U?U:x,x<0&&(x+=U),U=f>x?0:x-f>>>0,f>>>=0;for(var B=pe(U);++b<U;)B[b]=l[b+f];return B}function pp(l,f){var x;return As(l,function(b,U,B){return x=f(b,U,B),!x}),!!x}function eo(l,f,x){var b=0,U=l==null?b:l.length;if(typeof f=="number"&&f===f&&U<=he){for(;b<U;){var B=b+U>>>1,q=l[B];q!==null&&!bs(q)&&(x?q<=f:q<f)?b=B+1:U=B}return U}return Zh(l,f,is,x)}function Zh(l,f,x,b){var U=0,B=l==null?0:l.length;if(B===0)return 0;f=x(f);for(var q=f!==f,J=f===null,se=bs(f),Re=f===t;U<B;){var be=rc((U+B)/2),Oe=x(l[be]),Qe=Oe!==t,_t=Oe===null,Dt=Oe===Oe,on=bs(Oe);if(q)var Ut=b||Dt;else Re?Ut=Dt&&(b||Qe):J?Ut=Dt&&Qe&&(b||!_t):se?Ut=Dt&&Qe&&!_t&&(b||!on):_t||on?Ut=!1:Ut=b?Oe<=f:Oe<f;Ut?U=be+1:B=be}return Zi(B,ve)}function mp(l,f){for(var x=-1,b=l.length,U=0,B=[];++x<b;){var q=l[x],J=f?f(q):q;if(!x||!Co(J,se)){var se=J;B[U++]=q===0?0:q}}return B}function jh(l){return typeof l=="number"?l:bs(l)?ee:+l}function Ji(l){if(typeof l=="string")return l;if(Zt(l))return Dn(l,Ji)+"";if(bs(l))return kl?kl.call(l):"";var f=l+"";return f=="0"&&1/l==-de?"-0":f}function ia(l,f,x){var b=-1,U=vs,B=l.length,q=!0,J=[],se=J;if(x)q=!1,U=Ml;else if(B>=r){var Re=f?null:tr(l);if(Re)return Qu(Re);q=!1,U=ki,se=new $o}else se=f?[]:J;e:for(;++b<B;){var be=l[b],Oe=f?f(be):be;if(be=x||be!==0?be:0,q&&Oe===Oe){for(var Qe=se.length;Qe--;)if(se[Qe]===Oe)continue e;f&&se.push(Oe),J.push(be)}else U(se,Oe,x)||(se!==J&&se.push(Oe),J.push(be))}return J}function gp(l,f){return f=oa(f,l),l=WT(l,f),l==null||delete l[ua(no(f))]}function _p(l,f,x,b){return Ba(l,f,x(Cs(l,f)),b)}function _c(l,f,x,b){for(var U=l.length,B=b?U:-1;(b?B--:++B<U)&&f(l[B],B,l););return x?Nr(l,b?0:B,b?B+1:U):Nr(l,b?B+1:0,b?U:B)}function ra(l,f){var x=l;return x instanceof At&&(x=x.value()),Ph(f,function(b,U){return U.func.apply(U.thisArg,ys([b],U.args))},x)}function vp(l,f,x){var b=l.length;if(b<2)return b?ia(l[0]):[];for(var U=-1,B=pe(b);++U<b;)for(var q=l[U],J=-1;++J<b;)J!=U&&(B[U]=Fa(B[U]||q,l[J],f,x));return ia(Ii(B,1),f,x)}function sa(l,f,x){for(var b=-1,U=l.length,B=f.length,q={};++b<U;){var J=b<B?f[b]:t;x(q,l[b],J)}return q}function Kh(l){return xi(l)?l:[]}function $i(l){return typeof l=="function"?l:is}function oa(l,f){return Zt(l)?l:Hx(l,f)?[l]:ZT(Tn(l))}var N0=Mt;function aa(l,f,x){var b=l.length;return x=x===t?b:x,!f&&x>=b?l:Nr(l,f,x)}var F0=nc||function(l){return oi.clearTimeout(l)};function yp(l,f){if(f)return l.slice();var x=l.length,b=qd?qd(x):new l.constructor(x);return l.copy(b),b}function Qh(l){var f=new l.constructor(l.byteLength);return new ec(f).set(new ec(l)),f}function Nx(l,f){var x=f?Qh(l.buffer):l.buffer;return new l.constructor(x,l.byteOffset,l.byteLength)}function $r(l){var f=new l.constructor(l.source,xh.exec(l));return f.lastIndex=l.lastIndex,f}function xp(l){return Eo?Ot(Eo.call(l)):{}}function z0(l,f){var x=f?Qh(l.buffer):l.buffer;return new l.constructor(x,l.byteOffset,l.length)}function Ao(l,f){if(l!==f){var x=l!==t,b=l===null,U=l===l,B=bs(l),q=f!==t,J=f===null,se=f===f,Re=bs(f);if(!J&&!Re&&!B&&l>f||B&&q&&se&&!J&&!Re||b&&q&&se||!x&&se||!U)return 1;if(!b&&!B&&!Re&&l<f||Re&&x&&U&&!b&&!B||J&&x&&U||!q&&U||!se)return-1}return 0}function Jh(l,f,x){for(var b=-1,U=l.criteria,B=f.criteria,q=U.length,J=x.length;++b<q;){var se=Ao(U[b],B[b]);if(se){if(b>=J)return se;var Re=x[b];return se*(Re=="desc"?-1:1)}}return l.index-f.index}function la(l,f,x,b){for(var U=-1,B=l.length,q=x.length,J=-1,se=f.length,Re=vi(B-q,0),be=pe(se+Re),Oe=!b;++J<se;)be[J]=f[J];for(;++U<q;)(Oe||U<B)&&(be[x[U]]=l[U]);for(;Re--;)be[J++]=l[U++];return be}function vc(l,f,x,b){for(var U=-1,B=l.length,q=-1,J=x.length,se=-1,Re=f.length,be=vi(B-J,0),Oe=pe(be+Re),Qe=!b;++U<be;)Oe[U]=l[U];for(var _t=U;++se<Re;)Oe[_t+se]=f[se];for(;++q<J;)(Qe||U<B)&&(Oe[_t+x[q]]=l[U++]);return Oe}function er(l,f){var x=-1,b=l.length;for(f||(f=pe(b));++x<b;)f[x]=l[x];return f}function es(l,f,x,b){var U=!x;x||(x={});for(var B=-1,q=f.length;++B<q;){var J=f[B],se=b?b(x[J],l[J],J,x,l):t;se===t&&(se=l[J]),U?Js(x,J,se):Ts(x,J,se)}return x}function Fx(l,f){return es(l,Bx(l),f)}function k0(l,f){return es(l,zT(l),f)}function yc(l,f){return function(x,b){var U=Zt(x)?Ys:rp,B=f?f():{};return U(x,l,It(b,2),B)}}function Ha(l){return Mt(function(f,x){var b=-1,U=x.length,B=U>1?x[U-1]:t,q=U>2?x[2]:t;for(B=l.length>3&&typeof B=="function"?(U--,B):t,q&&zr(x[0],x[1],q)&&(B=U<3?t:B,U=1),f=Ot(f);++b<U;){var J=x[b];J&&l(f,J,b,B)}return f})}function Sp(l,f){return function(x,b){if(x==null)return x;if(!ts(x))return l(x,b);for(var U=x.length,B=f?U:-1,q=Ot(x);(f?B--:++B<U)&&b(q[B],B,q)!==!1;);return x}}function $h(l){return function(f,x,b){for(var U=-1,B=Ot(f),q=b(f),J=q.length;J--;){var se=q[l?J:++U];if(x(B[se],se,B)===!1)break}return f}}function zx(l,f,x){var b=f&w,U=c(l);function B(){var q=this&&this!==oi&&this instanceof B?U:l;return q.apply(b?x:this,arguments)}return B}function B0(l){return function(f){f=Tn(f);var x=La(f)?qn(f):t,b=x?x[0]:f.charAt(0),U=x?aa(x,1).join(""):f.slice(1);return b[l]()+U}}function u(l){return function(f){return Ph(AA(TA(f).replace(Ex,"")),l,"")}}function c(l){return function(){var f=arguments;switch(f.length){case 0:return new l;case 1:return new l(f[0]);case 2:return new l(f[0],f[1]);case 3:return new l(f[0],f[1],f[2]);case 4:return new l(f[0],f[1],f[2],f[3]);case 5:return new l(f[0],f[1],f[2],f[3],f[4]);case 6:return new l(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new l(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var x=Mo(l.prototype),b=l.apply(x,f);return ei(b)?b:x}}function v(l,f,x){var b=c(l);function U(){for(var B=arguments.length,q=pe(B),J=B,se=tf(U);J--;)q[J]=arguments[J];var Re=B<3&&q[0]!==se&&q[B-1]!==se?[]:Es(q,se);if(B-=Re.length,B<x)return Mn(l,f,I,U.placeholder,t,q,Re,t,t,x-B);var be=this&&this!==oi&&this instanceof U?b:l;return zn(be,this,q)}return U}function M(l){return function(f,x,b){var U=Ot(f);if(!ts(f)){var B=It(x,3);f=nr(f),x=function(J){return B(U[J],J,U)}}var q=l(f,x,b);return q>-1?U[B?f[q]:q]:t}}function R(l){return Jt(function(f){var x=f.length,b=x,U=ji.prototype.thru;for(l&&f.reverse();b--;){var B=f[b];if(typeof B!="function")throw new ur(o);if(U&&!q&&ef(B)=="wrapper")var q=new ji([],!0)}for(b=q?b:x;++b<x;){B=f[b];var J=ef(B),se=J=="wrapper"?to(B):t;se&&Vx(se[0])&&se[1]==(O|E|P|F)&&!se[4].length&&se[9]==1?q=q[ef(se[0])].apply(q,se[3]):q=B.length==1&&Vx(B)?q[J]():q.thru(B)}return function(){var Re=arguments,be=Re[0];if(q&&Re.length==1&&Zt(be))return q.plant(be).value();for(var Oe=0,Qe=x?f[Oe].apply(this,Re):be;++Oe<x;)Qe=f[Oe].call(this,Qe);return Qe}})}function I(l,f,x,b,U,B,q,J,se,Re){var be=f&O,Oe=f&w,Qe=f&_,_t=f&(E|C),Dt=f&L,on=Qe?t:c(l);function Ut(){for(var cn=arguments.length,pn=pe(cn),Ps=cn;Ps--;)pn[Ps]=arguments[Ps];if(_t)var kr=tf(Ut),Ls=ws(pn,kr);if(b&&(pn=la(pn,b,U,_t)),B&&(pn=vc(pn,B,q,_t)),cn-=Ls,_t&&cn<Re){var Si=Es(pn,kr);return Mn(l,f,I,Ut.placeholder,x,pn,Si,J,se,Re-cn)}var Ro=Oe?x:this,Xa=Qe?Ro[l]:l;return cn=pn.length,J?pn=dD(pn,J):Dt&&cn>1&&pn.reverse(),be&&se<cn&&(pn.length=se),this&&this!==oi&&this instanceof Ut&&(Xa=on||c(Xa)),Xa.apply(Ro,pn)}return Ut}function W(l,f){return function(x,b){return cp(x,l,f(b),{})}}function ne(l,f){return function(x,b){var U;if(x===t&&b===t)return f;if(x!==t&&(U=x),b!==t){if(U===t)return b;typeof x=="string"||typeof b=="string"?(x=Ji(x),b=Ji(b)):(x=jh(x),b=jh(b)),U=l(x,b)}return U}}function Se(l){return Jt(function(f){return f=Dn(f,ar(It())),Mt(function(x){var b=this;return l(f,function(U){return zn(U,b,x)})})})}function Fe(l,f){f=f===t?" ":Ji(f);var x=f.length;if(x<2)return x?Zl(f,l):f;var b=Zl(f,ic(l/qs(f)));return La(f)?aa(qn(b),0,l).join(""):b.slice(0,l)}function at(l,f,x,b){var U=f&w,B=c(l);function q(){for(var J=-1,se=arguments.length,Re=-1,be=b.length,Oe=pe(be+se),Qe=this&&this!==oi&&this instanceof q?B:l;++Re<be;)Oe[Re]=b[Re];for(;se--;)Oe[Re++]=arguments[++J];return zn(Qe,U?x:this,Oe)}return q}function Wt(l){return function(f,x,b){return b&&typeof b!="number"&&zr(f,x,b)&&(x=b=t),f=Wa(f),x===t?(x=f,f=0):x=Wa(x),b=b===t?f<x?1:-1:Wa(b),Jr(f,x,b,l)}}function vt(l){return function(f,x){return typeof f=="string"&&typeof x=="string"||(f=io(f),x=io(x)),l(f,x)}}function Mn(l,f,x,b,U,B,q,J,se,Re){var be=f&E,Oe=be?q:t,Qe=be?t:q,_t=be?B:t,Dt=be?t:B;f|=be?P:D,f&=~(be?D:P),f&T||(f&=~(w|_));var on=[l,f,U,_t,Oe,Dt,Qe,J,se,Re],Ut=x.apply(t,on);return Vx(l)&&XT(Ut,on),Ut.placeholder=b,YT(Ut,l,f)}function pt(l){var f=kn[l];return function(x,b){if(x=io(x),b=b==null?0:Zi($t(b),292),b&&Kd(x)){var U=(Tn(x)+"e").split("e"),B=f(U[0]+"e"+(+U[1]+b));return U=(Tn(B)+"e").split("e"),+(U[0]+"e"+(+U[1]-b))}return f(x)}}var tr=zl&&1/Qu(new zl([,-0]))[1]==de?function(l){return new zl(l)}:i1;function Fr(l){return function(f){var x=xr(f);return x==we?Ku(f):x==Nt?n0(f):$g(f,l(f))}}function ue(l,f,x,b,U,B,q,J){var se=f&_;if(!se&&typeof l!="function")throw new ur(o);var Re=b?b.length:0;if(Re||(f&=~(P|D),b=U=t),q=q===t?q:vi($t(q),0),J=J===t?J:$t(J),Re-=U?U.length:0,f&D){var be=b,Oe=U;b=U=t}var Qe=se?t:to(l),_t=[l,f,x,b,U,be,Oe,B,q,J];if(Qe&&cD(_t,Qe),l=_t[0],f=_t[1],x=_t[2],b=_t[3],U=_t[4],J=_t[9]=_t[9]===t?se?0:l.length:vi(_t[9]-Re,0),!J&&f&(E|C)&&(f&=~(E|C)),!f||f==w)var Dt=zx(l,f,x);else f==E||f==C?Dt=v(l,f,J):(f==P||f==(w|P))&&!U.length?Dt=at(l,f,x,b):Dt=I.apply(t,_t);var on=Qe?D0:XT;return YT(on(Dt,_t),l,f)}function re(l,f,x,b){return l===t||Co(l,Dl[x])&&!vn.call(b,x)?f:l}function ye(l,f,x,b,U,B){return ei(l)&&ei(f)&&(B.set(f,l),Rs(l,f,t,ye,B),B.delete(f)),l}function Je(l){return Mp(l)?t:l}function mt(l,f,x,b,U,B){var q=x&S,J=l.length,se=f.length;if(J!=se&&!(q&&se>J))return!1;var Re=B.get(l),be=B.get(f);if(Re&&be)return Re==f&&be==l;var Oe=-1,Qe=!0,_t=x&A?new $o:t;for(B.set(l,f),B.set(f,l);++Oe<J;){var Dt=l[Oe],on=f[Oe];if(b)var Ut=q?b(on,Dt,Oe,f,l,B):b(Dt,on,Oe,l,f,B);if(Ut!==t){if(Ut)continue;Qe=!1;break}if(_t){if(!Yu(f,function(cn,pn){if(!ki(_t,pn)&&(Dt===cn||U(Dt,cn,x,b,B)))return _t.push(pn)})){Qe=!1;break}}else if(!(Dt===on||U(Dt,on,x,b,B))){Qe=!1;break}}return B.delete(l),B.delete(f),Qe}function Qt(l,f,x,b,U,B,q){switch(x){case Ne:if(l.byteLength!=f.byteLength||l.byteOffset!=f.byteOffset)return!1;l=l.buffer,f=f.buffer;case De:return!(l.byteLength!=f.byteLength||!B(new ec(l),new ec(f)));case Tt:case wt:case He:return Co(+l,+f);case lt:return l.name==f.name&&l.message==f.message;case xt:case wn:return l==f+"";case we:var J=Ku;case Nt:var se=b&S;if(J||(J=Qu),l.size!=f.size&&!se)return!1;var Re=q.get(l);if(Re)return Re==f;b|=A,q.set(l,f);var be=mt(J(l),J(f),b,U,B,q);return q.delete(l),be;case X:if(Eo)return Eo.call(l)==Eo.call(f)}return!1}function Xt(l,f,x,b,U,B){var q=x&S,J=ui(l),se=J.length,Re=ui(f),be=Re.length;if(se!=be&&!q)return!1;for(var Oe=se;Oe--;){var Qe=J[Oe];if(!(q?Qe in f:vn.call(f,Qe)))return!1}var _t=B.get(l),Dt=B.get(f);if(_t&&Dt)return _t==f&&Dt==l;var on=!0;B.set(l,f),B.set(f,l);for(var Ut=q;++Oe<se;){Qe=J[Oe];var cn=l[Qe],pn=f[Qe];if(b)var Ps=q?b(pn,cn,Qe,f,l,B):b(cn,pn,Qe,l,f,B);if(!(Ps===t?cn===pn||U(cn,pn,x,b,B):Ps)){on=!1;break}Ut||(Ut=Qe=="constructor")}if(on&&!Ut){var kr=l.constructor,Ls=f.constructor;kr!=Ls&&"constructor"in l&&"constructor"in f&&!(typeof kr=="function"&&kr instanceof kr&&typeof Ls=="function"&&Ls instanceof Ls)&&(on=!1)}return B.delete(l),B.delete(f),on}function Jt(l){return Wx(GT(l,t,JT),l+"")}function ui(l){return Vh(l,nr,Bx)}function hn(l){return Vh(l,ns,zT)}var to=Nh?function(l){return Nh.get(l)}:i1;function ef(l){for(var f=l.name+"",x=Ua[f],b=vn.call(Ua,f)?x.length:0;b--;){var U=x[b],B=U.func;if(B==null||B==l)return U.name}return f}function tf(l){var f=vn.call(z,"placeholder")?z:l;return f.placeholder}function It(){var l=z.iteratee||t1;return l=l===t1?Yl:l,arguments.length?l(arguments[0],arguments[1]):l}function H0(l,f){var x=l.__data__;return oD(f)?x[typeof f=="string"?"string":"hash"]:x.map}function kx(l){for(var f=nr(l),x=f.length;x--;){var b=f[x],U=l[b];f[x]=[b,U,HT(U)]}return f}function xc(l,f){var x=Wd(l,f);return Wl(x)?x:t}function $O(l){var f=vn.call(l,Ks),x=l[Ks];try{l[Ks]=t;var b=!0}catch{}var U=Lr.call(l);return b&&(f?l[Ks]=x:delete l[Ks]),U}var Bx=sc?function(l){return l==null?[]:(l=Ot(l),qi(sc(l),function(f){return Uh.call(l,f)}))}:r1,zT=sc?function(l){for(var f=[];l;)ys(f,Bx(l)),l=tc(l);return f}:r1,xr=Bi;(Fl&&xr(new Fl(new ArrayBuffer(1)))!=Ne||oc&&xr(new oc)!=we||Jd&&xr(Jd.resolve())!=$e||zl&&xr(new zl)!=Nt||Oa&&xr(new Oa)!=fe)&&(xr=function(l){var f=Bi(l),x=f==ut?l.constructor:t,b=x?Sc(x):"";if(b)switch(b){case f0:return Ne;case d0:return we;case p0:return $e;case m0:return Nt;case Qs:return fe}return f});function eD(l,f,x){for(var b=-1,U=x.length;++b<U;){var B=x[b],q=B.size;switch(B.type){case"drop":l+=q;break;case"dropRight":f-=q;break;case"take":f=Zi(f,l+q);break;case"takeRight":l=vi(l,f-q);break}}return{start:l,end:f}}function tD(l){var f=l.match(qo);return f?f[1].split(vl):[]}function kT(l,f,x){f=oa(f,l);for(var b=-1,U=f.length,B=!1;++b<U;){var q=ua(f[b]);if(!(B=l!=null&&x(l,q)))break;l=l[q]}return B||++b!=U?B:(U=l==null?0:l.length,!!U&&Z0(U)&&Va(q,U)&&(Zt(l)||wc(l)))}function nD(l){var f=l.length,x=new l.constructor(f);return f&&typeof l[0]=="string"&&vn.call(l,"index")&&(x.index=l.index,x.input=l.input),x}function BT(l){return typeof l.constructor=="function"&&!wp(l)?Mo(tc(l)):{}}function iD(l,f,x){var b=l.constructor;switch(f){case De:return Qh(l);case Tt:case wt:return new b(+l);case Ne:return Nx(l,x);case ht:case Ge:case Ke:case bt:case un:case Be:case gn:case kt:case Ct:return z0(l,x);case we:return new b;case He:case wn:return new b(l);case xt:return $r(l);case Nt:return new b;case X:return xp(l)}}function rD(l,f){var x=f.length;if(!x)return l;var b=x-1;return f[b]=(x>1?"& ":"")+f[b],f=f.join(x>2?", ":" "),l.replace(_l,`{
/* [wrapped with `+f+`] */
`)}function sD(l){return Zt(l)||wc(l)||!!(jd&&l&&l[jd])}function Va(l,f){var x=typeof l;return f=f??Y,!!f&&(x=="number"||x!="symbol"&&ge.test(l))&&l>-1&&l%1==0&&l<f}function zr(l,f,x){if(!ei(x))return!1;var b=typeof f;return(b=="number"?ts(x)&&Va(f,x.length):b=="string"&&f in x)?Co(x[f],l):!1}function Hx(l,f){if(Zt(l))return!1;var x=typeof l;return x=="number"||x=="symbol"||x=="boolean"||l==null||bs(l)?!0:Ti.test(l)||!Kn.test(l)||f!=null&&l in Ot(f)}function oD(l){var f=typeof l;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?l!=="__proto__":l===null}function Vx(l){var f=ef(l),x=z[f];if(typeof x!="function"||!(f in At.prototype))return!1;if(l===x)return!0;var b=to(x);return!!b&&l===b[0]}function aD(l){return!!js&&js in l}var lD=_i?Ga:s1;function wp(l){var f=l&&l.constructor,x=typeof f=="function"&&f.prototype||Dl;return l===x}function HT(l){return l===l&&!ei(l)}function VT(l,f){return function(x){return x==null?!1:x[l]===f&&(f!==t||l in Ot(x))}}function uD(l){var f=Y0(l,function(b){return x.size===d&&x.clear(),b}),x=f.cache;return f}function cD(l,f){var x=l[1],b=f[1],U=x|b,B=U<(w|_|O),q=b==O&&x==E||b==O&&x==F&&l[7].length<=f[8]||b==(O|F)&&f[7].length<=f[8]&&x==E;if(!(B||q))return l;b&w&&(l[2]=f[2],U|=x&w?0:T);var J=f[3];if(J){var se=l[3];l[3]=se?la(se,J,f[4]):J,l[4]=se?Es(l[3],p):f[4]}return J=f[5],J&&(se=l[5],l[5]=se?vc(se,J,f[6]):J,l[6]=se?Es(l[5],p):f[6]),J=f[7],J&&(l[7]=J),b&O&&(l[8]=l[8]==null?f[8]:Zi(l[8],f[8])),l[9]==null&&(l[9]=f[9]),l[0]=f[0],l[1]=U,l}function hD(l){var f=[];if(l!=null)for(var x in Ot(l))f.push(x);return f}function fD(l){return Lr.call(l)}function GT(l,f,x){return f=vi(f===t?l.length-1:f,0),function(){for(var b=arguments,U=-1,B=vi(b.length-f,0),q=pe(B);++U<B;)q[U]=b[f+U];U=-1;for(var J=pe(f+1);++U<f;)J[U]=b[U];return J[f]=x(q),zn(l,this,J)}}function WT(l,f){return f.length<2?l:Cs(l,Nr(f,0,-1))}function dD(l,f){for(var x=l.length,b=Zi(f.length,x),U=er(l);b--;){var B=f[b];l[b]=Va(B,x)?U[B]:t}return l}function Gx(l,f){if(!(f==="constructor"&&typeof l[f]=="function")&&f!="__proto__")return l[f]}var XT=qT(D0),Ep=o0||function(l,f){return oi.setTimeout(l,f)},Wx=qT(na);function YT(l,f,x){var b=f+"";return Wx(l,rD(b,pD(tD(b),x)))}function qT(l){var f=0,x=0;return function(){var b=u0(),U=le-(b-x);if(x=b,U>0){if(++f>=Q)return arguments[0]}else f=0;return l.apply(t,arguments)}}function V0(l,f){var x=-1,b=l.length,U=b-1;for(f=f===t?b:f;++x<f;){var B=$s(x,U),q=l[B];l[B]=l[x],l[x]=q}return l.length=f,l}var ZT=uD(function(l){var f=[];return l.charCodeAt(0)===46&&f.push(""),l.replace(En,function(x,b,U,B){f.push(U?B.replace(Od,"$1"):b||x)}),f});function ua(l){if(typeof l=="string"||bs(l))return l;var f=l+"";return f=="0"&&1/l==-de?"-0":f}function Sc(l){if(l!=null){try{return Ul.call(l)}catch{}try{return l+""}catch{}}return""}function pD(l,f){return gi(Me,function(x){var b="_."+x[0];f&x[1]&&!vs(l,b)&&l.push(b)}),l.sort()}function jT(l){if(l instanceof At)return l.clone();var f=new ji(l.__wrapped__,l.__chain__);return f.__actions__=er(l.__actions__),f.__index__=l.__index__,f.__values__=l.__values__,f}function mD(l,f,x){(x?zr(l,f,x):f===t)?f=1:f=vi($t(f),0);var b=l==null?0:l.length;if(!b||f<1)return[];for(var U=0,B=0,q=pe(ic(b/f));U<b;)q[B++]=Nr(l,U,U+=f);return q}function gD(l){for(var f=-1,x=l==null?0:l.length,b=0,U=[];++f<x;){var B=l[f];B&&(U[b++]=B)}return U}function _D(){var l=arguments.length;if(!l)return[];for(var f=pe(l-1),x=arguments[0],b=l;b--;)f[b-1]=arguments[b];return ys(Zt(x)?er(x):[x],Ii(f,1))}var vD=Mt(function(l,f){return xi(l)?Fa(l,Ii(f,1,xi,!0)):[]}),yD=Mt(function(l,f){var x=no(f);return xi(x)&&(x=t),xi(l)?Fa(l,Ii(f,1,xi,!0),It(x,2)):[]}),xD=Mt(function(l,f){var x=no(f);return xi(x)&&(x=t),xi(l)?Fa(l,Ii(f,1,xi,!0),t,x):[]});function SD(l,f,x){var b=l==null?0:l.length;return b?(f=x||f===t?1:$t(f),Nr(l,f<0?0:f,b)):[]}function wD(l,f,x){var b=l==null?0:l.length;return b?(f=x||f===t?1:$t(f),f=b-f,Nr(l,0,f<0?0:f)):[]}function ED(l,f){return l&&l.length?_c(l,It(f,3),!0,!0):[]}function MD(l,f){return l&&l.length?_c(l,It(f,3),!0):[]}function TD(l,f,x,b){var U=l==null?0:l.length;return U?(x&&typeof x!="number"&&zr(l,f,x)&&(x=0,b=U),L0(l,f,x,b)):[]}function KT(l,f,x){var b=l==null?0:l.length;if(!b)return-1;var U=x==null?0:$t(x);return U<0&&(U=vi(b+U,0)),Tl(l,It(f,3),U)}function QT(l,f,x){var b=l==null?0:l.length;if(!b)return-1;var U=b-1;return x!==t&&(U=$t(x),U=x<0?vi(b+U,0):Zi(U,b-1)),Tl(l,It(f,3),U,!0)}function JT(l){var f=l==null?0:l.length;return f?Ii(l,1):[]}function AD(l){var f=l==null?0:l.length;return f?Ii(l,de):[]}function CD(l,f){var x=l==null?0:l.length;return x?(f=f===t?1:$t(f),Ii(l,f)):[]}function RD(l){for(var f=-1,x=l==null?0:l.length,b={};++f<x;){var U=l[f];b[U[0]]=U[1]}return b}function $T(l){return l&&l.length?l[0]:t}function bD(l,f,x){var b=l==null?0:l.length;if(!b)return-1;var U=x==null?0:$t(x);return U<0&&(U=vi(b+U,0)),xs(l,f,U)}function PD(l){var f=l==null?0:l.length;return f?Nr(l,0,-1):[]}var LD=Mt(function(l){var f=Dn(l,Kh);return f.length&&f[0]===l[0]?Vl(f):[]}),ID=Mt(function(l){var f=no(l),x=Dn(l,Kh);return f===no(x)?f=t:x.pop(),x.length&&x[0]===l[0]?Vl(x,It(f,2)):[]}),OD=Mt(function(l){var f=no(l),x=Dn(l,Kh);return f=typeof f=="function"?f:t,f&&x.pop(),x.length&&x[0]===l[0]?Vl(x,t,f):[]});function DD(l,f){return l==null?"":Rx.call(l,f)}function no(l){var f=l==null?0:l.length;return f?l[f-1]:t}function UD(l,f,x){var b=l==null?0:l.length;if(!b)return-1;var U=b;return x!==t&&(U=$t(x),U=U<0?vi(b+U,0):Zi(U,b-1)),f===f?i0(l,f,U):Tl(l,qu,U,!0)}function ND(l,f){return l&&l.length?To(l,$t(f)):t}var FD=Mt(eA);function eA(l,f){return l&&l.length&&f&&f.length?ql(l,f):l}function zD(l,f,x){return l&&l.length&&f&&f.length?ql(l,f,It(x,2)):l}function kD(l,f,x){return l&&l.length&&f&&f.length?ql(l,f,t,x):l}var BD=Jt(function(l,f){var x=l==null?0:l.length,b=Bh(l,f);return Qi(l,Dn(f,function(U){return Va(U,x)?+U:U}).sort(Ao)),b});function HD(l,f){var x=[];if(!(l&&l.length))return x;var b=-1,U=[],B=l.length;for(f=It(f,3);++b<B;){var q=l[b];f(q,b,l)&&(x.push(q),U.push(b))}return Qi(l,U),x}function Xx(l){return l==null?l:h0.call(l)}function VD(l,f,x){var b=l==null?0:l.length;return b?(x&&typeof x!="number"&&zr(l,f,x)?(f=0,x=b):(f=f==null?0:$t(f),x=x===t?b:$t(x)),Nr(l,f,x)):[]}function GD(l,f){return eo(l,f)}function WD(l,f,x){return Zh(l,f,It(x,2))}function XD(l,f){var x=l==null?0:l.length;if(x){var b=eo(l,f);if(b<x&&Co(l[b],f))return b}return-1}function YD(l,f){return eo(l,f,!0)}function qD(l,f,x){return Zh(l,f,It(x,2),!0)}function ZD(l,f){var x=l==null?0:l.length;if(x){var b=eo(l,f,!0)-1;if(Co(l[b],f))return b}return-1}function jD(l){return l&&l.length?mp(l):[]}function KD(l,f){return l&&l.length?mp(l,It(f,2)):[]}function QD(l){var f=l==null?0:l.length;return f?Nr(l,1,f):[]}function JD(l,f,x){return l&&l.length?(f=x||f===t?1:$t(f),Nr(l,0,f<0?0:f)):[]}function $D(l,f,x){var b=l==null?0:l.length;return b?(f=x||f===t?1:$t(f),f=b-f,Nr(l,f<0?0:f,b)):[]}function eU(l,f){return l&&l.length?_c(l,It(f,3),!1,!0):[]}function tU(l,f){return l&&l.length?_c(l,It(f,3)):[]}var nU=Mt(function(l){return ia(Ii(l,1,xi,!0))}),iU=Mt(function(l){var f=no(l);return xi(f)&&(f=t),ia(Ii(l,1,xi,!0),It(f,2))}),rU=Mt(function(l){var f=no(l);return f=typeof f=="function"?f:t,ia(Ii(l,1,xi,!0),t,f)});function sU(l){return l&&l.length?ia(l):[]}function oU(l,f){return l&&l.length?ia(l,It(f,2)):[]}function aU(l,f){return f=typeof f=="function"?f:t,l&&l.length?ia(l,t,f):[]}function Yx(l){if(!(l&&l.length))return[];var f=0;return l=qi(l,function(x){if(xi(x))return f=vi(x.length,f),!0}),So(f,function(x){return Dn(l,vr(x))})}function tA(l,f){if(!(l&&l.length))return[];var x=Yx(l);return f==null?x:Dn(x,function(b){return zn(f,t,b)})}var lU=Mt(function(l,f){return xi(l)?Fa(l,f):[]}),uU=Mt(function(l){return vp(qi(l,xi))}),cU=Mt(function(l){var f=no(l);return xi(f)&&(f=t),vp(qi(l,xi),It(f,2))}),hU=Mt(function(l){var f=no(l);return f=typeof f=="function"?f:t,vp(qi(l,xi),t,f)}),fU=Mt(Yx);function dU(l,f){return sa(l||[],f||[],Ts)}function pU(l,f){return sa(l||[],f||[],Ba)}var mU=Mt(function(l){var f=l.length,x=f>1?l[f-1]:t;return x=typeof x=="function"?(l.pop(),x):t,tA(l,x)});function nA(l){var f=z(l);return f.__chain__=!0,f}function gU(l,f){return f(l),l}function G0(l,f){return f(l)}var _U=Jt(function(l){var f=l.length,x=f?l[0]:0,b=this.__wrapped__,U=function(B){return Bh(B,l)};return f>1||this.__actions__.length||!(b instanceof At)||!Va(x)?this.thru(U):(b=b.slice(x,+x+(f?1:0)),b.__actions__.push({func:G0,args:[U],thisArg:t}),new ji(b,this.__chain__).thru(function(B){return f&&!B.length&&B.push(t),B}))});function vU(){return nA(this)}function yU(){return new ji(this.value(),this.__chain__)}function xU(){this.__values__===t&&(this.__values__=gA(this.value()));var l=this.__index__>=this.__values__.length,f=l?t:this.__values__[this.__index__++];return{done:l,value:f}}function SU(){return this}function wU(l){for(var f,x=this;x instanceof lc;){var b=jT(x);b.__index__=0,b.__values__=t,f?U.__wrapped__=b:f=b;var U=b;x=x.__wrapped__}return U.__wrapped__=l,f}function EU(){var l=this.__wrapped__;if(l instanceof At){var f=l;return this.__actions__.length&&(f=new At(this)),f=f.reverse(),f.__actions__.push({func:G0,args:[Xx],thisArg:t}),new ji(f,this.__chain__)}return this.thru(Xx)}function MU(){return ra(this.__wrapped__,this.__actions__)}var TU=yc(function(l,f,x){vn.call(l,x)?++l[x]:Js(l,x,1)});function AU(l,f,x){var b=Zt(l)?Hd:Dx;return x&&zr(l,f,x)&&(f=t),b(l,It(f,3))}function CU(l,f){var x=Zt(l)?qi:lp;return x(l,It(f,3))}var RU=M(KT),bU=M(QT);function PU(l,f){return Ii(W0(l,f),1)}function LU(l,f){return Ii(W0(l,f),de)}function IU(l,f,x){return x=x===t?1:$t(x),Ii(W0(l,f),x)}function iA(l,f){var x=Zt(l)?gi:As;return x(l,It(f,3))}function rA(l,f){var x=Zt(l)?Bd:P0;return x(l,It(f,3))}var OU=yc(function(l,f,x){vn.call(l,x)?l[x].push(f):Js(l,x,[f])});function DU(l,f,x,b){l=ts(l)?l:rf(l),x=x&&!b?$t(x):0;var U=l.length;return x<0&&(x=vi(U+x,0)),j0(l)?x<=U&&l.indexOf(f,x)>-1:!!U&&xs(l,f,x)>-1}var UU=Mt(function(l,f,x){var b=-1,U=typeof f=="function",B=ts(l)?pe(l.length):[];return As(l,function(q){B[++b]=U?zn(f,q,x):Nn(q,f,x)}),B}),NU=yc(function(l,f,x){Js(l,x,f)});function W0(l,f){var x=Zt(l)?Dn:ka;return x(l,It(f,3))}function FU(l,f,x,b){return l==null?[]:(Zt(f)||(f=f==null?[]:[f]),x=b?t:x,Zt(x)||(x=x==null?[]:[x]),mc(l,f,x))}var zU=yc(function(l,f,x){l[x?0:1].push(f)},function(){return[[],[]]});function kU(l,f,x){var b=Zt(l)?Ph:Zo,U=arguments.length<3;return b(l,It(f,4),x,U,As)}function BU(l,f,x){var b=Zt(l)?Kg:Zo,U=arguments.length<3;return b(l,It(f,4),x,U,P0)}function HU(l,f){var x=Zt(l)?qi:lp;return x(l,q0(It(f,3)))}function VU(l){var f=Zt(l)?uc:O0;return f(l)}function GU(l,f,x){(x?zr(l,f,x):f===t)?f=1:f=$t(f);var b=Zt(l)?np:dp;return b(l,f)}function WU(l){var f=Zt(l)?R0:U0;return f(l)}function XU(l){if(l==null)return 0;if(ts(l))return j0(l)?qs(l):l.length;var f=xr(l);return f==we||f==Nt?l.size:Ki(l).length}function YU(l,f,x){var b=Zt(l)?Yu:pp;return x&&zr(l,f,x)&&(f=t),b(l,It(f,3))}var qU=Mt(function(l,f){if(l==null)return[];var x=f.length;return x>1&&zr(l,f[0],f[1])?f=[]:x>2&&zr(f[0],f[1],f[2])&&(f=[f[0]]),mc(l,Ii(f,1),[])}),X0=s0||function(){return oi.Date.now()};function ZU(l,f){if(typeof f!="function")throw new ur(o);return l=$t(l),function(){if(--l<1)return f.apply(this,arguments)}}function sA(l,f,x){return f=x?t:f,f=l&&f==null?l.length:f,ue(l,O,t,t,t,t,f)}function oA(l,f){var x;if(typeof f!="function")throw new ur(o);return l=$t(l),function(){return--l>0&&(x=f.apply(this,arguments)),l<=1&&(f=t),x}}var qx=Mt(function(l,f,x){var b=w;if(x.length){var U=Es(x,tf(qx));b|=P}return ue(l,b,f,x,U)}),aA=Mt(function(l,f,x){var b=w|_;if(x.length){var U=Es(x,tf(aA));b|=P}return ue(f,b,l,x,U)});function lA(l,f,x){f=x?t:f;var b=ue(l,E,t,t,t,t,t,f);return b.placeholder=lA.placeholder,b}function uA(l,f,x){f=x?t:f;var b=ue(l,C,t,t,t,t,t,f);return b.placeholder=uA.placeholder,b}function cA(l,f,x){var b,U,B,q,J,se,Re=0,be=!1,Oe=!1,Qe=!0;if(typeof l!="function")throw new ur(o);f=io(f)||0,ei(x)&&(be=!!x.leading,Oe="maxWait"in x,B=Oe?vi(io(x.maxWait)||0,f):B,Qe="trailing"in x?!!x.trailing:Qe);function _t(Si){var Ro=b,Xa=U;return b=U=t,Re=Si,q=l.apply(Xa,Ro),q}function Dt(Si){return Re=Si,J=Ep(cn,f),be?_t(Si):q}function on(Si){var Ro=Si-se,Xa=Si-Re,bA=f-Ro;return Oe?Zi(bA,B-Xa):bA}function Ut(Si){var Ro=Si-se,Xa=Si-Re;return se===t||Ro>=f||Ro<0||Oe&&Xa>=B}function cn(){var Si=X0();if(Ut(Si))return pn(Si);J=Ep(cn,on(Si))}function pn(Si){return J=t,Qe&&b?_t(Si):(b=U=t,q)}function Ps(){J!==t&&F0(J),Re=0,b=se=U=J=t}function kr(){return J===t?q:pn(X0())}function Ls(){var Si=X0(),Ro=Ut(Si);if(b=arguments,U=this,se=Si,Ro){if(J===t)return Dt(se);if(Oe)return F0(J),J=Ep(cn,f),_t(se)}return J===t&&(J=Ep(cn,f)),q}return Ls.cancel=Ps,Ls.flush=kr,Ls}var jU=Mt(function(l,f){return ap(l,1,f)}),KU=Mt(function(l,f,x){return ap(l,io(f)||0,x)});function QU(l){return ue(l,L)}function Y0(l,f){if(typeof l!="function"||f!=null&&typeof f!="function")throw new ur(o);var x=function(){var b=arguments,U=f?f.apply(this,b):b[0],B=x.cache;if(B.has(U))return B.get(U);var q=l.apply(this,b);return x.cache=B.set(U,q)||B,q};return x.cache=new(Y0.Cache||Qr),x}Y0.Cache=Qr;function q0(l){if(typeof l!="function")throw new ur(o);return function(){var f=arguments;switch(f.length){case 0:return!l.call(this);case 1:return!l.call(this,f[0]);case 2:return!l.call(this,f[0],f[1]);case 3:return!l.call(this,f[0],f[1],f[2])}return!l.apply(this,f)}}function JU(l){return oA(2,l)}var $U=N0(function(l,f){f=f.length==1&&Zt(f[0])?Dn(f[0],ar(It())):Dn(Ii(f,1),ar(It()));var x=f.length;return Mt(function(b){for(var U=-1,B=Zi(b.length,x);++U<B;)b[U]=f[U].call(this,b[U]);return zn(l,this,b)})}),Zx=Mt(function(l,f){var x=Es(f,tf(Zx));return ue(l,P,t,f,x)}),hA=Mt(function(l,f){var x=Es(f,tf(hA));return ue(l,D,t,f,x)}),eN=Jt(function(l,f){return ue(l,F,t,t,t,f)});function tN(l,f){if(typeof l!="function")throw new ur(o);return f=f===t?f:$t(f),Mt(l,f)}function nN(l,f){if(typeof l!="function")throw new ur(o);return f=f==null?0:vi($t(f),0),Mt(function(x){var b=x[f],U=aa(x,0,f);return b&&ys(U,b),zn(l,this,U)})}function iN(l,f,x){var b=!0,U=!0;if(typeof l!="function")throw new ur(o);return ei(x)&&(b="leading"in x?!!x.leading:b,U="trailing"in x?!!x.trailing:U),cA(l,f,{leading:b,maxWait:f,trailing:U})}function rN(l){return sA(l,1)}function sN(l,f){return Zx($i(f),l)}function oN(){if(!arguments.length)return[];var l=arguments[0];return Zt(l)?l:[l]}function aN(l){return Or(l,y)}function lN(l,f){return f=typeof f=="function"?f:t,Or(l,y,f)}function uN(l){return Or(l,m|y)}function cN(l,f){return f=typeof f=="function"?f:t,Or(l,m|y,f)}function hN(l,f){return f==null||Hh(l,f,nr(f))}function Co(l,f){return l===f||l!==l&&f!==f}var fN=vt(fc),dN=vt(function(l,f){return l>=f}),wc=Kt(function(){return arguments}())?Kt:function(l){return ci(l)&&vn.call(l,"callee")&&!Uh.call(l,"callee")},Zt=pe.isArray,pN=Ah?ar(Ah):ai;function ts(l){return l!=null&&Z0(l.length)&&!Ga(l)}function xi(l){return ci(l)&&ts(l)}function mN(l){return l===!0||l===!1||ci(l)&&Bi(l)==Tt}var jl=a0||s1,gN=Ch?ar(Ch):li;function _N(l){return ci(l)&&l.nodeType===1&&!Mp(l)}function vN(l){if(l==null)return!0;if(ts(l)&&(Zt(l)||typeof l=="string"||typeof l.splice=="function"||jl(l)||nf(l)||wc(l)))return!l.length;var f=xr(l);if(f==we||f==Nt)return!l.size;if(wp(l))return!Ki(l).length;for(var x in l)if(vn.call(l,x))return!1;return!0}function yN(l,f){return Jn(l,f)}function xN(l,f,x){x=typeof x=="function"?x:t;var b=x?x(l,f):t;return b===t?Jn(l,f,t,x):!!b}function jx(l){if(!ci(l))return!1;var f=Bi(l);return f==lt||f==dt||typeof l.message=="string"&&typeof l.name=="string"&&!Mp(l)}function SN(l){return typeof l=="number"&&Kd(l)}function Ga(l){if(!ei(l))return!1;var f=Bi(l);return f==j||f==Ue||f==qe||f==rt}function fA(l){return typeof l=="number"&&l==$t(l)}function Z0(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=Y}function ei(l){var f=typeof l;return l!=null&&(f=="object"||f=="function")}function ci(l){return l!=null&&typeof l=="object"}var dA=kd?ar(kd):Gl;function wN(l,f){return l===f||$n(l,f,kx(f))}function EN(l,f,x){return x=typeof x=="function"?x:t,$n(l,f,kx(f),x)}function MN(l){return pA(l)&&l!=+l}function TN(l){if(lD(l))throw new Ft(s);return Wl(l)}function AN(l){return l===null}function CN(l){return l==null}function pA(l){return typeof l=="number"||ci(l)&&Bi(l)==He}function Mp(l){if(!ci(l)||Bi(l)!=ut)return!1;var f=tc(l);if(f===null)return!0;var x=vn.call(f,"constructor")&&f.constructor;return typeof x=="function"&&x instanceof x&&Ul.call(x)==Ia}var Kx=Rh?ar(Rh):Xl;function RN(l){return fA(l)&&l>=-Y&&l<=Y}var mA=bh?ar(bh):Gh;function j0(l){return typeof l=="string"||!Zt(l)&&ci(l)&&Bi(l)==wn}function bs(l){return typeof l=="symbol"||ci(l)&&Bi(l)==X}var nf=Pa?ar(Pa):hp;function bN(l){return l===t}function PN(l){return ci(l)&&xr(l)==fe}function LN(l){return ci(l)&&Bi(l)==ke}var IN=vt(dc),ON=vt(function(l,f){return l<=f});function gA(l){if(!l)return[];if(ts(l))return j0(l)?qn(l):er(l);if(Jo&&l[Jo])return Rl(l[Jo]());var f=xr(l),x=f==we?Ku:f==Nt?Qu:rf;return x(l)}function Wa(l){if(!l)return l===0?l:0;if(l=io(l),l===de||l===-de){var f=l<0?-1:1;return f*te}return l===l?l:0}function $t(l){var f=Wa(l),x=f%1;return f===f?x?f-x:f:0}function _A(l){return l?ta($t(l),0,ce):0}function io(l){if(typeof l=="number")return l;if(bs(l))return ee;if(ei(l)){var f=typeof l.valueOf=="function"?l.valueOf():l;l=ei(f)?f+"":f}if(typeof l!="string")return l===0?l:+l;l=Ih(l);var x=ae.test(l);return x||xe.test(l)?Ax(l.slice(2),x?2:8):H.test(l)?ee:+l}function vA(l){return es(l,ns(l))}function DN(l){return l?ta($t(l),-Y,Y):l===0?l:0}function Tn(l){return l==null?"":Ji(l)}var UN=Ha(function(l,f){if(wp(f)||ts(f)){es(f,nr(f),l);return}for(var x in f)vn.call(f,x)&&Ts(l,x,f[x])}),yA=Ha(function(l,f){es(f,ns(f),l)}),K0=Ha(function(l,f,x,b){es(f,ns(f),l,b)}),NN=Ha(function(l,f,x,b){es(f,nr(f),l,b)}),FN=Jt(Bh);function zN(l,f){var x=Mo(l);return f==null?x:sp(x,f)}var kN=Mt(function(l,f){l=Ot(l);var x=-1,b=f.length,U=b>2?f[2]:t;for(U&&zr(f[0],f[1],U)&&(b=1);++x<b;)for(var B=f[x],q=ns(B),J=-1,se=q.length;++J<se;){var Re=q[J],be=l[Re];(be===t||Co(be,Dl[Re])&&!vn.call(l,Re))&&(l[Re]=B[Re])}return l}),BN=Mt(function(l){return l.push(t,ye),zn(xA,t,l)});function HN(l,f){return Vd(l,It(f,3),Dr)}function VN(l,f){return Vd(l,It(f,3),Hl)}function GN(l,f){return l==null?l:Bl(l,It(f,3),ns)}function WN(l,f){return l==null?l:hc(l,It(f,3),ns)}function XN(l,f){return l&&Dr(l,It(f,3))}function YN(l,f){return l&&Hl(l,It(f,3))}function qN(l){return l==null?[]:za(l,nr(l))}function ZN(l){return l==null?[]:za(l,ns(l))}function Qx(l,f,x){var b=l==null?t:Cs(l,f);return b===t?x:b}function jN(l,f){return l!=null&&kT(l,f,I0)}function Jx(l,f){return l!=null&&kT(l,f,up)}var KN=W(function(l,f,x){f!=null&&typeof f.toString!="function"&&(f=Lr.call(f)),l[f]=x},e1(is)),QN=W(function(l,f,x){f!=null&&typeof f.toString!="function"&&(f=Lr.call(f)),vn.call(l,f)?l[f].push(x):l[f]=[x]},It),JN=Mt(Nn);function nr(l){return ts(l)?je(l):Ki(l)}function ns(l){return ts(l)?je(l,!0):fp(l)}function $N(l,f){var x={};return f=It(f,3),Dr(l,function(b,U,B){Js(x,f(b,U,B),b)}),x}function eF(l,f){var x={};return f=It(f,3),Dr(l,function(b,U,B){Js(x,U,f(b,U,B))}),x}var tF=Ha(function(l,f,x){Rs(l,f,x)}),xA=Ha(function(l,f,x,b){Rs(l,f,x,b)}),nF=Jt(function(l,f){var x={};if(l==null)return x;var b=!1;f=Dn(f,function(B){return B=oa(B,l),b||(b=B.length>1),B}),es(l,hn(l),x),b&&(x=Or(x,m|g|y,Je));for(var U=f.length;U--;)gp(x,f[U]);return x});function iF(l,f){return SA(l,q0(It(f)))}var rF=Jt(function(l,f){return l==null?{}:gc(l,f)});function SA(l,f){if(l==null)return{};var x=Dn(hn(l),function(b){return[b]});return f=It(f),Yh(l,x,function(b,U){return f(b,U[0])})}function sF(l,f,x){f=oa(f,l);var b=-1,U=f.length;for(U||(U=1,l=t);++b<U;){var B=l==null?t:l[ua(f[b])];B===t&&(b=U,B=x),l=Ga(B)?B.call(l):B}return l}function oF(l,f,x){return l==null?l:Ba(l,f,x)}function aF(l,f,x,b){return b=typeof b=="function"?b:t,l==null?l:Ba(l,f,x,b)}var wA=Fr(nr),EA=Fr(ns);function lF(l,f,x){var b=Zt(l),U=b||jl(l)||nf(l);if(f=It(f,4),x==null){var B=l&&l.constructor;U?x=b?new B:[]:ei(l)?x=Ga(B)?Mo(tc(l)):{}:x={}}return(U?gi:Dr)(l,function(q,J,se){return f(x,q,J,se)}),x}function uF(l,f){return l==null?!0:gp(l,f)}function cF(l,f,x){return l==null?l:_p(l,f,$i(x))}function hF(l,f,x,b){return b=typeof b=="function"?b:t,l==null?l:_p(l,f,$i(x),b)}function rf(l){return l==null?[]:lr(l,nr(l))}function fF(l){return l==null?[]:lr(l,ns(l))}function dF(l,f,x){return x===t&&(x=f,f=t),x!==t&&(x=io(x),x=x===x?x:0),f!==t&&(f=io(f),f=f===f?f:0),ta(io(l),f,x)}function pF(l,f,x){return f=Wa(f),x===t?(x=f,f=0):x=Wa(x),l=io(l),Ux(l,f,x)}function mF(l,f,x){if(x&&typeof x!="boolean"&&zr(l,f,x)&&(f=x=t),x===t&&(typeof f=="boolean"?(x=f,f=t):typeof l=="boolean"&&(x=l,l=t)),l===t&&f===t?(l=0,f=1):(l=Wa(l),f===t?(f=l,l=0):f=Wa(f)),l>f){var b=l;l=f,f=b}if(x||l%1||f%1){var U=Qd();return Zi(l+U*(f-l+jg("1e-"+((U+"").length-1))),f)}return $s(l,f)}var gF=u(function(l,f,x){return f=f.toLowerCase(),l+(x?MA(f):f)});function MA(l){return $x(Tn(l).toLowerCase())}function TA(l){return l=Tn(l),l&&l.replace(tt,e0).replace(bi,"")}function _F(l,f,x){l=Tn(l),f=Ji(f);var b=l.length;x=x===t?b:ta($t(x),0,b);var U=x;return x-=f.length,x>=0&&l.slice(x,U)==f}function vF(l){return l=Tn(l),l&&Ae.test(l)?l.replace(et,t0):l}function yF(l){return l=Tn(l),l&&jr.test(l)?l.replace(mi,"\\$&"):l}var xF=u(function(l,f,x){return l+(x?"-":"")+f.toLowerCase()}),SF=u(function(l,f,x){return l+(x?" ":"")+f.toLowerCase()}),wF=B0("toLowerCase");function EF(l,f,x){l=Tn(l),f=$t(f);var b=f?qs(l):0;if(!f||b>=f)return l;var U=(f-b)/2;return Fe(rc(U),x)+l+Fe(ic(U),x)}function MF(l,f,x){l=Tn(l),f=$t(f);var b=f?qs(l):0;return f&&b<f?l+Fe(f-b,x):l}function TF(l,f,x){l=Tn(l),f=$t(f);var b=f?qs(l):0;return f&&b<f?Fe(f-b,x)+l:l}function AF(l,f,x){return x||f==null?f=0:f&&(f=+f),c0(Tn(l).replace(Ca,""),f||0)}function CF(l,f,x){return(x?zr(l,f,x):f===t)?f=1:f=$t(f),Zl(Tn(l),f)}function RF(){var l=arguments,f=Tn(l[0]);return l.length<3?f:f.replace(l[1],l[2])}var bF=u(function(l,f,x){return l+(x?"_":"")+f.toLowerCase()});function PF(l,f,x){return x&&typeof x!="number"&&zr(l,f,x)&&(f=x=t),x=x===t?ce:x>>>0,x?(l=Tn(l),l&&(typeof f=="string"||f!=null&&!Kx(f))&&(f=Ji(f),!f&&La(l))?aa(qn(l),0,x):l.split(f,x)):[]}var LF=u(function(l,f,x){return l+(x?" ":"")+$x(f)});function IF(l,f,x){return l=Tn(l),x=x==null?0:ta($t(x),0,l.length),f=Ji(f),l.slice(x,x+f.length)==f}function OF(l,f,x){var b=z.templateSettings;x&&zr(l,f,x)&&(f=t),l=Tn(l),f=K0({},f,b,re);var U=K0({},f.imports,b.imports,re),B=nr(U),q=lr(U,B),J,se,Re=0,be=f.interpolate||ft,Oe="__p += '",Qe=Pi((f.escape||ft).source+"|"+be.source+"|"+(be===ln?Dd:ft).source+"|"+(f.evaluate||ft).source+"|$","g"),_t="//# sourceURL="+(vn.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ws+"]")+`
`;l.replace(Qe,function(Ut,cn,pn,Ps,kr,Ls){return pn||(pn=Ps),Oe+=l.slice(Re,Ls).replace(Rt,Gd),cn&&(J=!0,Oe+=`' +
__e(`+cn+`) +
'`),kr&&(se=!0,Oe+=`';
`+kr+`;
__p += '`),pn&&(Oe+=`' +
((__t = (`+pn+`)) == null ? '' : __t) +
'`),Re=Ls+Ut.length,Ut}),Oe+=`';
`;var Dt=vn.call(f,"variable")&&f.variable;if(!Dt)Oe=`with (obj) {
`+Oe+`
}
`;else if(yh.test(Dt))throw new Ft(a);Oe=(se?Oe.replace(St,""):Oe).replace(st,"$1").replace(sn,"$1;"),Oe="function("+(Dt||"obj")+`) {
`+(Dt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(J?", __e = _.escape":"")+(se?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Oe+`return __p
}`;var on=CA(function(){return Yt(B,_t+"return "+Oe).apply(t,q)});if(on.source=Oe,jx(on))throw on;return on}function DF(l){return Tn(l).toLowerCase()}function UF(l){return Tn(l).toUpperCase()}function NF(l,f,x){if(l=Tn(l),l&&(x||f===t))return Ih(l);if(!l||!(f=Ji(f)))return l;var b=qn(l),U=qn(f),B=Un(b,U),q=Cl(b,U)+1;return aa(b,B,q).join("")}function FF(l,f,x){if(l=Tn(l),l&&(x||f===t))return l.slice(0,Ll(l)+1);if(!l||!(f=Ji(f)))return l;var b=qn(l),U=Cl(b,qn(f))+1;return aa(b,0,U).join("")}function zF(l,f,x){if(l=Tn(l),l&&(x||f===t))return l.replace(Ca,"");if(!l||!(f=Ji(f)))return l;var b=qn(l),U=Un(b,qn(f));return aa(b,U).join("")}function kF(l,f){var x=N,b=G;if(ei(f)){var U="separator"in f?f.separator:U;x="length"in f?$t(f.length):x,b="omission"in f?Ji(f.omission):b}l=Tn(l);var B=l.length;if(La(l)){var q=qn(l);B=q.length}if(x>=B)return l;var J=x-qs(b);if(J<1)return b;var se=q?aa(q,0,J).join(""):l.slice(0,J);if(U===t)return se+b;if(q&&(J+=se.length-J),Kx(U)){if(l.slice(J).search(U)){var Re,be=se;for(U.global||(U=Pi(U.source,Tn(xh.exec(U))+"g")),U.lastIndex=0;Re=U.exec(be);)var Oe=Re.index;se=se.slice(0,Oe===t?J:Oe)}}else if(l.indexOf(Ji(U),J)!=J){var Qe=se.lastIndexOf(U);Qe>-1&&(se=se.slice(0,Qe))}return se+b}function BF(l){return l=Tn(l),l&&Ve.test(l)?l.replace(ie,Il):l}var HF=u(function(l,f,x){return l+(x?" ":"")+f.toUpperCase()}),$x=B0("toUpperCase");function AA(l,f,x){return l=Tn(l),f=x?t:f,f===t?ju(l)?Ol(l):Jg(l):l.match(f)||[]}var CA=Mt(function(l,f){try{return zn(l,t,f)}catch(x){return jx(x)?x:new Ft(x)}}),VF=Jt(function(l,f){return gi(f,function(x){x=ua(x),Js(l,x,qx(l[x],l))}),l});function GF(l){var f=l==null?0:l.length,x=It();return l=f?Dn(l,function(b){if(typeof b[1]!="function")throw new ur(o);return[x(b[0]),b[1]]}):[],Mt(function(b){for(var U=-1;++U<f;){var B=l[U];if(zn(B[0],this,b))return zn(B[1],this,b)}})}function WF(l){return op(Or(l,m))}function e1(l){return function(){return l}}function XF(l,f){return l==null||l!==l?f:l}var YF=R(),qF=R(!0);function is(l){return l}function t1(l){return Yl(typeof l=="function"?l:Or(l,m))}function ZF(l){return pc(Or(l,m))}function jF(l,f){return Wh(l,Or(f,m))}var KF=Mt(function(l,f){return function(x){return Nn(x,l,f)}}),QF=Mt(function(l,f){return function(x){return Nn(l,x,f)}});function n1(l,f,x){var b=nr(f),U=za(f,b);x==null&&!(ei(f)&&(U.length||!b.length))&&(x=f,f=l,l=this,U=za(f,nr(f)));var B=!(ei(x)&&"chain"in x)||!!x.chain,q=Ga(l);return gi(U,function(J){var se=f[J];l[J]=se,q&&(l.prototype[J]=function(){var Re=this.__chain__;if(B||Re){var be=l(this.__wrapped__),Oe=be.__actions__=er(this.__actions__);return Oe.push({func:se,args:arguments,thisArg:l}),be.__chain__=Re,be}return se.apply(l,ys([this.value()],arguments))})}),l}function JF(){return oi._===this&&(oi._=Oh),this}function i1(){}function $F(l){return l=$t(l),Mt(function(f){return To(f,l)})}var ez=Se(Dn),tz=Se(Hd),nz=Se(Yu);function RA(l){return Hx(l)?vr(ua(l)):qh(l)}function iz(l){return function(f){return l==null?t:Cs(l,f)}}var rz=Wt(),sz=Wt(!0);function r1(){return[]}function s1(){return!1}function oz(){return{}}function az(){return""}function lz(){return!0}function uz(l,f){if(l=$t(l),l<1||l>Y)return[];var x=ce,b=Zi(l,ce);f=It(f),l-=ce;for(var U=So(b,f);++x<l;)f(x);return U}function cz(l){return Zt(l)?Dn(l,ua):bs(l)?[l]:er(ZT(Tn(l)))}function hz(l){var f=++Yd;return Tn(l)+f}var fz=ne(function(l,f){return l+f},0),dz=pt("ceil"),pz=ne(function(l,f){return l/f},1),mz=pt("floor");function gz(l){return l&&l.length?cc(l,is,fc):t}function _z(l,f){return l&&l.length?cc(l,It(f,2),fc):t}function vz(l){return Zu(l,is)}function yz(l,f){return Zu(l,It(f,2))}function xz(l){return l&&l.length?cc(l,is,dc):t}function Sz(l,f){return l&&l.length?cc(l,It(f,2),dc):t}var wz=ne(function(l,f){return l*f},1),Ez=pt("round"),Mz=ne(function(l,f){return l-f},0);function Tz(l){return l&&l.length?Ss(l,is):0}function Az(l,f){return l&&l.length?Ss(l,It(f,2)):0}return z.after=ZU,z.ary=sA,z.assign=UN,z.assignIn=yA,z.assignInWith=K0,z.assignWith=NN,z.at=FN,z.before=oA,z.bind=qx,z.bindAll=VF,z.bindKey=aA,z.castArray=oN,z.chain=nA,z.chunk=mD,z.compact=gD,z.concat=_D,z.cond=GF,z.conforms=WF,z.constant=e1,z.countBy=TU,z.create=zN,z.curry=lA,z.curryRight=uA,z.debounce=cA,z.defaults=kN,z.defaultsDeep=BN,z.defer=jU,z.delay=KU,z.difference=vD,z.differenceBy=yD,z.differenceWith=xD,z.drop=SD,z.dropRight=wD,z.dropRightWhile=ED,z.dropWhile=MD,z.fill=TD,z.filter=CU,z.flatMap=PU,z.flatMapDeep=LU,z.flatMapDepth=IU,z.flatten=JT,z.flattenDeep=AD,z.flattenDepth=CD,z.flip=QU,z.flow=YF,z.flowRight=qF,z.fromPairs=RD,z.functions=qN,z.functionsIn=ZN,z.groupBy=OU,z.initial=PD,z.intersection=LD,z.intersectionBy=ID,z.intersectionWith=OD,z.invert=KN,z.invertBy=QN,z.invokeMap=UU,z.iteratee=t1,z.keyBy=NU,z.keys=nr,z.keysIn=ns,z.map=W0,z.mapKeys=$N,z.mapValues=eF,z.matches=ZF,z.matchesProperty=jF,z.memoize=Y0,z.merge=tF,z.mergeWith=xA,z.method=KF,z.methodOf=QF,z.mixin=n1,z.negate=q0,z.nthArg=$F,z.omit=nF,z.omitBy=iF,z.once=JU,z.orderBy=FU,z.over=ez,z.overArgs=$U,z.overEvery=tz,z.overSome=nz,z.partial=Zx,z.partialRight=hA,z.partition=zU,z.pick=rF,z.pickBy=SA,z.property=RA,z.propertyOf=iz,z.pull=FD,z.pullAll=eA,z.pullAllBy=zD,z.pullAllWith=kD,z.pullAt=BD,z.range=rz,z.rangeRight=sz,z.rearg=eN,z.reject=HU,z.remove=HD,z.rest=tN,z.reverse=Xx,z.sampleSize=GU,z.set=oF,z.setWith=aF,z.shuffle=WU,z.slice=VD,z.sortBy=qU,z.sortedUniq=jD,z.sortedUniqBy=KD,z.split=PF,z.spread=nN,z.tail=QD,z.take=JD,z.takeRight=$D,z.takeRightWhile=eU,z.takeWhile=tU,z.tap=gU,z.throttle=iN,z.thru=G0,z.toArray=gA,z.toPairs=wA,z.toPairsIn=EA,z.toPath=cz,z.toPlainObject=vA,z.transform=lF,z.unary=rN,z.union=nU,z.unionBy=iU,z.unionWith=rU,z.uniq=sU,z.uniqBy=oU,z.uniqWith=aU,z.unset=uF,z.unzip=Yx,z.unzipWith=tA,z.update=cF,z.updateWith=hF,z.values=rf,z.valuesIn=fF,z.without=lU,z.words=AA,z.wrap=sN,z.xor=uU,z.xorBy=cU,z.xorWith=hU,z.zip=fU,z.zipObject=dU,z.zipObjectDeep=pU,z.zipWith=mU,z.entries=wA,z.entriesIn=EA,z.extend=yA,z.extendWith=K0,n1(z,z),z.add=fz,z.attempt=CA,z.camelCase=gF,z.capitalize=MA,z.ceil=dz,z.clamp=dF,z.clone=aN,z.cloneDeep=uN,z.cloneDeepWith=cN,z.cloneWith=lN,z.conformsTo=hN,z.deburr=TA,z.defaultTo=XF,z.divide=pz,z.endsWith=_F,z.eq=Co,z.escape=vF,z.escapeRegExp=yF,z.every=AU,z.find=RU,z.findIndex=KT,z.findKey=HN,z.findLast=bU,z.findLastIndex=QT,z.findLastKey=VN,z.floor=mz,z.forEach=iA,z.forEachRight=rA,z.forIn=GN,z.forInRight=WN,z.forOwn=XN,z.forOwnRight=YN,z.get=Qx,z.gt=fN,z.gte=dN,z.has=jN,z.hasIn=Jx,z.head=$T,z.identity=is,z.includes=DU,z.indexOf=bD,z.inRange=pF,z.invoke=JN,z.isArguments=wc,z.isArray=Zt,z.isArrayBuffer=pN,z.isArrayLike=ts,z.isArrayLikeObject=xi,z.isBoolean=mN,z.isBuffer=jl,z.isDate=gN,z.isElement=_N,z.isEmpty=vN,z.isEqual=yN,z.isEqualWith=xN,z.isError=jx,z.isFinite=SN,z.isFunction=Ga,z.isInteger=fA,z.isLength=Z0,z.isMap=dA,z.isMatch=wN,z.isMatchWith=EN,z.isNaN=MN,z.isNative=TN,z.isNil=CN,z.isNull=AN,z.isNumber=pA,z.isObject=ei,z.isObjectLike=ci,z.isPlainObject=Mp,z.isRegExp=Kx,z.isSafeInteger=RN,z.isSet=mA,z.isString=j0,z.isSymbol=bs,z.isTypedArray=nf,z.isUndefined=bN,z.isWeakMap=PN,z.isWeakSet=LN,z.join=DD,z.kebabCase=xF,z.last=no,z.lastIndexOf=UD,z.lowerCase=SF,z.lowerFirst=wF,z.lt=IN,z.lte=ON,z.max=gz,z.maxBy=_z,z.mean=vz,z.meanBy=yz,z.min=xz,z.minBy=Sz,z.stubArray=r1,z.stubFalse=s1,z.stubObject=oz,z.stubString=az,z.stubTrue=lz,z.multiply=wz,z.nth=ND,z.noConflict=JF,z.noop=i1,z.now=X0,z.pad=EF,z.padEnd=MF,z.padStart=TF,z.parseInt=AF,z.random=mF,z.reduce=kU,z.reduceRight=BU,z.repeat=CF,z.replace=RF,z.result=sF,z.round=Ez,z.runInContext=$,z.sample=VU,z.size=XU,z.snakeCase=bF,z.some=YU,z.sortedIndex=GD,z.sortedIndexBy=WD,z.sortedIndexOf=XD,z.sortedLastIndex=YD,z.sortedLastIndexBy=qD,z.sortedLastIndexOf=ZD,z.startCase=LF,z.startsWith=IF,z.subtract=Mz,z.sum=Tz,z.sumBy=Az,z.template=OF,z.times=uz,z.toFinite=Wa,z.toInteger=$t,z.toLength=_A,z.toLower=DF,z.toNumber=io,z.toSafeInteger=DN,z.toString=Tn,z.toUpper=UF,z.trim=NF,z.trimEnd=FF,z.trimStart=zF,z.truncate=kF,z.unescape=BF,z.uniqueId=hz,z.upperCase=HF,z.upperFirst=$x,z.each=iA,z.eachRight=rA,z.first=$T,n1(z,function(){var l={};return Dr(z,function(f,x){vn.call(z.prototype,x)||(l[x]=f)}),l}(),{chain:!1}),z.VERSION=i,gi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){z[l].placeholder=z}),gi(["drop","take"],function(l,f){At.prototype[l]=function(x){x=x===t?1:vi($t(x),0);var b=this.__filtered__&&!f?new At(this):this.clone();return b.__filtered__?b.__takeCount__=Zi(x,b.__takeCount__):b.__views__.push({size:Zi(x,ce),type:l+(b.__dir__<0?"Right":"")}),b},At.prototype[l+"Right"]=function(x){return this.reverse()[l](x).reverse()}}),gi(["filter","map","takeWhile"],function(l,f){var x=f+1,b=x==Z||x==me;At.prototype[l]=function(U){var B=this.clone();return B.__iteratees__.push({iteratee:It(U,3),type:x}),B.__filtered__=B.__filtered__||b,B}}),gi(["head","last"],function(l,f){var x="take"+(f?"Right":"");At.prototype[l]=function(){return this[x](1).value()[0]}}),gi(["initial","tail"],function(l,f){var x="drop"+(f?"":"Right");At.prototype[l]=function(){return this.__filtered__?new At(this):this[x](1)}}),At.prototype.compact=function(){return this.filter(is)},At.prototype.find=function(l){return this.filter(l).head()},At.prototype.findLast=function(l){return this.reverse().find(l)},At.prototype.invokeMap=Mt(function(l,f){return typeof l=="function"?new At(this):this.map(function(x){return Nn(x,l,f)})}),At.prototype.reject=function(l){return this.filter(q0(It(l)))},At.prototype.slice=function(l,f){l=$t(l);var x=this;return x.__filtered__&&(l>0||f<0)?new At(x):(l<0?x=x.takeRight(-l):l&&(x=x.drop(l)),f!==t&&(f=$t(f),x=f<0?x.dropRight(-f):x.take(f-l)),x)},At.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},At.prototype.toArray=function(){return this.take(ce)},Dr(At.prototype,function(l,f){var x=/^(?:filter|find|map|reject)|While$/.test(f),b=/^(?:head|last)$/.test(f),U=z[b?"take"+(f=="last"?"Right":""):f],B=b||/^find/.test(f);U&&(z.prototype[f]=function(){var q=this.__wrapped__,J=b?[1]:arguments,se=q instanceof At,Re=J[0],be=se||Zt(q),Oe=function(cn){var pn=U.apply(z,ys([cn],J));return b&&Qe?pn[0]:pn};be&&x&&typeof Re=="function"&&Re.length!=1&&(se=be=!1);var Qe=this.__chain__,_t=!!this.__actions__.length,Dt=B&&!Qe,on=se&&!_t;if(!B&&be){q=on?q:new At(this);var Ut=l.apply(q,J);return Ut.__actions__.push({func:G0,args:[Oe],thisArg:t}),new ji(Ut,Qe)}return Dt&&on?l.apply(this,J):(Ut=this.thru(Oe),Dt?b?Ut.value()[0]:Ut.value():Ut)})}),gi(["pop","push","shift","sort","splice","unshift"],function(l){var f=Ko[l],x=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",b=/^(?:pop|shift)$/.test(l);z.prototype[l]=function(){var U=arguments;if(b&&!this.__chain__){var B=this.value();return f.apply(Zt(B)?B:[],U)}return this[x](function(q){return f.apply(Zt(q)?q:[],U)})}}),Dr(At.prototype,function(l,f){var x=z[f];if(x){var b=x.name+"";vn.call(Ua,b)||(Ua[b]=[]),Ua[b].push({name:f,func:x})}}),Ua[I(t,_).name]=[{name:"wrapper",func:t}],At.prototype.clone=bx,At.prototype.reverse=Px,At.prototype.value=Ir,z.prototype.at=_U,z.prototype.chain=vU,z.prototype.commit=yU,z.prototype.next=xU,z.prototype.plant=wU,z.prototype.reverse=EU,z.prototype.toJSON=z.prototype.valueOf=z.prototype.value=MU,z.prototype.first=z.prototype.head,Jo&&(z.prototype[Jo]=SU),z},jo=r0();Fi?((Fi.exports=jo)._=jo,zd._=jo):oi._=jo}).call(Tp)})(ay,ay.exports);var vm=ay.exports;const tB=32,HC=[{name:"white",color:{red:255,green:255,blue:255},hexColor:"#FFFFFF"},{name:"green",color:{red:124,green:178,blue:87},hexColor:"#7CCF57"},{name:"yellow",color:{red:238,green:207,blue:78},hexColor:"#EECF4E"},{name:"orange",color:{red:236,green:112,blue:45},hexColor:"#EC702D"},{name:"red",color:{red:189,green:40,blue:39},hexColor:"#BD2827"},{name:"blue",color:{red:44,green:93,blue:166},hexColor:"#2C5DA6"}];function nB({initialTileSize:n=tB}){const[e,t]=K.useState(0),[i,r]=K.useState(n),[s,o]=K.useState([]);function a(y){const S=new OffscreenCanvas(y.width,y.height);return BC(S).drawImage(y,0,0,S.width,S.height),S}function h(y,S,A){const w=a(y),_=BC(w);R3(w,w,S,A);let T=[];for(let E=0;E<w.height;E+=3*i)for(let C=0;C<w.width;C+=3*i){const P=m(d(_,i,C,E)),D=m(d(_,i,C+i,E)),O=m(d(_,i,C+2*i,E)),F=m(d(_,i,C,E+i)),L=m(d(_,i,C+i,E+i)),N=m(d(_,i,C+2*i,E+i)),G=m(d(_,i,C,E+2*i)),Q=m(d(_,i,C+i,E+2*i)),le=m(d(_,i,C+2*i,E+2*i)),Z=[{color:P,x:C,y:E},{color:D,x:C+i,y:E},{color:O,x:C+2*i,y:E},{color:F,x:C,y:E+i},{color:L,x:C+i,y:E+i},{color:N,x:C+2*i,y:E+i},{color:G,x:C,y:E+2*i},{color:Q,x:C+i,y:E+2*i},{color:le,x:C+2*i,y:E+2*i}];T.push(Z)}o(T)}function d(y,S,A,w){const _=y.getImageData(A,w,S,S),{data:T}=_,E=S*S;let C=0,P=0,D=0;for(let O=0;O<T.length;O+=4)C+=T[O],P+=T[O+1],D+=T[O+2];return{red:C/E,green:P/E,blue:D/E}}function p(y){const S=HC.map(w=>({...w,value:$4(y,w.color)})),A=vm.minBy(S,"value");if(!A)throw`No sprite found for the pixel with the value ${y}`;return A.hexColor}function m(y){if(Math.random()<e/100){const S=vm.sample(HC);return p(S.color)}return p(y)}function g(y,S){switch(y){case"noise":{t(S);break}case"tileSize":{r(S);break}default:return}}return{optimizedGenerateImage:h,setOption:g,noise:e,tileSize:i,rubickFaces:s}}const Ow="/rubiks-image/logo.svg";function iB(){return Ce.jsxs("div",{className:"navbar bg-primary text-primary-content",children:[Ce.jsx("img",{src:Ow,alt:"logo of Rubick image",width:"64px"}),Ce.jsx("a",{className:"btn btn-ghost normal-case text-xl",children:"Rubick's Image"})]})}function rB(){return Ce.jsxs("footer",{className:"footer items-center p-4 bg-neutral text-neutral-content",children:[Ce.jsxs("aside",{className:"items-center grid-flow-col",children:[Ce.jsx("svg",{width:"36",height:"36",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",className:"fill-current",children:Ce.jsx("path",{d:"M22.672 15.226l-2.432.811.841 2.515c.33 1.019-.209 2.127-1.23 2.456-1.15.325-2.148-.321-2.463-1.226l-.84-2.518-5.013 1.677.84 2.517c.391 1.203-.434 2.542-1.831 2.542-.88 0-1.601-.564-1.86-1.314l-.842-2.516-2.431.809c-1.135.328-2.145-.317-2.463-1.229-.329-1.018.211-2.127 1.231-2.456l2.432-.809-1.621-4.823-2.432.808c-1.355.384-2.558-.59-2.558-1.839 0-.817.509-1.582 1.327-1.846l2.433-.809-.842-2.515c-.33-1.02.211-2.129 1.232-2.458 1.02-.329 2.13.209 2.461 1.229l.842 2.515 5.011-1.677-.839-2.517c-.403-1.238.484-2.553 1.843-2.553.819 0 1.585.509 1.85 1.326l.841 2.517 2.431-.81c1.02-.33 2.131.211 2.461 1.229.332 1.018-.21 2.126-1.23 2.456l-2.433.809 1.622 4.823 2.433-.809c1.242-.401 2.557.484 2.557 1.838 0 .819-.51 1.583-1.328 1.847m-8.992-6.428l-5.01 1.675 1.619 4.828 5.011-1.674-1.62-4.829z"})}),Ce.jsx("p",{children:"Made by Guillaume Gomez - 2023"})]}),Ce.jsxs("nav",{className:"grid-flow-col gap-4 md:place-self-center md:justify-self-end",children:[Ce.jsx("a",{children:Ce.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"fill-current",children:Ce.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),Ce.jsx("a",{children:Ce.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"fill-current",children:Ce.jsx("path",{d:"M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"})})})]})]})}function p_({title:n,children:e}){return Ce.jsx("div",{className:"card bg-base-200 shadow-xl",children:Ce.jsxs("div",{className:"card-body",children:[Ce.jsx("h2",{className:"card-title",children:n}),e]})})}function sB({onChange:n,value:e}){function t(i){if(i&&i.target&&i.target.files){const r=new Image;r.src=URL.createObjectURL(i.target.files[0]),r.onload=()=>{n(r)}}}return Ce.jsxs("div",{className:"flex gap-3",children:[Ce.jsxs("label",{className:"w-full flex flex-col justify-center items-center bg-white text-primary shadow-lg tracking-wide uppercase border-2 border-primary transition duration-300 ease-in-out bg-opacity-40 cursor-pointer hover:bg-primary hover:text-white",children:[Ce.jsx("svg",{className:"w-8 h-8",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:Ce.jsx("path",{d:"M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z"})}),Ce.jsx("span",{className:"mt-2 leading-normal",children:"Select a picture"}),Ce.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:t})]}),e?Ce.jsx("img",{src:e.src,style:{minWidth:"64px",maxWidth:"100px"}}):Ce.jsx("span",{children:"Nothing to render"})]})}function _d({label:n,value:e,toggle:t}){return Ce.jsx("div",{className:"form-control",children:Ce.jsxs("label",{className:"label cursor-pointer",children:[Ce.jsx("span",{className:"label-text",children:n}),Ce.jsx("input",{type:"checkbox",className:"toggle toggle-primary",checked:e,onChange:t})]})})}function VC({label:n,value:e,onChange:t,min:i=0,max:r=100,step:s=1}){return Ce.jsx("div",{className:"form-control",children:Ce.jsxs("label",{className:"label cursor-pointer flex flex-row gap-1",children:[Ce.jsx("span",{className:"label-text",children:n}),Ce.jsx("input",{type:"range",min:i,max:r,step:s,value:e,className:"range",onChange:o=>t(parseInt(o.target.value,10))}),Ce.jsx("span",{children:e})]})})}function oB({errorMessage:n}){return Ce.jsxs("div",{className:"alert alert-error",children:[Ce.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:Ce.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),Ce.jsx("span",{children:n})]})}const ha={DOM_UNAVAILABLE_ERROR:"DOM is unavailable server-side. Please use this method client-side only.",FULLSCREEN_UNSUPPORTED_ERROR:"Your browser does not support Fullscreen API.",getEventsNames(){if(typeof document>"u")return null;const n=document;return"exitFullscreen"in n?["fullscreenchange","fullscreenerror"]:"webkitExitFullscreen"in n?["webkitfullscreenchange","webkitfullscreenerror"]:"webkitCancelFullScreen"in n?["webkitfullscreenchange","webkitfullscreenerror"]:"mozCancelFullScreen"in n?["mozfullscreenchange","mozfullscreenerror"]:"msExitFullscreen"in n?["MSFullscreenChange","MSFullscreenError"]:null},getEventName(n){const e=this.getEventsNames();return e?n==="change"?e[0]:e[1]:null},get fullscreenEnabled(){if(typeof document>"u")return!1;const n=document;return n.fullscreenEnabled||n.webkitFullscreenEnabled||!!n.webkitCancelFullScreen||n.mozFullScreenEnabled||n.msFullscreenEnabled||!1},get fullscreenElement(){if(typeof document>"u")return null;const n=document;return n.fullscreenElement||n.webkitFullscreenElement||n.webkitCurrentFullScreenElement||n.mozFullScreenElement||n.msFullscreenElement||null},requestFullscreen(n,e){if(typeof document>"u")throw new Error(this.DOM_UNAVAILABLE_ERROR);const t=n??document.documentElement,i=t.requestFullscreen||t.webkitRequestFullscreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullscreen;if(!i)throw new Error(this.FULLSCREEN_UNSUPPORTED_ERROR);return i.call(t,e)},exitFullscreen(){if(typeof document>"u")throw new Error(this.DOM_UNAVAILABLE_ERROR);const n=document,e=n.exitFullscreen||n.webkitExitFullscreen||n.webkitCancelFullScreen||n.mozCancelFullScreen||n.msExitFullscreen;if(!e)throw new Error(this.FULLSCREEN_UNSUPPORTED_ERROR);return e.call(n)},on(n,e){const t=this.getEventName(n);t&&document.addEventListener(t,e)},off(n,e){const t=this.getEventName(n);t&&document.removeEventListener(t,e)}};function b3(n={}){const{target:e,onChange:t,onError:i,requestFullScreenOptions:r}=n,[s,o]=K.useState(!1),[a,h]=K.useState(null),[d,p]=K.useState(!1),m=K.useCallback(()=>ha.requestFullscreen((e==null?void 0:e.current)||null,r),[e,r]),g=K.useCallback(()=>ha.exitFullscreen(),[]),y=K.useCallback(()=>ha.fullscreenElement?g():m(),[m,g]),S=K.useCallback(w=>{const _=ha.fullscreenElement;h(_),p(!!_),t==null||t(w)},[t]),A=K.useCallback(w=>{const _=ha.fullscreenElement;h(_),p(!!_),i==null||i(w)},[i]);return K.useEffect(()=>{o(ha.fullscreenEnabled)},[]),K.useEffect(()=>(ha.on("change",S),ha.on("error",A),()=>{ha.off("change",S),ha.off("error",A)}),[S,A]),{isFullscreenAvailable:s,fullscreenElement:a,isFullscreenEnabled:d,enableFullscreen:m,disableFullscreen:g,toggleFullscreen:y}}const aB=K.forwardRef(({width:n,height:e,tileSize:t,rubickFaces:i},r)=>{const[s,o]=K.useState(!0),[a,h]=K.useState(!1),d=K.useRef(null),p=K.useRef(null),{toggleFullscreen:m}=b3({target:d});K.useEffect(()=>{if(d.current&&d.current.width>0&&d.current.height>0&&p.current){const w=d.current.getContext("2d");if(!w)return;y(w,i),a&&g(w,n,e),R3(d.current,p.current,d.current.width,d.current.height)}},[d,p,i,a]),K.useImperativeHandle(r,()=>({getImage(){return d.current?d.current.toDataURL("image/png"):null}}));function g(w,_,T){w.fillStyle="black",w.lineWidth=2;for(let E=0;E<_;E+=t)for(let C=0;C<T;C+=t)w.strokeRect(E,C,t,t);w.lineWidth=4;for(let E=0;E<_;E+=3*t)for(let C=0;C<T;C+=3*t)w.strokeRect(E,C,t*3,t*3)}function y(w,_){_.forEach(T=>S(w,T))}function S(w,_){_.forEach(({x:T,y:E,color:C})=>A(w,C,T,E))}function A(w,_,T,E){w.fillStyle=_,w.fillRect(T,E,t,t)}return Ce.jsxs(Ce.Fragment,{children:[Ce.jsx(_d,{label:"has border",value:a,toggle:()=>h(!a)}),Ce.jsx(_d,{label:"Show real result",value:s,toggle:()=>o(!s)}),Ce.jsx("span",{children:"The image could be wider than your screen. That is why we display the preview at first"}),Ce.jsx("canvas",{className:s?"w-full":"hidden",ref:p,style:{height:"85%"}}),Ce.jsx("div",{className:`w-full relative overflow-x-scroll ${s?"absolute hidden":"absolute"}`,style:{minHeight:"400px"},children:Ce.jsx("canvas",{className:s?"absolute hidden":"absolute",ref:d,width:n,height:e,style:{background:"#797979",overflow:"scroll"},onDoubleClick:m})})]})});/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Uy="159",lB={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},uB={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},P3=0,Dw=1,L3=2,cB=3,I3=0,Ny=1,ym=2,Uo=3,fl=0,Xr=1,_a=2,hB=2,al=0,Qc=1,Uw=2,Nw=3,Fw=4,O3=5,hu=100,D3=101,U3=102,zw=103,kw=104,N3=200,F3=201,z3=202,k3=203,ly=204,uy=205,B3=206,H3=207,V3=208,G3=209,W3=210,X3=211,Y3=212,q3=213,Z3=214,j3=0,K3=1,Q3=2,Ym=3,J3=4,$3=5,eL=6,tL=7,bg=0,nL=1,iL=2,xa=0,rL=1,sL=2,oL=3,OM=4,aL=5,Bw="attached",lL="detached",Fy=300,dl=301,Lu=302,qm=303,Zm=304,Cd=306,jm=1e3,Cr=1001,Km=1002,Ei=1003,cy=1004,fB=1004,xm=1005,dB=1005,ni=1006,DM=1007,pB=1007,Iu=1008,mB=1008,Sa=1009,uL=1010,cL=1011,zy=1012,UM=1013,sl=1014,fo=1015,ah=1016,NM=1017,FM=1018,Mu=1020,hL=1021,Gr=1023,fL=1024,dL=1025,Tu=1026,lh=1027,pL=1028,zM=1029,mL=1030,kM=1031,BM=1033,Rv=33776,bv=33777,Pv=33778,Lv=33779,Hw=35840,Vw=35841,Gw=35842,Ww=35843,HM=36196,Xw=37492,Yw=37496,qw=37808,Zw=37809,jw=37810,Kw=37811,Qw=37812,Jw=37813,$w=37814,eE=37815,tE=37816,nE=37817,iE=37818,rE=37819,sE=37820,oE=37821,Iv=36492,aE=36494,lE=36495,gL=36283,uE=36284,cE=36285,hE=36286,_L=2200,vL=2201,yL=2202,Qm=2300,Jm=2301,Ov=2302,Xc=2400,Yc=2401,$m=2402,ky=2500,VM=2501,gB=0,_B=1,vB=2,GM=3e3,Au=3001,xL=3200,SL=3201,Fu=0,wL=1,Us="",Vi="srgb",Ea="srgb-linear",By="display-p3",Pg="display-p3-linear",eg="linear",Hn="srgb",tg="rec709",ng="p3",yB=0,Fc=7680,xB=7681,SB=7682,wB=7683,EB=34055,MB=34056,TB=5386,AB=512,CB=513,RB=514,bB=515,PB=516,LB=517,IB=518,fE=519,EL=512,ML=513,TL=514,WM=515,AL=516,CL=517,RL=518,bL=519,ig=35044,OB=35048,DB=35040,UB=35045,NB=35049,FB=35041,zB=35046,kB=35050,BB=35042,HB="100",dE="300 es",hy=1035,Bo=2e3,vd=2001;let gl=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const Er=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let GC=1234567;const Jc=Math.PI/180,yd=180/Math.PI;function ks(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Er[n&255]+Er[n>>8&255]+Er[n>>16&255]+Er[n>>24&255]+"-"+Er[e&255]+Er[e>>8&255]+"-"+Er[e>>16&15|64]+Er[e>>24&255]+"-"+Er[t&63|128]+Er[t>>8&255]+"-"+Er[t>>16&255]+Er[t>>24&255]+Er[i&255]+Er[i>>8&255]+Er[i>>16&255]+Er[i>>24&255]).toLowerCase()}function di(n,e,t){return Math.max(e,Math.min(t,n))}function XM(n,e){return(n%e+e)%e}function VB(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function GB(n,e,t){return n!==e?(t-n)/(e-n):0}function Sm(n,e,t){return(1-t)*n+t*e}function WB(n,e,t,i){return Sm(n,e,1-Math.exp(-t*i))}function XB(n,e=1){return e-Math.abs(XM(n,e*2)-e)}function YB(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function qB(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function ZB(n,e){return n+Math.floor(Math.random()*(e-n+1))}function jB(n,e){return n+Math.random()*(e-n)}function KB(n){return n*(.5-Math.random())}function QB(n){n!==void 0&&(GC=n);let e=GC+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function JB(n){return n*Jc}function $B(n){return n*yd}function pE(n){return(n&n-1)===0&&n!==0}function e5(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function fy(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function t5(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),h=o(t/2),d=s((e+i)/2),p=o((e+i)/2),m=s((e-i)/2),g=o((e-i)/2),y=s((i-e)/2),S=o((i-e)/2);switch(r){case"XYX":n.set(a*p,h*m,h*g,a*d);break;case"YZY":n.set(h*g,a*p,h*m,a*d);break;case"ZXZ":n.set(h*m,h*g,a*p,a*d);break;case"XZX":n.set(a*p,h*S,h*y,a*d);break;case"YXY":n.set(h*y,a*p,h*S,a*d);break;case"ZYZ":n.set(h*S,h*y,a*p,a*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function cs(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function nn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const PL={DEG2RAD:Jc,RAD2DEG:yd,generateUUID:ks,clamp:di,euclideanModulo:XM,mapLinear:VB,inverseLerp:GB,lerp:Sm,damp:WB,pingpong:XB,smoothstep:YB,smootherstep:qB,randInt:ZB,randFloat:jB,randFloatSpread:KB,seededRandom:QB,degToRad:JB,radToDeg:$B,isPowerOfTwo:pE,ceilPowerOfTwo:e5,floorPowerOfTwo:fy,setQuaternionFromProperEuler:t5,normalize:nn,denormalize:cs};class Pe{constructor(e=0,t=0){Pe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(di(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class an{constructor(e,t,i,r,s,o,a,h,d){an.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,h,d)}set(e,t,i,r,s,o,a,h,d){const p=this.elements;return p[0]=e,p[1]=r,p[2]=a,p[3]=t,p[4]=s,p[5]=h,p[6]=i,p[7]=o,p[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],h=i[6],d=i[1],p=i[4],m=i[7],g=i[2],y=i[5],S=i[8],A=r[0],w=r[3],_=r[6],T=r[1],E=r[4],C=r[7],P=r[2],D=r[5],O=r[8];return s[0]=o*A+a*T+h*P,s[3]=o*w+a*E+h*D,s[6]=o*_+a*C+h*O,s[1]=d*A+p*T+m*P,s[4]=d*w+p*E+m*D,s[7]=d*_+p*C+m*O,s[2]=g*A+y*T+S*P,s[5]=g*w+y*E+S*D,s[8]=g*_+y*C+S*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],h=e[6],d=e[7],p=e[8];return t*o*p-t*a*d-i*s*p+i*a*h+r*s*d-r*o*h}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],h=e[6],d=e[7],p=e[8],m=p*o-a*d,g=a*h-p*s,y=d*s-o*h,S=t*m+i*g+r*y;if(S===0)return this.set(0,0,0,0,0,0,0,0,0);const A=1/S;return e[0]=m*A,e[1]=(r*d-p*i)*A,e[2]=(a*i-r*o)*A,e[3]=g*A,e[4]=(p*t-r*h)*A,e[5]=(r*s-a*t)*A,e[6]=y*A,e[7]=(i*h-d*t)*A,e[8]=(o*t-i*s)*A,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const h=Math.cos(s),d=Math.sin(s);return this.set(i*h,i*d,-i*(h*o+d*a)+o+e,-r*d,r*h,-r*(-d*o+h*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(I1.makeScale(e,t)),this}rotate(e){return this.premultiply(I1.makeRotation(-e)),this}translate(e,t){return this.premultiply(I1.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const I1=new an;function LL(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const n5={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Kf(n,e){return new n5[n](e)}function rg(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function IL(){const n=rg("canvas");return n.style.display="block",n}const WC={};function wm(n){n in WC||(WC[n]=!0,console.warn(n))}const XC=new an().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),YC=new an().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),m_={[Ea]:{transfer:eg,primaries:tg,toReference:n=>n,fromReference:n=>n},[Vi]:{transfer:Hn,primaries:tg,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[Pg]:{transfer:eg,primaries:ng,toReference:n=>n.applyMatrix3(YC),fromReference:n=>n.applyMatrix3(XC)},[By]:{transfer:Hn,primaries:ng,toReference:n=>n.convertSRGBToLinear().applyMatrix3(YC),fromReference:n=>n.applyMatrix3(XC).convertLinearToSRGB()}},i5=new Set([Ea,Pg]),Rn={enabled:!0,_workingColorSpace:Ea,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!i5.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=m_[e].toReference,r=m_[t].fromReference;return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return m_[n].primaries},getTransfer:function(n){return n===Us?eg:m_[n].transfer}};function ad(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function O1(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let of;class YM{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{of===void 0&&(of=rg("canvas")),of.width=e.width,of.height=e.height;const i=of.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=of}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=rg("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=ad(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(ad(t[i]/255)*255):t[i]=ad(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let r5=0;class qc{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:r5++}),this.uuid=ks(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(D1(r[o].image)):s.push(D1(r[o]))}else s=D1(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function D1(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?YM.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let s5=0;class pi extends gl{constructor(e=pi.DEFAULT_IMAGE,t=pi.DEFAULT_MAPPING,i=Cr,r=Cr,s=ni,o=Iu,a=Gr,h=Sa,d=pi.DEFAULT_ANISOTROPY,p=Us){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:s5++}),this.uuid=ks(),this.name="",this.source=new qc(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=d,this.format=a,this.internalFormat=null,this.type=h,this.offset=new Pe(0,0),this.repeat=new Pe(1,1),this.center=new Pe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new an,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof p=="string"?this.colorSpace=p:(wm("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=p===Au?Vi:Us),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Fy)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case jm:e.x=e.x-Math.floor(e.x);break;case Cr:e.x=e.x<0?0:1;break;case Km:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case jm:e.y=e.y-Math.floor(e.y);break;case Cr:e.y=e.y<0?0:1;break;case Km:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return wm("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Vi?Au:GM}set encoding(e){wm("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Au?Vi:Us}}pi.DEFAULT_IMAGE=null;pi.DEFAULT_MAPPING=Fy;pi.DEFAULT_ANISOTROPY=1;class Cn{constructor(e=0,t=0,i=0,r=1){Cn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const h=e.elements,d=h[0],p=h[4],m=h[8],g=h[1],y=h[5],S=h[9],A=h[2],w=h[6],_=h[10];if(Math.abs(p-g)<.01&&Math.abs(m-A)<.01&&Math.abs(S-w)<.01){if(Math.abs(p+g)<.1&&Math.abs(m+A)<.1&&Math.abs(S+w)<.1&&Math.abs(d+y+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const E=(d+1)/2,C=(y+1)/2,P=(_+1)/2,D=(p+g)/4,O=(m+A)/4,F=(S+w)/4;return E>C&&E>P?E<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(E),r=D/i,s=O/i):C>P?C<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(C),i=D/r,s=F/r):P<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(P),i=O/s,r=F/s),this.set(i,r,s,t),this}let T=Math.sqrt((w-S)*(w-S)+(m-A)*(m-A)+(g-p)*(g-p));return Math.abs(T)<.001&&(T=1),this.x=(w-S)/T,this.y=(m-A)/T,this.z=(g-p)/T,this.w=Math.acos((d+y+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class OL extends gl{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Cn(0,0,e,t),this.scissorTest=!1,this.viewport=new Cn(0,0,e,t);const r={width:e,height:t,depth:1};i.encoding!==void 0&&(wm("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===Au?Vi:Us),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ni,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},i),this.texture=new pi(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps,this.texture.internalFormat=i.internalFormat,this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new qc(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class _o extends OL{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class Hy extends pi{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ei,this.minFilter=Ei,this.wrapR=Cr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class o5 extends _o{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Hy(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class qM extends pi{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ei,this.minFilter=Ei,this.wrapR=Cr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class a5 extends _o{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new qM(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class l5 extends _o{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class fr{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let h=i[r+0],d=i[r+1],p=i[r+2],m=i[r+3];const g=s[o+0],y=s[o+1],S=s[o+2],A=s[o+3];if(a===0){e[t+0]=h,e[t+1]=d,e[t+2]=p,e[t+3]=m;return}if(a===1){e[t+0]=g,e[t+1]=y,e[t+2]=S,e[t+3]=A;return}if(m!==A||h!==g||d!==y||p!==S){let w=1-a;const _=h*g+d*y+p*S+m*A,T=_>=0?1:-1,E=1-_*_;if(E>Number.EPSILON){const P=Math.sqrt(E),D=Math.atan2(P,_*T);w=Math.sin(w*D)/P,a=Math.sin(a*D)/P}const C=a*T;if(h=h*w+g*C,d=d*w+y*C,p=p*w+S*C,m=m*w+A*C,w===1-a){const P=1/Math.sqrt(h*h+d*d+p*p+m*m);h*=P,d*=P,p*=P,m*=P}}e[t]=h,e[t+1]=d,e[t+2]=p,e[t+3]=m}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],h=i[r+1],d=i[r+2],p=i[r+3],m=s[o],g=s[o+1],y=s[o+2],S=s[o+3];return e[t]=a*S+p*m+h*y-d*g,e[t+1]=h*S+p*g+d*m-a*y,e[t+2]=d*S+p*y+a*g-h*m,e[t+3]=p*S-a*m-h*g-d*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,h=Math.sin,d=a(i/2),p=a(r/2),m=a(s/2),g=h(i/2),y=h(r/2),S=h(s/2);switch(o){case"XYZ":this._x=g*p*m+d*y*S,this._y=d*y*m-g*p*S,this._z=d*p*S+g*y*m,this._w=d*p*m-g*y*S;break;case"YXZ":this._x=g*p*m+d*y*S,this._y=d*y*m-g*p*S,this._z=d*p*S-g*y*m,this._w=d*p*m+g*y*S;break;case"ZXY":this._x=g*p*m-d*y*S,this._y=d*y*m+g*p*S,this._z=d*p*S+g*y*m,this._w=d*p*m-g*y*S;break;case"ZYX":this._x=g*p*m-d*y*S,this._y=d*y*m+g*p*S,this._z=d*p*S-g*y*m,this._w=d*p*m+g*y*S;break;case"YZX":this._x=g*p*m+d*y*S,this._y=d*y*m+g*p*S,this._z=d*p*S-g*y*m,this._w=d*p*m-g*y*S;break;case"XZY":this._x=g*p*m-d*y*S,this._y=d*y*m-g*p*S,this._z=d*p*S+g*y*m,this._w=d*p*m+g*y*S;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],h=t[9],d=t[2],p=t[6],m=t[10],g=i+a+m;if(g>0){const y=.5/Math.sqrt(g+1);this._w=.25/y,this._x=(p-h)*y,this._y=(s-d)*y,this._z=(o-r)*y}else if(i>a&&i>m){const y=2*Math.sqrt(1+i-a-m);this._w=(p-h)/y,this._x=.25*y,this._y=(r+o)/y,this._z=(s+d)/y}else if(a>m){const y=2*Math.sqrt(1+a-i-m);this._w=(s-d)/y,this._x=(r+o)/y,this._y=.25*y,this._z=(h+p)/y}else{const y=2*Math.sqrt(1+m-i-a);this._w=(o-r)/y,this._x=(s+d)/y,this._y=(h+p)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(di(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,h=t._y,d=t._z,p=t._w;return this._x=i*p+o*a+r*d-s*h,this._y=r*p+o*h+s*a-i*d,this._z=s*p+o*d+i*h-r*a,this._w=o*p-i*a-r*h-s*d,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const h=1-a*a;if(h<=Number.EPSILON){const y=1-t;return this._w=y*o+t*this._w,this._x=y*i+t*this._x,this._y=y*r+t*this._y,this._z=y*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const d=Math.sqrt(h),p=Math.atan2(d,a),m=Math.sin((1-t)*p)/d,g=Math.sin(t*p)/d;return this._w=o*m+this._w*g,this._x=i*m+this._x*g,this._y=r*m+this._y*g,this._z=s*m+this._z*g,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class V{constructor(e=0,t=0,i=0){V.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(qC.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(qC.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,h=e.w,d=2*(o*r-a*i),p=2*(a*t-s*r),m=2*(s*i-o*t);return this.x=t+h*d+o*m-a*p,this.y=i+h*p+a*d-s*m,this.z=r+h*m+s*p-o*d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,h=t.z;return this.x=r*h-s*a,this.y=s*o-i*h,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return U1.copy(this).projectOnVector(e),this.sub(U1)}reflect(e){return this.sub(U1.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(di(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const U1=new V,qC=new fr;class Rr{constructor(e=new V(1/0,1/0,1/0),t=new V(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Po.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Po.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Po.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Po):Po.fromBufferAttribute(s,o),Po.applyMatrix4(e.matrixWorld),this.expandByPoint(Po);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),g_.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),g_.copy(i.boundingBox)),g_.applyMatrix4(e.matrixWorld),this.union(g_)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Po),Po.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Dp),__.subVectors(this.max,Dp),af.subVectors(e.a,Dp),lf.subVectors(e.b,Dp),uf.subVectors(e.c,Dp),Ql.subVectors(lf,af),Jl.subVectors(uf,lf),Ec.subVectors(af,uf);let t=[0,-Ql.z,Ql.y,0,-Jl.z,Jl.y,0,-Ec.z,Ec.y,Ql.z,0,-Ql.x,Jl.z,0,-Jl.x,Ec.z,0,-Ec.x,-Ql.y,Ql.x,0,-Jl.y,Jl.x,0,-Ec.y,Ec.x,0];return!N1(t,af,lf,uf,__)||(t=[1,0,0,0,1,0,0,0,1],!N1(t,af,lf,uf,__))?!1:(v_.crossVectors(Ql,Jl),t=[v_.x,v_.y,v_.z],N1(t,af,lf,uf,__))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Po).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Po).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ya[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ya[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ya[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ya[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ya[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ya[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ya[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ya[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ya),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ya=[new V,new V,new V,new V,new V,new V,new V,new V],Po=new V,g_=new Rr,af=new V,lf=new V,uf=new V,Ql=new V,Jl=new V,Ec=new V,Dp=new V,__=new V,v_=new V,Mc=new V;function N1(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Mc.fromArray(n,s);const a=r.x*Math.abs(Mc.x)+r.y*Math.abs(Mc.y)+r.z*Math.abs(Mc.z),h=e.dot(Mc),d=t.dot(Mc),p=i.dot(Mc);if(Math.max(-Math.max(h,d,p),Math.min(h,d,p))>a)return!1}return!0}const u5=new Rr,Up=new V,F1=new V;class dr{constructor(e=new V,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):u5.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Up.subVectors(e,this.center);const t=Up.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Up,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(F1.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Up.copy(e.center).add(F1)),this.expandByPoint(Up.copy(e.center).sub(F1))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const qa=new V,z1=new V,y_=new V,$l=new V,k1=new V,x_=new V,B1=new V;class Rd{constructor(e=new V,t=new V(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,qa)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=qa.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(qa.copy(this.origin).addScaledVector(this.direction,t),qa.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){z1.copy(e).add(t).multiplyScalar(.5),y_.copy(t).sub(e).normalize(),$l.copy(this.origin).sub(z1);const s=e.distanceTo(t)*.5,o=-this.direction.dot(y_),a=$l.dot(this.direction),h=-$l.dot(y_),d=$l.lengthSq(),p=Math.abs(1-o*o);let m,g,y,S;if(p>0)if(m=o*h-a,g=o*a-h,S=s*p,m>=0)if(g>=-S)if(g<=S){const A=1/p;m*=A,g*=A,y=m*(m+o*g+2*a)+g*(o*m+g+2*h)+d}else g=s,m=Math.max(0,-(o*g+a)),y=-m*m+g*(g+2*h)+d;else g=-s,m=Math.max(0,-(o*g+a)),y=-m*m+g*(g+2*h)+d;else g<=-S?(m=Math.max(0,-(-o*s+a)),g=m>0?-s:Math.min(Math.max(-s,-h),s),y=-m*m+g*(g+2*h)+d):g<=S?(m=0,g=Math.min(Math.max(-s,-h),s),y=g*(g+2*h)+d):(m=Math.max(0,-(o*s+a)),g=m>0?s:Math.min(Math.max(-s,-h),s),y=-m*m+g*(g+2*h)+d);else g=o>0?-s:s,m=Math.max(0,-(o*g+a)),y=-m*m+g*(g+2*h)+d;return i&&i.copy(this.origin).addScaledVector(this.direction,m),r&&r.copy(z1).addScaledVector(y_,g),y}intersectSphere(e,t){qa.subVectors(e.center,this.origin);const i=qa.dot(this.direction),r=qa.dot(qa)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,h=i+o;return h<0?null:a<0?this.at(h,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,h;const d=1/this.direction.x,p=1/this.direction.y,m=1/this.direction.z,g=this.origin;return d>=0?(i=(e.min.x-g.x)*d,r=(e.max.x-g.x)*d):(i=(e.max.x-g.x)*d,r=(e.min.x-g.x)*d),p>=0?(s=(e.min.y-g.y)*p,o=(e.max.y-g.y)*p):(s=(e.max.y-g.y)*p,o=(e.min.y-g.y)*p),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),m>=0?(a=(e.min.z-g.z)*m,h=(e.max.z-g.z)*m):(a=(e.max.z-g.z)*m,h=(e.min.z-g.z)*m),i>h||a>r)||((a>i||i!==i)&&(i=a),(h<r||r!==r)&&(r=h),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,qa)!==null}intersectTriangle(e,t,i,r,s){k1.subVectors(t,e),x_.subVectors(i,e),B1.crossVectors(k1,x_);let o=this.direction.dot(B1),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;$l.subVectors(this.origin,e);const h=a*this.direction.dot(x_.crossVectors($l,x_));if(h<0)return null;const d=a*this.direction.dot(k1.cross($l));if(d<0||h+d>o)return null;const p=-a*$l.dot(B1);return p<0?null:this.at(p/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class yt{constructor(e,t,i,r,s,o,a,h,d,p,m,g,y,S,A,w){yt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,h,d,p,m,g,y,S,A,w)}set(e,t,i,r,s,o,a,h,d,p,m,g,y,S,A,w){const _=this.elements;return _[0]=e,_[4]=t,_[8]=i,_[12]=r,_[1]=s,_[5]=o,_[9]=a,_[13]=h,_[2]=d,_[6]=p,_[10]=m,_[14]=g,_[3]=y,_[7]=S,_[11]=A,_[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new yt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/cf.setFromMatrixColumn(e,0).length(),s=1/cf.setFromMatrixColumn(e,1).length(),o=1/cf.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),h=Math.cos(r),d=Math.sin(r),p=Math.cos(s),m=Math.sin(s);if(e.order==="XYZ"){const g=o*p,y=o*m,S=a*p,A=a*m;t[0]=h*p,t[4]=-h*m,t[8]=d,t[1]=y+S*d,t[5]=g-A*d,t[9]=-a*h,t[2]=A-g*d,t[6]=S+y*d,t[10]=o*h}else if(e.order==="YXZ"){const g=h*p,y=h*m,S=d*p,A=d*m;t[0]=g+A*a,t[4]=S*a-y,t[8]=o*d,t[1]=o*m,t[5]=o*p,t[9]=-a,t[2]=y*a-S,t[6]=A+g*a,t[10]=o*h}else if(e.order==="ZXY"){const g=h*p,y=h*m,S=d*p,A=d*m;t[0]=g-A*a,t[4]=-o*m,t[8]=S+y*a,t[1]=y+S*a,t[5]=o*p,t[9]=A-g*a,t[2]=-o*d,t[6]=a,t[10]=o*h}else if(e.order==="ZYX"){const g=o*p,y=o*m,S=a*p,A=a*m;t[0]=h*p,t[4]=S*d-y,t[8]=g*d+A,t[1]=h*m,t[5]=A*d+g,t[9]=y*d-S,t[2]=-d,t[6]=a*h,t[10]=o*h}else if(e.order==="YZX"){const g=o*h,y=o*d,S=a*h,A=a*d;t[0]=h*p,t[4]=A-g*m,t[8]=S*m+y,t[1]=m,t[5]=o*p,t[9]=-a*p,t[2]=-d*p,t[6]=y*m+S,t[10]=g-A*m}else if(e.order==="XZY"){const g=o*h,y=o*d,S=a*h,A=a*d;t[0]=h*p,t[4]=-m,t[8]=d*p,t[1]=g*m+A,t[5]=o*p,t[9]=y*m-S,t[2]=S*m-y,t[6]=a*p,t[10]=A*m+g}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(c5,e,h5)}lookAt(e,t,i){const r=this.elements;return Is.subVectors(e,t),Is.lengthSq()===0&&(Is.z=1),Is.normalize(),eu.crossVectors(i,Is),eu.lengthSq()===0&&(Math.abs(i.z)===1?Is.x+=1e-4:Is.z+=1e-4,Is.normalize(),eu.crossVectors(i,Is)),eu.normalize(),S_.crossVectors(Is,eu),r[0]=eu.x,r[4]=S_.x,r[8]=Is.x,r[1]=eu.y,r[5]=S_.y,r[9]=Is.y,r[2]=eu.z,r[6]=S_.z,r[10]=Is.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],h=i[8],d=i[12],p=i[1],m=i[5],g=i[9],y=i[13],S=i[2],A=i[6],w=i[10],_=i[14],T=i[3],E=i[7],C=i[11],P=i[15],D=r[0],O=r[4],F=r[8],L=r[12],N=r[1],G=r[5],Q=r[9],le=r[13],Z=r[2],oe=r[6],me=r[10],de=r[14],Y=r[3],te=r[7],ee=r[11],ce=r[15];return s[0]=o*D+a*N+h*Z+d*Y,s[4]=o*O+a*G+h*oe+d*te,s[8]=o*F+a*Q+h*me+d*ee,s[12]=o*L+a*le+h*de+d*ce,s[1]=p*D+m*N+g*Z+y*Y,s[5]=p*O+m*G+g*oe+y*te,s[9]=p*F+m*Q+g*me+y*ee,s[13]=p*L+m*le+g*de+y*ce,s[2]=S*D+A*N+w*Z+_*Y,s[6]=S*O+A*G+w*oe+_*te,s[10]=S*F+A*Q+w*me+_*ee,s[14]=S*L+A*le+w*de+_*ce,s[3]=T*D+E*N+C*Z+P*Y,s[7]=T*O+E*G+C*oe+P*te,s[11]=T*F+E*Q+C*me+P*ee,s[15]=T*L+E*le+C*de+P*ce,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],h=e[9],d=e[13],p=e[2],m=e[6],g=e[10],y=e[14],S=e[3],A=e[7],w=e[11],_=e[15];return S*(+s*h*m-r*d*m-s*a*g+i*d*g+r*a*y-i*h*y)+A*(+t*h*y-t*d*g+s*o*g-r*o*y+r*d*p-s*h*p)+w*(+t*d*m-t*a*y-s*o*m+i*o*y+s*a*p-i*d*p)+_*(-r*a*p-t*h*m+t*a*g+r*o*m-i*o*g+i*h*p)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],h=e[6],d=e[7],p=e[8],m=e[9],g=e[10],y=e[11],S=e[12],A=e[13],w=e[14],_=e[15],T=m*w*d-A*g*d+A*h*y-a*w*y-m*h*_+a*g*_,E=S*g*d-p*w*d-S*h*y+o*w*y+p*h*_-o*g*_,C=p*A*d-S*m*d+S*a*y-o*A*y-p*a*_+o*m*_,P=S*m*h-p*A*h-S*a*g+o*A*g+p*a*w-o*m*w,D=t*T+i*E+r*C+s*P;if(D===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const O=1/D;return e[0]=T*O,e[1]=(A*g*s-m*w*s-A*r*y+i*w*y+m*r*_-i*g*_)*O,e[2]=(a*w*s-A*h*s+A*r*d-i*w*d-a*r*_+i*h*_)*O,e[3]=(m*h*s-a*g*s-m*r*d+i*g*d+a*r*y-i*h*y)*O,e[4]=E*O,e[5]=(p*w*s-S*g*s+S*r*y-t*w*y-p*r*_+t*g*_)*O,e[6]=(S*h*s-o*w*s-S*r*d+t*w*d+o*r*_-t*h*_)*O,e[7]=(o*g*s-p*h*s+p*r*d-t*g*d-o*r*y+t*h*y)*O,e[8]=C*O,e[9]=(S*m*s-p*A*s-S*i*y+t*A*y+p*i*_-t*m*_)*O,e[10]=(o*A*s-S*a*s+S*i*d-t*A*d-o*i*_+t*a*_)*O,e[11]=(p*a*s-o*m*s-p*i*d+t*m*d+o*i*y-t*a*y)*O,e[12]=P*O,e[13]=(p*A*r-S*m*r+S*i*g-t*A*g-p*i*w+t*m*w)*O,e[14]=(S*a*r-o*A*r-S*i*h+t*A*h+o*i*w-t*a*w)*O,e[15]=(o*m*r-p*a*r+p*i*h-t*m*h-o*i*g+t*a*g)*O,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,h=e.z,d=s*o,p=s*a;return this.set(d*o+i,d*a-r*h,d*h+r*a,0,d*a+r*h,p*a+i,p*h-r*o,0,d*h-r*a,p*h+r*o,s*h*h+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,h=t._w,d=s+s,p=o+o,m=a+a,g=s*d,y=s*p,S=s*m,A=o*p,w=o*m,_=a*m,T=h*d,E=h*p,C=h*m,P=i.x,D=i.y,O=i.z;return r[0]=(1-(A+_))*P,r[1]=(y+C)*P,r[2]=(S-E)*P,r[3]=0,r[4]=(y-C)*D,r[5]=(1-(g+_))*D,r[6]=(w+T)*D,r[7]=0,r[8]=(S+E)*O,r[9]=(w-T)*O,r[10]=(1-(g+A))*O,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=cf.set(r[0],r[1],r[2]).length();const o=cf.set(r[4],r[5],r[6]).length(),a=cf.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Lo.copy(this);const d=1/s,p=1/o,m=1/a;return Lo.elements[0]*=d,Lo.elements[1]*=d,Lo.elements[2]*=d,Lo.elements[4]*=p,Lo.elements[5]*=p,Lo.elements[6]*=p,Lo.elements[8]*=m,Lo.elements[9]*=m,Lo.elements[10]*=m,t.setFromRotationMatrix(Lo),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Bo){const h=this.elements,d=2*s/(t-e),p=2*s/(i-r),m=(t+e)/(t-e),g=(i+r)/(i-r);let y,S;if(a===Bo)y=-(o+s)/(o-s),S=-2*o*s/(o-s);else if(a===vd)y=-o/(o-s),S=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return h[0]=d,h[4]=0,h[8]=m,h[12]=0,h[1]=0,h[5]=p,h[9]=g,h[13]=0,h[2]=0,h[6]=0,h[10]=y,h[14]=S,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Bo){const h=this.elements,d=1/(t-e),p=1/(i-r),m=1/(o-s),g=(t+e)*d,y=(i+r)*p;let S,A;if(a===Bo)S=(o+s)*m,A=-2*m;else if(a===vd)S=s*m,A=-1*m;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return h[0]=2*d,h[4]=0,h[8]=0,h[12]=-g,h[1]=0,h[5]=2*p,h[9]=0,h[13]=-y,h[2]=0,h[6]=0,h[10]=A,h[14]=-S,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const cf=new V,Lo=new yt,c5=new V(0,0,0),h5=new V(1,1,1),eu=new V,S_=new V,Is=new V,ZC=new yt,jC=new fr;class Cu{constructor(e=0,t=0,i=0,r=Cu.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],h=r[1],d=r[5],p=r[9],m=r[2],g=r[6],y=r[10];switch(t){case"XYZ":this._y=Math.asin(di(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-p,y),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(g,d),this._z=0);break;case"YXZ":this._x=Math.asin(-di(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(a,y),this._z=Math.atan2(h,d)):(this._y=Math.atan2(-m,s),this._z=0);break;case"ZXY":this._x=Math.asin(di(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-m,y),this._z=Math.atan2(-o,d)):(this._y=0,this._z=Math.atan2(h,s));break;case"ZYX":this._y=Math.asin(-di(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(g,y),this._z=Math.atan2(h,s)):(this._x=0,this._z=Math.atan2(-o,d));break;case"YZX":this._z=Math.asin(di(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-p,d),this._y=Math.atan2(-m,s)):(this._x=0,this._y=Math.atan2(a,y));break;case"XZY":this._z=Math.asin(-di(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(g,d),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-p,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return ZC.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ZC,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return jC.setFromEuler(this),this.setFromQuaternion(jC,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Cu.DEFAULT_ORDER="XYZ";class $c{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let f5=0;const KC=new V,hf=new fr,Za=new yt,w_=new V,Np=new V,d5=new V,p5=new fr,QC=new V(1,0,0),JC=new V(0,1,0),$C=new V(0,0,1),m5={type:"added"},g5={type:"removed"};class fn extends gl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:f5++}),this.uuid=ks(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=fn.DEFAULT_UP.clone();const e=new V,t=new Cu,i=new fr,r=new V(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new yt},normalMatrix:{value:new an}}),this.matrix=new yt,this.matrixWorld=new yt,this.matrixAutoUpdate=fn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=fn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new $c,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return hf.setFromAxisAngle(e,t),this.quaternion.multiply(hf),this}rotateOnWorldAxis(e,t){return hf.setFromAxisAngle(e,t),this.quaternion.premultiply(hf),this}rotateX(e){return this.rotateOnAxis(QC,e)}rotateY(e){return this.rotateOnAxis(JC,e)}rotateZ(e){return this.rotateOnAxis($C,e)}translateOnAxis(e,t){return KC.copy(e).applyQuaternion(this.quaternion),this.position.add(KC.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(QC,e)}translateY(e){return this.translateOnAxis(JC,e)}translateZ(e){return this.translateOnAxis($C,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Za.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?w_.copy(e):w_.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Np.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Za.lookAt(Np,w_,this.up):Za.lookAt(w_,Np,this.up),this.quaternion.setFromRotationMatrix(Za),r&&(Za.extractRotation(r.matrixWorld),hf.setFromRotationMatrix(Za),this.quaternion.premultiply(hf.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(m5)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(g5)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Za.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Za.multiply(e.parent.matrixWorld)),e.applyMatrix4(Za),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Np,e,d5),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Np,p5,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,h){return a[h.uuid]===void 0&&(a[h.uuid]=h.toJSON(e)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const h=a.shapes;if(Array.isArray(h))for(let d=0,p=h.length;d<p;d++){const m=h[d];s(e.shapes,m)}else s(e.shapes,h)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let h=0,d=this.material.length;h<d;h++)a.push(s(e.materials,this.material[h]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const h=this.animations[a];r.animations.push(s(e.animations,h))}}if(t){const a=o(e.geometries),h=o(e.materials),d=o(e.textures),p=o(e.images),m=o(e.shapes),g=o(e.skeletons),y=o(e.animations),S=o(e.nodes);a.length>0&&(i.geometries=a),h.length>0&&(i.materials=h),d.length>0&&(i.textures=d),p.length>0&&(i.images=p),m.length>0&&(i.shapes=m),g.length>0&&(i.skeletons=g),y.length>0&&(i.animations=y),S.length>0&&(i.nodes=S)}return i.object=r,i;function o(a){const h=[];for(const d in a){const p=a[d];delete p.metadata,h.push(p)}return h}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}fn.DEFAULT_UP=new V(0,1,0);fn.DEFAULT_MATRIX_AUTO_UPDATE=!0;fn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Io=new V,ja=new V,H1=new V,Ka=new V,ff=new V,df=new V,e2=new V,V1=new V,G1=new V,W1=new V;let E_=!1;class us{constructor(e=new V,t=new V,i=new V){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Io.subVectors(e,t),r.cross(Io);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Io.subVectors(r,t),ja.subVectors(i,t),H1.subVectors(e,t);const o=Io.dot(Io),a=Io.dot(ja),h=Io.dot(H1),d=ja.dot(ja),p=ja.dot(H1),m=o*d-a*a;if(m===0)return s.set(-2,-1,-1);const g=1/m,y=(d*h-a*p)*g,S=(o*p-a*h)*g;return s.set(1-y-S,S,y)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Ka),Ka.x>=0&&Ka.y>=0&&Ka.x+Ka.y<=1}static getUV(e,t,i,r,s,o,a,h){return E_===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),E_=!0),this.getInterpolation(e,t,i,r,s,o,a,h)}static getInterpolation(e,t,i,r,s,o,a,h){return this.getBarycoord(e,t,i,r,Ka),h.setScalar(0),h.addScaledVector(s,Ka.x),h.addScaledVector(o,Ka.y),h.addScaledVector(a,Ka.z),h}static isFrontFacing(e,t,i,r){return Io.subVectors(i,t),ja.subVectors(e,t),Io.cross(ja).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Io.subVectors(this.c,this.b),ja.subVectors(this.a,this.b),Io.cross(ja).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return us.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return us.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return E_===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),E_=!0),us.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}getInterpolation(e,t,i,r,s){return us.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return us.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return us.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;ff.subVectors(r,i),df.subVectors(s,i),V1.subVectors(e,i);const h=ff.dot(V1),d=df.dot(V1);if(h<=0&&d<=0)return t.copy(i);G1.subVectors(e,r);const p=ff.dot(G1),m=df.dot(G1);if(p>=0&&m<=p)return t.copy(r);const g=h*m-p*d;if(g<=0&&h>=0&&p<=0)return o=h/(h-p),t.copy(i).addScaledVector(ff,o);W1.subVectors(e,s);const y=ff.dot(W1),S=df.dot(W1);if(S>=0&&y<=S)return t.copy(s);const A=y*d-h*S;if(A<=0&&d>=0&&S<=0)return a=d/(d-S),t.copy(i).addScaledVector(df,a);const w=p*S-y*m;if(w<=0&&m-p>=0&&y-S>=0)return e2.subVectors(s,r),a=(m-p)/(m-p+(y-S)),t.copy(r).addScaledVector(e2,a);const _=1/(w+A+g);return o=A*_,a=g*_,t.copy(i).addScaledVector(ff,o).addScaledVector(df,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const DL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},tu={h:0,s:0,l:0},M_={h:0,s:0,l:0};function X1(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class it{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Vi){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Rn.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Rn.workingColorSpace){return this.r=e,this.g=t,this.b=i,Rn.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Rn.workingColorSpace){if(e=XM(e,1),t=di(t,0,1),i=di(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=X1(o,s,e+1/3),this.g=X1(o,s,e),this.b=X1(o,s,e-1/3)}return Rn.toWorkingColorSpace(this,r),this}setStyle(e,t=Vi){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Vi){const i=DL[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ad(e.r),this.g=ad(e.g),this.b=ad(e.b),this}copyLinearToSRGB(e){return this.r=O1(e.r),this.g=O1(e.g),this.b=O1(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Vi){return Rn.fromWorkingColorSpace(Mr.copy(this),e),Math.round(di(Mr.r*255,0,255))*65536+Math.round(di(Mr.g*255,0,255))*256+Math.round(di(Mr.b*255,0,255))}getHexString(e=Vi){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Rn.workingColorSpace){Rn.fromWorkingColorSpace(Mr.copy(this),t);const i=Mr.r,r=Mr.g,s=Mr.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let h,d;const p=(a+o)/2;if(a===o)h=0,d=0;else{const m=o-a;switch(d=p<=.5?m/(o+a):m/(2-o-a),o){case i:h=(r-s)/m+(r<s?6:0);break;case r:h=(s-i)/m+2;break;case s:h=(i-r)/m+4;break}h/=6}return e.h=h,e.s=d,e.l=p,e}getRGB(e,t=Rn.workingColorSpace){return Rn.fromWorkingColorSpace(Mr.copy(this),t),e.r=Mr.r,e.g=Mr.g,e.b=Mr.b,e}getStyle(e=Vi){Rn.fromWorkingColorSpace(Mr.copy(this),e);const t=Mr.r,i=Mr.g,r=Mr.b;return e!==Vi?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(tu),this.setHSL(tu.h+e,tu.s+t,tu.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(tu),e.getHSL(M_);const i=Sm(tu.h,M_.h,t),r=Sm(tu.s,M_.s,t),s=Sm(tu.l,M_.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Mr=new it;it.NAMES=DL;let _5=0;class mr extends gl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_5++}),this.uuid=ks(),this.name="",this.type="Material",this.blending=Qc,this.side=fl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=ly,this.blendDst=uy,this.blendEquation=hu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new it(0,0,0),this.blendAlpha=0,this.depthFunc=Ym,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=fE,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Fc,this.stencilZFail=Fc,this.stencilZPass=Fc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Qc&&(i.blending=this.blending),this.side!==fl&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==ly&&(i.blendSrc=this.blendSrc),this.blendDst!==uy&&(i.blendDst=this.blendDst),this.blendEquation!==hu&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Ym&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==fE&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Fc&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Fc&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Fc&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const h=s[a];delete h.metadata,o.push(h)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class zu extends mr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new it(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=bg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const nl=v5();function v5(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let h=0;h<256;++h){const d=h-127;d<-27?(i[h]=0,i[h|256]=32768,r[h]=24,r[h|256]=24):d<-14?(i[h]=1024>>-d-14,i[h|256]=1024>>-d-14|32768,r[h]=-d-1,r[h|256]=-d-1):d<=15?(i[h]=d+15<<10,i[h|256]=d+15<<10|32768,r[h]=13,r[h|256]=13):d<128?(i[h]=31744,i[h|256]=64512,r[h]=24,r[h|256]=24):(i[h]=31744,i[h|256]=64512,r[h]=13,r[h|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let h=1;h<1024;++h){let d=h<<13,p=0;for(;!(d&8388608);)d<<=1,p-=8388608;d&=-8388609,p+=947912704,s[h]=d|p}for(let h=1024;h<2048;++h)s[h]=939524096+(h-1024<<13);for(let h=1;h<31;++h)o[h]=h<<23;o[31]=1199570944,o[32]=2147483648;for(let h=33;h<63;++h)o[h]=2147483648+(h-32<<23);o[63]=3347054592;for(let h=1;h<64;++h)h!==32&&(a[h]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function ss(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=di(n,-65504,65504),nl.floatView[0]=n;const e=nl.uint32View[0],t=e>>23&511;return nl.baseTable[t]+((e&8388607)>>nl.shiftTable[t])}function om(n){const e=n>>10;return nl.uint32View[0]=nl.mantissaTable[nl.offsetTable[e]+(n&1023)]+nl.exponentTable[e],nl.floatView[0]}const y5={toHalfFloat:ss,fromHalfFloat:om},Oi=new V,T_=new Pe;class Pn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=ig,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=fo,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn('THREE.BufferAttribute: "updateRange" is deprecated and removed in r169. Use "addUpdateRange()" instead.'),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)T_.fromBufferAttribute(this,t),T_.applyMatrix3(e),this.setXY(t,T_.x,T_.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Oi.fromBufferAttribute(this,t),Oi.applyMatrix3(e),this.setXYZ(t,Oi.x,Oi.y,Oi.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Oi.fromBufferAttribute(this,t),Oi.applyMatrix4(e),this.setXYZ(t,Oi.x,Oi.y,Oi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Oi.fromBufferAttribute(this,t),Oi.applyNormalMatrix(e),this.setXYZ(t,Oi.x,Oi.y,Oi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Oi.fromBufferAttribute(this,t),Oi.transformDirection(e),this.setXYZ(t,Oi.x,Oi.y,Oi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=cs(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=nn(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=cs(t,this.array)),t}setX(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=cs(t,this.array)),t}setY(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=cs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=cs(t,this.array)),t}setW(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array),r=nn(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array),r=nn(r,this.array),s=nn(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==ig&&(e.usage=this.usage),e}}class x5 extends Pn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class S5 extends Pn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class w5 extends Pn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class E5 extends Pn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class ZM extends Pn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class M5 extends Pn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class jM extends Pn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class T5 extends Pn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=om(this.array[e*this.itemSize]);return this.normalized&&(t=cs(t,this.array)),t}setX(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize]=ss(t),this}getY(e){let t=om(this.array[e*this.itemSize+1]);return this.normalized&&(t=cs(t,this.array)),t}setY(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+1]=ss(t),this}getZ(e){let t=om(this.array[e*this.itemSize+2]);return this.normalized&&(t=cs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+2]=ss(t),this}getW(e){let t=om(this.array[e*this.itemSize+3]);return this.normalized&&(t=cs(t,this.array)),t}setW(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+3]=ss(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array)),this.array[e+0]=ss(t),this.array[e+1]=ss(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array),r=nn(r,this.array)),this.array[e+0]=ss(t),this.array[e+1]=ss(i),this.array[e+2]=ss(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array),r=nn(r,this.array),s=nn(s,this.array)),this.array[e+0]=ss(t),this.array[e+1]=ss(i),this.array[e+2]=ss(r),this.array[e+3]=ss(s),this}}class gt extends Pn{constructor(e,t,i){super(new Float32Array(e),t,i)}}class A5 extends Pn{constructor(e,t,i){super(new Float64Array(e),t,i)}}let C5=0;const ro=new yt,Y1=new fn,pf=new V,Os=new Rr,Fp=new Rr,ir=new V;class rn extends gl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:C5++}),this.uuid=ks(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(LL(e)?jM:ZM)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new an().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ro.makeRotationFromQuaternion(e),this.applyMatrix4(ro),this}rotateX(e){return ro.makeRotationX(e),this.applyMatrix4(ro),this}rotateY(e){return ro.makeRotationY(e),this.applyMatrix4(ro),this}rotateZ(e){return ro.makeRotationZ(e),this.applyMatrix4(ro),this}translate(e,t,i){return ro.makeTranslation(e,t,i),this.applyMatrix4(ro),this}scale(e,t,i){return ro.makeScale(e,t,i),this.applyMatrix4(ro),this}lookAt(e){return Y1.lookAt(e),Y1.updateMatrix(),this.applyMatrix4(Y1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(pf).negate(),this.translate(pf.x,pf.y,pf.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new gt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Rr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new V(-1/0,-1/0,-1/0),new V(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Os.setFromBufferAttribute(s),this.morphTargetsRelative?(ir.addVectors(this.boundingBox.min,Os.min),this.boundingBox.expandByPoint(ir),ir.addVectors(this.boundingBox.max,Os.max),this.boundingBox.expandByPoint(ir)):(this.boundingBox.expandByPoint(Os.min),this.boundingBox.expandByPoint(Os.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new dr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new V,1/0);return}if(e){const i=this.boundingSphere.center;if(Os.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Fp.setFromBufferAttribute(a),this.morphTargetsRelative?(ir.addVectors(Os.min,Fp.min),Os.expandByPoint(ir),ir.addVectors(Os.max,Fp.max),Os.expandByPoint(ir)):(Os.expandByPoint(Fp.min),Os.expandByPoint(Fp.max))}Os.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)ir.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(ir));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],h=this.morphTargetsRelative;for(let d=0,p=a.count;d<p;d++)ir.fromBufferAttribute(a,d),h&&(pf.fromBufferAttribute(e,d),ir.add(pf)),r=Math.max(r,i.distanceToSquared(ir))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Pn(new Float32Array(4*a),4));const h=this.getAttribute("tangent").array,d=[],p=[];for(let N=0;N<a;N++)d[N]=new V,p[N]=new V;const m=new V,g=new V,y=new V,S=new Pe,A=new Pe,w=new Pe,_=new V,T=new V;function E(N,G,Q){m.fromArray(r,N*3),g.fromArray(r,G*3),y.fromArray(r,Q*3),S.fromArray(o,N*2),A.fromArray(o,G*2),w.fromArray(o,Q*2),g.sub(m),y.sub(m),A.sub(S),w.sub(S);const le=1/(A.x*w.y-w.x*A.y);isFinite(le)&&(_.copy(g).multiplyScalar(w.y).addScaledVector(y,-A.y).multiplyScalar(le),T.copy(y).multiplyScalar(A.x).addScaledVector(g,-w.x).multiplyScalar(le),d[N].add(_),d[G].add(_),d[Q].add(_),p[N].add(T),p[G].add(T),p[Q].add(T))}let C=this.groups;C.length===0&&(C=[{start:0,count:i.length}]);for(let N=0,G=C.length;N<G;++N){const Q=C[N],le=Q.start,Z=Q.count;for(let oe=le,me=le+Z;oe<me;oe+=3)E(i[oe+0],i[oe+1],i[oe+2])}const P=new V,D=new V,O=new V,F=new V;function L(N){O.fromArray(s,N*3),F.copy(O);const G=d[N];P.copy(G),P.sub(O.multiplyScalar(O.dot(G))).normalize(),D.crossVectors(F,G);const le=D.dot(p[N])<0?-1:1;h[N*4]=P.x,h[N*4+1]=P.y,h[N*4+2]=P.z,h[N*4+3]=le}for(let N=0,G=C.length;N<G;++N){const Q=C[N],le=Q.start,Z=Q.count;for(let oe=le,me=le+Z;oe<me;oe+=3)L(i[oe+0]),L(i[oe+1]),L(i[oe+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Pn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let g=0,y=i.count;g<y;g++)i.setXYZ(g,0,0,0);const r=new V,s=new V,o=new V,a=new V,h=new V,d=new V,p=new V,m=new V;if(e)for(let g=0,y=e.count;g<y;g+=3){const S=e.getX(g+0),A=e.getX(g+1),w=e.getX(g+2);r.fromBufferAttribute(t,S),s.fromBufferAttribute(t,A),o.fromBufferAttribute(t,w),p.subVectors(o,s),m.subVectors(r,s),p.cross(m),a.fromBufferAttribute(i,S),h.fromBufferAttribute(i,A),d.fromBufferAttribute(i,w),a.add(p),h.add(p),d.add(p),i.setXYZ(S,a.x,a.y,a.z),i.setXYZ(A,h.x,h.y,h.z),i.setXYZ(w,d.x,d.y,d.z)}else for(let g=0,y=t.count;g<y;g+=3)r.fromBufferAttribute(t,g+0),s.fromBufferAttribute(t,g+1),o.fromBufferAttribute(t,g+2),p.subVectors(o,s),m.subVectors(r,s),p.cross(m),i.setXYZ(g+0,p.x,p.y,p.z),i.setXYZ(g+1,p.x,p.y,p.z),i.setXYZ(g+2,p.x,p.y,p.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)ir.fromBufferAttribute(e,t),ir.normalize(),e.setXYZ(t,ir.x,ir.y,ir.z)}toNonIndexed(){function e(a,h){const d=a.array,p=a.itemSize,m=a.normalized,g=new d.constructor(h.length*p);let y=0,S=0;for(let A=0,w=h.length;A<w;A++){a.isInterleavedBufferAttribute?y=h[A]*a.data.stride+a.offset:y=h[A]*p;for(let _=0;_<p;_++)g[S++]=d[y++]}return new Pn(g,p,m)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new rn,i=this.index.array,r=this.attributes;for(const a in r){const h=r[a],d=e(h,i);t.setAttribute(a,d)}const s=this.morphAttributes;for(const a in s){const h=[],d=s[a];for(let p=0,m=d.length;p<m;p++){const g=d[p],y=e(g,i);h.push(y)}t.morphAttributes[a]=h}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,h=o.length;a<h;a++){const d=o[a];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const d in h)h[d]!==void 0&&(e[d]=h[d]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const h in i){const d=i[h];e.data.attributes[h]=d.toJSON(e.data)}const r={};let s=!1;for(const h in this.morphAttributes){const d=this.morphAttributes[h],p=[];for(let m=0,g=d.length;m<g;m++){const y=d[m];p.push(y.toJSON(e.data))}p.length>0&&(r[h]=p,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const d in r){const p=r[d];this.setAttribute(d,p.clone(t))}const s=e.morphAttributes;for(const d in s){const p=[],m=s[d];for(let g=0,y=m.length;g<y;g++)p.push(m[g].clone(t));this.morphAttributes[d]=p}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let d=0,p=o.length;d<p;d++){const m=o[d];this.addGroup(m.start,m.count,m.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const t2=new yt,Tc=new Rd,A_=new dr,n2=new V,mf=new V,gf=new V,_f=new V,q1=new V,C_=new V,R_=new Pe,b_=new Pe,P_=new Pe,i2=new V,r2=new V,s2=new V,L_=new V,I_=new V;class Wi extends fn{constructor(e=new rn,t=new zu){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){C_.set(0,0,0);for(let h=0,d=s.length;h<d;h++){const p=a[h],m=s[h];p!==0&&(q1.fromBufferAttribute(m,e),o?C_.addScaledVector(q1,p):C_.addScaledVector(q1.sub(t),p))}t.add(C_)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),A_.copy(i.boundingSphere),A_.applyMatrix4(s),Tc.copy(e.ray).recast(e.near),!(A_.containsPoint(Tc.origin)===!1&&(Tc.intersectSphere(A_,n2)===null||Tc.origin.distanceToSquared(n2)>(e.far-e.near)**2))&&(t2.copy(s).invert(),Tc.copy(e.ray).applyMatrix4(t2),!(i.boundingBox!==null&&Tc.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Tc)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,h=s.attributes.position,d=s.attributes.uv,p=s.attributes.uv1,m=s.attributes.normal,g=s.groups,y=s.drawRange;if(a!==null)if(Array.isArray(o))for(let S=0,A=g.length;S<A;S++){const w=g[S],_=o[w.materialIndex],T=Math.max(w.start,y.start),E=Math.min(a.count,Math.min(w.start+w.count,y.start+y.count));for(let C=T,P=E;C<P;C+=3){const D=a.getX(C),O=a.getX(C+1),F=a.getX(C+2);r=O_(this,_,e,i,d,p,m,D,O,F),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=w.materialIndex,t.push(r))}}else{const S=Math.max(0,y.start),A=Math.min(a.count,y.start+y.count);for(let w=S,_=A;w<_;w+=3){const T=a.getX(w),E=a.getX(w+1),C=a.getX(w+2);r=O_(this,o,e,i,d,p,m,T,E,C),r&&(r.faceIndex=Math.floor(w/3),t.push(r))}}else if(h!==void 0)if(Array.isArray(o))for(let S=0,A=g.length;S<A;S++){const w=g[S],_=o[w.materialIndex],T=Math.max(w.start,y.start),E=Math.min(h.count,Math.min(w.start+w.count,y.start+y.count));for(let C=T,P=E;C<P;C+=3){const D=C,O=C+1,F=C+2;r=O_(this,_,e,i,d,p,m,D,O,F),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=w.materialIndex,t.push(r))}}else{const S=Math.max(0,y.start),A=Math.min(h.count,y.start+y.count);for(let w=S,_=A;w<_;w+=3){const T=w,E=w+1,C=w+2;r=O_(this,o,e,i,d,p,m,T,E,C),r&&(r.faceIndex=Math.floor(w/3),t.push(r))}}}}function R5(n,e,t,i,r,s,o,a){let h;if(e.side===Xr?h=i.intersectTriangle(o,s,r,!0,a):h=i.intersectTriangle(r,s,o,e.side===fl,a),h===null)return null;I_.copy(a),I_.applyMatrix4(n.matrixWorld);const d=t.ray.origin.distanceTo(I_);return d<t.near||d>t.far?null:{distance:d,point:I_.clone(),object:n}}function O_(n,e,t,i,r,s,o,a,h,d){n.getVertexPosition(a,mf),n.getVertexPosition(h,gf),n.getVertexPosition(d,_f);const p=R5(n,e,t,i,mf,gf,_f,L_);if(p){r&&(R_.fromBufferAttribute(r,a),b_.fromBufferAttribute(r,h),P_.fromBufferAttribute(r,d),p.uv=us.getInterpolation(L_,mf,gf,_f,R_,b_,P_,new Pe)),s&&(R_.fromBufferAttribute(s,a),b_.fromBufferAttribute(s,h),P_.fromBufferAttribute(s,d),p.uv1=us.getInterpolation(L_,mf,gf,_f,R_,b_,P_,new Pe),p.uv2=p.uv1),o&&(i2.fromBufferAttribute(o,a),r2.fromBufferAttribute(o,h),s2.fromBufferAttribute(o,d),p.normal=us.getInterpolation(L_,mf,gf,_f,i2,r2,s2,new V),p.normal.dot(i.direction)>0&&p.normal.multiplyScalar(-1));const m={a,b:h,c:d,normal:new V,materialIndex:0};us.getNormal(mf,gf,_f,m.normal),p.face=m}return p}class ku extends rn{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const h=[],d=[],p=[],m=[];let g=0,y=0;S("z","y","x",-1,-1,i,t,e,o,s,0),S("z","y","x",1,-1,i,t,-e,o,s,1),S("x","z","y",1,1,e,i,t,r,o,2),S("x","z","y",1,-1,e,i,-t,r,o,3),S("x","y","z",1,-1,e,t,i,r,s,4),S("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(h),this.setAttribute("position",new gt(d,3)),this.setAttribute("normal",new gt(p,3)),this.setAttribute("uv",new gt(m,2));function S(A,w,_,T,E,C,P,D,O,F,L){const N=C/O,G=P/F,Q=C/2,le=P/2,Z=D/2,oe=O+1,me=F+1;let de=0,Y=0;const te=new V;for(let ee=0;ee<me;ee++){const ce=ee*G-le;for(let ve=0;ve<oe;ve++){const he=ve*N-Q;te[A]=he*T,te[w]=ce*E,te[_]=Z,d.push(te.x,te.y,te.z),te[A]=0,te[w]=0,te[_]=D>0?1:-1,p.push(te.x,te.y,te.z),m.push(ve/O),m.push(1-ee/F),de+=1}}for(let ee=0;ee<F;ee++)for(let ce=0;ce<O;ce++){const ve=g+ce+oe*ee,he=g+ce+oe*(ee+1),Me=g+(ce+1)+oe*(ee+1),Ie=g+(ce+1)+oe*ee;h.push(ve,he,Ie),h.push(he,Me,Ie),Y+=6}a.addGroup(y,Y,L),y+=Y,g+=de}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ku(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function xd(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Hr(n){const e={};for(let t=0;t<n.length;t++){const i=xd(n[t]);for(const r in i)e[r]=i[r]}return e}function b5(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function UL(n){return n.getRenderTarget()===null?n.outputColorSpace:Rn.workingColorSpace}const NL={clone:xd,merge:Hr};var P5=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,L5=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ma extends mr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=P5,this.fragmentShader=L5,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=xd(e.uniforms),this.uniformsGroups=b5(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Lg extends fn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new yt,this.projectionMatrix=new yt,this.projectionMatrixInverse=new yt,this.coordinateSystem=Bo}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class sr extends Lg{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=yd*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Jc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return yd*2*Math.atan(Math.tan(Jc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Jc*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const h=o.fullWidth,d=o.fullHeight;s+=o.offsetX*r/h,t-=o.offsetY*i/d,r*=o.width/h,i*=o.height/d}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const vf=-90,yf=1;class FL extends fn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new sr(vf,yf,e,t);r.layers=this.layers,this.add(r);const s=new sr(vf,yf,e,t);s.layers=this.layers,this.add(s);const o=new sr(vf,yf,e,t);o.layers=this.layers,this.add(o);const a=new sr(vf,yf,e,t);a.layers=this.layers,this.add(a);const h=new sr(vf,yf,e,t);h.layers=this.layers,this.add(h);const d=new sr(vf,yf,e,t);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,h]=t;for(const d of t)this.remove(d);if(e===Bo)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),h.up.set(0,1,0),h.lookAt(0,0,-1);else if(e===vd)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),h.up.set(0,-1,0),h.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const d of t)this.add(d),d.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,h,d,p]=this.children,m=e.getRenderTarget(),g=e.getActiveCubeFace(),y=e.getActiveMipmapLevel(),S=e.xr.enabled;e.xr.enabled=!1;const A=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,h),e.setRenderTarget(i,4,r),e.render(t,d),i.texture.generateMipmaps=A,e.setRenderTarget(i,5,r),e.render(t,p),e.setRenderTarget(m,g,y),e.xr.enabled=S,i.texture.needsPMREMUpdate=!0}}class Ig extends pi{constructor(e,t,i,r,s,o,a,h,d,p){e=e!==void 0?e:[],t=t!==void 0?t:dl,super(e,t,i,r,s,o,a,h,d,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class zL extends _o{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];t.encoding!==void 0&&(wm("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Au?Vi:Us),this.texture=new Ig(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:ni}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new ku(5,5,5),s=new Ma({name:"CubemapFromEquirect",uniforms:xd(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Xr,blending:al});s.uniforms.tEquirect.value=t;const o=new Wi(r,s),a=t.minFilter;return t.minFilter===Iu&&(t.minFilter=ni),new FL(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const Z1=new V,I5=new V,O5=new an;class lu{constructor(e=new V(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=Z1.subVectors(i,t).cross(I5.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(Z1),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||O5.getNormalMatrix(e),r=this.coplanarPoint(Z1).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ac=new dr,D_=new V;class Og{constructor(e=new lu,t=new lu,i=new lu,r=new lu,s=new lu,o=new lu){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Bo){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],h=r[3],d=r[4],p=r[5],m=r[6],g=r[7],y=r[8],S=r[9],A=r[10],w=r[11],_=r[12],T=r[13],E=r[14],C=r[15];if(i[0].setComponents(h-s,g-d,w-y,C-_).normalize(),i[1].setComponents(h+s,g+d,w+y,C+_).normalize(),i[2].setComponents(h+o,g+p,w+S,C+T).normalize(),i[3].setComponents(h-o,g-p,w-S,C-T).normalize(),i[4].setComponents(h-a,g-m,w-A,C-E).normalize(),t===Bo)i[5].setComponents(h+a,g+m,w+A,C+E).normalize();else if(t===vd)i[5].setComponents(a,m,A,E).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ac.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Ac.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ac)}intersectsSprite(e){return Ac.center.set(0,0,0),Ac.radius=.7071067811865476,Ac.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ac)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(D_.x=r.normal.x>0?e.max.x:e.min.x,D_.y=r.normal.y>0?e.max.y:e.min.y,D_.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(D_)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function kL(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function D5(n,e){const t=e.isWebGL2,i=new WeakMap;function r(d,p){const m=d.array,g=d.usage,y=m.byteLength,S=n.createBuffer();n.bindBuffer(p,S),n.bufferData(p,m,g),d.onUploadCallback();let A;if(m instanceof Float32Array)A=n.FLOAT;else if(m instanceof Uint16Array)if(d.isFloat16BufferAttribute)if(t)A=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else A=n.UNSIGNED_SHORT;else if(m instanceof Int16Array)A=n.SHORT;else if(m instanceof Uint32Array)A=n.UNSIGNED_INT;else if(m instanceof Int32Array)A=n.INT;else if(m instanceof Int8Array)A=n.BYTE;else if(m instanceof Uint8Array)A=n.UNSIGNED_BYTE;else if(m instanceof Uint8ClampedArray)A=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+m);return{buffer:S,type:A,bytesPerElement:m.BYTES_PER_ELEMENT,version:d.version,size:y}}function s(d,p,m){const g=p.array,y=p._updateRange,S=p.updateRanges;if(n.bindBuffer(m,d),y.count===-1&&S.length===0&&n.bufferSubData(m,0,g),S.length!==0){for(let A=0,w=S.length;A<w;A++){const _=S[A];t?n.bufferSubData(m,_.start*g.BYTES_PER_ELEMENT,g,_.start,_.count):n.bufferSubData(m,_.start*g.BYTES_PER_ELEMENT,g.subarray(_.start,_.start+_.count))}p.clearUpdateRanges()}y.count!==-1&&(t?n.bufferSubData(m,y.offset*g.BYTES_PER_ELEMENT,g,y.offset,y.count):n.bufferSubData(m,y.offset*g.BYTES_PER_ELEMENT,g.subarray(y.offset,y.offset+y.count)),y.count=-1),p.onUploadCallback()}function o(d){return d.isInterleavedBufferAttribute&&(d=d.data),i.get(d)}function a(d){d.isInterleavedBufferAttribute&&(d=d.data);const p=i.get(d);p&&(n.deleteBuffer(p.buffer),i.delete(d))}function h(d,p){if(d.isGLBufferAttribute){const g=i.get(d);(!g||g.version<d.version)&&i.set(d,{buffer:d.buffer,type:d.type,bytesPerElement:d.elementSize,version:d.version});return}d.isInterleavedBufferAttribute&&(d=d.data);const m=i.get(d);if(m===void 0)i.set(d,r(d,p));else if(m.version<d.version){if(m.size!==d.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(m.buffer,d,p),m.version=d.version}}return{get:o,remove:a,update:h}}class Dg extends rn{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),h=Math.floor(r),d=a+1,p=h+1,m=e/a,g=t/h,y=[],S=[],A=[],w=[];for(let _=0;_<p;_++){const T=_*g-o;for(let E=0;E<d;E++){const C=E*m-s;S.push(C,-T,0),A.push(0,0,1),w.push(E/a),w.push(1-_/h)}}for(let _=0;_<h;_++)for(let T=0;T<a;T++){const E=T+d*_,C=T+d*(_+1),P=T+1+d*(_+1),D=T+1+d*_;y.push(E,C,D),y.push(C,P,D)}this.setIndex(y),this.setAttribute("position",new gt(S,3)),this.setAttribute("normal",new gt(A,3)),this.setAttribute("uv",new gt(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dg(e.width,e.height,e.widthSegments,e.heightSegments)}}var U5=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,N5=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,F5=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,z5=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,k5=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,B5=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,H5=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,V5=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,G5=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,W5=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,X5=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Y5=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,q5=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Z5=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,j5=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,K5=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Q5=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,J5=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,$5=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,eH=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,tH=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,nH=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,iH=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,rH=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,sH=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,oH=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,aH=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,lH=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,uH=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,cH=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,hH="gl_FragColor = linearToOutputTexel( gl_FragColor );",fH=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,dH=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,pH=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,mH=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,gH=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,_H=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,vH=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,yH=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,xH=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,SH=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,wH=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,EH=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,MH=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,TH=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,AH=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,CH=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,RH=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,bH=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,PH=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,LH=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,IH=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,OH=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,DH=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,UH=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,NH=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,FH=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,zH=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,kH=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,BH=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,HH=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,VH=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,GH=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,WH=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,XH=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,YH=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,qH=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,ZH=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,jH=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,KH=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,QH=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,JH=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,$H=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,eV=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,tV=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,nV=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,iV=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,rV=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,sV=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,oV=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,aV=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,lV=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,uV=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,cV=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,hV=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,fV=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dV=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,pV=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,mV=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,gV=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,_V=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,vV=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,yV=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,xV=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,SV=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,wV=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,EV=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,MV=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,TV=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,AV=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,CV=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,RV=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,bV=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,PV=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,LV=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,IV=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,OV=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const DV=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,UV=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,NV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,FV=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,zV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,kV=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,BV=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,HV=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,VV=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,GV=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,WV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,XV=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,YV=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,qV=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ZV=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,jV=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,KV=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,QV=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,JV=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,$V=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,e8=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,t8=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,n8=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,i8=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,r8=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,s8=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,o8=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,a8=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,l8=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,u8=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,c8=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,h8=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,f8=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,d8=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,tn={alphahash_fragment:U5,alphahash_pars_fragment:N5,alphamap_fragment:F5,alphamap_pars_fragment:z5,alphatest_fragment:k5,alphatest_pars_fragment:B5,aomap_fragment:H5,aomap_pars_fragment:V5,batching_pars_vertex:G5,batching_vertex:W5,begin_vertex:X5,beginnormal_vertex:Y5,bsdfs:q5,iridescence_fragment:Z5,bumpmap_pars_fragment:j5,clipping_planes_fragment:K5,clipping_planes_pars_fragment:Q5,clipping_planes_pars_vertex:J5,clipping_planes_vertex:$5,color_fragment:eH,color_pars_fragment:tH,color_pars_vertex:nH,color_vertex:iH,common:rH,cube_uv_reflection_fragment:sH,defaultnormal_vertex:oH,displacementmap_pars_vertex:aH,displacementmap_vertex:lH,emissivemap_fragment:uH,emissivemap_pars_fragment:cH,colorspace_fragment:hH,colorspace_pars_fragment:fH,envmap_fragment:dH,envmap_common_pars_fragment:pH,envmap_pars_fragment:mH,envmap_pars_vertex:gH,envmap_physical_pars_fragment:RH,envmap_vertex:_H,fog_vertex:vH,fog_pars_vertex:yH,fog_fragment:xH,fog_pars_fragment:SH,gradientmap_pars_fragment:wH,lightmap_fragment:EH,lightmap_pars_fragment:MH,lights_lambert_fragment:TH,lights_lambert_pars_fragment:AH,lights_pars_begin:CH,lights_toon_fragment:bH,lights_toon_pars_fragment:PH,lights_phong_fragment:LH,lights_phong_pars_fragment:IH,lights_physical_fragment:OH,lights_physical_pars_fragment:DH,lights_fragment_begin:UH,lights_fragment_maps:NH,lights_fragment_end:FH,logdepthbuf_fragment:zH,logdepthbuf_pars_fragment:kH,logdepthbuf_pars_vertex:BH,logdepthbuf_vertex:HH,map_fragment:VH,map_pars_fragment:GH,map_particle_fragment:WH,map_particle_pars_fragment:XH,metalnessmap_fragment:YH,metalnessmap_pars_fragment:qH,morphcolor_vertex:ZH,morphnormal_vertex:jH,morphtarget_pars_vertex:KH,morphtarget_vertex:QH,normal_fragment_begin:JH,normal_fragment_maps:$H,normal_pars_fragment:eV,normal_pars_vertex:tV,normal_vertex:nV,normalmap_pars_fragment:iV,clearcoat_normal_fragment_begin:rV,clearcoat_normal_fragment_maps:sV,clearcoat_pars_fragment:oV,iridescence_pars_fragment:aV,opaque_fragment:lV,packing:uV,premultiplied_alpha_fragment:cV,project_vertex:hV,dithering_fragment:fV,dithering_pars_fragment:dV,roughnessmap_fragment:pV,roughnessmap_pars_fragment:mV,shadowmap_pars_fragment:gV,shadowmap_pars_vertex:_V,shadowmap_vertex:vV,shadowmask_pars_fragment:yV,skinbase_vertex:xV,skinning_pars_vertex:SV,skinning_vertex:wV,skinnormal_vertex:EV,specularmap_fragment:MV,specularmap_pars_fragment:TV,tonemapping_fragment:AV,tonemapping_pars_fragment:CV,transmission_fragment:RV,transmission_pars_fragment:bV,uv_pars_fragment:PV,uv_pars_vertex:LV,uv_vertex:IV,worldpos_vertex:OV,background_vert:DV,background_frag:UV,backgroundCube_vert:NV,backgroundCube_frag:FV,cube_vert:zV,cube_frag:kV,depth_vert:BV,depth_frag:HV,distanceRGBA_vert:VV,distanceRGBA_frag:GV,equirect_vert:WV,equirect_frag:XV,linedashed_vert:YV,linedashed_frag:qV,meshbasic_vert:ZV,meshbasic_frag:jV,meshlambert_vert:KV,meshlambert_frag:QV,meshmatcap_vert:JV,meshmatcap_frag:$V,meshnormal_vert:e8,meshnormal_frag:t8,meshphong_vert:n8,meshphong_frag:i8,meshphysical_vert:r8,meshphysical_frag:s8,meshtoon_vert:o8,meshtoon_frag:a8,points_vert:l8,points_frag:u8,shadow_vert:c8,shadow_frag:h8,sprite_vert:f8,sprite_frag:d8},Ze={common:{diffuse:{value:new it(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new an},alphaMap:{value:null},alphaMapTransform:{value:new an},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new an}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new an}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new an}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new an},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new an},normalScale:{value:new Pe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new an},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new an}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new an}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new an}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new it(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new it(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new an},alphaTest:{value:0},uvTransform:{value:new an}},sprite:{diffuse:{value:new it(16777215)},opacity:{value:1},center:{value:new Pe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new an},alphaMap:{value:null},alphaMapTransform:{value:new an},alphaTest:{value:0}}},zo={basic:{uniforms:Hr([Ze.common,Ze.specularmap,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.fog]),vertexShader:tn.meshbasic_vert,fragmentShader:tn.meshbasic_frag},lambert:{uniforms:Hr([Ze.common,Ze.specularmap,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.fog,Ze.lights,{emissive:{value:new it(0)}}]),vertexShader:tn.meshlambert_vert,fragmentShader:tn.meshlambert_frag},phong:{uniforms:Hr([Ze.common,Ze.specularmap,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.fog,Ze.lights,{emissive:{value:new it(0)},specular:{value:new it(1118481)},shininess:{value:30}}]),vertexShader:tn.meshphong_vert,fragmentShader:tn.meshphong_frag},standard:{uniforms:Hr([Ze.common,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.roughnessmap,Ze.metalnessmap,Ze.fog,Ze.lights,{emissive:{value:new it(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:tn.meshphysical_vert,fragmentShader:tn.meshphysical_frag},toon:{uniforms:Hr([Ze.common,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.gradientmap,Ze.fog,Ze.lights,{emissive:{value:new it(0)}}]),vertexShader:tn.meshtoon_vert,fragmentShader:tn.meshtoon_frag},matcap:{uniforms:Hr([Ze.common,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.fog,{matcap:{value:null}}]),vertexShader:tn.meshmatcap_vert,fragmentShader:tn.meshmatcap_frag},points:{uniforms:Hr([Ze.points,Ze.fog]),vertexShader:tn.points_vert,fragmentShader:tn.points_frag},dashed:{uniforms:Hr([Ze.common,Ze.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:tn.linedashed_vert,fragmentShader:tn.linedashed_frag},depth:{uniforms:Hr([Ze.common,Ze.displacementmap]),vertexShader:tn.depth_vert,fragmentShader:tn.depth_frag},normal:{uniforms:Hr([Ze.common,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,{opacity:{value:1}}]),vertexShader:tn.meshnormal_vert,fragmentShader:tn.meshnormal_frag},sprite:{uniforms:Hr([Ze.sprite,Ze.fog]),vertexShader:tn.sprite_vert,fragmentShader:tn.sprite_frag},background:{uniforms:{uvTransform:{value:new an},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:tn.background_vert,fragmentShader:tn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:tn.backgroundCube_vert,fragmentShader:tn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:tn.cube_vert,fragmentShader:tn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:tn.equirect_vert,fragmentShader:tn.equirect_frag},distanceRGBA:{uniforms:Hr([Ze.common,Ze.displacementmap,{referencePosition:{value:new V},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:tn.distanceRGBA_vert,fragmentShader:tn.distanceRGBA_frag},shadow:{uniforms:Hr([Ze.lights,Ze.fog,{color:{value:new it(0)},opacity:{value:1}}]),vertexShader:tn.shadow_vert,fragmentShader:tn.shadow_frag}};zo.physical={uniforms:Hr([zo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new an},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new an},clearcoatNormalScale:{value:new Pe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new an},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new an},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new an},sheen:{value:0},sheenColor:{value:new it(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new an},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new an},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new an},transmissionSamplerSize:{value:new Pe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new an},attenuationDistance:{value:0},attenuationColor:{value:new it(0)},specularColor:{value:new it(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new an},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new an},anisotropyVector:{value:new Pe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new an}}]),vertexShader:tn.meshphysical_vert,fragmentShader:tn.meshphysical_frag};const U_={r:0,b:0,g:0};function p8(n,e,t,i,r,s,o){const a=new it(0);let h=s===!0?0:1,d,p,m=null,g=0,y=null;function S(w,_){let T=!1,E=_.isScene===!0?_.background:null;E&&E.isTexture&&(E=(_.backgroundBlurriness>0?t:e).get(E)),E===null?A(a,h):E&&E.isColor&&(A(E,1),T=!0);const C=n.xr.getEnvironmentBlendMode();C==="additive"?i.buffers.color.setClear(0,0,0,1,o):C==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||T)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),E&&(E.isCubeTexture||E.mapping===Cd)?(p===void 0&&(p=new Wi(new ku(1,1,1),new Ma({name:"BackgroundCubeMaterial",uniforms:xd(zo.backgroundCube.uniforms),vertexShader:zo.backgroundCube.vertexShader,fragmentShader:zo.backgroundCube.fragmentShader,side:Xr,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(P,D,O){this.matrixWorld.copyPosition(O.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(p)),p.material.uniforms.envMap.value=E,p.material.uniforms.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=_.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,p.material.toneMapped=Rn.getTransfer(E.colorSpace)!==Hn,(m!==E||g!==E.version||y!==n.toneMapping)&&(p.material.needsUpdate=!0,m=E,g=E.version,y=n.toneMapping),p.layers.enableAll(),w.unshift(p,p.geometry,p.material,0,0,null)):E&&E.isTexture&&(d===void 0&&(d=new Wi(new Dg(2,2),new Ma({name:"BackgroundMaterial",uniforms:xd(zo.background.uniforms),vertexShader:zo.background.vertexShader,fragmentShader:zo.background.fragmentShader,side:fl,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(d)),d.material.uniforms.t2D.value=E,d.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,d.material.toneMapped=Rn.getTransfer(E.colorSpace)!==Hn,E.matrixAutoUpdate===!0&&E.updateMatrix(),d.material.uniforms.uvTransform.value.copy(E.matrix),(m!==E||g!==E.version||y!==n.toneMapping)&&(d.material.needsUpdate=!0,m=E,g=E.version,y=n.toneMapping),d.layers.enableAll(),w.unshift(d,d.geometry,d.material,0,0,null))}function A(w,_){w.getRGB(U_,UL(n)),i.buffers.color.setClear(U_.r,U_.g,U_.b,_,o)}return{getClearColor:function(){return a},setClearColor:function(w,_=1){a.set(w),h=_,A(a,h)},getClearAlpha:function(){return h},setClearAlpha:function(w){h=w,A(a,h)},render:S}}function m8(n,e,t,i){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},h=w(null);let d=h,p=!1;function m(Z,oe,me,de,Y){let te=!1;if(o){const ee=A(de,me,oe);d!==ee&&(d=ee,y(d.object)),te=_(Z,de,me,Y),te&&T(Z,de,me,Y)}else{const ee=oe.wireframe===!0;(d.geometry!==de.id||d.program!==me.id||d.wireframe!==ee)&&(d.geometry=de.id,d.program=me.id,d.wireframe=ee,te=!0)}Y!==null&&t.update(Y,n.ELEMENT_ARRAY_BUFFER),(te||p)&&(p=!1,F(Z,oe,me,de),Y!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(Y).buffer))}function g(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function y(Z){return i.isWebGL2?n.bindVertexArray(Z):s.bindVertexArrayOES(Z)}function S(Z){return i.isWebGL2?n.deleteVertexArray(Z):s.deleteVertexArrayOES(Z)}function A(Z,oe,me){const de=me.wireframe===!0;let Y=a[Z.id];Y===void 0&&(Y={},a[Z.id]=Y);let te=Y[oe.id];te===void 0&&(te={},Y[oe.id]=te);let ee=te[de];return ee===void 0&&(ee=w(g()),te[de]=ee),ee}function w(Z){const oe=[],me=[],de=[];for(let Y=0;Y<r;Y++)oe[Y]=0,me[Y]=0,de[Y]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:oe,enabledAttributes:me,attributeDivisors:de,object:Z,attributes:{},index:null}}function _(Z,oe,me,de){const Y=d.attributes,te=oe.attributes;let ee=0;const ce=me.getAttributes();for(const ve in ce)if(ce[ve].location>=0){const Me=Y[ve];let Ie=te[ve];if(Ie===void 0&&(ve==="instanceMatrix"&&Z.instanceMatrix&&(Ie=Z.instanceMatrix),ve==="instanceColor"&&Z.instanceColor&&(Ie=Z.instanceColor)),Me===void 0||Me.attribute!==Ie||Ie&&Me.data!==Ie.data)return!0;ee++}return d.attributesNum!==ee||d.index!==de}function T(Z,oe,me,de){const Y={},te=oe.attributes;let ee=0;const ce=me.getAttributes();for(const ve in ce)if(ce[ve].location>=0){let Me=te[ve];Me===void 0&&(ve==="instanceMatrix"&&Z.instanceMatrix&&(Me=Z.instanceMatrix),ve==="instanceColor"&&Z.instanceColor&&(Me=Z.instanceColor));const Ie={};Ie.attribute=Me,Me&&Me.data&&(Ie.data=Me.data),Y[ve]=Ie,ee++}d.attributes=Y,d.attributesNum=ee,d.index=de}function E(){const Z=d.newAttributes;for(let oe=0,me=Z.length;oe<me;oe++)Z[oe]=0}function C(Z){P(Z,0)}function P(Z,oe){const me=d.newAttributes,de=d.enabledAttributes,Y=d.attributeDivisors;me[Z]=1,de[Z]===0&&(n.enableVertexAttribArray(Z),de[Z]=1),Y[Z]!==oe&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Z,oe),Y[Z]=oe)}function D(){const Z=d.newAttributes,oe=d.enabledAttributes;for(let me=0,de=oe.length;me<de;me++)oe[me]!==Z[me]&&(n.disableVertexAttribArray(me),oe[me]=0)}function O(Z,oe,me,de,Y,te,ee){ee===!0?n.vertexAttribIPointer(Z,oe,me,Y,te):n.vertexAttribPointer(Z,oe,me,de,Y,te)}function F(Z,oe,me,de){if(i.isWebGL2===!1&&(Z.isInstancedMesh||de.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;E();const Y=de.attributes,te=me.getAttributes(),ee=oe.defaultAttributeValues;for(const ce in te){const ve=te[ce];if(ve.location>=0){let he=Y[ce];if(he===void 0&&(ce==="instanceMatrix"&&Z.instanceMatrix&&(he=Z.instanceMatrix),ce==="instanceColor"&&Z.instanceColor&&(he=Z.instanceColor)),he!==void 0){const Me=he.normalized,Ie=he.itemSize,Ye=t.get(he);if(Ye===void 0)continue;const qe=Ye.buffer,Tt=Ye.type,wt=Ye.bytesPerElement,dt=i.isWebGL2===!0&&(Tt===n.INT||Tt===n.UNSIGNED_INT||he.gpuType===UM);if(he.isInterleavedBufferAttribute){const lt=he.data,j=lt.stride,Ue=he.offset;if(lt.isInstancedInterleavedBuffer){for(let we=0;we<ve.locationSize;we++)P(ve.location+we,lt.meshPerAttribute);Z.isInstancedMesh!==!0&&de._maxInstanceCount===void 0&&(de._maxInstanceCount=lt.meshPerAttribute*lt.count)}else for(let we=0;we<ve.locationSize;we++)C(ve.location+we);n.bindBuffer(n.ARRAY_BUFFER,qe);for(let we=0;we<ve.locationSize;we++)O(ve.location+we,Ie/ve.locationSize,Tt,Me,j*wt,(Ue+Ie/ve.locationSize*we)*wt,dt)}else{if(he.isInstancedBufferAttribute){for(let lt=0;lt<ve.locationSize;lt++)P(ve.location+lt,he.meshPerAttribute);Z.isInstancedMesh!==!0&&de._maxInstanceCount===void 0&&(de._maxInstanceCount=he.meshPerAttribute*he.count)}else for(let lt=0;lt<ve.locationSize;lt++)C(ve.location+lt);n.bindBuffer(n.ARRAY_BUFFER,qe);for(let lt=0;lt<ve.locationSize;lt++)O(ve.location+lt,Ie/ve.locationSize,Tt,Me,Ie*wt,Ie/ve.locationSize*lt*wt,dt)}}else if(ee!==void 0){const Me=ee[ce];if(Me!==void 0)switch(Me.length){case 2:n.vertexAttrib2fv(ve.location,Me);break;case 3:n.vertexAttrib3fv(ve.location,Me);break;case 4:n.vertexAttrib4fv(ve.location,Me);break;default:n.vertexAttrib1fv(ve.location,Me)}}}}D()}function L(){Q();for(const Z in a){const oe=a[Z];for(const me in oe){const de=oe[me];for(const Y in de)S(de[Y].object),delete de[Y];delete oe[me]}delete a[Z]}}function N(Z){if(a[Z.id]===void 0)return;const oe=a[Z.id];for(const me in oe){const de=oe[me];for(const Y in de)S(de[Y].object),delete de[Y];delete oe[me]}delete a[Z.id]}function G(Z){for(const oe in a){const me=a[oe];if(me[Z.id]===void 0)continue;const de=me[Z.id];for(const Y in de)S(de[Y].object),delete de[Y];delete me[Z.id]}}function Q(){le(),p=!0,d!==h&&(d=h,y(d.object))}function le(){h.geometry=null,h.program=null,h.wireframe=!1}return{setup:m,reset:Q,resetDefaultState:le,dispose:L,releaseStatesOfGeometry:N,releaseStatesOfProgram:G,initAttributes:E,enableAttribute:C,disableUnusedAttributes:D}}function g8(n,e,t,i){const r=i.isWebGL2;let s;function o(p){s=p}function a(p,m){n.drawArrays(s,p,m),t.update(m,s,1)}function h(p,m,g){if(g===0)return;let y,S;if(r)y=n,S="drawArraysInstanced";else if(y=e.get("ANGLE_instanced_arrays"),S="drawArraysInstancedANGLE",y===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[S](s,p,m,g),t.update(m,s,g)}function d(p,m,g){if(g===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let S=0;S<g;S++)this.render(p[S],m[S]);else{y.multiDrawArraysWEBGL(s,p,0,m,0,g);let S=0;for(let A=0;A<g;A++)S+=m[A];t.update(S,s,1)}}this.setMode=o,this.render=a,this.renderInstances=h,this.renderMultiDraw=d}function _8(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const O=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(O.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(O){if(O==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";O="mediump"}return O==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const h=s(a);h!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",h,"instead."),a=h);const d=o||e.has("WEBGL_draw_buffers"),p=t.logarithmicDepthBuffer===!0,m=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=n.getParameter(n.MAX_TEXTURE_SIZE),S=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),A=n.getParameter(n.MAX_VERTEX_ATTRIBS),w=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),_=n.getParameter(n.MAX_VARYING_VECTORS),T=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),E=g>0,C=o||e.has("OES_texture_float"),P=E&&C,D=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:d,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:p,maxTextures:m,maxVertexTextures:g,maxTextureSize:y,maxCubemapSize:S,maxAttributes:A,maxVertexUniforms:w,maxVaryings:_,maxFragmentUniforms:T,vertexTextures:E,floatFragmentTextures:C,floatVertexTextures:P,maxSamples:D}}function v8(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new lu,a=new an,h={value:null,needsUpdate:!1};this.uniform=h,this.numPlanes=0,this.numIntersection=0,this.init=function(m,g){const y=m.length!==0||g||i!==0||r;return r=g,i=m.length,y},this.beginShadows=function(){s=!0,p(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(m,g){t=p(m,g,0)},this.setState=function(m,g,y){const S=m.clippingPlanes,A=m.clipIntersection,w=m.clipShadows,_=n.get(m);if(!r||S===null||S.length===0||s&&!w)s?p(null):d();else{const T=s?0:i,E=T*4;let C=_.clippingState||null;h.value=C,C=p(S,g,E,y);for(let P=0;P!==E;++P)C[P]=t[P];_.clippingState=C,this.numIntersection=A?this.numPlanes:0,this.numPlanes+=T}};function d(){h.value!==t&&(h.value=t,h.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function p(m,g,y,S){const A=m!==null?m.length:0;let w=null;if(A!==0){if(w=h.value,S!==!0||w===null){const _=y+A*4,T=g.matrixWorldInverse;a.getNormalMatrix(T),(w===null||w.length<_)&&(w=new Float32Array(_));for(let E=0,C=y;E!==A;++E,C+=4)o.copy(m[E]).applyMatrix4(T,a),o.normal.toArray(w,C),w[C+3]=o.constant}h.value=w,h.needsUpdate=!0}return e.numPlanes=A,e.numIntersection=0,w}}function y8(n){let e=new WeakMap;function t(o,a){return a===qm?o.mapping=dl:a===Zm&&(o.mapping=Lu),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===qm||a===Zm)if(e.has(o)){const h=e.get(o).texture;return t(h,o.mapping)}else{const h=o.image;if(h&&h.height>0){const d=new zL(h.height/2);return d.fromEquirectangularTexture(n,o),e.set(o,d),o.addEventListener("dispose",r),t(d.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const h=e.get(a);h!==void 0&&(e.delete(a),h.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}let Ug=class extends Lg{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,h=r-t;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=d*this.view.offsetX,o=s+d*this.view.width,a-=p*this.view.offsetY,h=a-p*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,h,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};const Qf=4,o2=[.125,.215,.35,.446,.526,.582],Bc=20,j1=new Ug,a2=new it;let K1=null,Q1=0,J1=0;const zc=(1+Math.sqrt(5))/2,xf=1/zc,l2=[new V(1,1,1),new V(-1,1,1),new V(1,1,-1),new V(-1,1,-1),new V(0,zc,xf),new V(0,zc,-xf),new V(xf,0,zc),new V(-xf,0,zc),new V(zc,xf,0),new V(-zc,xf,0)];class mE{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){K1=this._renderer.getRenderTarget(),Q1=this._renderer.getActiveCubeFace(),J1=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=h2(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=c2(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(K1,Q1,J1),e.scissorTest=!1,N_(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===dl||e.mapping===Lu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),K1=this._renderer.getRenderTarget(),Q1=this._renderer.getActiveCubeFace(),J1=this._renderer.getActiveMipmapLevel();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:ni,minFilter:ni,generateMipmaps:!1,type:ah,format:Gr,colorSpace:Ea,depthBuffer:!1},r=u2(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=u2(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=x8(s)),this._blurMaterial=S8(s,e,t)}return r}_compileMaterial(e){const t=new Wi(this._lodPlanes[0],e);this._renderer.compile(t,j1)}_sceneToCubeUV(e,t,i,r){const a=new sr(90,1,t,i),h=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],p=this._renderer,m=p.autoClear,g=p.toneMapping;p.getClearColor(a2),p.toneMapping=xa,p.autoClear=!1;const y=new zu({name:"PMREM.Background",side:Xr,depthWrite:!1,depthTest:!1}),S=new Wi(new ku,y);let A=!1;const w=e.background;w?w.isColor&&(y.color.copy(w),e.background=null,A=!0):(y.color.copy(a2),A=!0);for(let _=0;_<6;_++){const T=_%3;T===0?(a.up.set(0,h[_],0),a.lookAt(d[_],0,0)):T===1?(a.up.set(0,0,h[_]),a.lookAt(0,d[_],0)):(a.up.set(0,h[_],0),a.lookAt(0,0,d[_]));const E=this._cubeSize;N_(r,T*E,_>2?E:0,E,E),p.setRenderTarget(r),A&&p.render(S,a),p.render(e,a)}S.geometry.dispose(),S.material.dispose(),p.toneMapping=g,p.autoClear=m,e.background=w}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===dl||e.mapping===Lu;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=h2()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=c2());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Wi(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const h=this._cubeSize;N_(t,0,0,3*h,2*h),i.setRenderTarget(t),i.render(o,j1)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=l2[(r-1)%l2.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const h=this._renderer,d=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const p=3,m=new Wi(this._lodPlanes[r],d),g=d.uniforms,y=this._sizeLods[i]-1,S=isFinite(s)?Math.PI/(2*y):2*Math.PI/(2*Bc-1),A=s/S,w=isFinite(s)?1+Math.floor(p*A):Bc;w>Bc&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${Bc}`);const _=[];let T=0;for(let O=0;O<Bc;++O){const F=O/A,L=Math.exp(-F*F/2);_.push(L),O===0?T+=L:O<w&&(T+=2*L)}for(let O=0;O<_.length;O++)_[O]=_[O]/T;g.envMap.value=e.texture,g.samples.value=w,g.weights.value=_,g.latitudinal.value=o==="latitudinal",a&&(g.poleAxis.value=a);const{_lodMax:E}=this;g.dTheta.value=S,g.mipInt.value=E-i;const C=this._sizeLods[r],P=3*C*(r>E-Qf?r-E+Qf:0),D=4*(this._cubeSize-C);N_(t,P,D,3*C,2*C),h.setRenderTarget(t),h.render(m,j1)}}function x8(n){const e=[],t=[],i=[];let r=n;const s=n-Qf+1+o2.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let h=1/a;o>n-Qf?h=o2[o-n+Qf-1]:o===0&&(h=0),i.push(h);const d=1/(a-2),p=-d,m=1+d,g=[p,p,m,p,m,m,p,p,m,m,p,m],y=6,S=6,A=3,w=2,_=1,T=new Float32Array(A*S*y),E=new Float32Array(w*S*y),C=new Float32Array(_*S*y);for(let D=0;D<y;D++){const O=D%3*2/3-1,F=D>2?0:-1,L=[O,F,0,O+2/3,F,0,O+2/3,F+1,0,O,F,0,O+2/3,F+1,0,O,F+1,0];T.set(L,A*S*D),E.set(g,w*S*D);const N=[D,D,D,D,D,D];C.set(N,_*S*D)}const P=new rn;P.setAttribute("position",new Pn(T,A)),P.setAttribute("uv",new Pn(E,w)),P.setAttribute("faceIndex",new Pn(C,_)),e.push(P),r>Qf&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function u2(n,e,t){const i=new _o(n,e,t);return i.texture.mapping=Cd,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function N_(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function S8(n,e,t){const i=new Float32Array(Bc),r=new V(0,1,0);return new Ma({name:"SphericalGaussianBlur",defines:{n:Bc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:KM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:al,depthTest:!1,depthWrite:!1})}function c2(){return new Ma({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:KM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:al,depthTest:!1,depthWrite:!1})}function h2(){return new Ma({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:KM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:al,depthTest:!1,depthWrite:!1})}function KM(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function w8(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const h=a.mapping,d=h===qm||h===Zm,p=h===dl||h===Lu;if(d||p)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let m=e.get(a);return t===null&&(t=new mE(n)),m=d?t.fromEquirectangular(a,m):t.fromCubemap(a,m),e.set(a,m),m.texture}else{if(e.has(a))return e.get(a).texture;{const m=a.image;if(d&&m&&m.height>0||p&&m&&r(m)){t===null&&(t=new mE(n));const g=d?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,g),a.addEventListener("dispose",s),g.texture}else return null}}}return a}function r(a){let h=0;const d=6;for(let p=0;p<d;p++)a[p]!==void 0&&h++;return h===d}function s(a){const h=a.target;h.removeEventListener("dispose",s);const d=e.get(h);d!==void 0&&(e.delete(h),d.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function E8(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function M8(n,e,t,i){const r={},s=new WeakMap;function o(m){const g=m.target;g.index!==null&&e.remove(g.index);for(const S in g.attributes)e.remove(g.attributes[S]);for(const S in g.morphAttributes){const A=g.morphAttributes[S];for(let w=0,_=A.length;w<_;w++)e.remove(A[w])}g.removeEventListener("dispose",o),delete r[g.id];const y=s.get(g);y&&(e.remove(y),s.delete(g)),i.releaseStatesOfGeometry(g),g.isInstancedBufferGeometry===!0&&delete g._maxInstanceCount,t.memory.geometries--}function a(m,g){return r[g.id]===!0||(g.addEventListener("dispose",o),r[g.id]=!0,t.memory.geometries++),g}function h(m){const g=m.attributes;for(const S in g)e.update(g[S],n.ARRAY_BUFFER);const y=m.morphAttributes;for(const S in y){const A=y[S];for(let w=0,_=A.length;w<_;w++)e.update(A[w],n.ARRAY_BUFFER)}}function d(m){const g=[],y=m.index,S=m.attributes.position;let A=0;if(y!==null){const T=y.array;A=y.version;for(let E=0,C=T.length;E<C;E+=3){const P=T[E+0],D=T[E+1],O=T[E+2];g.push(P,D,D,O,O,P)}}else if(S!==void 0){const T=S.array;A=S.version;for(let E=0,C=T.length/3-1;E<C;E+=3){const P=E+0,D=E+1,O=E+2;g.push(P,D,D,O,O,P)}}else return;const w=new(LL(g)?jM:ZM)(g,1);w.version=A;const _=s.get(m);_&&e.remove(_),s.set(m,w)}function p(m){const g=s.get(m);if(g){const y=m.index;y!==null&&g.version<y.version&&d(m)}else d(m);return s.get(m)}return{get:a,update:h,getWireframeAttribute:p}}function T8(n,e,t,i){const r=i.isWebGL2;let s;function o(y){s=y}let a,h;function d(y){a=y.type,h=y.bytesPerElement}function p(y,S){n.drawElements(s,S,a,y*h),t.update(S,s,1)}function m(y,S,A){if(A===0)return;let w,_;if(r)w=n,_="drawElementsInstanced";else if(w=e.get("ANGLE_instanced_arrays"),_="drawElementsInstancedANGLE",w===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}w[_](s,S,a,y*h,A),t.update(S,s,A)}function g(y,S,A){if(A===0)return;const w=e.get("WEBGL_multi_draw");if(w===null)for(let _=0;_<A;_++)this.render(y[_]/h,S[_]);else{w.multiDrawElementsWEBGL(s,S,0,a,y,0,A);let _=0;for(let T=0;T<A;T++)_+=S[T];t.update(_,s,1)}}this.setMode=o,this.setIndex=d,this.render=p,this.renderInstances=m,this.renderMultiDraw=g}function A8(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function C8(n,e){return n[0]-e[0]}function R8(n,e){return Math.abs(e[1])-Math.abs(n[1])}function b8(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new Cn,a=[];for(let d=0;d<8;d++)a[d]=[d,0];function h(d,p,m){const g=d.morphTargetInfluences;if(e.isWebGL2===!0){const S=p.morphAttributes.position||p.morphAttributes.normal||p.morphAttributes.color,A=S!==void 0?S.length:0;let w=s.get(p);if(w===void 0||w.count!==A){let oe=function(){le.dispose(),s.delete(p),p.removeEventListener("dispose",oe)};var y=oe;w!==void 0&&w.texture.dispose();const E=p.morphAttributes.position!==void 0,C=p.morphAttributes.normal!==void 0,P=p.morphAttributes.color!==void 0,D=p.morphAttributes.position||[],O=p.morphAttributes.normal||[],F=p.morphAttributes.color||[];let L=0;E===!0&&(L=1),C===!0&&(L=2),P===!0&&(L=3);let N=p.attributes.position.count*L,G=1;N>e.maxTextureSize&&(G=Math.ceil(N/e.maxTextureSize),N=e.maxTextureSize);const Q=new Float32Array(N*G*4*A),le=new Hy(Q,N,G,A);le.type=fo,le.needsUpdate=!0;const Z=L*4;for(let me=0;me<A;me++){const de=D[me],Y=O[me],te=F[me],ee=N*G*4*me;for(let ce=0;ce<de.count;ce++){const ve=ce*Z;E===!0&&(o.fromBufferAttribute(de,ce),Q[ee+ve+0]=o.x,Q[ee+ve+1]=o.y,Q[ee+ve+2]=o.z,Q[ee+ve+3]=0),C===!0&&(o.fromBufferAttribute(Y,ce),Q[ee+ve+4]=o.x,Q[ee+ve+5]=o.y,Q[ee+ve+6]=o.z,Q[ee+ve+7]=0),P===!0&&(o.fromBufferAttribute(te,ce),Q[ee+ve+8]=o.x,Q[ee+ve+9]=o.y,Q[ee+ve+10]=o.z,Q[ee+ve+11]=te.itemSize===4?o.w:1)}}w={count:A,texture:le,size:new Pe(N,G)},s.set(p,w),p.addEventListener("dispose",oe)}let _=0;for(let E=0;E<g.length;E++)_+=g[E];const T=p.morphTargetsRelative?1:1-_;m.getUniforms().setValue(n,"morphTargetBaseInfluence",T),m.getUniforms().setValue(n,"morphTargetInfluences",g),m.getUniforms().setValue(n,"morphTargetsTexture",w.texture,t),m.getUniforms().setValue(n,"morphTargetsTextureSize",w.size)}else{const S=g===void 0?0:g.length;let A=i[p.id];if(A===void 0||A.length!==S){A=[];for(let C=0;C<S;C++)A[C]=[C,0];i[p.id]=A}for(let C=0;C<S;C++){const P=A[C];P[0]=C,P[1]=g[C]}A.sort(R8);for(let C=0;C<8;C++)C<S&&A[C][1]?(a[C][0]=A[C][0],a[C][1]=A[C][1]):(a[C][0]=Number.MAX_SAFE_INTEGER,a[C][1]=0);a.sort(C8);const w=p.morphAttributes.position,_=p.morphAttributes.normal;let T=0;for(let C=0;C<8;C++){const P=a[C],D=P[0],O=P[1];D!==Number.MAX_SAFE_INTEGER&&O?(w&&p.getAttribute("morphTarget"+C)!==w[D]&&p.setAttribute("morphTarget"+C,w[D]),_&&p.getAttribute("morphNormal"+C)!==_[D]&&p.setAttribute("morphNormal"+C,_[D]),r[C]=O,T+=O):(w&&p.hasAttribute("morphTarget"+C)===!0&&p.deleteAttribute("morphTarget"+C),_&&p.hasAttribute("morphNormal"+C)===!0&&p.deleteAttribute("morphNormal"+C),r[C]=0)}const E=p.morphTargetsRelative?1:1-T;m.getUniforms().setValue(n,"morphTargetBaseInfluence",E),m.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:h}}function P8(n,e,t,i){let r=new WeakMap;function s(h){const d=i.render.frame,p=h.geometry,m=e.get(h,p);if(r.get(m)!==d&&(e.update(m),r.set(m,d)),h.isInstancedMesh&&(h.hasEventListener("dispose",a)===!1&&h.addEventListener("dispose",a),r.get(h)!==d&&(t.update(h.instanceMatrix,n.ARRAY_BUFFER),h.instanceColor!==null&&t.update(h.instanceColor,n.ARRAY_BUFFER),r.set(h,d))),h.isSkinnedMesh){const g=h.skeleton;r.get(g)!==d&&(g.update(),r.set(g,d))}return m}function o(){r=new WeakMap}function a(h){const d=h.target;d.removeEventListener("dispose",a),t.remove(d.instanceMatrix),d.instanceColor!==null&&t.remove(d.instanceColor)}return{update:s,dispose:o}}class Vy extends pi{constructor(e,t,i,r,s,o,a,h,d,p){if(p=p!==void 0?p:Tu,p!==Tu&&p!==lh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&p===Tu&&(i=sl),i===void 0&&p===lh&&(i=Mu),super(null,r,s,o,a,h,p,i,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Ei,this.minFilter=h!==void 0?h:Ei,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const BL=new pi,HL=new Vy(1,1);HL.compareFunction=WM;const VL=new Hy,GL=new qM,WL=new Ig,f2=[],d2=[],p2=new Float32Array(16),m2=new Float32Array(9),g2=new Float32Array(4);function bd(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=f2[r];if(s===void 0&&(s=new Float32Array(r),f2[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Xi(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Yi(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Gy(n,e){let t=d2[e];t===void 0&&(t=new Int32Array(e),d2[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function L8(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function I8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Xi(t,e))return;n.uniform2fv(this.addr,e),Yi(t,e)}}function O8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Xi(t,e))return;n.uniform3fv(this.addr,e),Yi(t,e)}}function D8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Xi(t,e))return;n.uniform4fv(this.addr,e),Yi(t,e)}}function U8(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Xi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Yi(t,e)}else{if(Xi(t,i))return;g2.set(i),n.uniformMatrix2fv(this.addr,!1,g2),Yi(t,i)}}function N8(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Xi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Yi(t,e)}else{if(Xi(t,i))return;m2.set(i),n.uniformMatrix3fv(this.addr,!1,m2),Yi(t,i)}}function F8(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Xi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Yi(t,e)}else{if(Xi(t,i))return;p2.set(i),n.uniformMatrix4fv(this.addr,!1,p2),Yi(t,i)}}function z8(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function k8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Xi(t,e))return;n.uniform2iv(this.addr,e),Yi(t,e)}}function B8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Xi(t,e))return;n.uniform3iv(this.addr,e),Yi(t,e)}}function H8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Xi(t,e))return;n.uniform4iv(this.addr,e),Yi(t,e)}}function V8(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function G8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Xi(t,e))return;n.uniform2uiv(this.addr,e),Yi(t,e)}}function W8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Xi(t,e))return;n.uniform3uiv(this.addr,e),Yi(t,e)}}function X8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Xi(t,e))return;n.uniform4uiv(this.addr,e),Yi(t,e)}}function Y8(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);const s=this.type===n.SAMPLER_2D_SHADOW?HL:BL;t.setTexture2D(e||s,r)}function q8(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||GL,r)}function Z8(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||WL,r)}function j8(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||VL,r)}function K8(n){switch(n){case 5126:return L8;case 35664:return I8;case 35665:return O8;case 35666:return D8;case 35674:return U8;case 35675:return N8;case 35676:return F8;case 5124:case 35670:return z8;case 35667:case 35671:return k8;case 35668:case 35672:return B8;case 35669:case 35673:return H8;case 5125:return V8;case 36294:return G8;case 36295:return W8;case 36296:return X8;case 35678:case 36198:case 36298:case 36306:case 35682:return Y8;case 35679:case 36299:case 36307:return q8;case 35680:case 36300:case 36308:case 36293:return Z8;case 36289:case 36303:case 36311:case 36292:return j8}}function Q8(n,e){n.uniform1fv(this.addr,e)}function J8(n,e){const t=bd(e,this.size,2);n.uniform2fv(this.addr,t)}function $8(n,e){const t=bd(e,this.size,3);n.uniform3fv(this.addr,t)}function e6(n,e){const t=bd(e,this.size,4);n.uniform4fv(this.addr,t)}function t6(n,e){const t=bd(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function n6(n,e){const t=bd(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function i6(n,e){const t=bd(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function r6(n,e){n.uniform1iv(this.addr,e)}function s6(n,e){n.uniform2iv(this.addr,e)}function o6(n,e){n.uniform3iv(this.addr,e)}function a6(n,e){n.uniform4iv(this.addr,e)}function l6(n,e){n.uniform1uiv(this.addr,e)}function u6(n,e){n.uniform2uiv(this.addr,e)}function c6(n,e){n.uniform3uiv(this.addr,e)}function h6(n,e){n.uniform4uiv(this.addr,e)}function f6(n,e,t){const i=this.cache,r=e.length,s=Gy(t,r);Xi(i,s)||(n.uniform1iv(this.addr,s),Yi(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||BL,s[o])}function d6(n,e,t){const i=this.cache,r=e.length,s=Gy(t,r);Xi(i,s)||(n.uniform1iv(this.addr,s),Yi(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||GL,s[o])}function p6(n,e,t){const i=this.cache,r=e.length,s=Gy(t,r);Xi(i,s)||(n.uniform1iv(this.addr,s),Yi(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||WL,s[o])}function m6(n,e,t){const i=this.cache,r=e.length,s=Gy(t,r);Xi(i,s)||(n.uniform1iv(this.addr,s),Yi(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||VL,s[o])}function g6(n){switch(n){case 5126:return Q8;case 35664:return J8;case 35665:return $8;case 35666:return e6;case 35674:return t6;case 35675:return n6;case 35676:return i6;case 5124:case 35670:return r6;case 35667:case 35671:return s6;case 35668:case 35672:return o6;case 35669:case 35673:return a6;case 5125:return l6;case 36294:return u6;case 36295:return c6;case 36296:return h6;case 35678:case 36198:case 36298:case 36306:case 35682:return f6;case 35679:case 36299:case 36307:return d6;case 35680:case 36300:case 36308:case 36293:return p6;case 36289:case 36303:case 36311:case 36292:return m6}}class _6{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=K8(t.type)}}class v6{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=g6(t.type)}}class y6{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const $1=/(\w+)(\])?(\[|\.)?/g;function _2(n,e){n.seq.push(e),n.map[e.id]=e}function x6(n,e,t){const i=n.name,r=i.length;for($1.lastIndex=0;;){const s=$1.exec(i),o=$1.lastIndex;let a=s[1];const h=s[2]==="]",d=s[3];if(h&&(a=a|0),d===void 0||d==="["&&o+2===r){_2(t,d===void 0?new _6(a,n,e):new v6(a,n,e));break}else{let m=t.map[a];m===void 0&&(m=new y6(a),_2(t,m)),t=m}}}class Dv{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);x6(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],h=i[a.id];h.needsUpdate!==!1&&a.setValue(e,h.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function v2(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const S6=37297;let w6=0;function E6(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function M6(n){const e=Rn.getPrimaries(Rn.workingColorSpace),t=Rn.getPrimaries(n);let i;switch(e===t?i="":e===ng&&t===tg?i="LinearDisplayP3ToLinearSRGB":e===tg&&t===ng&&(i="LinearSRGBToLinearDisplayP3"),n){case Ea:case Pg:return[i,"LinearTransferOETF"];case Vi:case By:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function y2(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+E6(n.getShaderSource(e),o)}else return r}function T6(n,e){const t=M6(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function A6(n,e){let t;switch(e){case rL:t="Linear";break;case sL:t="Reinhard";break;case oL:t="OptimizedCineon";break;case OM:t="ACESFilmic";break;case aL:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function C6(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(am).join(`
`)}function R6(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function b6(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function am(n){return n!==""}function x2(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function S2(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const P6=/^[ \t]*#include +<([\w\d./]+)>/gm;function gE(n){return n.replace(P6,I6)}const L6=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function I6(n,e){let t=tn[e];if(t===void 0){const i=L6.get(e);if(i!==void 0)t=tn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return gE(t)}const O6=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function w2(n){return n.replace(O6,D6)}function D6(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function E2(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function U6(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Ny?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===ym?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Uo&&(e="SHADOWMAP_TYPE_VSM"),e}function N6(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case dl:case Lu:e="ENVMAP_TYPE_CUBE";break;case Cd:e="ENVMAP_TYPE_CUBE_UV";break}return e}function F6(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Lu:e="ENVMAP_MODE_REFRACTION";break}return e}function z6(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case bg:e="ENVMAP_BLENDING_MULTIPLY";break;case nL:e="ENVMAP_BLENDING_MIX";break;case iL:e="ENVMAP_BLENDING_ADD";break}return e}function k6(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function B6(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const h=U6(t),d=N6(t),p=F6(t),m=z6(t),g=k6(t),y=t.isWebGL2?"":C6(t),S=R6(s),A=r.createProgram();let w,_,T=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(am).join(`
`),w.length>0&&(w+=`
`),_=[y,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(am).join(`
`),_.length>0&&(_+=`
`)):(w=[E2(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+h:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(am).join(`
`),_=[y,E2(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.envMap?"#define "+p:"",t.envMap?"#define "+m:"",g?"#define CUBEUV_TEXEL_WIDTH "+g.texelWidth:"",g?"#define CUBEUV_TEXEL_HEIGHT "+g.texelHeight:"",g?"#define CUBEUV_MAX_MIP "+g.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+h:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==xa?"#define TONE_MAPPING":"",t.toneMapping!==xa?tn.tonemapping_pars_fragment:"",t.toneMapping!==xa?A6("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",tn.colorspace_pars_fragment,T6("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(am).join(`
`)),o=gE(o),o=x2(o,t),o=S2(o,t),a=gE(a),a=x2(a,t),a=S2(a,t),o=w2(o),a=w2(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(T=`#version 300 es
`,w=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,_=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===dE?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===dE?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const E=T+w+o,C=T+_+a,P=v2(r,r.VERTEX_SHADER,E),D=v2(r,r.FRAGMENT_SHADER,C);r.attachShader(A,P),r.attachShader(A,D),t.index0AttributeName!==void 0?r.bindAttribLocation(A,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(A,0,"position"),r.linkProgram(A);function O(G){if(n.debug.checkShaderErrors){const Q=r.getProgramInfoLog(A).trim(),le=r.getShaderInfoLog(P).trim(),Z=r.getShaderInfoLog(D).trim();let oe=!0,me=!0;if(r.getProgramParameter(A,r.LINK_STATUS)===!1)if(oe=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,A,P,D);else{const de=y2(r,P,"vertex"),Y=y2(r,D,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(A,r.VALIDATE_STATUS)+`

Program Info Log: `+Q+`
`+de+`
`+Y)}else Q!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Q):(le===""||Z==="")&&(me=!1);me&&(G.diagnostics={runnable:oe,programLog:Q,vertexShader:{log:le,prefix:w},fragmentShader:{log:Z,prefix:_}})}r.deleteShader(P),r.deleteShader(D),F=new Dv(r,A),L=b6(r,A)}let F;this.getUniforms=function(){return F===void 0&&O(this),F};let L;this.getAttributes=function(){return L===void 0&&O(this),L};let N=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return N===!1&&(N=r.getProgramParameter(A,S6)),N},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(A),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=w6++,this.cacheKey=e,this.usedTimes=1,this.program=A,this.vertexShader=P,this.fragmentShader=D,this}let H6=0;class V6{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new G6(e),t.set(e,i)),i}}class G6{constructor(e){this.id=H6++,this.code=e,this.usedTimes=0}}function W6(n,e,t,i,r,s,o){const a=new $c,h=new V6,d=[],p=r.isWebGL2,m=r.logarithmicDepthBuffer,g=r.vertexTextures;let y=r.precision;const S={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function A(L){return L===0?"uv":`uv${L}`}function w(L,N,G,Q,le){const Z=Q.fog,oe=le.geometry,me=L.isMeshStandardMaterial?Q.environment:null,de=(L.isMeshStandardMaterial?t:e).get(L.envMap||me),Y=de&&de.mapping===Cd?de.image.height:null,te=S[L.type];L.precision!==null&&(y=r.getMaxPrecision(L.precision),y!==L.precision&&console.warn("THREE.WebGLProgram.getParameters:",L.precision,"not supported, using",y,"instead."));const ee=oe.morphAttributes.position||oe.morphAttributes.normal||oe.morphAttributes.color,ce=ee!==void 0?ee.length:0;let ve=0;oe.morphAttributes.position!==void 0&&(ve=1),oe.morphAttributes.normal!==void 0&&(ve=2),oe.morphAttributes.color!==void 0&&(ve=3);let he,Me,Ie,Ye;if(te){const Ti=zo[te];he=Ti.vertexShader,Me=Ti.fragmentShader}else he=L.vertexShader,Me=L.fragmentShader,h.update(L),Ie=h.getVertexShaderID(L),Ye=h.getFragmentShaderID(L);const qe=n.getRenderTarget(),Tt=le.isInstancedMesh===!0,wt=le.isBatchedMesh===!0,dt=!!L.map,lt=!!L.matcap,j=!!de,Ue=!!L.aoMap,we=!!L.lightMap,He=!!L.bumpMap,Le=!!L.normalMap,ut=!!L.displacementMap,$e=!!L.emissiveMap,rt=!!L.metalnessMap,xt=!!L.roughnessMap,Nt=L.anisotropy>0,wn=L.clearcoat>0,X=L.iridescence>0,k=L.sheen>0,fe=L.transmission>0,ke=Nt&&!!L.anisotropyMap,De=wn&&!!L.clearcoatMap,Ne=wn&&!!L.clearcoatNormalMap,ht=wn&&!!L.clearcoatRoughnessMap,Ge=X&&!!L.iridescenceMap,Ke=X&&!!L.iridescenceThicknessMap,bt=k&&!!L.sheenColorMap,un=k&&!!L.sheenRoughnessMap,Be=!!L.specularMap,gn=!!L.specularColorMap,kt=!!L.specularIntensityMap,Ct=fe&&!!L.transmissionMap,St=fe&&!!L.thicknessMap,st=!!L.gradientMap,sn=!!L.alphaMap,ie=L.alphaTest>0,et=!!L.alphaHash,Ve=!!L.extensions,Ae=!!oe.attributes.uv1,Xe=!!oe.attributes.uv2,Pt=!!oe.attributes.uv3;let ln=xa;return L.toneMapped&&(qe===null||qe.isXRRenderTarget===!0)&&(ln=n.toneMapping),{isWebGL2:p,shaderID:te,shaderType:L.type,shaderName:L.name,vertexShader:he,fragmentShader:Me,defines:L.defines,customVertexShaderID:Ie,customFragmentShaderID:Ye,isRawShaderMaterial:L.isRawShaderMaterial===!0,glslVersion:L.glslVersion,precision:y,batching:wt,instancing:Tt,instancingColor:Tt&&le.instanceColor!==null,supportsVertexTextures:g,outputColorSpace:qe===null?n.outputColorSpace:qe.isXRRenderTarget===!0?qe.texture.colorSpace:Ea,map:dt,matcap:lt,envMap:j,envMapMode:j&&de.mapping,envMapCubeUVHeight:Y,aoMap:Ue,lightMap:we,bumpMap:He,normalMap:Le,displacementMap:g&&ut,emissiveMap:$e,normalMapObjectSpace:Le&&L.normalMapType===wL,normalMapTangentSpace:Le&&L.normalMapType===Fu,metalnessMap:rt,roughnessMap:xt,anisotropy:Nt,anisotropyMap:ke,clearcoat:wn,clearcoatMap:De,clearcoatNormalMap:Ne,clearcoatRoughnessMap:ht,iridescence:X,iridescenceMap:Ge,iridescenceThicknessMap:Ke,sheen:k,sheenColorMap:bt,sheenRoughnessMap:un,specularMap:Be,specularColorMap:gn,specularIntensityMap:kt,transmission:fe,transmissionMap:Ct,thicknessMap:St,gradientMap:st,opaque:L.transparent===!1&&L.blending===Qc,alphaMap:sn,alphaTest:ie,alphaHash:et,combine:L.combine,mapUv:dt&&A(L.map.channel),aoMapUv:Ue&&A(L.aoMap.channel),lightMapUv:we&&A(L.lightMap.channel),bumpMapUv:He&&A(L.bumpMap.channel),normalMapUv:Le&&A(L.normalMap.channel),displacementMapUv:ut&&A(L.displacementMap.channel),emissiveMapUv:$e&&A(L.emissiveMap.channel),metalnessMapUv:rt&&A(L.metalnessMap.channel),roughnessMapUv:xt&&A(L.roughnessMap.channel),anisotropyMapUv:ke&&A(L.anisotropyMap.channel),clearcoatMapUv:De&&A(L.clearcoatMap.channel),clearcoatNormalMapUv:Ne&&A(L.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ht&&A(L.clearcoatRoughnessMap.channel),iridescenceMapUv:Ge&&A(L.iridescenceMap.channel),iridescenceThicknessMapUv:Ke&&A(L.iridescenceThicknessMap.channel),sheenColorMapUv:bt&&A(L.sheenColorMap.channel),sheenRoughnessMapUv:un&&A(L.sheenRoughnessMap.channel),specularMapUv:Be&&A(L.specularMap.channel),specularColorMapUv:gn&&A(L.specularColorMap.channel),specularIntensityMapUv:kt&&A(L.specularIntensityMap.channel),transmissionMapUv:Ct&&A(L.transmissionMap.channel),thicknessMapUv:St&&A(L.thicknessMap.channel),alphaMapUv:sn&&A(L.alphaMap.channel),vertexTangents:!!oe.attributes.tangent&&(Le||Nt),vertexColors:L.vertexColors,vertexAlphas:L.vertexColors===!0&&!!oe.attributes.color&&oe.attributes.color.itemSize===4,vertexUv1s:Ae,vertexUv2s:Xe,vertexUv3s:Pt,pointsUvs:le.isPoints===!0&&!!oe.attributes.uv&&(dt||sn),fog:!!Z,useFog:L.fog===!0,fogExp2:Z&&Z.isFogExp2,flatShading:L.flatShading===!0,sizeAttenuation:L.sizeAttenuation===!0,logarithmicDepthBuffer:m,skinning:le.isSkinnedMesh===!0,morphTargets:oe.morphAttributes.position!==void 0,morphNormals:oe.morphAttributes.normal!==void 0,morphColors:oe.morphAttributes.color!==void 0,morphTargetsCount:ce,morphTextureStride:ve,numDirLights:N.directional.length,numPointLights:N.point.length,numSpotLights:N.spot.length,numSpotLightMaps:N.spotLightMap.length,numRectAreaLights:N.rectArea.length,numHemiLights:N.hemi.length,numDirLightShadows:N.directionalShadowMap.length,numPointLightShadows:N.pointShadowMap.length,numSpotLightShadows:N.spotShadowMap.length,numSpotLightShadowsWithMaps:N.numSpotLightShadowsWithMaps,numLightProbes:N.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:L.dithering,shadowMapEnabled:n.shadowMap.enabled&&G.length>0,shadowMapType:n.shadowMap.type,toneMapping:ln,useLegacyLights:n._useLegacyLights,decodeVideoTexture:dt&&L.map.isVideoTexture===!0&&Rn.getTransfer(L.map.colorSpace)===Hn,premultipliedAlpha:L.premultipliedAlpha,doubleSided:L.side===_a,flipSided:L.side===Xr,useDepthPacking:L.depthPacking>=0,depthPacking:L.depthPacking||0,index0AttributeName:L.index0AttributeName,extensionDerivatives:Ve&&L.extensions.derivatives===!0,extensionFragDepth:Ve&&L.extensions.fragDepth===!0,extensionDrawBuffers:Ve&&L.extensions.drawBuffers===!0,extensionShaderTextureLOD:Ve&&L.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:p||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:p||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:p||i.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:L.customProgramCacheKey()}}function _(L){const N=[];if(L.shaderID?N.push(L.shaderID):(N.push(L.customVertexShaderID),N.push(L.customFragmentShaderID)),L.defines!==void 0)for(const G in L.defines)N.push(G),N.push(L.defines[G]);return L.isRawShaderMaterial===!1&&(T(N,L),E(N,L),N.push(n.outputColorSpace)),N.push(L.customProgramCacheKey),N.join()}function T(L,N){L.push(N.precision),L.push(N.outputColorSpace),L.push(N.envMapMode),L.push(N.envMapCubeUVHeight),L.push(N.mapUv),L.push(N.alphaMapUv),L.push(N.lightMapUv),L.push(N.aoMapUv),L.push(N.bumpMapUv),L.push(N.normalMapUv),L.push(N.displacementMapUv),L.push(N.emissiveMapUv),L.push(N.metalnessMapUv),L.push(N.roughnessMapUv),L.push(N.anisotropyMapUv),L.push(N.clearcoatMapUv),L.push(N.clearcoatNormalMapUv),L.push(N.clearcoatRoughnessMapUv),L.push(N.iridescenceMapUv),L.push(N.iridescenceThicknessMapUv),L.push(N.sheenColorMapUv),L.push(N.sheenRoughnessMapUv),L.push(N.specularMapUv),L.push(N.specularColorMapUv),L.push(N.specularIntensityMapUv),L.push(N.transmissionMapUv),L.push(N.thicknessMapUv),L.push(N.combine),L.push(N.fogExp2),L.push(N.sizeAttenuation),L.push(N.morphTargetsCount),L.push(N.morphAttributeCount),L.push(N.numDirLights),L.push(N.numPointLights),L.push(N.numSpotLights),L.push(N.numSpotLightMaps),L.push(N.numHemiLights),L.push(N.numRectAreaLights),L.push(N.numDirLightShadows),L.push(N.numPointLightShadows),L.push(N.numSpotLightShadows),L.push(N.numSpotLightShadowsWithMaps),L.push(N.numLightProbes),L.push(N.shadowMapType),L.push(N.toneMapping),L.push(N.numClippingPlanes),L.push(N.numClipIntersection),L.push(N.depthPacking)}function E(L,N){a.disableAll(),N.isWebGL2&&a.enable(0),N.supportsVertexTextures&&a.enable(1),N.instancing&&a.enable(2),N.instancingColor&&a.enable(3),N.matcap&&a.enable(4),N.envMap&&a.enable(5),N.normalMapObjectSpace&&a.enable(6),N.normalMapTangentSpace&&a.enable(7),N.clearcoat&&a.enable(8),N.iridescence&&a.enable(9),N.alphaTest&&a.enable(10),N.vertexColors&&a.enable(11),N.vertexAlphas&&a.enable(12),N.vertexUv1s&&a.enable(13),N.vertexUv2s&&a.enable(14),N.vertexUv3s&&a.enable(15),N.vertexTangents&&a.enable(16),N.anisotropy&&a.enable(17),N.alphaHash&&a.enable(18),N.batching&&a.enable(19),L.push(a.mask),a.disableAll(),N.fog&&a.enable(0),N.useFog&&a.enable(1),N.flatShading&&a.enable(2),N.logarithmicDepthBuffer&&a.enable(3),N.skinning&&a.enable(4),N.morphTargets&&a.enable(5),N.morphNormals&&a.enable(6),N.morphColors&&a.enable(7),N.premultipliedAlpha&&a.enable(8),N.shadowMapEnabled&&a.enable(9),N.useLegacyLights&&a.enable(10),N.doubleSided&&a.enable(11),N.flipSided&&a.enable(12),N.useDepthPacking&&a.enable(13),N.dithering&&a.enable(14),N.transmission&&a.enable(15),N.sheen&&a.enable(16),N.opaque&&a.enable(17),N.pointsUvs&&a.enable(18),N.decodeVideoTexture&&a.enable(19),L.push(a.mask)}function C(L){const N=S[L.type];let G;if(N){const Q=zo[N];G=NL.clone(Q.uniforms)}else G=L.uniforms;return G}function P(L,N){let G;for(let Q=0,le=d.length;Q<le;Q++){const Z=d[Q];if(Z.cacheKey===N){G=Z,++G.usedTimes;break}}return G===void 0&&(G=new B6(n,N,L,s),d.push(G)),G}function D(L){if(--L.usedTimes===0){const N=d.indexOf(L);d[N]=d[d.length-1],d.pop(),L.destroy()}}function O(L){h.remove(L)}function F(){h.dispose()}return{getParameters:w,getProgramCacheKey:_,getUniforms:C,acquireProgram:P,releaseProgram:D,releaseShaderCache:O,programs:d,dispose:F}}function X6(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function Y6(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function M2(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function T2(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(m,g,y,S,A,w){let _=n[e];return _===void 0?(_={id:m.id,object:m,geometry:g,material:y,groupOrder:S,renderOrder:m.renderOrder,z:A,group:w},n[e]=_):(_.id=m.id,_.object=m,_.geometry=g,_.material=y,_.groupOrder=S,_.renderOrder=m.renderOrder,_.z=A,_.group=w),e++,_}function a(m,g,y,S,A,w){const _=o(m,g,y,S,A,w);y.transmission>0?i.push(_):y.transparent===!0?r.push(_):t.push(_)}function h(m,g,y,S,A,w){const _=o(m,g,y,S,A,w);y.transmission>0?i.unshift(_):y.transparent===!0?r.unshift(_):t.unshift(_)}function d(m,g){t.length>1&&t.sort(m||Y6),i.length>1&&i.sort(g||M2),r.length>1&&r.sort(g||M2)}function p(){for(let m=e,g=n.length;m<g;m++){const y=n[m];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:h,finish:p,sort:d}}function q6(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new T2,n.set(i,[o])):r>=s.length?(o=new T2,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function Z6(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new V,color:new it};break;case"SpotLight":t={position:new V,direction:new V,color:new it,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new V,color:new it,distance:0,decay:0};break;case"HemisphereLight":t={direction:new V,skyColor:new it,groundColor:new it};break;case"RectAreaLight":t={color:new it,position:new V,halfWidth:new V,halfHeight:new V};break}return n[e.id]=t,t}}}function j6(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pe};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pe};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pe,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let K6=0;function Q6(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function J6(n,e){const t=new Z6,i=j6(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let p=0;p<9;p++)r.probe.push(new V);const s=new V,o=new yt,a=new yt;function h(p,m){let g=0,y=0,S=0;for(let Q=0;Q<9;Q++)r.probe[Q].set(0,0,0);let A=0,w=0,_=0,T=0,E=0,C=0,P=0,D=0,O=0,F=0,L=0;p.sort(Q6);const N=m===!0?Math.PI:1;for(let Q=0,le=p.length;Q<le;Q++){const Z=p[Q],oe=Z.color,me=Z.intensity,de=Z.distance,Y=Z.shadow&&Z.shadow.map?Z.shadow.map.texture:null;if(Z.isAmbientLight)g+=oe.r*me*N,y+=oe.g*me*N,S+=oe.b*me*N;else if(Z.isLightProbe){for(let te=0;te<9;te++)r.probe[te].addScaledVector(Z.sh.coefficients[te],me);L++}else if(Z.isDirectionalLight){const te=t.get(Z);if(te.color.copy(Z.color).multiplyScalar(Z.intensity*N),Z.castShadow){const ee=Z.shadow,ce=i.get(Z);ce.shadowBias=ee.bias,ce.shadowNormalBias=ee.normalBias,ce.shadowRadius=ee.radius,ce.shadowMapSize=ee.mapSize,r.directionalShadow[A]=ce,r.directionalShadowMap[A]=Y,r.directionalShadowMatrix[A]=Z.shadow.matrix,C++}r.directional[A]=te,A++}else if(Z.isSpotLight){const te=t.get(Z);te.position.setFromMatrixPosition(Z.matrixWorld),te.color.copy(oe).multiplyScalar(me*N),te.distance=de,te.coneCos=Math.cos(Z.angle),te.penumbraCos=Math.cos(Z.angle*(1-Z.penumbra)),te.decay=Z.decay,r.spot[_]=te;const ee=Z.shadow;if(Z.map&&(r.spotLightMap[O]=Z.map,O++,ee.updateMatrices(Z),Z.castShadow&&F++),r.spotLightMatrix[_]=ee.matrix,Z.castShadow){const ce=i.get(Z);ce.shadowBias=ee.bias,ce.shadowNormalBias=ee.normalBias,ce.shadowRadius=ee.radius,ce.shadowMapSize=ee.mapSize,r.spotShadow[_]=ce,r.spotShadowMap[_]=Y,D++}_++}else if(Z.isRectAreaLight){const te=t.get(Z);te.color.copy(oe).multiplyScalar(me),te.halfWidth.set(Z.width*.5,0,0),te.halfHeight.set(0,Z.height*.5,0),r.rectArea[T]=te,T++}else if(Z.isPointLight){const te=t.get(Z);if(te.color.copy(Z.color).multiplyScalar(Z.intensity*N),te.distance=Z.distance,te.decay=Z.decay,Z.castShadow){const ee=Z.shadow,ce=i.get(Z);ce.shadowBias=ee.bias,ce.shadowNormalBias=ee.normalBias,ce.shadowRadius=ee.radius,ce.shadowMapSize=ee.mapSize,ce.shadowCameraNear=ee.camera.near,ce.shadowCameraFar=ee.camera.far,r.pointShadow[w]=ce,r.pointShadowMap[w]=Y,r.pointShadowMatrix[w]=Z.shadow.matrix,P++}r.point[w]=te,w++}else if(Z.isHemisphereLight){const te=t.get(Z);te.skyColor.copy(Z.color).multiplyScalar(me*N),te.groundColor.copy(Z.groundColor).multiplyScalar(me*N),r.hemi[E]=te,E++}}T>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ze.LTC_FLOAT_1,r.rectAreaLTC2=Ze.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Ze.LTC_HALF_1,r.rectAreaLTC2=Ze.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=g,r.ambient[1]=y,r.ambient[2]=S;const G=r.hash;(G.directionalLength!==A||G.pointLength!==w||G.spotLength!==_||G.rectAreaLength!==T||G.hemiLength!==E||G.numDirectionalShadows!==C||G.numPointShadows!==P||G.numSpotShadows!==D||G.numSpotMaps!==O||G.numLightProbes!==L)&&(r.directional.length=A,r.spot.length=_,r.rectArea.length=T,r.point.length=w,r.hemi.length=E,r.directionalShadow.length=C,r.directionalShadowMap.length=C,r.pointShadow.length=P,r.pointShadowMap.length=P,r.spotShadow.length=D,r.spotShadowMap.length=D,r.directionalShadowMatrix.length=C,r.pointShadowMatrix.length=P,r.spotLightMatrix.length=D+O-F,r.spotLightMap.length=O,r.numSpotLightShadowsWithMaps=F,r.numLightProbes=L,G.directionalLength=A,G.pointLength=w,G.spotLength=_,G.rectAreaLength=T,G.hemiLength=E,G.numDirectionalShadows=C,G.numPointShadows=P,G.numSpotShadows=D,G.numSpotMaps=O,G.numLightProbes=L,r.version=K6++)}function d(p,m){let g=0,y=0,S=0,A=0,w=0;const _=m.matrixWorldInverse;for(let T=0,E=p.length;T<E;T++){const C=p[T];if(C.isDirectionalLight){const P=r.directional[g];P.direction.setFromMatrixPosition(C.matrixWorld),s.setFromMatrixPosition(C.target.matrixWorld),P.direction.sub(s),P.direction.transformDirection(_),g++}else if(C.isSpotLight){const P=r.spot[S];P.position.setFromMatrixPosition(C.matrixWorld),P.position.applyMatrix4(_),P.direction.setFromMatrixPosition(C.matrixWorld),s.setFromMatrixPosition(C.target.matrixWorld),P.direction.sub(s),P.direction.transformDirection(_),S++}else if(C.isRectAreaLight){const P=r.rectArea[A];P.position.setFromMatrixPosition(C.matrixWorld),P.position.applyMatrix4(_),a.identity(),o.copy(C.matrixWorld),o.premultiply(_),a.extractRotation(o),P.halfWidth.set(C.width*.5,0,0),P.halfHeight.set(0,C.height*.5,0),P.halfWidth.applyMatrix4(a),P.halfHeight.applyMatrix4(a),A++}else if(C.isPointLight){const P=r.point[y];P.position.setFromMatrixPosition(C.matrixWorld),P.position.applyMatrix4(_),y++}else if(C.isHemisphereLight){const P=r.hemi[w];P.direction.setFromMatrixPosition(C.matrixWorld),P.direction.transformDirection(_),w++}}}return{setup:h,setupView:d,state:r}}function A2(n,e){const t=new J6(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(m){i.push(m)}function a(m){r.push(m)}function h(m){t.setup(i,m)}function d(m){t.setupView(i,m)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:h,setupLightsView:d,pushLight:o,pushShadow:a}}function $6(n,e){let t=new WeakMap;function i(s,o=0){const a=t.get(s);let h;return a===void 0?(h=new A2(n,e),t.set(s,[h])):o>=a.length?(h=new A2(n,e),a.push(h)):h=a[o],h}function r(){t=new WeakMap}return{get:i,dispose:r}}class QM extends mr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=xL,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class JM extends mr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const eG=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,tG=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function nG(n,e,t){let i=new Og;const r=new Pe,s=new Pe,o=new Cn,a=new QM({depthPacking:SL}),h=new JM,d={},p=t.maxTextureSize,m={[fl]:Xr,[Xr]:fl,[_a]:_a},g=new Ma({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Pe},radius:{value:4}},vertexShader:eG,fragmentShader:tG}),y=g.clone();y.defines.HORIZONTAL_PASS=1;const S=new rn;S.setAttribute("position",new Pn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new Wi(S,g),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Ny;let _=this.type;this.render=function(P,D,O){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||P.length===0)return;const F=n.getRenderTarget(),L=n.getActiveCubeFace(),N=n.getActiveMipmapLevel(),G=n.state;G.setBlending(al),G.buffers.color.setClear(1,1,1,1),G.buffers.depth.setTest(!0),G.setScissorTest(!1);const Q=_!==Uo&&this.type===Uo,le=_===Uo&&this.type!==Uo;for(let Z=0,oe=P.length;Z<oe;Z++){const me=P[Z],de=me.shadow;if(de===void 0){console.warn("THREE.WebGLShadowMap:",me,"has no shadow.");continue}if(de.autoUpdate===!1&&de.needsUpdate===!1)continue;r.copy(de.mapSize);const Y=de.getFrameExtents();if(r.multiply(Y),s.copy(de.mapSize),(r.x>p||r.y>p)&&(r.x>p&&(s.x=Math.floor(p/Y.x),r.x=s.x*Y.x,de.mapSize.x=s.x),r.y>p&&(s.y=Math.floor(p/Y.y),r.y=s.y*Y.y,de.mapSize.y=s.y)),de.map===null||Q===!0||le===!0){const ee=this.type!==Uo?{minFilter:Ei,magFilter:Ei}:{};de.map!==null&&de.map.dispose(),de.map=new _o(r.x,r.y,ee),de.map.texture.name=me.name+".shadowMap",de.camera.updateProjectionMatrix()}n.setRenderTarget(de.map),n.clear();const te=de.getViewportCount();for(let ee=0;ee<te;ee++){const ce=de.getViewport(ee);o.set(s.x*ce.x,s.y*ce.y,s.x*ce.z,s.y*ce.w),G.viewport(o),de.updateMatrices(me,ee),i=de.getFrustum(),C(D,O,de.camera,me,this.type)}de.isPointLightShadow!==!0&&this.type===Uo&&T(de,O),de.needsUpdate=!1}_=this.type,w.needsUpdate=!1,n.setRenderTarget(F,L,N)};function T(P,D){const O=e.update(A);g.defines.VSM_SAMPLES!==P.blurSamples&&(g.defines.VSM_SAMPLES=P.blurSamples,y.defines.VSM_SAMPLES=P.blurSamples,g.needsUpdate=!0,y.needsUpdate=!0),P.mapPass===null&&(P.mapPass=new _o(r.x,r.y)),g.uniforms.shadow_pass.value=P.map.texture,g.uniforms.resolution.value=P.mapSize,g.uniforms.radius.value=P.radius,n.setRenderTarget(P.mapPass),n.clear(),n.renderBufferDirect(D,null,O,g,A,null),y.uniforms.shadow_pass.value=P.mapPass.texture,y.uniforms.resolution.value=P.mapSize,y.uniforms.radius.value=P.radius,n.setRenderTarget(P.map),n.clear(),n.renderBufferDirect(D,null,O,y,A,null)}function E(P,D,O,F){let L=null;const N=O.isPointLight===!0?P.customDistanceMaterial:P.customDepthMaterial;if(N!==void 0)L=N;else if(L=O.isPointLight===!0?h:a,n.localClippingEnabled&&D.clipShadows===!0&&Array.isArray(D.clippingPlanes)&&D.clippingPlanes.length!==0||D.displacementMap&&D.displacementScale!==0||D.alphaMap&&D.alphaTest>0||D.map&&D.alphaTest>0){const G=L.uuid,Q=D.uuid;let le=d[G];le===void 0&&(le={},d[G]=le);let Z=le[Q];Z===void 0&&(Z=L.clone(),le[Q]=Z),L=Z}if(L.visible=D.visible,L.wireframe=D.wireframe,F===Uo?L.side=D.shadowSide!==null?D.shadowSide:D.side:L.side=D.shadowSide!==null?D.shadowSide:m[D.side],L.alphaMap=D.alphaMap,L.alphaTest=D.alphaTest,L.map=D.map,L.clipShadows=D.clipShadows,L.clippingPlanes=D.clippingPlanes,L.clipIntersection=D.clipIntersection,L.displacementMap=D.displacementMap,L.displacementScale=D.displacementScale,L.displacementBias=D.displacementBias,L.wireframeLinewidth=D.wireframeLinewidth,L.linewidth=D.linewidth,O.isPointLight===!0&&L.isMeshDistanceMaterial===!0){const G=n.properties.get(L);G.light=O}return L}function C(P,D,O,F,L){if(P.visible===!1)return;if(P.layers.test(D.layers)&&(P.isMesh||P.isLine||P.isPoints)&&(P.castShadow||P.receiveShadow&&L===Uo)&&(!P.frustumCulled||i.intersectsObject(P))){P.modelViewMatrix.multiplyMatrices(O.matrixWorldInverse,P.matrixWorld);const Q=e.update(P),le=P.material;if(Array.isArray(le)){const Z=Q.groups;for(let oe=0,me=Z.length;oe<me;oe++){const de=Z[oe],Y=le[de.materialIndex];if(Y&&Y.visible){const te=E(P,Y,F,L);P.onBeforeShadow(n,P,D,O,Q,te,de),n.renderBufferDirect(O,null,Q,te,P,de),P.onAfterShadow(n,P,D,O,Q,te,de)}}}else if(le.visible){const Z=E(P,le,F,L);P.onBeforeShadow(n,P,D,O,Q,Z,null),n.renderBufferDirect(O,null,Q,Z,P,null),P.onAfterShadow(n,P,D,O,Q,Z,null)}}const G=P.children;for(let Q=0,le=G.length;Q<le;Q++)C(G[Q],D,O,F,L)}}function iG(n,e,t){const i=t.isWebGL2;function r(){let ie=!1;const et=new Cn;let Ve=null;const Ae=new Cn(0,0,0,0);return{setMask:function(Xe){Ve!==Xe&&!ie&&(n.colorMask(Xe,Xe,Xe,Xe),Ve=Xe)},setLocked:function(Xe){ie=Xe},setClear:function(Xe,Pt,ln,Kn,Ti){Ti===!0&&(Xe*=Kn,Pt*=Kn,ln*=Kn),et.set(Xe,Pt,ln,Kn),Ae.equals(et)===!1&&(n.clearColor(Xe,Pt,ln,Kn),Ae.copy(et))},reset:function(){ie=!1,Ve=null,Ae.set(-1,0,0,0)}}}function s(){let ie=!1,et=null,Ve=null,Ae=null;return{setTest:function(Xe){Xe?wt(n.DEPTH_TEST):dt(n.DEPTH_TEST)},setMask:function(Xe){et!==Xe&&!ie&&(n.depthMask(Xe),et=Xe)},setFunc:function(Xe){if(Ve!==Xe){switch(Xe){case j3:n.depthFunc(n.NEVER);break;case K3:n.depthFunc(n.ALWAYS);break;case Q3:n.depthFunc(n.LESS);break;case Ym:n.depthFunc(n.LEQUAL);break;case J3:n.depthFunc(n.EQUAL);break;case $3:n.depthFunc(n.GEQUAL);break;case eL:n.depthFunc(n.GREATER);break;case tL:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Ve=Xe}},setLocked:function(Xe){ie=Xe},setClear:function(Xe){Ae!==Xe&&(n.clearDepth(Xe),Ae=Xe)},reset:function(){ie=!1,et=null,Ve=null,Ae=null}}}function o(){let ie=!1,et=null,Ve=null,Ae=null,Xe=null,Pt=null,ln=null,Kn=null,Ti=null;return{setTest:function(En){ie||(En?wt(n.STENCIL_TEST):dt(n.STENCIL_TEST))},setMask:function(En){et!==En&&!ie&&(n.stencilMask(En),et=En)},setFunc:function(En,mi,jr){(Ve!==En||Ae!==mi||Xe!==jr)&&(n.stencilFunc(En,mi,jr),Ve=En,Ae=mi,Xe=jr)},setOp:function(En,mi,jr){(Pt!==En||ln!==mi||Kn!==jr)&&(n.stencilOp(En,mi,jr),Pt=En,ln=mi,Kn=jr)},setLocked:function(En){ie=En},setClear:function(En){Ti!==En&&(n.clearStencil(En),Ti=En)},reset:function(){ie=!1,et=null,Ve=null,Ae=null,Xe=null,Pt=null,ln=null,Kn=null,Ti=null}}}const a=new r,h=new s,d=new o,p=new WeakMap,m=new WeakMap;let g={},y={},S=new WeakMap,A=[],w=null,_=!1,T=null,E=null,C=null,P=null,D=null,O=null,F=null,L=new it(0,0,0),N=0,G=!1,Q=null,le=null,Z=null,oe=null,me=null;const de=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Y=!1,te=0;const ee=n.getParameter(n.VERSION);ee.indexOf("WebGL")!==-1?(te=parseFloat(/^WebGL (\d)/.exec(ee)[1]),Y=te>=1):ee.indexOf("OpenGL ES")!==-1&&(te=parseFloat(/^OpenGL ES (\d)/.exec(ee)[1]),Y=te>=2);let ce=null,ve={};const he=n.getParameter(n.SCISSOR_BOX),Me=n.getParameter(n.VIEWPORT),Ie=new Cn().fromArray(he),Ye=new Cn().fromArray(Me);function qe(ie,et,Ve,Ae){const Xe=new Uint8Array(4),Pt=n.createTexture();n.bindTexture(ie,Pt),n.texParameteri(ie,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ie,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let ln=0;ln<Ve;ln++)i&&(ie===n.TEXTURE_3D||ie===n.TEXTURE_2D_ARRAY)?n.texImage3D(et,0,n.RGBA,1,1,Ae,0,n.RGBA,n.UNSIGNED_BYTE,Xe):n.texImage2D(et+ln,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Xe);return Pt}const Tt={};Tt[n.TEXTURE_2D]=qe(n.TEXTURE_2D,n.TEXTURE_2D,1),Tt[n.TEXTURE_CUBE_MAP]=qe(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(Tt[n.TEXTURE_2D_ARRAY]=qe(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Tt[n.TEXTURE_3D]=qe(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),h.setClear(1),d.setClear(0),wt(n.DEPTH_TEST),h.setFunc(Ym),$e(!1),rt(Dw),wt(n.CULL_FACE),Le(al);function wt(ie){g[ie]!==!0&&(n.enable(ie),g[ie]=!0)}function dt(ie){g[ie]!==!1&&(n.disable(ie),g[ie]=!1)}function lt(ie,et){return y[ie]!==et?(n.bindFramebuffer(ie,et),y[ie]=et,i&&(ie===n.DRAW_FRAMEBUFFER&&(y[n.FRAMEBUFFER]=et),ie===n.FRAMEBUFFER&&(y[n.DRAW_FRAMEBUFFER]=et)),!0):!1}function j(ie,et){let Ve=A,Ae=!1;if(ie)if(Ve=S.get(et),Ve===void 0&&(Ve=[],S.set(et,Ve)),ie.isWebGLMultipleRenderTargets){const Xe=ie.texture;if(Ve.length!==Xe.length||Ve[0]!==n.COLOR_ATTACHMENT0){for(let Pt=0,ln=Xe.length;Pt<ln;Pt++)Ve[Pt]=n.COLOR_ATTACHMENT0+Pt;Ve.length=Xe.length,Ae=!0}}else Ve[0]!==n.COLOR_ATTACHMENT0&&(Ve[0]=n.COLOR_ATTACHMENT0,Ae=!0);else Ve[0]!==n.BACK&&(Ve[0]=n.BACK,Ae=!0);Ae&&(t.isWebGL2?n.drawBuffers(Ve):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ve))}function Ue(ie){return w!==ie?(n.useProgram(ie),w=ie,!0):!1}const we={[hu]:n.FUNC_ADD,[D3]:n.FUNC_SUBTRACT,[U3]:n.FUNC_REVERSE_SUBTRACT};if(i)we[zw]=n.MIN,we[kw]=n.MAX;else{const ie=e.get("EXT_blend_minmax");ie!==null&&(we[zw]=ie.MIN_EXT,we[kw]=ie.MAX_EXT)}const He={[N3]:n.ZERO,[F3]:n.ONE,[z3]:n.SRC_COLOR,[ly]:n.SRC_ALPHA,[W3]:n.SRC_ALPHA_SATURATE,[V3]:n.DST_COLOR,[B3]:n.DST_ALPHA,[k3]:n.ONE_MINUS_SRC_COLOR,[uy]:n.ONE_MINUS_SRC_ALPHA,[G3]:n.ONE_MINUS_DST_COLOR,[H3]:n.ONE_MINUS_DST_ALPHA,[X3]:n.CONSTANT_COLOR,[Y3]:n.ONE_MINUS_CONSTANT_COLOR,[q3]:n.CONSTANT_ALPHA,[Z3]:n.ONE_MINUS_CONSTANT_ALPHA};function Le(ie,et,Ve,Ae,Xe,Pt,ln,Kn,Ti,En){if(ie===al){_===!0&&(dt(n.BLEND),_=!1);return}if(_===!1&&(wt(n.BLEND),_=!0),ie!==O3){if(ie!==T||En!==G){if((E!==hu||D!==hu)&&(n.blendEquation(n.FUNC_ADD),E=hu,D=hu),En)switch(ie){case Qc:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Uw:n.blendFunc(n.ONE,n.ONE);break;case Nw:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Fw:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ie);break}else switch(ie){case Qc:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Uw:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case Nw:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Fw:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ie);break}C=null,P=null,O=null,F=null,L.set(0,0,0),N=0,T=ie,G=En}return}Xe=Xe||et,Pt=Pt||Ve,ln=ln||Ae,(et!==E||Xe!==D)&&(n.blendEquationSeparate(we[et],we[Xe]),E=et,D=Xe),(Ve!==C||Ae!==P||Pt!==O||ln!==F)&&(n.blendFuncSeparate(He[Ve],He[Ae],He[Pt],He[ln]),C=Ve,P=Ae,O=Pt,F=ln),(Kn.equals(L)===!1||Ti!==N)&&(n.blendColor(Kn.r,Kn.g,Kn.b,Ti),L.copy(Kn),N=Ti),T=ie,G=!1}function ut(ie,et){ie.side===_a?dt(n.CULL_FACE):wt(n.CULL_FACE);let Ve=ie.side===Xr;et&&(Ve=!Ve),$e(Ve),ie.blending===Qc&&ie.transparent===!1?Le(al):Le(ie.blending,ie.blendEquation,ie.blendSrc,ie.blendDst,ie.blendEquationAlpha,ie.blendSrcAlpha,ie.blendDstAlpha,ie.blendColor,ie.blendAlpha,ie.premultipliedAlpha),h.setFunc(ie.depthFunc),h.setTest(ie.depthTest),h.setMask(ie.depthWrite),a.setMask(ie.colorWrite);const Ae=ie.stencilWrite;d.setTest(Ae),Ae&&(d.setMask(ie.stencilWriteMask),d.setFunc(ie.stencilFunc,ie.stencilRef,ie.stencilFuncMask),d.setOp(ie.stencilFail,ie.stencilZFail,ie.stencilZPass)),Nt(ie.polygonOffset,ie.polygonOffsetFactor,ie.polygonOffsetUnits),ie.alphaToCoverage===!0?wt(n.SAMPLE_ALPHA_TO_COVERAGE):dt(n.SAMPLE_ALPHA_TO_COVERAGE)}function $e(ie){Q!==ie&&(ie?n.frontFace(n.CW):n.frontFace(n.CCW),Q=ie)}function rt(ie){ie!==P3?(wt(n.CULL_FACE),ie!==le&&(ie===Dw?n.cullFace(n.BACK):ie===L3?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):dt(n.CULL_FACE),le=ie}function xt(ie){ie!==Z&&(Y&&n.lineWidth(ie),Z=ie)}function Nt(ie,et,Ve){ie?(wt(n.POLYGON_OFFSET_FILL),(oe!==et||me!==Ve)&&(n.polygonOffset(et,Ve),oe=et,me=Ve)):dt(n.POLYGON_OFFSET_FILL)}function wn(ie){ie?wt(n.SCISSOR_TEST):dt(n.SCISSOR_TEST)}function X(ie){ie===void 0&&(ie=n.TEXTURE0+de-1),ce!==ie&&(n.activeTexture(ie),ce=ie)}function k(ie,et,Ve){Ve===void 0&&(ce===null?Ve=n.TEXTURE0+de-1:Ve=ce);let Ae=ve[Ve];Ae===void 0&&(Ae={type:void 0,texture:void 0},ve[Ve]=Ae),(Ae.type!==ie||Ae.texture!==et)&&(ce!==Ve&&(n.activeTexture(Ve),ce=Ve),n.bindTexture(ie,et||Tt[ie]),Ae.type=ie,Ae.texture=et)}function fe(){const ie=ve[ce];ie!==void 0&&ie.type!==void 0&&(n.bindTexture(ie.type,null),ie.type=void 0,ie.texture=void 0)}function ke(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function De(){try{n.compressedTexImage3D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Ne(){try{n.texSubImage2D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function ht(){try{n.texSubImage3D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Ge(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Ke(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function bt(){try{n.texStorage2D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function un(){try{n.texStorage3D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Be(){try{n.texImage2D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function gn(){try{n.texImage3D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function kt(ie){Ie.equals(ie)===!1&&(n.scissor(ie.x,ie.y,ie.z,ie.w),Ie.copy(ie))}function Ct(ie){Ye.equals(ie)===!1&&(n.viewport(ie.x,ie.y,ie.z,ie.w),Ye.copy(ie))}function St(ie,et){let Ve=m.get(et);Ve===void 0&&(Ve=new WeakMap,m.set(et,Ve));let Ae=Ve.get(ie);Ae===void 0&&(Ae=n.getUniformBlockIndex(et,ie.name),Ve.set(ie,Ae))}function st(ie,et){const Ae=m.get(et).get(ie);p.get(et)!==Ae&&(n.uniformBlockBinding(et,Ae,ie.__bindingPointIndex),p.set(et,Ae))}function sn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),i===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),g={},ce=null,ve={},y={},S=new WeakMap,A=[],w=null,_=!1,T=null,E=null,C=null,P=null,D=null,O=null,F=null,L=new it(0,0,0),N=0,G=!1,Q=null,le=null,Z=null,oe=null,me=null,Ie.set(0,0,n.canvas.width,n.canvas.height),Ye.set(0,0,n.canvas.width,n.canvas.height),a.reset(),h.reset(),d.reset()}return{buffers:{color:a,depth:h,stencil:d},enable:wt,disable:dt,bindFramebuffer:lt,drawBuffers:j,useProgram:Ue,setBlending:Le,setMaterial:ut,setFlipSided:$e,setCullFace:rt,setLineWidth:xt,setPolygonOffset:Nt,setScissorTest:wn,activeTexture:X,bindTexture:k,unbindTexture:fe,compressedTexImage2D:ke,compressedTexImage3D:De,texImage2D:Be,texImage3D:gn,updateUBOMapping:St,uniformBlockBinding:st,texStorage2D:bt,texStorage3D:un,texSubImage2D:Ne,texSubImage3D:ht,compressedTexSubImage2D:Ge,compressedTexSubImage3D:Ke,scissor:kt,viewport:Ct,reset:sn}}function rG(n,e,t,i,r,s,o){const a=r.isWebGL2,h=r.maxTextures,d=r.maxCubemapSize,p=r.maxTextureSize,m=r.maxSamples,g=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,y=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),S=new WeakMap;let A;const w=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function T(X,k){return _?new OffscreenCanvas(X,k):rg("canvas")}function E(X,k,fe,ke){let De=1;if((X.width>ke||X.height>ke)&&(De=ke/Math.max(X.width,X.height)),De<1||k===!0)if(typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&X instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&X instanceof ImageBitmap){const Ne=k?fy:Math.floor,ht=Ne(De*X.width),Ge=Ne(De*X.height);A===void 0&&(A=T(ht,Ge));const Ke=fe?T(ht,Ge):A;return Ke.width=ht,Ke.height=Ge,Ke.getContext("2d").drawImage(X,0,0,ht,Ge),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+X.width+"x"+X.height+") to ("+ht+"x"+Ge+")."),Ke}else return"data"in X&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+X.width+"x"+X.height+")."),X;return X}function C(X){return pE(X.width)&&pE(X.height)}function P(X){return a?!1:X.wrapS!==Cr||X.wrapT!==Cr||X.minFilter!==Ei&&X.minFilter!==ni}function D(X,k){return X.generateMipmaps&&k&&X.minFilter!==Ei&&X.minFilter!==ni}function O(X){n.generateMipmap(X)}function F(X,k,fe,ke,De=!1){if(a===!1)return k;if(X!==null){if(n[X]!==void 0)return n[X];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+X+"'")}let Ne=k;if(k===n.RED&&(fe===n.FLOAT&&(Ne=n.R32F),fe===n.HALF_FLOAT&&(Ne=n.R16F),fe===n.UNSIGNED_BYTE&&(Ne=n.R8)),k===n.RED_INTEGER&&(fe===n.UNSIGNED_BYTE&&(Ne=n.R8UI),fe===n.UNSIGNED_SHORT&&(Ne=n.R16UI),fe===n.UNSIGNED_INT&&(Ne=n.R32UI),fe===n.BYTE&&(Ne=n.R8I),fe===n.SHORT&&(Ne=n.R16I),fe===n.INT&&(Ne=n.R32I)),k===n.RG&&(fe===n.FLOAT&&(Ne=n.RG32F),fe===n.HALF_FLOAT&&(Ne=n.RG16F),fe===n.UNSIGNED_BYTE&&(Ne=n.RG8)),k===n.RGBA){const ht=De?eg:Rn.getTransfer(ke);fe===n.FLOAT&&(Ne=n.RGBA32F),fe===n.HALF_FLOAT&&(Ne=n.RGBA16F),fe===n.UNSIGNED_BYTE&&(Ne=ht===Hn?n.SRGB8_ALPHA8:n.RGBA8),fe===n.UNSIGNED_SHORT_4_4_4_4&&(Ne=n.RGBA4),fe===n.UNSIGNED_SHORT_5_5_5_1&&(Ne=n.RGB5_A1)}return(Ne===n.R16F||Ne===n.R32F||Ne===n.RG16F||Ne===n.RG32F||Ne===n.RGBA16F||Ne===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ne}function L(X,k,fe){return D(X,fe)===!0||X.isFramebufferTexture&&X.minFilter!==Ei&&X.minFilter!==ni?Math.log2(Math.max(k.width,k.height))+1:X.mipmaps!==void 0&&X.mipmaps.length>0?X.mipmaps.length:X.isCompressedTexture&&Array.isArray(X.image)?k.mipmaps.length:1}function N(X){return X===Ei||X===cy||X===xm?n.NEAREST:n.LINEAR}function G(X){const k=X.target;k.removeEventListener("dispose",G),le(k),k.isVideoTexture&&S.delete(k)}function Q(X){const k=X.target;k.removeEventListener("dispose",Q),oe(k)}function le(X){const k=i.get(X);if(k.__webglInit===void 0)return;const fe=X.source,ke=w.get(fe);if(ke){const De=ke[k.__cacheKey];De.usedTimes--,De.usedTimes===0&&Z(X),Object.keys(ke).length===0&&w.delete(fe)}i.remove(X)}function Z(X){const k=i.get(X);n.deleteTexture(k.__webglTexture);const fe=X.source,ke=w.get(fe);delete ke[k.__cacheKey],o.memory.textures--}function oe(X){const k=X.texture,fe=i.get(X),ke=i.get(k);if(ke.__webglTexture!==void 0&&(n.deleteTexture(ke.__webglTexture),o.memory.textures--),X.depthTexture&&X.depthTexture.dispose(),X.isWebGLCubeRenderTarget)for(let De=0;De<6;De++){if(Array.isArray(fe.__webglFramebuffer[De]))for(let Ne=0;Ne<fe.__webglFramebuffer[De].length;Ne++)n.deleteFramebuffer(fe.__webglFramebuffer[De][Ne]);else n.deleteFramebuffer(fe.__webglFramebuffer[De]);fe.__webglDepthbuffer&&n.deleteRenderbuffer(fe.__webglDepthbuffer[De])}else{if(Array.isArray(fe.__webglFramebuffer))for(let De=0;De<fe.__webglFramebuffer.length;De++)n.deleteFramebuffer(fe.__webglFramebuffer[De]);else n.deleteFramebuffer(fe.__webglFramebuffer);if(fe.__webglDepthbuffer&&n.deleteRenderbuffer(fe.__webglDepthbuffer),fe.__webglMultisampledFramebuffer&&n.deleteFramebuffer(fe.__webglMultisampledFramebuffer),fe.__webglColorRenderbuffer)for(let De=0;De<fe.__webglColorRenderbuffer.length;De++)fe.__webglColorRenderbuffer[De]&&n.deleteRenderbuffer(fe.__webglColorRenderbuffer[De]);fe.__webglDepthRenderbuffer&&n.deleteRenderbuffer(fe.__webglDepthRenderbuffer)}if(X.isWebGLMultipleRenderTargets)for(let De=0,Ne=k.length;De<Ne;De++){const ht=i.get(k[De]);ht.__webglTexture&&(n.deleteTexture(ht.__webglTexture),o.memory.textures--),i.remove(k[De])}i.remove(k),i.remove(X)}let me=0;function de(){me=0}function Y(){const X=me;return X>=h&&console.warn("THREE.WebGLTextures: Trying to use "+X+" texture units while this GPU supports only "+h),me+=1,X}function te(X){const k=[];return k.push(X.wrapS),k.push(X.wrapT),k.push(X.wrapR||0),k.push(X.magFilter),k.push(X.minFilter),k.push(X.anisotropy),k.push(X.internalFormat),k.push(X.format),k.push(X.type),k.push(X.generateMipmaps),k.push(X.premultiplyAlpha),k.push(X.flipY),k.push(X.unpackAlignment),k.push(X.colorSpace),k.join()}function ee(X,k){const fe=i.get(X);if(X.isVideoTexture&&Nt(X),X.isRenderTargetTexture===!1&&X.version>0&&fe.__version!==X.version){const ke=X.image;if(ke===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ke.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{wt(fe,X,k);return}}t.bindTexture(n.TEXTURE_2D,fe.__webglTexture,n.TEXTURE0+k)}function ce(X,k){const fe=i.get(X);if(X.version>0&&fe.__version!==X.version){wt(fe,X,k);return}t.bindTexture(n.TEXTURE_2D_ARRAY,fe.__webglTexture,n.TEXTURE0+k)}function ve(X,k){const fe=i.get(X);if(X.version>0&&fe.__version!==X.version){wt(fe,X,k);return}t.bindTexture(n.TEXTURE_3D,fe.__webglTexture,n.TEXTURE0+k)}function he(X,k){const fe=i.get(X);if(X.version>0&&fe.__version!==X.version){dt(fe,X,k);return}t.bindTexture(n.TEXTURE_CUBE_MAP,fe.__webglTexture,n.TEXTURE0+k)}const Me={[jm]:n.REPEAT,[Cr]:n.CLAMP_TO_EDGE,[Km]:n.MIRRORED_REPEAT},Ie={[Ei]:n.NEAREST,[cy]:n.NEAREST_MIPMAP_NEAREST,[xm]:n.NEAREST_MIPMAP_LINEAR,[ni]:n.LINEAR,[DM]:n.LINEAR_MIPMAP_NEAREST,[Iu]:n.LINEAR_MIPMAP_LINEAR},Ye={[EL]:n.NEVER,[bL]:n.ALWAYS,[ML]:n.LESS,[WM]:n.LEQUAL,[TL]:n.EQUAL,[RL]:n.GEQUAL,[AL]:n.GREATER,[CL]:n.NOTEQUAL};function qe(X,k,fe){if(fe?(n.texParameteri(X,n.TEXTURE_WRAP_S,Me[k.wrapS]),n.texParameteri(X,n.TEXTURE_WRAP_T,Me[k.wrapT]),(X===n.TEXTURE_3D||X===n.TEXTURE_2D_ARRAY)&&n.texParameteri(X,n.TEXTURE_WRAP_R,Me[k.wrapR]),n.texParameteri(X,n.TEXTURE_MAG_FILTER,Ie[k.magFilter]),n.texParameteri(X,n.TEXTURE_MIN_FILTER,Ie[k.minFilter])):(n.texParameteri(X,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(X,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(X===n.TEXTURE_3D||X===n.TEXTURE_2D_ARRAY)&&n.texParameteri(X,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(k.wrapS!==Cr||k.wrapT!==Cr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(X,n.TEXTURE_MAG_FILTER,N(k.magFilter)),n.texParameteri(X,n.TEXTURE_MIN_FILTER,N(k.minFilter)),k.minFilter!==Ei&&k.minFilter!==ni&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),k.compareFunction&&(n.texParameteri(X,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(X,n.TEXTURE_COMPARE_FUNC,Ye[k.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const ke=e.get("EXT_texture_filter_anisotropic");if(k.magFilter===Ei||k.minFilter!==xm&&k.minFilter!==Iu||k.type===fo&&e.has("OES_texture_float_linear")===!1||a===!1&&k.type===ah&&e.has("OES_texture_half_float_linear")===!1)return;(k.anisotropy>1||i.get(k).__currentAnisotropy)&&(n.texParameterf(X,ke.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,r.getMaxAnisotropy())),i.get(k).__currentAnisotropy=k.anisotropy)}}function Tt(X,k){let fe=!1;X.__webglInit===void 0&&(X.__webglInit=!0,k.addEventListener("dispose",G));const ke=k.source;let De=w.get(ke);De===void 0&&(De={},w.set(ke,De));const Ne=te(k);if(Ne!==X.__cacheKey){De[Ne]===void 0&&(De[Ne]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,fe=!0),De[Ne].usedTimes++;const ht=De[X.__cacheKey];ht!==void 0&&(De[X.__cacheKey].usedTimes--,ht.usedTimes===0&&Z(k)),X.__cacheKey=Ne,X.__webglTexture=De[Ne].texture}return fe}function wt(X,k,fe){let ke=n.TEXTURE_2D;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(ke=n.TEXTURE_2D_ARRAY),k.isData3DTexture&&(ke=n.TEXTURE_3D);const De=Tt(X,k),Ne=k.source;t.bindTexture(ke,X.__webglTexture,n.TEXTURE0+fe);const ht=i.get(Ne);if(Ne.version!==ht.__version||De===!0){t.activeTexture(n.TEXTURE0+fe);const Ge=Rn.getPrimaries(Rn.workingColorSpace),Ke=k.colorSpace===Us?null:Rn.getPrimaries(k.colorSpace),bt=k.colorSpace===Us||Ge===Ke?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,bt);const un=P(k)&&C(k.image)===!1;let Be=E(k.image,un,!1,p);Be=wn(k,Be);const gn=C(Be)||a,kt=s.convert(k.format,k.colorSpace);let Ct=s.convert(k.type),St=F(k.internalFormat,kt,Ct,k.colorSpace,k.isVideoTexture);qe(ke,k,gn);let st;const sn=k.mipmaps,ie=a&&k.isVideoTexture!==!0&&St!==HM,et=ht.__version===void 0||De===!0,Ve=L(k,Be,gn);if(k.isDepthTexture)St=n.DEPTH_COMPONENT,a?k.type===fo?St=n.DEPTH_COMPONENT32F:k.type===sl?St=n.DEPTH_COMPONENT24:k.type===Mu?St=n.DEPTH24_STENCIL8:St=n.DEPTH_COMPONENT16:k.type===fo&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),k.format===Tu&&St===n.DEPTH_COMPONENT&&k.type!==zy&&k.type!==sl&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),k.type=sl,Ct=s.convert(k.type)),k.format===lh&&St===n.DEPTH_COMPONENT&&(St=n.DEPTH_STENCIL,k.type!==Mu&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),k.type=Mu,Ct=s.convert(k.type))),et&&(ie?t.texStorage2D(n.TEXTURE_2D,1,St,Be.width,Be.height):t.texImage2D(n.TEXTURE_2D,0,St,Be.width,Be.height,0,kt,Ct,null));else if(k.isDataTexture)if(sn.length>0&&gn){ie&&et&&t.texStorage2D(n.TEXTURE_2D,Ve,St,sn[0].width,sn[0].height);for(let Ae=0,Xe=sn.length;Ae<Xe;Ae++)st=sn[Ae],ie?t.texSubImage2D(n.TEXTURE_2D,Ae,0,0,st.width,st.height,kt,Ct,st.data):t.texImage2D(n.TEXTURE_2D,Ae,St,st.width,st.height,0,kt,Ct,st.data);k.generateMipmaps=!1}else ie?(et&&t.texStorage2D(n.TEXTURE_2D,Ve,St,Be.width,Be.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Be.width,Be.height,kt,Ct,Be.data)):t.texImage2D(n.TEXTURE_2D,0,St,Be.width,Be.height,0,kt,Ct,Be.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){ie&&et&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ve,St,sn[0].width,sn[0].height,Be.depth);for(let Ae=0,Xe=sn.length;Ae<Xe;Ae++)st=sn[Ae],k.format!==Gr?kt!==null?ie?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ae,0,0,0,st.width,st.height,Be.depth,kt,st.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Ae,St,st.width,st.height,Be.depth,0,st.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ie?t.texSubImage3D(n.TEXTURE_2D_ARRAY,Ae,0,0,0,st.width,st.height,Be.depth,kt,Ct,st.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Ae,St,st.width,st.height,Be.depth,0,kt,Ct,st.data)}else{ie&&et&&t.texStorage2D(n.TEXTURE_2D,Ve,St,sn[0].width,sn[0].height);for(let Ae=0,Xe=sn.length;Ae<Xe;Ae++)st=sn[Ae],k.format!==Gr?kt!==null?ie?t.compressedTexSubImage2D(n.TEXTURE_2D,Ae,0,0,st.width,st.height,kt,st.data):t.compressedTexImage2D(n.TEXTURE_2D,Ae,St,st.width,st.height,0,st.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ie?t.texSubImage2D(n.TEXTURE_2D,Ae,0,0,st.width,st.height,kt,Ct,st.data):t.texImage2D(n.TEXTURE_2D,Ae,St,st.width,st.height,0,kt,Ct,st.data)}else if(k.isDataArrayTexture)ie?(et&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ve,St,Be.width,Be.height,Be.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Be.width,Be.height,Be.depth,kt,Ct,Be.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,St,Be.width,Be.height,Be.depth,0,kt,Ct,Be.data);else if(k.isData3DTexture)ie?(et&&t.texStorage3D(n.TEXTURE_3D,Ve,St,Be.width,Be.height,Be.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Be.width,Be.height,Be.depth,kt,Ct,Be.data)):t.texImage3D(n.TEXTURE_3D,0,St,Be.width,Be.height,Be.depth,0,kt,Ct,Be.data);else if(k.isFramebufferTexture){if(et)if(ie)t.texStorage2D(n.TEXTURE_2D,Ve,St,Be.width,Be.height);else{let Ae=Be.width,Xe=Be.height;for(let Pt=0;Pt<Ve;Pt++)t.texImage2D(n.TEXTURE_2D,Pt,St,Ae,Xe,0,kt,Ct,null),Ae>>=1,Xe>>=1}}else if(sn.length>0&&gn){ie&&et&&t.texStorage2D(n.TEXTURE_2D,Ve,St,sn[0].width,sn[0].height);for(let Ae=0,Xe=sn.length;Ae<Xe;Ae++)st=sn[Ae],ie?t.texSubImage2D(n.TEXTURE_2D,Ae,0,0,kt,Ct,st):t.texImage2D(n.TEXTURE_2D,Ae,St,kt,Ct,st);k.generateMipmaps=!1}else ie?(et&&t.texStorage2D(n.TEXTURE_2D,Ve,St,Be.width,Be.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,kt,Ct,Be)):t.texImage2D(n.TEXTURE_2D,0,St,kt,Ct,Be);D(k,gn)&&O(ke),ht.__version=Ne.version,k.onUpdate&&k.onUpdate(k)}X.__version=k.version}function dt(X,k,fe){if(k.image.length!==6)return;const ke=Tt(X,k),De=k.source;t.bindTexture(n.TEXTURE_CUBE_MAP,X.__webglTexture,n.TEXTURE0+fe);const Ne=i.get(De);if(De.version!==Ne.__version||ke===!0){t.activeTexture(n.TEXTURE0+fe);const ht=Rn.getPrimaries(Rn.workingColorSpace),Ge=k.colorSpace===Us?null:Rn.getPrimaries(k.colorSpace),Ke=k.colorSpace===Us||ht===Ge?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ke);const bt=k.isCompressedTexture||k.image[0].isCompressedTexture,un=k.image[0]&&k.image[0].isDataTexture,Be=[];for(let Ae=0;Ae<6;Ae++)!bt&&!un?Be[Ae]=E(k.image[Ae],!1,!0,d):Be[Ae]=un?k.image[Ae].image:k.image[Ae],Be[Ae]=wn(k,Be[Ae]);const gn=Be[0],kt=C(gn)||a,Ct=s.convert(k.format,k.colorSpace),St=s.convert(k.type),st=F(k.internalFormat,Ct,St,k.colorSpace),sn=a&&k.isVideoTexture!==!0,ie=Ne.__version===void 0||ke===!0;let et=L(k,gn,kt);qe(n.TEXTURE_CUBE_MAP,k,kt);let Ve;if(bt){sn&&ie&&t.texStorage2D(n.TEXTURE_CUBE_MAP,et,st,gn.width,gn.height);for(let Ae=0;Ae<6;Ae++){Ve=Be[Ae].mipmaps;for(let Xe=0;Xe<Ve.length;Xe++){const Pt=Ve[Xe];k.format!==Gr?Ct!==null?sn?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,Xe,0,0,Pt.width,Pt.height,Ct,Pt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,Xe,st,Pt.width,Pt.height,0,Pt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):sn?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,Xe,0,0,Pt.width,Pt.height,Ct,St,Pt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,Xe,st,Pt.width,Pt.height,0,Ct,St,Pt.data)}}}else{Ve=k.mipmaps,sn&&ie&&(Ve.length>0&&et++,t.texStorage2D(n.TEXTURE_CUBE_MAP,et,st,Be[0].width,Be[0].height));for(let Ae=0;Ae<6;Ae++)if(un){sn?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,0,0,0,Be[Ae].width,Be[Ae].height,Ct,St,Be[Ae].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,0,st,Be[Ae].width,Be[Ae].height,0,Ct,St,Be[Ae].data);for(let Xe=0;Xe<Ve.length;Xe++){const ln=Ve[Xe].image[Ae].image;sn?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,Xe+1,0,0,ln.width,ln.height,Ct,St,ln.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,Xe+1,st,ln.width,ln.height,0,Ct,St,ln.data)}}else{sn?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,0,0,0,Ct,St,Be[Ae]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,0,st,Ct,St,Be[Ae]);for(let Xe=0;Xe<Ve.length;Xe++){const Pt=Ve[Xe];sn?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,Xe+1,0,0,Ct,St,Pt.image[Ae]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,Xe+1,st,Ct,St,Pt.image[Ae])}}}D(k,kt)&&O(n.TEXTURE_CUBE_MAP),Ne.__version=De.version,k.onUpdate&&k.onUpdate(k)}X.__version=k.version}function lt(X,k,fe,ke,De,Ne){const ht=s.convert(fe.format,fe.colorSpace),Ge=s.convert(fe.type),Ke=F(fe.internalFormat,ht,Ge,fe.colorSpace);if(!i.get(k).__hasExternalTextures){const un=Math.max(1,k.width>>Ne),Be=Math.max(1,k.height>>Ne);De===n.TEXTURE_3D||De===n.TEXTURE_2D_ARRAY?t.texImage3D(De,Ne,Ke,un,Be,k.depth,0,ht,Ge,null):t.texImage2D(De,Ne,Ke,un,Be,0,ht,Ge,null)}t.bindFramebuffer(n.FRAMEBUFFER,X),xt(k)?g.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ke,De,i.get(fe).__webglTexture,0,rt(k)):(De===n.TEXTURE_2D||De>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&De<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ke,De,i.get(fe).__webglTexture,Ne),t.bindFramebuffer(n.FRAMEBUFFER,null)}function j(X,k,fe){if(n.bindRenderbuffer(n.RENDERBUFFER,X),k.depthBuffer&&!k.stencilBuffer){let ke=a===!0?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(fe||xt(k)){const De=k.depthTexture;De&&De.isDepthTexture&&(De.type===fo?ke=n.DEPTH_COMPONENT32F:De.type===sl&&(ke=n.DEPTH_COMPONENT24));const Ne=rt(k);xt(k)?g.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ne,ke,k.width,k.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Ne,ke,k.width,k.height)}else n.renderbufferStorage(n.RENDERBUFFER,ke,k.width,k.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,X)}else if(k.depthBuffer&&k.stencilBuffer){const ke=rt(k);fe&&xt(k)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,ke,n.DEPTH24_STENCIL8,k.width,k.height):xt(k)?g.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ke,n.DEPTH24_STENCIL8,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,k.width,k.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,X)}else{const ke=k.isWebGLMultipleRenderTargets===!0?k.texture:[k.texture];for(let De=0;De<ke.length;De++){const Ne=ke[De],ht=s.convert(Ne.format,Ne.colorSpace),Ge=s.convert(Ne.type),Ke=F(Ne.internalFormat,ht,Ge,Ne.colorSpace),bt=rt(k);fe&&xt(k)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,bt,Ke,k.width,k.height):xt(k)?g.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,bt,Ke,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,Ke,k.width,k.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ue(X,k){if(k&&k.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,X),!(k.depthTexture&&k.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(k.depthTexture).__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),ee(k.depthTexture,0);const ke=i.get(k.depthTexture).__webglTexture,De=rt(k);if(k.depthTexture.format===Tu)xt(k)?g.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ke,0,De):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ke,0);else if(k.depthTexture.format===lh)xt(k)?g.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ke,0,De):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ke,0);else throw new Error("Unknown depthTexture format")}function we(X){const k=i.get(X),fe=X.isWebGLCubeRenderTarget===!0;if(X.depthTexture&&!k.__autoAllocateDepthBuffer){if(fe)throw new Error("target.depthTexture not supported in Cube render targets");Ue(k.__webglFramebuffer,X)}else if(fe){k.__webglDepthbuffer=[];for(let ke=0;ke<6;ke++)t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer[ke]),k.__webglDepthbuffer[ke]=n.createRenderbuffer(),j(k.__webglDepthbuffer[ke],X,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer),k.__webglDepthbuffer=n.createRenderbuffer(),j(k.__webglDepthbuffer,X,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function He(X,k,fe){const ke=i.get(X);k!==void 0&&lt(ke.__webglFramebuffer,X,X.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),fe!==void 0&&we(X)}function Le(X){const k=X.texture,fe=i.get(X),ke=i.get(k);X.addEventListener("dispose",Q),X.isWebGLMultipleRenderTargets!==!0&&(ke.__webglTexture===void 0&&(ke.__webglTexture=n.createTexture()),ke.__version=k.version,o.memory.textures++);const De=X.isWebGLCubeRenderTarget===!0,Ne=X.isWebGLMultipleRenderTargets===!0,ht=C(X)||a;if(De){fe.__webglFramebuffer=[];for(let Ge=0;Ge<6;Ge++)if(a&&k.mipmaps&&k.mipmaps.length>0){fe.__webglFramebuffer[Ge]=[];for(let Ke=0;Ke<k.mipmaps.length;Ke++)fe.__webglFramebuffer[Ge][Ke]=n.createFramebuffer()}else fe.__webglFramebuffer[Ge]=n.createFramebuffer()}else{if(a&&k.mipmaps&&k.mipmaps.length>0){fe.__webglFramebuffer=[];for(let Ge=0;Ge<k.mipmaps.length;Ge++)fe.__webglFramebuffer[Ge]=n.createFramebuffer()}else fe.__webglFramebuffer=n.createFramebuffer();if(Ne)if(r.drawBuffers){const Ge=X.texture;for(let Ke=0,bt=Ge.length;Ke<bt;Ke++){const un=i.get(Ge[Ke]);un.__webglTexture===void 0&&(un.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&X.samples>0&&xt(X)===!1){const Ge=Ne?k:[k];fe.__webglMultisampledFramebuffer=n.createFramebuffer(),fe.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,fe.__webglMultisampledFramebuffer);for(let Ke=0;Ke<Ge.length;Ke++){const bt=Ge[Ke];fe.__webglColorRenderbuffer[Ke]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,fe.__webglColorRenderbuffer[Ke]);const un=s.convert(bt.format,bt.colorSpace),Be=s.convert(bt.type),gn=F(bt.internalFormat,un,Be,bt.colorSpace,X.isXRRenderTarget===!0),kt=rt(X);n.renderbufferStorageMultisample(n.RENDERBUFFER,kt,gn,X.width,X.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ke,n.RENDERBUFFER,fe.__webglColorRenderbuffer[Ke])}n.bindRenderbuffer(n.RENDERBUFFER,null),X.depthBuffer&&(fe.__webglDepthRenderbuffer=n.createRenderbuffer(),j(fe.__webglDepthRenderbuffer,X,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(De){t.bindTexture(n.TEXTURE_CUBE_MAP,ke.__webglTexture),qe(n.TEXTURE_CUBE_MAP,k,ht);for(let Ge=0;Ge<6;Ge++)if(a&&k.mipmaps&&k.mipmaps.length>0)for(let Ke=0;Ke<k.mipmaps.length;Ke++)lt(fe.__webglFramebuffer[Ge][Ke],X,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,Ke);else lt(fe.__webglFramebuffer[Ge],X,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0);D(k,ht)&&O(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ne){const Ge=X.texture;for(let Ke=0,bt=Ge.length;Ke<bt;Ke++){const un=Ge[Ke],Be=i.get(un);t.bindTexture(n.TEXTURE_2D,Be.__webglTexture),qe(n.TEXTURE_2D,un,ht),lt(fe.__webglFramebuffer,X,un,n.COLOR_ATTACHMENT0+Ke,n.TEXTURE_2D,0),D(un,ht)&&O(n.TEXTURE_2D)}t.unbindTexture()}else{let Ge=n.TEXTURE_2D;if((X.isWebGL3DRenderTarget||X.isWebGLArrayRenderTarget)&&(a?Ge=X.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ge,ke.__webglTexture),qe(Ge,k,ht),a&&k.mipmaps&&k.mipmaps.length>0)for(let Ke=0;Ke<k.mipmaps.length;Ke++)lt(fe.__webglFramebuffer[Ke],X,k,n.COLOR_ATTACHMENT0,Ge,Ke);else lt(fe.__webglFramebuffer,X,k,n.COLOR_ATTACHMENT0,Ge,0);D(k,ht)&&O(Ge),t.unbindTexture()}X.depthBuffer&&we(X)}function ut(X){const k=C(X)||a,fe=X.isWebGLMultipleRenderTargets===!0?X.texture:[X.texture];for(let ke=0,De=fe.length;ke<De;ke++){const Ne=fe[ke];if(D(Ne,k)){const ht=X.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Ge=i.get(Ne).__webglTexture;t.bindTexture(ht,Ge),O(ht),t.unbindTexture()}}}function $e(X){if(a&&X.samples>0&&xt(X)===!1){const k=X.isWebGLMultipleRenderTargets?X.texture:[X.texture],fe=X.width,ke=X.height;let De=n.COLOR_BUFFER_BIT;const Ne=[],ht=X.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ge=i.get(X),Ke=X.isWebGLMultipleRenderTargets===!0;if(Ke)for(let bt=0;bt<k.length;bt++)t.bindFramebuffer(n.FRAMEBUFFER,Ge.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+bt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ge.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+bt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ge.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ge.__webglFramebuffer);for(let bt=0;bt<k.length;bt++){Ne.push(n.COLOR_ATTACHMENT0+bt),X.depthBuffer&&Ne.push(ht);const un=Ge.__ignoreDepthValues!==void 0?Ge.__ignoreDepthValues:!1;if(un===!1&&(X.depthBuffer&&(De|=n.DEPTH_BUFFER_BIT),X.stencilBuffer&&(De|=n.STENCIL_BUFFER_BIT)),Ke&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ge.__webglColorRenderbuffer[bt]),un===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[ht]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[ht])),Ke){const Be=i.get(k[bt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Be,0)}n.blitFramebuffer(0,0,fe,ke,0,0,fe,ke,De,n.NEAREST),y&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ne)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ke)for(let bt=0;bt<k.length;bt++){t.bindFramebuffer(n.FRAMEBUFFER,Ge.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+bt,n.RENDERBUFFER,Ge.__webglColorRenderbuffer[bt]);const un=i.get(k[bt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ge.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+bt,n.TEXTURE_2D,un,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ge.__webglMultisampledFramebuffer)}}function rt(X){return Math.min(m,X.samples)}function xt(X){const k=i.get(X);return a&&X.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&k.__useRenderToTexture!==!1}function Nt(X){const k=o.render.frame;S.get(X)!==k&&(S.set(X,k),X.update())}function wn(X,k){const fe=X.colorSpace,ke=X.format,De=X.type;return X.isCompressedTexture===!0||X.isVideoTexture===!0||X.format===hy||fe!==Ea&&fe!==Us&&(Rn.getTransfer(fe)===Hn?a===!1?e.has("EXT_sRGB")===!0&&ke===Gr?(X.format=hy,X.minFilter=ni,X.generateMipmaps=!1):k=YM.sRGBToLinear(k):(ke!==Gr||De!==Sa)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",fe)),k}this.allocateTextureUnit=Y,this.resetTextureUnits=de,this.setTexture2D=ee,this.setTexture2DArray=ce,this.setTexture3D=ve,this.setTextureCube=he,this.rebindTextures=He,this.setupRenderTarget=Le,this.updateRenderTargetMipmap=ut,this.updateMultisampleRenderTarget=$e,this.setupDepthRenderbuffer=we,this.setupFrameBufferTexture=lt,this.useMultisampledRTT=xt}function XL(n,e,t){const i=t.isWebGL2;function r(s,o=Us){let a;const h=Rn.getTransfer(o);if(s===Sa)return n.UNSIGNED_BYTE;if(s===NM)return n.UNSIGNED_SHORT_4_4_4_4;if(s===FM)return n.UNSIGNED_SHORT_5_5_5_1;if(s===uL)return n.BYTE;if(s===cL)return n.SHORT;if(s===zy)return n.UNSIGNED_SHORT;if(s===UM)return n.INT;if(s===sl)return n.UNSIGNED_INT;if(s===fo)return n.FLOAT;if(s===ah)return i?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===hL)return n.ALPHA;if(s===Gr)return n.RGBA;if(s===fL)return n.LUMINANCE;if(s===dL)return n.LUMINANCE_ALPHA;if(s===Tu)return n.DEPTH_COMPONENT;if(s===lh)return n.DEPTH_STENCIL;if(s===hy)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===pL)return n.RED;if(s===zM)return n.RED_INTEGER;if(s===mL)return n.RG;if(s===kM)return n.RG_INTEGER;if(s===BM)return n.RGBA_INTEGER;if(s===Rv||s===bv||s===Pv||s===Lv)if(h===Hn)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Rv)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===bv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Pv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Lv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Rv)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===bv)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Pv)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Lv)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===Hw||s===Vw||s===Gw||s===Ww)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===Hw)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===Vw)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===Gw)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===Ww)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===HM)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===Xw||s===Yw)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===Xw)return h===Hn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===Yw)return h===Hn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===qw||s===Zw||s===jw||s===Kw||s===Qw||s===Jw||s===$w||s===eE||s===tE||s===nE||s===iE||s===rE||s===sE||s===oE)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===qw)return h===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===Zw)return h===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===jw)return h===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===Kw)return h===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===Qw)return h===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===Jw)return h===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===$w)return h===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===eE)return h===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===tE)return h===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===nE)return h===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===iE)return h===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===rE)return h===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===sE)return h===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===oE)return h===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===Iv||s===aE||s===lE)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===Iv)return h===Hn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===aE)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===lE)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===gL||s===uE||s===cE||s===hE)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===Iv)return a.COMPRESSED_RED_RGTC1_EXT;if(s===uE)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===cE)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===hE)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Mu?i?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class YL extends sr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Jf extends fn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const sG={type:"move"};class eS{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Jf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Jf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new V,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new V),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Jf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new V,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new V),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,h=this._grip,d=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(d&&e.hand){o=!0;for(const A of e.hand.values()){const w=t.getJointPose(A,i),_=this._getHandJoint(d,A);w!==null&&(_.matrix.fromArray(w.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=w.radius),_.visible=w!==null}const p=d.joints["index-finger-tip"],m=d.joints["thumb-tip"],g=p.position.distanceTo(m.position),y=.02,S=.005;d.inputState.pinching&&g>y+S?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&g<=y-S&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else h!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(h.matrix.fromArray(s.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,s.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(s.linearVelocity)):h.hasLinearVelocity=!1,s.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(s.angularVelocity)):h.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(sG)))}return a!==null&&(a.visible=r!==null),h!==null&&(h.visible=s!==null),d!==null&&(d.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Jf;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class oG extends gl{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",h=1,d=null,p=null,m=null,g=null,y=null,S=null;const A=t.getContextAttributes();let w=null,_=null;const T=[],E=[],C=new Pe;let P=null;const D=new sr;D.layers.enable(1),D.viewport=new Cn;const O=new sr;O.layers.enable(2),O.viewport=new Cn;const F=[D,O],L=new YL;L.layers.enable(1),L.layers.enable(2);let N=null,G=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(he){let Me=T[he];return Me===void 0&&(Me=new eS,T[he]=Me),Me.getTargetRaySpace()},this.getControllerGrip=function(he){let Me=T[he];return Me===void 0&&(Me=new eS,T[he]=Me),Me.getGripSpace()},this.getHand=function(he){let Me=T[he];return Me===void 0&&(Me=new eS,T[he]=Me),Me.getHandSpace()};function Q(he){const Me=E.indexOf(he.inputSource);if(Me===-1)return;const Ie=T[Me];Ie!==void 0&&(Ie.update(he.inputSource,he.frame,d||o),Ie.dispatchEvent({type:he.type,data:he.inputSource}))}function le(){r.removeEventListener("select",Q),r.removeEventListener("selectstart",Q),r.removeEventListener("selectend",Q),r.removeEventListener("squeeze",Q),r.removeEventListener("squeezestart",Q),r.removeEventListener("squeezeend",Q),r.removeEventListener("end",le),r.removeEventListener("inputsourceschange",Z);for(let he=0;he<T.length;he++){const Me=E[he];Me!==null&&(E[he]=null,T[he].disconnect(Me))}N=null,G=null,e.setRenderTarget(w),y=null,g=null,m=null,r=null,_=null,ve.stop(),i.isPresenting=!1,e.setPixelRatio(P),e.setSize(C.width,C.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(he){s=he,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(he){a=he,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||o},this.setReferenceSpace=function(he){d=he},this.getBaseLayer=function(){return g!==null?g:y},this.getBinding=function(){return m},this.getFrame=function(){return S},this.getSession=function(){return r},this.setSession=async function(he){if(r=he,r!==null){if(w=e.getRenderTarget(),r.addEventListener("select",Q),r.addEventListener("selectstart",Q),r.addEventListener("selectend",Q),r.addEventListener("squeeze",Q),r.addEventListener("squeezestart",Q),r.addEventListener("squeezeend",Q),r.addEventListener("end",le),r.addEventListener("inputsourceschange",Z),A.xrCompatible!==!0&&await t.makeXRCompatible(),P=e.getPixelRatio(),e.getSize(C),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Me={antialias:r.renderState.layers===void 0?A.antialias:!0,alpha:!0,depth:A.depth,stencil:A.stencil,framebufferScaleFactor:s};y=new XRWebGLLayer(r,t,Me),r.updateRenderState({baseLayer:y}),e.setPixelRatio(1),e.setSize(y.framebufferWidth,y.framebufferHeight,!1),_=new _o(y.framebufferWidth,y.framebufferHeight,{format:Gr,type:Sa,colorSpace:e.outputColorSpace,stencilBuffer:A.stencil})}else{let Me=null,Ie=null,Ye=null;A.depth&&(Ye=A.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Me=A.stencil?lh:Tu,Ie=A.stencil?Mu:sl);const qe={colorFormat:t.RGBA8,depthFormat:Ye,scaleFactor:s};m=new XRWebGLBinding(r,t),g=m.createProjectionLayer(qe),r.updateRenderState({layers:[g]}),e.setPixelRatio(1),e.setSize(g.textureWidth,g.textureHeight,!1),_=new _o(g.textureWidth,g.textureHeight,{format:Gr,type:Sa,depthTexture:new Vy(g.textureWidth,g.textureHeight,Ie,void 0,void 0,void 0,void 0,void 0,void 0,Me),stencilBuffer:A.stencil,colorSpace:e.outputColorSpace,samples:A.antialias?4:0});const Tt=e.properties.get(_);Tt.__ignoreDepthValues=g.ignoreDepthValues}_.isXRRenderTarget=!0,this.setFoveation(h),d=null,o=await r.requestReferenceSpace(a),ve.setContext(r),ve.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function Z(he){for(let Me=0;Me<he.removed.length;Me++){const Ie=he.removed[Me],Ye=E.indexOf(Ie);Ye>=0&&(E[Ye]=null,T[Ye].disconnect(Ie))}for(let Me=0;Me<he.added.length;Me++){const Ie=he.added[Me];let Ye=E.indexOf(Ie);if(Ye===-1){for(let Tt=0;Tt<T.length;Tt++)if(Tt>=E.length){E.push(Ie),Ye=Tt;break}else if(E[Tt]===null){E[Tt]=Ie,Ye=Tt;break}if(Ye===-1)break}const qe=T[Ye];qe&&qe.connect(Ie)}}const oe=new V,me=new V;function de(he,Me,Ie){oe.setFromMatrixPosition(Me.matrixWorld),me.setFromMatrixPosition(Ie.matrixWorld);const Ye=oe.distanceTo(me),qe=Me.projectionMatrix.elements,Tt=Ie.projectionMatrix.elements,wt=qe[14]/(qe[10]-1),dt=qe[14]/(qe[10]+1),lt=(qe[9]+1)/qe[5],j=(qe[9]-1)/qe[5],Ue=(qe[8]-1)/qe[0],we=(Tt[8]+1)/Tt[0],He=wt*Ue,Le=wt*we,ut=Ye/(-Ue+we),$e=ut*-Ue;Me.matrixWorld.decompose(he.position,he.quaternion,he.scale),he.translateX($e),he.translateZ(ut),he.matrixWorld.compose(he.position,he.quaternion,he.scale),he.matrixWorldInverse.copy(he.matrixWorld).invert();const rt=wt+ut,xt=dt+ut,Nt=He-$e,wn=Le+(Ye-$e),X=lt*dt/xt*rt,k=j*dt/xt*rt;he.projectionMatrix.makePerspective(Nt,wn,X,k,rt,xt),he.projectionMatrixInverse.copy(he.projectionMatrix).invert()}function Y(he,Me){Me===null?he.matrixWorld.copy(he.matrix):he.matrixWorld.multiplyMatrices(Me.matrixWorld,he.matrix),he.matrixWorldInverse.copy(he.matrixWorld).invert()}this.updateCamera=function(he){if(r===null)return;L.near=O.near=D.near=he.near,L.far=O.far=D.far=he.far,(N!==L.near||G!==L.far)&&(r.updateRenderState({depthNear:L.near,depthFar:L.far}),N=L.near,G=L.far);const Me=he.parent,Ie=L.cameras;Y(L,Me);for(let Ye=0;Ye<Ie.length;Ye++)Y(Ie[Ye],Me);Ie.length===2?de(L,D,O):L.projectionMatrix.copy(D.projectionMatrix),te(he,L,Me)};function te(he,Me,Ie){Ie===null?he.matrix.copy(Me.matrixWorld):(he.matrix.copy(Ie.matrixWorld),he.matrix.invert(),he.matrix.multiply(Me.matrixWorld)),he.matrix.decompose(he.position,he.quaternion,he.scale),he.updateMatrixWorld(!0),he.projectionMatrix.copy(Me.projectionMatrix),he.projectionMatrixInverse.copy(Me.projectionMatrixInverse),he.isPerspectiveCamera&&(he.fov=yd*2*Math.atan(1/he.projectionMatrix.elements[5]),he.zoom=1)}this.getCamera=function(){return L},this.getFoveation=function(){if(!(g===null&&y===null))return h},this.setFoveation=function(he){h=he,g!==null&&(g.fixedFoveation=he),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=he)};let ee=null;function ce(he,Me){if(p=Me.getViewerPose(d||o),S=Me,p!==null){const Ie=p.views;y!==null&&(e.setRenderTargetFramebuffer(_,y.framebuffer),e.setRenderTarget(_));let Ye=!1;Ie.length!==L.cameras.length&&(L.cameras.length=0,Ye=!0);for(let qe=0;qe<Ie.length;qe++){const Tt=Ie[qe];let wt=null;if(y!==null)wt=y.getViewport(Tt);else{const lt=m.getViewSubImage(g,Tt);wt=lt.viewport,qe===0&&(e.setRenderTargetTextures(_,lt.colorTexture,g.ignoreDepthValues?void 0:lt.depthStencilTexture),e.setRenderTarget(_))}let dt=F[qe];dt===void 0&&(dt=new sr,dt.layers.enable(qe),dt.viewport=new Cn,F[qe]=dt),dt.matrix.fromArray(Tt.transform.matrix),dt.matrix.decompose(dt.position,dt.quaternion,dt.scale),dt.projectionMatrix.fromArray(Tt.projectionMatrix),dt.projectionMatrixInverse.copy(dt.projectionMatrix).invert(),dt.viewport.set(wt.x,wt.y,wt.width,wt.height),qe===0&&(L.matrix.copy(dt.matrix),L.matrix.decompose(L.position,L.quaternion,L.scale)),Ye===!0&&L.cameras.push(dt)}}for(let Ie=0;Ie<T.length;Ie++){const Ye=E[Ie],qe=T[Ie];Ye!==null&&qe!==void 0&&qe.update(Ye,Me,d||o)}ee&&ee(he,Me),Me.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Me}),S=null}const ve=new kL;ve.setAnimationLoop(ce),this.setAnimationLoop=function(he){ee=he},this.dispose=function(){}}}function aG(n,e){function t(w,_){w.matrixAutoUpdate===!0&&w.updateMatrix(),_.value.copy(w.matrix)}function i(w,_){_.color.getRGB(w.fogColor.value,UL(n)),_.isFog?(w.fogNear.value=_.near,w.fogFar.value=_.far):_.isFogExp2&&(w.fogDensity.value=_.density)}function r(w,_,T,E,C){_.isMeshBasicMaterial||_.isMeshLambertMaterial?s(w,_):_.isMeshToonMaterial?(s(w,_),m(w,_)):_.isMeshPhongMaterial?(s(w,_),p(w,_)):_.isMeshStandardMaterial?(s(w,_),g(w,_),_.isMeshPhysicalMaterial&&y(w,_,C)):_.isMeshMatcapMaterial?(s(w,_),S(w,_)):_.isMeshDepthMaterial?s(w,_):_.isMeshDistanceMaterial?(s(w,_),A(w,_)):_.isMeshNormalMaterial?s(w,_):_.isLineBasicMaterial?(o(w,_),_.isLineDashedMaterial&&a(w,_)):_.isPointsMaterial?h(w,_,T,E):_.isSpriteMaterial?d(w,_):_.isShadowMaterial?(w.color.value.copy(_.color),w.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function s(w,_){w.opacity.value=_.opacity,_.color&&w.diffuse.value.copy(_.color),_.emissive&&w.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(w.map.value=_.map,t(_.map,w.mapTransform)),_.alphaMap&&(w.alphaMap.value=_.alphaMap,t(_.alphaMap,w.alphaMapTransform)),_.bumpMap&&(w.bumpMap.value=_.bumpMap,t(_.bumpMap,w.bumpMapTransform),w.bumpScale.value=_.bumpScale,_.side===Xr&&(w.bumpScale.value*=-1)),_.normalMap&&(w.normalMap.value=_.normalMap,t(_.normalMap,w.normalMapTransform),w.normalScale.value.copy(_.normalScale),_.side===Xr&&w.normalScale.value.negate()),_.displacementMap&&(w.displacementMap.value=_.displacementMap,t(_.displacementMap,w.displacementMapTransform),w.displacementScale.value=_.displacementScale,w.displacementBias.value=_.displacementBias),_.emissiveMap&&(w.emissiveMap.value=_.emissiveMap,t(_.emissiveMap,w.emissiveMapTransform)),_.specularMap&&(w.specularMap.value=_.specularMap,t(_.specularMap,w.specularMapTransform)),_.alphaTest>0&&(w.alphaTest.value=_.alphaTest);const T=e.get(_).envMap;if(T&&(w.envMap.value=T,w.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=_.reflectivity,w.ior.value=_.ior,w.refractionRatio.value=_.refractionRatio),_.lightMap){w.lightMap.value=_.lightMap;const E=n._useLegacyLights===!0?Math.PI:1;w.lightMapIntensity.value=_.lightMapIntensity*E,t(_.lightMap,w.lightMapTransform)}_.aoMap&&(w.aoMap.value=_.aoMap,w.aoMapIntensity.value=_.aoMapIntensity,t(_.aoMap,w.aoMapTransform))}function o(w,_){w.diffuse.value.copy(_.color),w.opacity.value=_.opacity,_.map&&(w.map.value=_.map,t(_.map,w.mapTransform))}function a(w,_){w.dashSize.value=_.dashSize,w.totalSize.value=_.dashSize+_.gapSize,w.scale.value=_.scale}function h(w,_,T,E){w.diffuse.value.copy(_.color),w.opacity.value=_.opacity,w.size.value=_.size*T,w.scale.value=E*.5,_.map&&(w.map.value=_.map,t(_.map,w.uvTransform)),_.alphaMap&&(w.alphaMap.value=_.alphaMap,t(_.alphaMap,w.alphaMapTransform)),_.alphaTest>0&&(w.alphaTest.value=_.alphaTest)}function d(w,_){w.diffuse.value.copy(_.color),w.opacity.value=_.opacity,w.rotation.value=_.rotation,_.map&&(w.map.value=_.map,t(_.map,w.mapTransform)),_.alphaMap&&(w.alphaMap.value=_.alphaMap,t(_.alphaMap,w.alphaMapTransform)),_.alphaTest>0&&(w.alphaTest.value=_.alphaTest)}function p(w,_){w.specular.value.copy(_.specular),w.shininess.value=Math.max(_.shininess,1e-4)}function m(w,_){_.gradientMap&&(w.gradientMap.value=_.gradientMap)}function g(w,_){w.metalness.value=_.metalness,_.metalnessMap&&(w.metalnessMap.value=_.metalnessMap,t(_.metalnessMap,w.metalnessMapTransform)),w.roughness.value=_.roughness,_.roughnessMap&&(w.roughnessMap.value=_.roughnessMap,t(_.roughnessMap,w.roughnessMapTransform)),e.get(_).envMap&&(w.envMapIntensity.value=_.envMapIntensity)}function y(w,_,T){w.ior.value=_.ior,_.sheen>0&&(w.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),w.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(w.sheenColorMap.value=_.sheenColorMap,t(_.sheenColorMap,w.sheenColorMapTransform)),_.sheenRoughnessMap&&(w.sheenRoughnessMap.value=_.sheenRoughnessMap,t(_.sheenRoughnessMap,w.sheenRoughnessMapTransform))),_.clearcoat>0&&(w.clearcoat.value=_.clearcoat,w.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(w.clearcoatMap.value=_.clearcoatMap,t(_.clearcoatMap,w.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,t(_.clearcoatRoughnessMap,w.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(w.clearcoatNormalMap.value=_.clearcoatNormalMap,t(_.clearcoatNormalMap,w.clearcoatNormalMapTransform),w.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===Xr&&w.clearcoatNormalScale.value.negate())),_.iridescence>0&&(w.iridescence.value=_.iridescence,w.iridescenceIOR.value=_.iridescenceIOR,w.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(w.iridescenceMap.value=_.iridescenceMap,t(_.iridescenceMap,w.iridescenceMapTransform)),_.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=_.iridescenceThicknessMap,t(_.iridescenceThicknessMap,w.iridescenceThicknessMapTransform))),_.transmission>0&&(w.transmission.value=_.transmission,w.transmissionSamplerMap.value=T.texture,w.transmissionSamplerSize.value.set(T.width,T.height),_.transmissionMap&&(w.transmissionMap.value=_.transmissionMap,t(_.transmissionMap,w.transmissionMapTransform)),w.thickness.value=_.thickness,_.thicknessMap&&(w.thicknessMap.value=_.thicknessMap,t(_.thicknessMap,w.thicknessMapTransform)),w.attenuationDistance.value=_.attenuationDistance,w.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(w.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(w.anisotropyMap.value=_.anisotropyMap,t(_.anisotropyMap,w.anisotropyMapTransform))),w.specularIntensity.value=_.specularIntensity,w.specularColor.value.copy(_.specularColor),_.specularColorMap&&(w.specularColorMap.value=_.specularColorMap,t(_.specularColorMap,w.specularColorMapTransform)),_.specularIntensityMap&&(w.specularIntensityMap.value=_.specularIntensityMap,t(_.specularIntensityMap,w.specularIntensityMapTransform))}function S(w,_){_.matcap&&(w.matcap.value=_.matcap)}function A(w,_){const T=e.get(_).light;w.referencePosition.value.setFromMatrixPosition(T.matrixWorld),w.nearDistance.value=T.shadow.camera.near,w.farDistance.value=T.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function lG(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function h(T,E){const C=E.program;i.uniformBlockBinding(T,C)}function d(T,E){let C=r[T.id];C===void 0&&(S(T),C=p(T),r[T.id]=C,T.addEventListener("dispose",w));const P=E.program;i.updateUBOMapping(T,P);const D=e.render.frame;s[T.id]!==D&&(g(T),s[T.id]=D)}function p(T){const E=m();T.__bindingPointIndex=E;const C=n.createBuffer(),P=T.__size,D=T.usage;return n.bindBuffer(n.UNIFORM_BUFFER,C),n.bufferData(n.UNIFORM_BUFFER,P,D),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,E,C),C}function m(){for(let T=0;T<a;T++)if(o.indexOf(T)===-1)return o.push(T),T;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function g(T){const E=r[T.id],C=T.uniforms,P=T.__cache;n.bindBuffer(n.UNIFORM_BUFFER,E);for(let D=0,O=C.length;D<O;D++){const F=C[D];if(y(F,D,P)===!0){const L=F.__offset,N=Array.isArray(F.value)?F.value:[F.value];let G=0;for(let Q=0;Q<N.length;Q++){const le=N[Q],Z=A(le);typeof le=="number"?(F.__data[0]=le,n.bufferSubData(n.UNIFORM_BUFFER,L+G,F.__data)):le.isMatrix3?(F.__data[0]=le.elements[0],F.__data[1]=le.elements[1],F.__data[2]=le.elements[2],F.__data[3]=le.elements[0],F.__data[4]=le.elements[3],F.__data[5]=le.elements[4],F.__data[6]=le.elements[5],F.__data[7]=le.elements[0],F.__data[8]=le.elements[6],F.__data[9]=le.elements[7],F.__data[10]=le.elements[8],F.__data[11]=le.elements[0]):(le.toArray(F.__data,G),G+=Z.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,L,F.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function y(T,E,C){const P=T.value;if(C[E]===void 0){if(typeof P=="number")C[E]=P;else{const D=Array.isArray(P)?P:[P],O=[];for(let F=0;F<D.length;F++)O.push(D[F].clone());C[E]=O}return!0}else if(typeof P=="number"){if(C[E]!==P)return C[E]=P,!0}else{const D=Array.isArray(C[E])?C[E]:[C[E]],O=Array.isArray(P)?P:[P];for(let F=0;F<D.length;F++){const L=D[F];if(L.equals(O[F])===!1)return L.copy(O[F]),!0}}return!1}function S(T){const E=T.uniforms;let C=0;const P=16;let D=0;for(let O=0,F=E.length;O<F;O++){const L=E[O],N={boundary:0,storage:0},G=Array.isArray(L.value)?L.value:[L.value];for(let Q=0,le=G.length;Q<le;Q++){const Z=G[Q],oe=A(Z);N.boundary+=oe.boundary,N.storage+=oe.storage}if(L.__data=new Float32Array(N.storage/Float32Array.BYTES_PER_ELEMENT),L.__offset=C,O>0){D=C%P;const Q=P-D;D!==0&&Q-N.boundary<0&&(C+=P-D,L.__offset=C)}C+=N.storage}return D=C%P,D>0&&(C+=P-D),T.__size=C,T.__cache={},this}function A(T){const E={boundary:0,storage:0};return typeof T=="number"?(E.boundary=4,E.storage=4):T.isVector2?(E.boundary=8,E.storage=8):T.isVector3||T.isColor?(E.boundary=16,E.storage=12):T.isVector4?(E.boundary=16,E.storage=16):T.isMatrix3?(E.boundary=48,E.storage=48):T.isMatrix4?(E.boundary=64,E.storage=64):T.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",T),E}function w(T){const E=T.target;E.removeEventListener("dispose",w);const C=o.indexOf(E.__bindingPointIndex);o.splice(C,1),n.deleteBuffer(r[E.id]),delete r[E.id],delete s[E.id]}function _(){for(const T in r)n.deleteBuffer(r[T]);o=[],r={},s={}}return{bind:h,update:d,dispose:_}}class $M{constructor(e={}){const{canvas:t=IL(),context:i=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:h=!0,preserveDrawingBuffer:d=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:m=!1}=e;this.isWebGLRenderer=!0;let g;i!==null?g=i.getContextAttributes().alpha:g=o;const y=new Uint32Array(4),S=new Int32Array(4);let A=null,w=null;const _=[],T=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Vi,this._useLegacyLights=!1,this.toneMapping=xa,this.toneMappingExposure=1;const E=this;let C=!1,P=0,D=0,O=null,F=-1,L=null;const N=new Cn,G=new Cn;let Q=null;const le=new it(0);let Z=0,oe=t.width,me=t.height,de=1,Y=null,te=null;const ee=new Cn(0,0,oe,me),ce=new Cn(0,0,oe,me);let ve=!1;const he=new Og;let Me=!1,Ie=!1,Ye=null;const qe=new yt,Tt=new Pe,wt=new V,dt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function lt(){return O===null?de:1}let j=i;function Ue(H,ae){for(let _e=0;_e<H.length;_e++){const xe=H[_e],ge=t.getContext(xe,ae);if(ge!==null)return ge}return null}try{const H={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:h,preserveDrawingBuffer:d,powerPreference:p,failIfMajorPerformanceCaveat:m};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Uy}`),t.addEventListener("webglcontextlost",sn,!1),t.addEventListener("webglcontextrestored",ie,!1),t.addEventListener("webglcontextcreationerror",et,!1),j===null){const ae=["webgl2","webgl","experimental-webgl"];if(E.isWebGL1Renderer===!0&&ae.shift(),j=Ue(ae,H),j===null)throw Ue(ae)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&j instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),j.getShaderPrecisionFormat===void 0&&(j.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(H){throw console.error("THREE.WebGLRenderer: "+H.message),H}let we,He,Le,ut,$e,rt,xt,Nt,wn,X,k,fe,ke,De,Ne,ht,Ge,Ke,bt,un,Be,gn,kt,Ct;function St(){we=new E8(j),He=new _8(j,we,e),we.init(He),gn=new XL(j,we,He),Le=new iG(j,we,He),ut=new A8(j),$e=new X6,rt=new rG(j,we,Le,$e,He,gn,ut),xt=new y8(E),Nt=new w8(E),wn=new D5(j,He),kt=new m8(j,we,wn,He),X=new M8(j,wn,ut,kt),k=new P8(j,X,wn,ut),bt=new b8(j,He,rt),ht=new v8($e),fe=new W6(E,xt,Nt,we,He,kt,ht),ke=new aG(E,$e),De=new q6,Ne=new $6(we,He),Ke=new p8(E,xt,Nt,Le,k,g,h),Ge=new nG(E,k,He),Ct=new lG(j,ut,He,Le),un=new g8(j,we,ut,He),Be=new T8(j,we,ut,He),ut.programs=fe.programs,E.capabilities=He,E.extensions=we,E.properties=$e,E.renderLists=De,E.shadowMap=Ge,E.state=Le,E.info=ut}St();const st=new oG(E,j);this.xr=st,this.getContext=function(){return j},this.getContextAttributes=function(){return j.getContextAttributes()},this.forceContextLoss=function(){const H=we.get("WEBGL_lose_context");H&&H.loseContext()},this.forceContextRestore=function(){const H=we.get("WEBGL_lose_context");H&&H.restoreContext()},this.getPixelRatio=function(){return de},this.setPixelRatio=function(H){H!==void 0&&(de=H,this.setSize(oe,me,!1))},this.getSize=function(H){return H.set(oe,me)},this.setSize=function(H,ae,_e=!0){if(st.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}oe=H,me=ae,t.width=Math.floor(H*de),t.height=Math.floor(ae*de),_e===!0&&(t.style.width=H+"px",t.style.height=ae+"px"),this.setViewport(0,0,H,ae)},this.getDrawingBufferSize=function(H){return H.set(oe*de,me*de).floor()},this.setDrawingBufferSize=function(H,ae,_e){oe=H,me=ae,de=_e,t.width=Math.floor(H*_e),t.height=Math.floor(ae*_e),this.setViewport(0,0,H,ae)},this.getCurrentViewport=function(H){return H.copy(N)},this.getViewport=function(H){return H.copy(ee)},this.setViewport=function(H,ae,_e,xe){H.isVector4?ee.set(H.x,H.y,H.z,H.w):ee.set(H,ae,_e,xe),Le.viewport(N.copy(ee).multiplyScalar(de).floor())},this.getScissor=function(H){return H.copy(ce)},this.setScissor=function(H,ae,_e,xe){H.isVector4?ce.set(H.x,H.y,H.z,H.w):ce.set(H,ae,_e,xe),Le.scissor(G.copy(ce).multiplyScalar(de).floor())},this.getScissorTest=function(){return ve},this.setScissorTest=function(H){Le.setScissorTest(ve=H)},this.setOpaqueSort=function(H){Y=H},this.setTransparentSort=function(H){te=H},this.getClearColor=function(H){return H.copy(Ke.getClearColor())},this.setClearColor=function(){Ke.setClearColor.apply(Ke,arguments)},this.getClearAlpha=function(){return Ke.getClearAlpha()},this.setClearAlpha=function(){Ke.setClearAlpha.apply(Ke,arguments)},this.clear=function(H=!0,ae=!0,_e=!0){let xe=0;if(H){let ge=!1;if(O!==null){const tt=O.texture.format;ge=tt===BM||tt===kM||tt===zM}if(ge){const tt=O.texture.type,ft=tt===Sa||tt===sl||tt===zy||tt===Mu||tt===NM||tt===FM,Rt=Ke.getClearColor(),Et=Ke.getClearAlpha(),Ht=Rt.r,Bt=Rt.g,Vt=Rt.b;ft?(y[0]=Ht,y[1]=Bt,y[2]=Vt,y[3]=Et,j.clearBufferuiv(j.COLOR,0,y)):(S[0]=Ht,S[1]=Bt,S[2]=Vt,S[3]=Et,j.clearBufferiv(j.COLOR,0,S))}else xe|=j.COLOR_BUFFER_BIT}ae&&(xe|=j.DEPTH_BUFFER_BIT),_e&&(xe|=j.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),j.clear(xe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",sn,!1),t.removeEventListener("webglcontextrestored",ie,!1),t.removeEventListener("webglcontextcreationerror",et,!1),De.dispose(),Ne.dispose(),$e.dispose(),xt.dispose(),Nt.dispose(),k.dispose(),kt.dispose(),Ct.dispose(),fe.dispose(),st.dispose(),st.removeEventListener("sessionstart",Ti),st.removeEventListener("sessionend",En),Ye&&(Ye.dispose(),Ye=null),mi.stop()};function sn(H){H.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),C=!0}function ie(){console.log("THREE.WebGLRenderer: Context Restored."),C=!1;const H=ut.autoReset,ae=Ge.enabled,_e=Ge.autoUpdate,xe=Ge.needsUpdate,ge=Ge.type;St(),ut.autoReset=H,Ge.enabled=ae,Ge.autoUpdate=_e,Ge.needsUpdate=xe,Ge.type=ge}function et(H){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",H.statusMessage)}function Ve(H){const ae=H.target;ae.removeEventListener("dispose",Ve),Ae(ae)}function Ae(H){Xe(H),$e.remove(H)}function Xe(H){const ae=$e.get(H).programs;ae!==void 0&&(ae.forEach(function(_e){fe.releaseProgram(_e)}),H.isShaderMaterial&&fe.releaseShaderCache(H))}this.renderBufferDirect=function(H,ae,_e,xe,ge,tt){ae===null&&(ae=dt);const ft=ge.isMesh&&ge.matrixWorld.determinant()<0,Rt=Od(H,ae,_e,xe,ge);Le.setMaterial(xe,ft);let Et=_e.index,Ht=1;if(xe.wireframe===!0){if(Et=X.getWireframeAttribute(_e),Et===void 0)return;Ht=2}const Bt=_e.drawRange,Vt=_e.attributes.position;let Fn=Bt.start*Ht,Ai=(Bt.start+Bt.count)*Ht;tt!==null&&(Fn=Math.max(Fn,tt.start*Ht),Ai=Math.min(Ai,(tt.start+tt.count)*Ht)),Et!==null?(Fn=Math.max(Fn,0),Ai=Math.min(Ai,Et.count)):Vt!=null&&(Fn=Math.max(Fn,0),Ai=Math.min(Ai,Vt.count));const Ln=Ai-Fn;if(Ln<0||Ln===1/0)return;kt.setup(ge,xe,Rt,_e,Et);let Ci,Lt=un;if(Et!==null&&(Ci=wn.get(Et),Lt=Be,Lt.setIndex(Ci)),ge.isMesh)xe.wireframe===!0?(Le.setLineWidth(xe.wireframeLinewidth*lt()),Lt.setMode(j.LINES)):Lt.setMode(j.TRIANGLES);else if(ge.isLine){let ot=xe.linewidth;ot===void 0&&(ot=1),Le.setLineWidth(ot*lt()),ge.isLineSegments?Lt.setMode(j.LINES):ge.isLineLoop?Lt.setMode(j.LINE_LOOP):Lt.setMode(j.LINE_STRIP)}else ge.isPoints?Lt.setMode(j.POINTS):ge.isSprite&&Lt.setMode(j.TRIANGLES);if(ge.isBatchedMesh)Lt.renderMultiDraw(ge._multiDrawStarts,ge._multiDrawCounts,ge._multiDrawCount);else if(ge.isInstancedMesh)Lt.renderInstances(Fn,Ln,ge.count);else if(_e.isInstancedBufferGeometry){const ot=_e._maxInstanceCount!==void 0?_e._maxInstanceCount:1/0,Kr=Math.min(_e.instanceCount,ot);Lt.renderInstances(Fn,Ln,Kr)}else Lt.render(Fn,Ln)};function Pt(H,ae,_e){H.transparent===!0&&H.side===_a&&H.forceSinglePass===!1?(H.side=Xr,H.needsUpdate=!0,vl(H,ae,_e),H.side=fl,H.needsUpdate=!0,vl(H,ae,_e),H.side=_a):vl(H,ae,_e)}this.compile=function(H,ae,_e=null){_e===null&&(_e=H),w=Ne.get(_e),w.init(),T.push(w),_e.traverseVisible(function(ge){ge.isLight&&ge.layers.test(ae.layers)&&(w.pushLight(ge),ge.castShadow&&w.pushShadow(ge))}),H!==_e&&H.traverseVisible(function(ge){ge.isLight&&ge.layers.test(ae.layers)&&(w.pushLight(ge),ge.castShadow&&w.pushShadow(ge))}),w.setupLights(E._useLegacyLights);const xe=new Set;return H.traverse(function(ge){const tt=ge.material;if(tt)if(Array.isArray(tt))for(let ft=0;ft<tt.length;ft++){const Rt=tt[ft];Pt(Rt,_e,ge),xe.add(Rt)}else Pt(tt,_e,ge),xe.add(tt)}),T.pop(),w=null,xe},this.compileAsync=function(H,ae,_e=null){const xe=this.compile(H,ae,_e);return new Promise(ge=>{function tt(){if(xe.forEach(function(ft){$e.get(ft).currentProgram.isReady()&&xe.delete(ft)}),xe.size===0){ge(H);return}setTimeout(tt,10)}we.get("KHR_parallel_shader_compile")!==null?tt():setTimeout(tt,10)})};let ln=null;function Kn(H){ln&&ln(H)}function Ti(){mi.stop()}function En(){mi.start()}const mi=new kL;mi.setAnimationLoop(Kn),typeof self<"u"&&mi.setContext(self),this.setAnimationLoop=function(H){ln=H,st.setAnimationLoop(H),H===null?mi.stop():mi.start()},st.addEventListener("sessionstart",Ti),st.addEventListener("sessionend",En),this.render=function(H,ae){if(ae!==void 0&&ae.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(C===!0)return;H.matrixWorldAutoUpdate===!0&&H.updateMatrixWorld(),ae.parent===null&&ae.matrixWorldAutoUpdate===!0&&ae.updateMatrixWorld(),st.enabled===!0&&st.isPresenting===!0&&(st.cameraAutoUpdate===!0&&st.updateCamera(ae),ae=st.getCamera()),H.isScene===!0&&H.onBeforeRender(E,H,ae,O),w=Ne.get(H,T.length),w.init(),T.push(w),qe.multiplyMatrices(ae.projectionMatrix,ae.matrixWorldInverse),he.setFromProjectionMatrix(qe),Ie=this.localClippingEnabled,Me=ht.init(this.clippingPlanes,Ie),A=De.get(H,_.length),A.init(),_.push(A),jr(H,ae,0,E.sortObjects),A.finish(),E.sortObjects===!0&&A.sort(Y,te),this.info.render.frame++,Me===!0&&ht.beginShadows();const _e=w.state.shadowsArray;if(Ge.render(_e,H,ae),Me===!0&&ht.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ke.render(A,H),w.setupLights(E._useLegacyLights),ae.isArrayCamera){const xe=ae.cameras;for(let ge=0,tt=xe.length;ge<tt;ge++){const ft=xe[ge];Ca(A,H,ft,ft.viewport)}}else Ca(A,H,ae);O!==null&&(rt.updateMultisampleRenderTarget(O),rt.updateRenderTargetMipmap(O)),H.isScene===!0&&H.onAfterRender(E,H,ae),kt.resetDefaultState(),F=-1,L=null,T.pop(),T.length>0?w=T[T.length-1]:w=null,_.pop(),_.length>0?A=_[_.length-1]:A=null};function jr(H,ae,_e,xe){if(H.visible===!1)return;if(H.layers.test(ae.layers)){if(H.isGroup)_e=H.renderOrder;else if(H.isLOD)H.autoUpdate===!0&&H.update(ae);else if(H.isLight)w.pushLight(H),H.castShadow&&w.pushShadow(H);else if(H.isSprite){if(!H.frustumCulled||he.intersectsSprite(H)){xe&&wt.setFromMatrixPosition(H.matrixWorld).applyMatrix4(qe);const ft=k.update(H),Rt=H.material;Rt.visible&&A.push(H,ft,Rt,_e,wt.z,null)}}else if((H.isMesh||H.isLine||H.isPoints)&&(!H.frustumCulled||he.intersectsObject(H))){const ft=k.update(H),Rt=H.material;if(xe&&(H.boundingSphere!==void 0?(H.boundingSphere===null&&H.computeBoundingSphere(),wt.copy(H.boundingSphere.center)):(ft.boundingSphere===null&&ft.computeBoundingSphere(),wt.copy(ft.boundingSphere.center)),wt.applyMatrix4(H.matrixWorld).applyMatrix4(qe)),Array.isArray(Rt)){const Et=ft.groups;for(let Ht=0,Bt=Et.length;Ht<Bt;Ht++){const Vt=Et[Ht],Fn=Rt[Vt.materialIndex];Fn&&Fn.visible&&A.push(H,ft,Fn,_e,wt.z,Vt)}}else Rt.visible&&A.push(H,ft,Rt,_e,wt.z,null)}}const tt=H.children;for(let ft=0,Rt=tt.length;ft<Rt;ft++)jr(tt[ft],ae,_e,xe)}function Ca(H,ae,_e,xe){const ge=H.opaque,tt=H.transmissive,ft=H.transparent;w.setupLightsView(_e),Me===!0&&ht.setGlobalState(E.clippingPlanes,_e),tt.length>0&&Vu(ge,tt,ae,_e),xe&&Le.viewport(N.copy(xe)),ge.length>0&&_l(ge,ae,_e),tt.length>0&&_l(tt,ae,_e),ft.length>0&&_l(ft,ae,_e),Le.buffers.depth.setTest(!0),Le.buffers.depth.setMask(!0),Le.buffers.color.setMask(!0),Le.setPolygonOffset(!1)}function Vu(H,ae,_e,xe){if((_e.isScene===!0?_e.overrideMaterial:null)!==null)return;const tt=He.isWebGL2;Ye===null&&(Ye=new _o(1,1,{generateMipmaps:!0,type:we.has("EXT_color_buffer_half_float")?ah:Sa,minFilter:Iu,samples:tt?4:0})),E.getDrawingBufferSize(Tt),tt?Ye.setSize(Tt.x,Tt.y):Ye.setSize(fy(Tt.x),fy(Tt.y));const ft=E.getRenderTarget();E.setRenderTarget(Ye),E.getClearColor(le),Z=E.getClearAlpha(),Z<1&&E.setClearColor(16777215,.5),E.clear();const Rt=E.toneMapping;E.toneMapping=xa,_l(H,_e,xe),rt.updateMultisampleRenderTarget(Ye),rt.updateRenderTargetMipmap(Ye);let Et=!1;for(let Ht=0,Bt=ae.length;Ht<Bt;Ht++){const Vt=ae[Ht],Fn=Vt.object,Ai=Vt.geometry,Ln=Vt.material,Ci=Vt.group;if(Ln.side===_a&&Fn.layers.test(xe.layers)){const Lt=Ln.side;Ln.side=Xr,Ln.needsUpdate=!0,qo(Fn,_e,xe,Ai,Ln,Ci),Ln.side=Lt,Ln.needsUpdate=!0,Et=!0}}Et===!0&&(rt.updateMultisampleRenderTarget(Ye),rt.updateRenderTargetMipmap(Ye)),E.setRenderTarget(ft),E.setClearColor(le,Z),E.toneMapping=Rt}function _l(H,ae,_e){const xe=ae.isScene===!0?ae.overrideMaterial:null;for(let ge=0,tt=H.length;ge<tt;ge++){const ft=H[ge],Rt=ft.object,Et=ft.geometry,Ht=xe===null?ft.material:xe,Bt=ft.group;Rt.layers.test(_e.layers)&&qo(Rt,ae,_e,Et,Ht,Bt)}}function qo(H,ae,_e,xe,ge,tt){H.onBeforeRender(E,ae,_e,xe,ge,tt),H.modelViewMatrix.multiplyMatrices(_e.matrixWorldInverse,H.matrixWorld),H.normalMatrix.getNormalMatrix(H.modelViewMatrix),ge.onBeforeRender(E,ae,_e,xe,H,tt),ge.transparent===!0&&ge.side===_a&&ge.forceSinglePass===!1?(ge.side=Xr,ge.needsUpdate=!0,E.renderBufferDirect(_e,ae,xe,ge,H,tt),ge.side=fl,ge.needsUpdate=!0,E.renderBufferDirect(_e,ae,xe,ge,H,tt),ge.side=_a):E.renderBufferDirect(_e,ae,xe,ge,H,tt),H.onAfterRender(E,ae,_e,xe,ge,tt)}function vl(H,ae,_e){ae.isScene!==!0&&(ae=dt);const xe=$e.get(H),ge=w.state.lights,tt=w.state.shadowsArray,ft=ge.state.version,Rt=fe.getParameters(H,ge.state,tt,ae,_e),Et=fe.getProgramCacheKey(Rt);let Ht=xe.programs;xe.environment=H.isMeshStandardMaterial?ae.environment:null,xe.fog=ae.fog,xe.envMap=(H.isMeshStandardMaterial?Nt:xt).get(H.envMap||xe.environment),Ht===void 0&&(H.addEventListener("dispose",Ve),Ht=new Map,xe.programs=Ht);let Bt=Ht.get(Et);if(Bt!==void 0){if(xe.currentProgram===Bt&&xe.lightsStateVersion===ft)return yh(H,Rt),Bt}else Rt.uniforms=fe.getUniforms(H),H.onBuild(_e,Rt,E),H.onBeforeCompile(Rt,E),Bt=fe.acquireProgram(Rt,Et),Ht.set(Et,Bt),xe.uniforms=Rt.uniforms;const Vt=xe.uniforms;return(!H.isShaderMaterial&&!H.isRawShaderMaterial||H.clipping===!0)&&(Vt.clippingPlanes=ht.uniform),yh(H,Rt),xe.needsLights=xh(H),xe.lightsStateVersion=ft,xe.needsLights&&(Vt.ambientLightColor.value=ge.state.ambient,Vt.lightProbe.value=ge.state.probe,Vt.directionalLights.value=ge.state.directional,Vt.directionalLightShadows.value=ge.state.directionalShadow,Vt.spotLights.value=ge.state.spot,Vt.spotLightShadows.value=ge.state.spotShadow,Vt.rectAreaLights.value=ge.state.rectArea,Vt.ltc_1.value=ge.state.rectAreaLTC1,Vt.ltc_2.value=ge.state.rectAreaLTC2,Vt.pointLights.value=ge.state.point,Vt.pointLightShadows.value=ge.state.pointShadow,Vt.hemisphereLights.value=ge.state.hemi,Vt.directionalShadowMap.value=ge.state.directionalShadowMap,Vt.directionalShadowMatrix.value=ge.state.directionalShadowMatrix,Vt.spotShadowMap.value=ge.state.spotShadowMap,Vt.spotLightMatrix.value=ge.state.spotLightMatrix,Vt.spotLightMap.value=ge.state.spotLightMap,Vt.pointShadowMap.value=ge.state.pointShadowMap,Vt.pointShadowMatrix.value=ge.state.pointShadowMatrix),xe.currentProgram=Bt,xe.uniformsList=null,Bt}function vh(H){if(H.uniformsList===null){const ae=H.currentProgram.getUniforms();H.uniformsList=Dv.seqWithValue(ae.seq,H.uniforms)}return H.uniformsList}function yh(H,ae){const _e=$e.get(H);_e.outputColorSpace=ae.outputColorSpace,_e.batching=ae.batching,_e.instancing=ae.instancing,_e.instancingColor=ae.instancingColor,_e.skinning=ae.skinning,_e.morphTargets=ae.morphTargets,_e.morphNormals=ae.morphNormals,_e.morphColors=ae.morphColors,_e.morphTargetsCount=ae.morphTargetsCount,_e.numClippingPlanes=ae.numClippingPlanes,_e.numIntersection=ae.numClipIntersection,_e.vertexAlphas=ae.vertexAlphas,_e.vertexTangents=ae.vertexTangents,_e.toneMapping=ae.toneMapping}function Od(H,ae,_e,xe,ge){ae.isScene!==!0&&(ae=dt),rt.resetTextureUnits();const tt=ae.fog,ft=xe.isMeshStandardMaterial?ae.environment:null,Rt=O===null?E.outputColorSpace:O.isXRRenderTarget===!0?O.texture.colorSpace:Ea,Et=(xe.isMeshStandardMaterial?Nt:xt).get(xe.envMap||ft),Ht=xe.vertexColors===!0&&!!_e.attributes.color&&_e.attributes.color.itemSize===4,Bt=!!_e.attributes.tangent&&(!!xe.normalMap||xe.anisotropy>0),Vt=!!_e.morphAttributes.position,Fn=!!_e.morphAttributes.normal,Ai=!!_e.morphAttributes.color;let Ln=xa;xe.toneMapped&&(O===null||O.isXRRenderTarget===!0)&&(Ln=E.toneMapping);const Ci=_e.morphAttributes.position||_e.morphAttributes.normal||_e.morphAttributes.color,Lt=Ci!==void 0?Ci.length:0,ot=$e.get(xe),Kr=w.state.lights;if(Me===!0&&(Ie===!0||H!==L)){const Ni=H===L&&xe.id===F;ht.setState(xe,H,Ni)}let jt=!1;xe.version===ot.__version?(ot.needsLights&&ot.lightsStateVersion!==Kr.state.version||ot.outputColorSpace!==Rt||ge.isBatchedMesh&&ot.batching===!1||!ge.isBatchedMesh&&ot.batching===!0||ge.isInstancedMesh&&ot.instancing===!1||!ge.isInstancedMesh&&ot.instancing===!0||ge.isSkinnedMesh&&ot.skinning===!1||!ge.isSkinnedMesh&&ot.skinning===!0||ge.isInstancedMesh&&ot.instancingColor===!0&&ge.instanceColor===null||ge.isInstancedMesh&&ot.instancingColor===!1&&ge.instanceColor!==null||ot.envMap!==Et||xe.fog===!0&&ot.fog!==tt||ot.numClippingPlanes!==void 0&&(ot.numClippingPlanes!==ht.numPlanes||ot.numIntersection!==ht.numIntersection)||ot.vertexAlphas!==Ht||ot.vertexTangents!==Bt||ot.morphTargets!==Vt||ot.morphNormals!==Fn||ot.morphColors!==Ai||ot.toneMapping!==Ln||He.isWebGL2===!0&&ot.morphTargetsCount!==Lt)&&(jt=!0):(jt=!0,ot.__version=xe.version);let Gn=ot.currentProgram;jt===!0&&(Gn=vl(xe,ae,ge));let gs=!1,gr=!1,Ri=!1;const Yn=Gn.getUniforms(),Pr=ot.uniforms;if(Le.useProgram(Gn.program)&&(gs=!0,gr=!0,Ri=!0),xe.id!==F&&(F=xe.id,gr=!0),gs||L!==H){Yn.setValue(j,"projectionMatrix",H.projectionMatrix),Yn.setValue(j,"viewMatrix",H.matrixWorldInverse);const Ni=Yn.map.cameraPosition;Ni!==void 0&&Ni.setValue(j,wt.setFromMatrixPosition(H.matrixWorld)),He.logarithmicDepthBuffer&&Yn.setValue(j,"logDepthBufFC",2/(Math.log(H.far+1)/Math.LN2)),(xe.isMeshPhongMaterial||xe.isMeshToonMaterial||xe.isMeshLambertMaterial||xe.isMeshBasicMaterial||xe.isMeshStandardMaterial||xe.isShaderMaterial)&&Yn.setValue(j,"isOrthographic",H.isOrthographicCamera===!0),L!==H&&(L=H,gr=!0,Ri=!0)}if(ge.isSkinnedMesh){Yn.setOptional(j,ge,"bindMatrix"),Yn.setOptional(j,ge,"bindMatrixInverse");const Ni=ge.skeleton;Ni&&(He.floatVertexTextures?(Ni.boneTexture===null&&Ni.computeBoneTexture(),Yn.setValue(j,"boneTexture",Ni.boneTexture,rt)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}ge.isBatchedMesh&&(Yn.setOptional(j,ge,"batchingTexture"),Yn.setValue(j,"batchingTexture",ge._matricesTexture,rt));const Ra=_e.morphAttributes;if((Ra.position!==void 0||Ra.normal!==void 0||Ra.color!==void 0&&He.isWebGL2===!0)&&bt.update(ge,_e,Gn),(gr||ot.receiveShadow!==ge.receiveShadow)&&(ot.receiveShadow=ge.receiveShadow,Yn.setValue(j,"receiveShadow",ge.receiveShadow)),xe.isMeshGouraudMaterial&&xe.envMap!==null&&(Pr.envMap.value=Et,Pr.flipEnvMap.value=Et.isCubeTexture&&Et.isRenderTargetTexture===!1?-1:1),gr&&(Yn.setValue(j,"toneMappingExposure",E.toneMappingExposure),ot.needsLights&&Dd(Pr,Ri),tt&&xe.fog===!0&&ke.refreshFogUniforms(Pr,tt),ke.refreshMaterialUniforms(Pr,xe,de,me,Ye),Dv.upload(j,vh(ot),Pr,rt)),xe.isShaderMaterial&&xe.uniformsNeedUpdate===!0&&(Dv.upload(j,vh(ot),Pr,rt),xe.uniformsNeedUpdate=!1),xe.isSpriteMaterial&&Yn.setValue(j,"center",ge.center),Yn.setValue(j,"modelViewMatrix",ge.modelViewMatrix),Yn.setValue(j,"normalMatrix",ge.normalMatrix),Yn.setValue(j,"modelMatrix",ge.matrixWorld),xe.isShaderMaterial||xe.isRawShaderMaterial){const Ni=xe.uniformsGroups;for(let ba=0,_r=Ni.length;ba<_r;ba++)if(He.isWebGL2){const yl=Ni[ba];Ct.update(yl,Gn),Ct.bind(yl,Gn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Gn}function Dd(H,ae){H.ambientLightColor.needsUpdate=ae,H.lightProbe.needsUpdate=ae,H.directionalLights.needsUpdate=ae,H.directionalLightShadows.needsUpdate=ae,H.pointLights.needsUpdate=ae,H.pointLightShadows.needsUpdate=ae,H.spotLights.needsUpdate=ae,H.spotLightShadows.needsUpdate=ae,H.rectAreaLights.needsUpdate=ae,H.hemisphereLights.needsUpdate=ae}function xh(H){return H.isMeshLambertMaterial||H.isMeshToonMaterial||H.isMeshPhongMaterial||H.isMeshStandardMaterial||H.isShadowMaterial||H.isShaderMaterial&&H.lights===!0}this.getActiveCubeFace=function(){return P},this.getActiveMipmapLevel=function(){return D},this.getRenderTarget=function(){return O},this.setRenderTargetTextures=function(H,ae,_e){$e.get(H.texture).__webglTexture=ae,$e.get(H.depthTexture).__webglTexture=_e;const xe=$e.get(H);xe.__hasExternalTextures=!0,xe.__hasExternalTextures&&(xe.__autoAllocateDepthBuffer=_e===void 0,xe.__autoAllocateDepthBuffer||we.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),xe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(H,ae){const _e=$e.get(H);_e.__webglFramebuffer=ae,_e.__useDefaultFramebuffer=ae===void 0},this.setRenderTarget=function(H,ae=0,_e=0){O=H,P=ae,D=_e;let xe=!0,ge=null,tt=!1,ft=!1;if(H){const Et=$e.get(H);Et.__useDefaultFramebuffer!==void 0?(Le.bindFramebuffer(j.FRAMEBUFFER,null),xe=!1):Et.__webglFramebuffer===void 0?rt.setupRenderTarget(H):Et.__hasExternalTextures&&rt.rebindTextures(H,$e.get(H.texture).__webglTexture,$e.get(H.depthTexture).__webglTexture);const Ht=H.texture;(Ht.isData3DTexture||Ht.isDataArrayTexture||Ht.isCompressedArrayTexture)&&(ft=!0);const Bt=$e.get(H).__webglFramebuffer;H.isWebGLCubeRenderTarget?(Array.isArray(Bt[ae])?ge=Bt[ae][_e]:ge=Bt[ae],tt=!0):He.isWebGL2&&H.samples>0&&rt.useMultisampledRTT(H)===!1?ge=$e.get(H).__webglMultisampledFramebuffer:Array.isArray(Bt)?ge=Bt[_e]:ge=Bt,N.copy(H.viewport),G.copy(H.scissor),Q=H.scissorTest}else N.copy(ee).multiplyScalar(de).floor(),G.copy(ce).multiplyScalar(de).floor(),Q=ve;if(Le.bindFramebuffer(j.FRAMEBUFFER,ge)&&He.drawBuffers&&xe&&Le.drawBuffers(H,ge),Le.viewport(N),Le.scissor(G),Le.setScissorTest(Q),tt){const Et=$e.get(H.texture);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_CUBE_MAP_POSITIVE_X+ae,Et.__webglTexture,_e)}else if(ft){const Et=$e.get(H.texture),Ht=ae||0;j.framebufferTextureLayer(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,Et.__webglTexture,_e||0,Ht)}F=-1},this.readRenderTargetPixels=function(H,ae,_e,xe,ge,tt,ft){if(!(H&&H.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Rt=$e.get(H).__webglFramebuffer;if(H.isWebGLCubeRenderTarget&&ft!==void 0&&(Rt=Rt[ft]),Rt){Le.bindFramebuffer(j.FRAMEBUFFER,Rt);try{const Et=H.texture,Ht=Et.format,Bt=Et.type;if(Ht!==Gr&&gn.convert(Ht)!==j.getParameter(j.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Vt=Bt===ah&&(we.has("EXT_color_buffer_half_float")||He.isWebGL2&&we.has("EXT_color_buffer_float"));if(Bt!==Sa&&gn.convert(Bt)!==j.getParameter(j.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Bt===fo&&(He.isWebGL2||we.has("OES_texture_float")||we.has("WEBGL_color_buffer_float")))&&!Vt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ae>=0&&ae<=H.width-xe&&_e>=0&&_e<=H.height-ge&&j.readPixels(ae,_e,xe,ge,gn.convert(Ht),gn.convert(Bt),tt)}finally{const Et=O!==null?$e.get(O).__webglFramebuffer:null;Le.bindFramebuffer(j.FRAMEBUFFER,Et)}}},this.copyFramebufferToTexture=function(H,ae,_e=0){const xe=Math.pow(2,-_e),ge=Math.floor(ae.image.width*xe),tt=Math.floor(ae.image.height*xe);rt.setTexture2D(ae,0),j.copyTexSubImage2D(j.TEXTURE_2D,_e,0,0,H.x,H.y,ge,tt),Le.unbindTexture()},this.copyTextureToTexture=function(H,ae,_e,xe=0){const ge=ae.image.width,tt=ae.image.height,ft=gn.convert(_e.format),Rt=gn.convert(_e.type);rt.setTexture2D(_e,0),j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,_e.flipY),j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,_e.premultiplyAlpha),j.pixelStorei(j.UNPACK_ALIGNMENT,_e.unpackAlignment),ae.isDataTexture?j.texSubImage2D(j.TEXTURE_2D,xe,H.x,H.y,ge,tt,ft,Rt,ae.image.data):ae.isCompressedTexture?j.compressedTexSubImage2D(j.TEXTURE_2D,xe,H.x,H.y,ae.mipmaps[0].width,ae.mipmaps[0].height,ft,ae.mipmaps[0].data):j.texSubImage2D(j.TEXTURE_2D,xe,H.x,H.y,ft,Rt,ae.image),xe===0&&_e.generateMipmaps&&j.generateMipmap(j.TEXTURE_2D),Le.unbindTexture()},this.copyTextureToTexture3D=function(H,ae,_e,xe,ge=0){if(E.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const tt=H.max.x-H.min.x+1,ft=H.max.y-H.min.y+1,Rt=H.max.z-H.min.z+1,Et=gn.convert(xe.format),Ht=gn.convert(xe.type);let Bt;if(xe.isData3DTexture)rt.setTexture3D(xe,0),Bt=j.TEXTURE_3D;else if(xe.isDataArrayTexture)rt.setTexture2DArray(xe,0),Bt=j.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,xe.flipY),j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,xe.premultiplyAlpha),j.pixelStorei(j.UNPACK_ALIGNMENT,xe.unpackAlignment);const Vt=j.getParameter(j.UNPACK_ROW_LENGTH),Fn=j.getParameter(j.UNPACK_IMAGE_HEIGHT),Ai=j.getParameter(j.UNPACK_SKIP_PIXELS),Ln=j.getParameter(j.UNPACK_SKIP_ROWS),Ci=j.getParameter(j.UNPACK_SKIP_IMAGES),Lt=_e.isCompressedTexture?_e.mipmaps[0]:_e.image;j.pixelStorei(j.UNPACK_ROW_LENGTH,Lt.width),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,Lt.height),j.pixelStorei(j.UNPACK_SKIP_PIXELS,H.min.x),j.pixelStorei(j.UNPACK_SKIP_ROWS,H.min.y),j.pixelStorei(j.UNPACK_SKIP_IMAGES,H.min.z),_e.isDataTexture||_e.isData3DTexture?j.texSubImage3D(Bt,ge,ae.x,ae.y,ae.z,tt,ft,Rt,Et,Ht,Lt.data):_e.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),j.compressedTexSubImage3D(Bt,ge,ae.x,ae.y,ae.z,tt,ft,Rt,Et,Lt.data)):j.texSubImage3D(Bt,ge,ae.x,ae.y,ae.z,tt,ft,Rt,Et,Ht,Lt),j.pixelStorei(j.UNPACK_ROW_LENGTH,Vt),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,Fn),j.pixelStorei(j.UNPACK_SKIP_PIXELS,Ai),j.pixelStorei(j.UNPACK_SKIP_ROWS,Ln),j.pixelStorei(j.UNPACK_SKIP_IMAGES,Ci),ge===0&&xe.generateMipmaps&&j.generateMipmap(Bt),Le.unbindTexture()},this.initTexture=function(H){H.isCubeTexture?rt.setTextureCube(H,0):H.isData3DTexture?rt.setTexture3D(H,0):H.isDataArrayTexture||H.isCompressedArrayTexture?rt.setTexture2DArray(H,0):rt.setTexture2D(H,0),Le.unbindTexture()},this.resetState=function(){P=0,D=0,O=null,Le.reset(),kt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Bo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===By?"display-p3":"srgb",t.unpackColorSpace=Rn.workingColorSpace===Pg?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Vi?Au:GM}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Au?Vi:Ea}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class qL extends $M{}qL.prototype.isWebGL1Renderer=!0;class Wy{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new it(e),this.density=t}clone(){return new Wy(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Xy{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new it(e),this.near=t,this.far=i}clone(){return new Xy(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class sg extends fn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class Yy{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=ig,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=ks()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn('THREE.InterleavedBuffer: "updateRange" is deprecated and removed in r169. Use "addUpdateRange()" instead.'),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ks()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ks()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Br=new V;class uh{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Br.fromBufferAttribute(this,t),Br.applyMatrix4(e),this.setXYZ(t,Br.x,Br.y,Br.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Br.fromBufferAttribute(this,t),Br.applyNormalMatrix(e),this.setXYZ(t,Br.x,Br.y,Br.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Br.fromBufferAttribute(this,t),Br.transformDirection(e),this.setXYZ(t,Br.x,Br.y,Br.z);return this}setX(e,t){return this.normalized&&(t=nn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=nn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=nn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=nn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=cs(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=cs(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=cs(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=cs(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array),r=nn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array),r=nn(r,this.array),s=nn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Pn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new uh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class eT extends mr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new it(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Sf;const zp=new V,wf=new V,Ef=new V,Mf=new Pe,kp=new Pe,ZL=new yt,F_=new V,Bp=new V,z_=new V,C2=new Pe,tS=new Pe,R2=new Pe;class jL extends fn{constructor(e=new eT){if(super(),this.isSprite=!0,this.type="Sprite",Sf===void 0){Sf=new rn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Yy(t,5);Sf.setIndex([0,1,2,0,2,3]),Sf.setAttribute("position",new uh(i,3,0,!1)),Sf.setAttribute("uv",new uh(i,2,3,!1))}this.geometry=Sf,this.material=e,this.center=new Pe(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),wf.setFromMatrixScale(this.matrixWorld),ZL.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ef.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&wf.multiplyScalar(-Ef.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;k_(F_.set(-.5,-.5,0),Ef,o,wf,r,s),k_(Bp.set(.5,-.5,0),Ef,o,wf,r,s),k_(z_.set(.5,.5,0),Ef,o,wf,r,s),C2.set(0,0),tS.set(1,0),R2.set(1,1);let a=e.ray.intersectTriangle(F_,Bp,z_,!1,zp);if(a===null&&(k_(Bp.set(-.5,.5,0),Ef,o,wf,r,s),tS.set(0,1),a=e.ray.intersectTriangle(F_,z_,Bp,!1,zp),a===null))return;const h=e.ray.origin.distanceTo(zp);h<e.near||h>e.far||t.push({distance:h,point:zp.clone(),uv:us.getInterpolation(zp,F_,Bp,z_,C2,tS,R2,new Pe),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function k_(n,e,t,i,r,s){Mf.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(kp.x=s*Mf.x-r*Mf.y,kp.y=r*Mf.x+s*Mf.y):kp.copy(Mf),n.copy(e),n.x+=kp.x,n.y+=kp.y,n.applyMatrix4(ZL)}const B_=new V,b2=new V;class KL extends fn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){B_.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(B_);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){B_.setFromMatrixPosition(e.matrixWorld),b2.setFromMatrixPosition(this.matrixWorld);const i=B_.distanceTo(b2)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const P2=new V,L2=new Cn,I2=new Cn,uG=new V,O2=new yt,H_=new V,nS=new dr,D2=new yt,iS=new Rd;class QL extends Wi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Bw,this.bindMatrix=new yt,this.bindMatrixInverse=new yt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Rr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,H_),this.boundingBox.expandByPoint(H_)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new dr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,H_),this.boundingSphere.expandByPoint(H_)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),nS.copy(this.boundingSphere),nS.applyMatrix4(r),e.ray.intersectsSphere(nS)!==!1&&(D2.copy(r).invert(),iS.copy(e.ray).applyMatrix4(D2),!(this.boundingBox!==null&&iS.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,iS)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Cn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Bw?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===lL?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;L2.fromBufferAttribute(r.attributes.skinIndex,e),I2.fromBufferAttribute(r.attributes.skinWeight,e),P2.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=I2.getComponent(s);if(o!==0){const a=L2.getComponent(s);O2.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(uG.copy(P2).applyMatrix4(O2),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class tT extends fn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class eh extends pi{constructor(e=null,t=1,i=1,r,s,o,a,h,d=Ei,p=Ei,m,g){super(null,o,a,h,d,p,r,s,m,g),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const U2=new yt,cG=new yt;class qy{constructor(e=[],t=[]){this.uuid=ks(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new yt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new yt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:cG;U2.multiplyMatrices(a,t[s]),U2.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new qy(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new eh(t,e,e,Gr,fo);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new tT),this.bones.push(o),this.boneInverses.push(new yt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class Sd extends Pn{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Tf=new yt,N2=new yt,V_=[],F2=new Rr,hG=new yt,Hp=new Wi,Vp=new dr;class JL extends Wi{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Sd(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,hG)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Rr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Tf),F2.copy(e.boundingBox).applyMatrix4(Tf),this.boundingBox.union(F2)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new dr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Tf),Vp.copy(e.boundingSphere).applyMatrix4(Tf),this.boundingSphere.union(Vp)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Hp.geometry=this.geometry,Hp.material=this.material,Hp.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Vp.copy(this.boundingSphere),Vp.applyMatrix4(i),e.ray.intersectsSphere(Vp)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Tf),N2.multiplyMatrices(i,Tf),Hp.matrixWorld=N2,Hp.raycast(e,V_);for(let o=0,a=V_.length;o<a;o++){const h=V_[o];h.instanceId=s,h.object=this,t.push(h)}V_.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Sd(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function fG(n,e){return n.z-e.z}function dG(n,e){return e.z-n.z}class pG{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const i=this.pool,r=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1});const s=i[this.index];r.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=t}reset(){this.list.length=0,this.index=0}}const Af="batchId",nu=new yt,z2=new yt,mG=new yt,k2=new yt,rS=new Og,G_=new Rr,Cc=new dr,Gp=new V,sS=new pG,Tr=new Wi,W_=[];function gG(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}class $L extends Wi{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,i=t*2,r){super(new rn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new eh(t,e,e,Gr,fo);this._matricesTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const h=e.getAttribute(a),{array:d,itemSize:p,normalized:m}=h,g=new d.constructor(i*p),y=new h.constructor(g,p,m);y.setUsage(h.usage),t.setAttribute(a,y)}if(e.getIndex()!==null){const a=i>65536?new Uint32Array(s):new Uint16Array(s);t.setIndex(new Pn(a,1))}const o=r>65536?new Uint32Array(i):new Uint16Array(i);t.setAttribute(Af,new Pn(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(Af))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Af}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(i===Af)continue;if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Rr);const e=this._geometryCount,t=this.boundingBox,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,nu),this.getBoundingBoxAt(r,G_).applyMatrix4(nu),t.union(G_))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new dr);const e=this._geometryCount,t=this.boundingSphere,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,nu),this.getBoundingSphereAt(r,Cc).applyMatrix4(nu),t.union(Cc))}addGeometry(e,t=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,h=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=t,s===null?r.vertexStart=0:r.vertexStart=s.vertexStart+s.vertexCount;const d=e.getIndex(),p=d!==null;if(p&&(i===-1?r.indexCount=d.count:r.indexCount=i,s===null?r.indexStart=0:r.indexStart=s.indexStart+s.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const m=this._visibility,g=this._active,y=this._matricesTexture,S=this._matricesTexture.image.data;m.push(!0),g.push(!0);const A=this._geometryCount;this._geometryCount++,mG.toArray(S,A*16),y.needsUpdate=!0,o.push(r),a.push({start:p?r.indexStart:r.vertexStart,count:-1}),h.push({boxInitialized:!1,box:new Rr,sphereInitialized:!1,sphere:new dr});const w=this.geometry.getAttribute(Af);for(let _=0;_<r.vertexCount;_++)w.setX(r.vertexStart+_,A);return w.needsUpdate=!0,this.setGeometryAt(A,e),A}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(r&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const h=a.vertexStart,d=a.vertexCount;for(const y in i.attributes){if(y===Af)continue;const S=t.getAttribute(y),A=i.getAttribute(y);gG(S,A,h);const w=S.itemSize;for(let _=S.count,T=d;_<T;_++){const E=h+_;for(let C=0;C<w;C++)A.setComponent(E,C,0)}A.needsUpdate=!0}if(r){const y=a.indexStart;for(let S=0;S<o.count;S++)s.setX(y+S,h+o.getX(S));for(let S=o.count,A=a.indexCount;S<A;S++)s.setX(y+S,h);s.needsUpdate=!0}const p=this._bounds[e];t.boundingBox!==null?(p.box.copy(t.boundingBox),p.boxInitialized=!0):p.boxInitialized=!1,t.boundingSphere!==null?(p.sphere.copy(t.boundingSphere),p.sphereInitialized=!0):p.sphereInitialized=!1;const m=this._drawRanges[e],g=t.getAttribute("position");return m.count=r?o.count:g.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(this._active[e]===!1)return this;const r=this._bounds[e],s=r.box,o=this.geometry;if(r.boxInitialized===!1){s.makeEmpty();const a=o.index,h=o.attributes.position,d=this._drawRanges[e];for(let p=d.start,m=d.start+d.count;p<m;p++){let g=p;a&&(g=a.getX(g)),s.expandByPoint(Gp.fromBufferAttribute(h,g))}r.boxInitialized=!0}return t.copy(s),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return this;const r=this._bounds[e],s=r.sphere,o=this.geometry;if(r.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,G_),G_.getCenter(s.center);const a=o.index,h=o.attributes.position,d=this._drawRanges[e];let p=0;for(let m=d.start,g=d.start+d.count;m<g;m++){let y=m;a&&(y=a.getX(y)),Gp.fromBufferAttribute(h,y),p=Math.max(p,s.center.distanceToSquared(Gp))}s.radius=Math.sqrt(p),r.sphereInitialized=!0}return t.copy(s),t}setMatrixAt(e,t){const i=this._active,r=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||i[e]===!1?this:(t.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,t){const i=this._active,r=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||i[e]===!1?null:t.fromArray(r,e*16)}setVisibleAt(e,t){const i=this._visibility,r=this._active,s=this._geometryCount;return e>=s||r[e]===!1||i[e]===t?this:(i[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,i=this._active,r=this._geometryCount;return e>=r||i[e]===!1?!1:t[e]}raycast(e,t){const i=this._visibility,r=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,h=this.geometry;Tr.material=this.material,Tr.geometry.index=h.index,Tr.geometry.attributes=h.attributes,Tr.geometry.boundingBox===null&&(Tr.geometry.boundingBox=new Rr),Tr.geometry.boundingSphere===null&&(Tr.geometry.boundingSphere=new dr);for(let d=0;d<o;d++){if(!i[d]||!r[d])continue;const p=s[d];Tr.geometry.setDrawRange(p.start,p.count),this.getMatrixAt(d,Tr.matrixWorld).premultiply(a),this.getBoundingBoxAt(d,Tr.geometry.boundingBox),this.getBoundingSphereAt(d,Tr.geometry.boundingSphere),Tr.raycast(e,W_);for(let m=0,g=W_.length;m<g;m++){const y=W_[m];y.object=this,y.batchId=d,t.push(y)}W_.length=0}Tr.material=null,Tr.geometry.index=null,Tr.geometry.attributes={},Tr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,h=this._visibility,d=this._multiDrawStarts,p=this._multiDrawCounts,m=this._drawRanges,g=this.perObjectFrustumCulled;g&&(k2.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),rS.setFromProjectionMatrix(k2,e.isWebGPURenderer?vd:Bo));let y=0;if(this.sortObjects){z2.copy(this.matrixWorld).invert(),Gp.setFromMatrixPosition(i.matrixWorld).applyMatrix4(z2);for(let w=0,_=h.length;w<_;w++)if(h[w]){this.getMatrixAt(w,nu),this.getBoundingSphereAt(w,Cc).applyMatrix4(nu);let T=!1;if(g&&(T=!rS.intersectsSphere(Cc)),!T){const E=Gp.distanceTo(Cc.center);sS.push(m[w],E)}}const S=sS.list,A=this.customSort;A===null?S.sort(s.transparent?dG:fG):A.call(this,S,i);for(let w=0,_=S.length;w<_;w++){const T=S[w];d[y]=T.start*a,p[y]=T.count,y++}sS.reset()}else for(let S=0,A=h.length;S<A;S++)if(h[S]){let w=!1;if(g&&(this.getMatrixAt(S,nu),this.getBoundingSphereAt(S,Cc).applyMatrix4(nu),w=!rS.intersectsSphere(Cc)),!w){const _=m[S];d[y]=_.start*a,p[y]=_.count,y++}}this._multiDrawCount=y,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class Zr extends mr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new it(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const B2=new V,H2=new V,V2=new yt,oS=new Rd,X_=new dr;class Ou extends fn{constructor(e=new rn,t=new Zr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)B2.fromBufferAttribute(t,r-1),H2.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=B2.distanceTo(H2);e.setAttribute("lineDistance",new gt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),X_.copy(i.boundingSphere),X_.applyMatrix4(r),X_.radius+=s,e.ray.intersectsSphere(X_)===!1)return;V2.copy(r).invert(),oS.copy(e.ray).applyMatrix4(V2);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),h=a*a,d=new V,p=new V,m=new V,g=new V,y=this.isLineSegments?2:1,S=i.index,w=i.attributes.position;if(S!==null){const _=Math.max(0,o.start),T=Math.min(S.count,o.start+o.count);for(let E=_,C=T-1;E<C;E+=y){const P=S.getX(E),D=S.getX(E+1);if(d.fromBufferAttribute(w,P),p.fromBufferAttribute(w,D),oS.distanceSqToSegment(d,p,g,m)>h)continue;g.applyMatrix4(this.matrixWorld);const F=e.ray.origin.distanceTo(g);F<e.near||F>e.far||t.push({distance:F,point:m.clone().applyMatrix4(this.matrixWorld),index:E,face:null,faceIndex:null,object:this})}}else{const _=Math.max(0,o.start),T=Math.min(w.count,o.start+o.count);for(let E=_,C=T-1;E<C;E+=y){if(d.fromBufferAttribute(w,E),p.fromBufferAttribute(w,E+1),oS.distanceSqToSegment(d,p,g,m)>h)continue;g.applyMatrix4(this.matrixWorld);const D=e.ray.origin.distanceTo(g);D<e.near||D>e.far||t.push({distance:D,point:m.clone().applyMatrix4(this.matrixWorld),index:E,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const G2=new V,W2=new V;class Aa extends Ou{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)G2.fromBufferAttribute(t,r),W2.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+G2.distanceTo(W2);e.setAttribute("lineDistance",new gt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class eI extends Ou{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class nT extends mr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new it(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const X2=new yt,_E=new Rd,Y_=new dr,q_=new V;class tI extends fn{constructor(e=new rn,t=new nT){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Y_.copy(i.boundingSphere),Y_.applyMatrix4(r),Y_.radius+=s,e.ray.intersectsSphere(Y_)===!1)return;X2.copy(r).invert(),_E.copy(e.ray).applyMatrix4(X2);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),h=a*a,d=i.index,m=i.attributes.position;if(d!==null){const g=Math.max(0,o.start),y=Math.min(d.count,o.start+o.count);for(let S=g,A=y;S<A;S++){const w=d.getX(S);q_.fromBufferAttribute(m,w),Y2(q_,w,h,r,e,t,this)}}else{const g=Math.max(0,o.start),y=Math.min(m.count,o.start+o.count);for(let S=g,A=y;S<A;S++)q_.fromBufferAttribute(m,S),Y2(q_,S,h,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Y2(n,e,t,i,r,s,o){const a=_E.distanceSqToPoint(n);if(a<t){const h=new V;_E.closestPointToPoint(n,h),h.applyMatrix4(i);const d=r.ray.origin.distanceTo(h);if(d<r.near||d>r.far)return;s.push({distance:d,distanceToRay:Math.sqrt(a),point:h,index:e,face:null,object:o})}}class _G extends pi{constructor(e,t,i,r,s,o,a,h,d){super(e,t,i,r,s,o,a,h,d),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:ni,this.magFilter=s!==void 0?s:ni,this.generateMipmaps=!1;const p=this;function m(){p.needsUpdate=!0,e.requestVideoFrameCallback(m)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(m)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class vG extends pi{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ei,this.minFilter=Ei,this.generateMipmaps=!1,this.needsUpdate=!0}}class Zy extends pi{constructor(e,t,i,r,s,o,a,h,d,p,m,g){super(null,o,a,h,d,p,r,s,m,g),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class yG extends Zy{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Cr}}class xG extends Zy{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,dl),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class nI extends pi{constructor(e,t,i,r,s,o,a,h,d){super(e,t,i,r,s,o,a,h,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Xo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,h=s-1,d;for(;a<=h;)if(r=Math.floor(a+(h-a)/2),d=i[r]-o,d<0)a=r+1;else if(d>0)h=r-1;else{h=r;break}if(r=h,i[r]===o)return r/(s-1);const p=i[r],g=i[r+1]-p,y=(o-p)/g;return(r+y)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),h=t||(o.isVector2?new Pe:new V);return h.copy(a).sub(o).normalize(),h}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new V,r=[],s=[],o=[],a=new V,h=new yt;for(let y=0;y<=e;y++){const S=y/e;r[y]=this.getTangentAt(S,new V)}s[0]=new V,o[0]=new V;let d=Number.MAX_VALUE;const p=Math.abs(r[0].x),m=Math.abs(r[0].y),g=Math.abs(r[0].z);p<=d&&(d=p,i.set(1,0,0)),m<=d&&(d=m,i.set(0,1,0)),g<=d&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let y=1;y<=e;y++){if(s[y]=s[y-1].clone(),o[y]=o[y-1].clone(),a.crossVectors(r[y-1],r[y]),a.length()>Number.EPSILON){a.normalize();const S=Math.acos(di(r[y-1].dot(r[y]),-1,1));s[y].applyMatrix4(h.makeRotationAxis(a,S))}o[y].crossVectors(r[y],s[y])}if(t===!0){let y=Math.acos(di(s[0].dot(s[e]),-1,1));y/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(y=-y);for(let S=1;S<=e;S++)s[S].applyMatrix4(h.makeRotationAxis(r[S],y*S)),o[S].crossVectors(r[S],s[S])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class jy extends Xo{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,h=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=h}getPoint(e,t){const i=t||new Pe,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let h=this.aX+this.xRadius*Math.cos(a),d=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const p=Math.cos(this.aRotation),m=Math.sin(this.aRotation),g=h-this.aX,y=d-this.aY;h=g*p-y*m+this.aX,d=g*m+y*p+this.aY}return i.set(h,d)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class iI extends jy{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function iT(){let n=0,e=0,t=0,i=0;function r(s,o,a,h){n=s,e=a,t=-3*s+3*o-2*a-h,i=2*s-2*o+a+h}return{initCatmullRom:function(s,o,a,h,d){r(o,a,d*(a-s),d*(h-o))},initNonuniformCatmullRom:function(s,o,a,h,d,p,m){let g=(o-s)/d-(a-s)/(d+p)+(a-o)/p,y=(a-o)/p-(h-o)/(p+m)+(h-a)/m;g*=p,y*=p,r(o,a,g,y)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const Z_=new V,aS=new iT,lS=new iT,uS=new iT;class rI extends Xo{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new V){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),h=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:h===0&&a===s-1&&(a=s-2,h=1);let d,p;this.closed||a>0?d=r[(a-1)%s]:(Z_.subVectors(r[0],r[1]).add(r[0]),d=Z_);const m=r[a%s],g=r[(a+1)%s];if(this.closed||a+2<s?p=r[(a+2)%s]:(Z_.subVectors(r[s-1],r[s-2]).add(r[s-1]),p=Z_),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let S=Math.pow(d.distanceToSquared(m),y),A=Math.pow(m.distanceToSquared(g),y),w=Math.pow(g.distanceToSquared(p),y);A<1e-4&&(A=1),S<1e-4&&(S=A),w<1e-4&&(w=A),aS.initNonuniformCatmullRom(d.x,m.x,g.x,p.x,S,A,w),lS.initNonuniformCatmullRom(d.y,m.y,g.y,p.y,S,A,w),uS.initNonuniformCatmullRom(d.z,m.z,g.z,p.z,S,A,w)}else this.curveType==="catmullrom"&&(aS.initCatmullRom(d.x,m.x,g.x,p.x,this.tension),lS.initCatmullRom(d.y,m.y,g.y,p.y,this.tension),uS.initCatmullRom(d.z,m.z,g.z,p.z,this.tension));return i.set(aS.calc(h),lS.calc(h),uS.calc(h)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new V().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function q2(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,h=n*a;return(2*t-2*i+s+o)*h+(-3*t+3*i-2*s-o)*a+s*n+t}function SG(n,e){const t=1-n;return t*t*e}function wG(n,e){return 2*(1-n)*n*e}function EG(n,e){return n*n*e}function Em(n,e,t,i){return SG(n,e)+wG(n,t)+EG(n,i)}function MG(n,e){const t=1-n;return t*t*t*e}function TG(n,e){const t=1-n;return 3*t*t*n*e}function AG(n,e){return 3*(1-n)*n*n*e}function CG(n,e){return n*n*n*e}function Mm(n,e,t,i,r){return MG(n,e)+TG(n,t)+AG(n,i)+CG(n,r)}class rT extends Xo{constructor(e=new Pe,t=new Pe,i=new Pe,r=new Pe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Pe){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Mm(e,r.x,s.x,o.x,a.x),Mm(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class sI extends Xo{constructor(e=new V,t=new V,i=new V,r=new V){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new V){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Mm(e,r.x,s.x,o.x,a.x),Mm(e,r.y,s.y,o.y,a.y),Mm(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class sT extends Xo{constructor(e=new Pe,t=new Pe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Pe){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Pe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class oI extends Xo{constructor(e=new V,t=new V){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new V){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new V){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class oT extends Xo{constructor(e=new Pe,t=new Pe,i=new Pe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Pe){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Em(e,r.x,s.x,o.x),Em(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class aT extends Xo{constructor(e=new V,t=new V,i=new V){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new V){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Em(e,r.x,s.x,o.x),Em(e,r.y,s.y,o.y),Em(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class lT extends Xo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Pe){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,h=r[o===0?o:o-1],d=r[o],p=r[o>r.length-2?r.length-1:o+1],m=r[o>r.length-3?r.length-1:o+2];return i.set(q2(a,h.x,d.x,p.x,m.x),q2(a,h.y,d.y,p.y,m.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Pe().fromArray(r))}return this}}var dy=Object.freeze({__proto__:null,ArcCurve:iI,CatmullRomCurve3:rI,CubicBezierCurve:rT,CubicBezierCurve3:sI,EllipseCurve:jy,LineCurve:sT,LineCurve3:oI,QuadraticBezierCurve:oT,QuadraticBezierCurve3:aT,SplineCurve:lT});class aI extends Xo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new dy[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],h=a.getLength(),d=h===0?0:1-o/h;return a.getPointAt(d,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,h=o.getPoints(a);for(let d=0;d<h.length;d++){const p=h[d];i&&i.equals(p)||(t.push(p),i=p)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new dy[r.type]().fromJSON(r))}return this}}class og extends aI{constructor(e){super(),this.type="Path",this.currentPoint=new Pe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new sT(this.currentPoint.clone(),new Pe(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new oT(this.currentPoint.clone(),new Pe(e,t),new Pe(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new rT(this.currentPoint.clone(),new Pe(e,t),new Pe(i,r),new Pe(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new lT(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,h=this.currentPoint.y;return this.absarc(e+a,t+h,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,h){const d=this.currentPoint.x,p=this.currentPoint.y;return this.absellipse(e+d,t+p,i,r,s,o,a,h),this}absellipse(e,t,i,r,s,o,a,h){const d=new jy(e,t,i,r,s,o,a,h);if(this.curves.length>0){const m=d.getPoint(0);m.equals(this.currentPoint)||this.lineTo(m.x,m.y)}this.curves.push(d);const p=d.getPoint(1);return this.currentPoint.copy(p),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Ng extends rn{constructor(e=[new Pe(0,-.5),new Pe(.5,0),new Pe(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=di(r,0,Math.PI*2);const s=[],o=[],a=[],h=[],d=[],p=1/t,m=new V,g=new Pe,y=new V,S=new V,A=new V;let w=0,_=0;for(let T=0;T<=e.length-1;T++)switch(T){case 0:w=e[T+1].x-e[T].x,_=e[T+1].y-e[T].y,y.x=_*1,y.y=-w,y.z=_*0,A.copy(y),y.normalize(),h.push(y.x,y.y,y.z);break;case e.length-1:h.push(A.x,A.y,A.z);break;default:w=e[T+1].x-e[T].x,_=e[T+1].y-e[T].y,y.x=_*1,y.y=-w,y.z=_*0,S.copy(y),y.x+=A.x,y.y+=A.y,y.z+=A.z,y.normalize(),h.push(y.x,y.y,y.z),A.copy(S)}for(let T=0;T<=t;T++){const E=i+T*p*r,C=Math.sin(E),P=Math.cos(E);for(let D=0;D<=e.length-1;D++){m.x=e[D].x*C,m.y=e[D].y,m.z=e[D].x*P,o.push(m.x,m.y,m.z),g.x=T/t,g.y=D/(e.length-1),a.push(g.x,g.y);const O=h[3*D+0]*C,F=h[3*D+1],L=h[3*D+0]*P;d.push(O,F,L)}}for(let T=0;T<t;T++)for(let E=0;E<e.length-1;E++){const C=E+T*e.length,P=C,D=C+e.length,O=C+e.length+1,F=C+1;s.push(P,D,F),s.push(O,F,D)}this.setIndex(s),this.setAttribute("position",new gt(o,3)),this.setAttribute("uv",new gt(a,2)),this.setAttribute("normal",new gt(d,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ng(e.points,e.segments,e.phiStart,e.phiLength)}}class Ky extends Ng{constructor(e=1,t=1,i=4,r=8){const s=new og;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new Ky(e.radius,e.length,e.capSegments,e.radialSegments)}}class Qy extends rn{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],h=[],d=new V,p=new Pe;o.push(0,0,0),a.push(0,0,1),h.push(.5,.5);for(let m=0,g=3;m<=t;m++,g+=3){const y=i+m/t*r;d.x=e*Math.cos(y),d.y=e*Math.sin(y),o.push(d.x,d.y,d.z),a.push(0,0,1),p.x=(o[g]/e+1)/2,p.y=(o[g+1]/e+1)/2,h.push(p.x,p.y)}for(let m=1;m<=t;m++)s.push(m,m+1,0);this.setIndex(s),this.setAttribute("position",new gt(o,3)),this.setAttribute("normal",new gt(a,3)),this.setAttribute("uv",new gt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qy(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Pd extends rn{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,h=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:h};const d=this;r=Math.floor(r),s=Math.floor(s);const p=[],m=[],g=[],y=[];let S=0;const A=[],w=i/2;let _=0;T(),o===!1&&(e>0&&E(!0),t>0&&E(!1)),this.setIndex(p),this.setAttribute("position",new gt(m,3)),this.setAttribute("normal",new gt(g,3)),this.setAttribute("uv",new gt(y,2));function T(){const C=new V,P=new V;let D=0;const O=(t-e)/i;for(let F=0;F<=s;F++){const L=[],N=F/s,G=N*(t-e)+e;for(let Q=0;Q<=r;Q++){const le=Q/r,Z=le*h+a,oe=Math.sin(Z),me=Math.cos(Z);P.x=G*oe,P.y=-N*i+w,P.z=G*me,m.push(P.x,P.y,P.z),C.set(oe,O,me).normalize(),g.push(C.x,C.y,C.z),y.push(le,1-N),L.push(S++)}A.push(L)}for(let F=0;F<r;F++)for(let L=0;L<s;L++){const N=A[L][F],G=A[L+1][F],Q=A[L+1][F+1],le=A[L][F+1];p.push(N,G,le),p.push(G,Q,le),D+=6}d.addGroup(_,D,0),_+=D}function E(C){const P=S,D=new Pe,O=new V;let F=0;const L=C===!0?e:t,N=C===!0?1:-1;for(let Q=1;Q<=r;Q++)m.push(0,w*N,0),g.push(0,N,0),y.push(.5,.5),S++;const G=S;for(let Q=0;Q<=r;Q++){const Z=Q/r*h+a,oe=Math.cos(Z),me=Math.sin(Z);O.x=L*me,O.y=w*N,O.z=L*oe,m.push(O.x,O.y,O.z),g.push(0,N,0),D.x=oe*.5+.5,D.y=me*.5*N+.5,y.push(D.x,D.y),S++}for(let Q=0;Q<r;Q++){const le=P+Q,Z=G+Q;C===!0?p.push(Z,Z+1,le):p.push(Z+1,Z,le),F+=3}d.addGroup(_,F,C===!0?1:2),_+=F}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pd(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Jy extends Pd{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Jy(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Bu extends rn{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),d(i),p(),this.setAttribute("position",new gt(s,3)),this.setAttribute("normal",new gt(s.slice(),3)),this.setAttribute("uv",new gt(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(T){const E=new V,C=new V,P=new V;for(let D=0;D<t.length;D+=3)y(t[D+0],E),y(t[D+1],C),y(t[D+2],P),h(E,C,P,T)}function h(T,E,C,P){const D=P+1,O=[];for(let F=0;F<=D;F++){O[F]=[];const L=T.clone().lerp(C,F/D),N=E.clone().lerp(C,F/D),G=D-F;for(let Q=0;Q<=G;Q++)Q===0&&F===D?O[F][Q]=L:O[F][Q]=L.clone().lerp(N,Q/G)}for(let F=0;F<D;F++)for(let L=0;L<2*(D-F)-1;L++){const N=Math.floor(L/2);L%2===0?(g(O[F][N+1]),g(O[F+1][N]),g(O[F][N])):(g(O[F][N+1]),g(O[F+1][N+1]),g(O[F+1][N]))}}function d(T){const E=new V;for(let C=0;C<s.length;C+=3)E.x=s[C+0],E.y=s[C+1],E.z=s[C+2],E.normalize().multiplyScalar(T),s[C+0]=E.x,s[C+1]=E.y,s[C+2]=E.z}function p(){const T=new V;for(let E=0;E<s.length;E+=3){T.x=s[E+0],T.y=s[E+1],T.z=s[E+2];const C=w(T)/2/Math.PI+.5,P=_(T)/Math.PI+.5;o.push(C,1-P)}S(),m()}function m(){for(let T=0;T<o.length;T+=6){const E=o[T+0],C=o[T+2],P=o[T+4],D=Math.max(E,C,P),O=Math.min(E,C,P);D>.9&&O<.1&&(E<.2&&(o[T+0]+=1),C<.2&&(o[T+2]+=1),P<.2&&(o[T+4]+=1))}}function g(T){s.push(T.x,T.y,T.z)}function y(T,E){const C=T*3;E.x=e[C+0],E.y=e[C+1],E.z=e[C+2]}function S(){const T=new V,E=new V,C=new V,P=new V,D=new Pe,O=new Pe,F=new Pe;for(let L=0,N=0;L<s.length;L+=9,N+=6){T.set(s[L+0],s[L+1],s[L+2]),E.set(s[L+3],s[L+4],s[L+5]),C.set(s[L+6],s[L+7],s[L+8]),D.set(o[N+0],o[N+1]),O.set(o[N+2],o[N+3]),F.set(o[N+4],o[N+5]),P.copy(T).add(E).add(C).divideScalar(3);const G=w(P);A(D,N+0,T,G),A(O,N+2,E,G),A(F,N+4,C,G)}}function A(T,E,C,P){P<0&&T.x===1&&(o[E]=T.x-1),C.x===0&&C.z===0&&(o[E]=P/2/Math.PI+.5)}function w(T){return Math.atan2(T.z,-T.x)}function _(T){return Math.atan2(-T.y,Math.sqrt(T.x*T.x+T.z*T.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bu(e.vertices,e.indices,e.radius,e.details)}}class $y extends Bu{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new $y(e.radius,e.detail)}}const j_=new V,K_=new V,cS=new V,Q_=new us;class lI extends rn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Jc*t),o=e.getIndex(),a=e.getAttribute("position"),h=o?o.count:a.count,d=[0,0,0],p=["a","b","c"],m=new Array(3),g={},y=[];for(let S=0;S<h;S+=3){o?(d[0]=o.getX(S),d[1]=o.getX(S+1),d[2]=o.getX(S+2)):(d[0]=S,d[1]=S+1,d[2]=S+2);const{a:A,b:w,c:_}=Q_;if(A.fromBufferAttribute(a,d[0]),w.fromBufferAttribute(a,d[1]),_.fromBufferAttribute(a,d[2]),Q_.getNormal(cS),m[0]=`${Math.round(A.x*r)},${Math.round(A.y*r)},${Math.round(A.z*r)}`,m[1]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,m[2]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,!(m[0]===m[1]||m[1]===m[2]||m[2]===m[0]))for(let T=0;T<3;T++){const E=(T+1)%3,C=m[T],P=m[E],D=Q_[p[T]],O=Q_[p[E]],F=`${C}_${P}`,L=`${P}_${C}`;L in g&&g[L]?(cS.dot(g[L].normal)<=s&&(y.push(D.x,D.y,D.z),y.push(O.x,O.y,O.z)),g[L]=null):F in g||(g[F]={index0:d[T],index1:d[E],normal:cS.clone()})}}for(const S in g)if(g[S]){const{index0:A,index1:w}=g[S];j_.fromBufferAttribute(a,A),K_.fromBufferAttribute(a,w),y.push(j_.x,j_.y,j_.z),y.push(K_.x,K_.y,K_.z)}this.setAttribute("position",new gt(y,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class th extends og{constructor(e){super(e),this.uuid=ks(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new og().fromJSON(r))}return this}}const RG={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=uI(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,h,d,p,m,g,y;if(i&&(s=OG(n,e,s,t)),n.length>80*t){a=d=n[0],h=p=n[1];for(let S=t;S<r;S+=t)m=n[S],g=n[S+1],m<a&&(a=m),g<h&&(h=g),m>d&&(d=m),g>p&&(p=g);y=Math.max(d-a,p-h),y=y!==0?32767/y:0}return ag(s,o,t,a,h,y,0),o}};function uI(n,e,t,i,r){let s,o;if(r===WG(n,e,t,i)>0)for(s=e;s<t;s+=i)o=Z2(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=Z2(s,n[s],n[s+1],o);return o&&ex(o,o.next)&&(ug(o),o=o.next),o}function ch(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(ex(t,t.next)||ii(t.prev,t,t.next)===0)){if(ug(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function ag(n,e,t,i,r,s,o){if(!n)return;!o&&s&&zG(n,i,r,s);let a=n,h,d;for(;n.prev!==n.next;){if(h=n.prev,d=n.next,s?PG(n,i,r,s):bG(n)){e.push(h.i/t|0),e.push(n.i/t|0),e.push(d.i/t|0),ug(n),n=d.next,a=d.next;continue}if(n=d,n===a){o?o===1?(n=LG(ch(n),e,t),ag(n,e,t,i,r,s,2)):o===2&&IG(n,e,t,i,r,s):ag(ch(n),e,t,i,r,s,1);break}}}function bG(n){const e=n.prev,t=n,i=n.next;if(ii(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,h=t.y,d=i.y,p=r<s?r<o?r:o:s<o?s:o,m=a<h?a<d?a:d:h<d?h:d,g=r>s?r>o?r:o:s>o?s:o,y=a>h?a>d?a:d:h>d?h:d;let S=i.next;for(;S!==e;){if(S.x>=p&&S.x<=g&&S.y>=m&&S.y<=y&&$f(r,a,s,h,o,d,S.x,S.y)&&ii(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function PG(n,e,t,i){const r=n.prev,s=n,o=n.next;if(ii(r,s,o)>=0)return!1;const a=r.x,h=s.x,d=o.x,p=r.y,m=s.y,g=o.y,y=a<h?a<d?a:d:h<d?h:d,S=p<m?p<g?p:g:m<g?m:g,A=a>h?a>d?a:d:h>d?h:d,w=p>m?p>g?p:g:m>g?m:g,_=vE(y,S,e,t,i),T=vE(A,w,e,t,i);let E=n.prevZ,C=n.nextZ;for(;E&&E.z>=_&&C&&C.z<=T;){if(E.x>=y&&E.x<=A&&E.y>=S&&E.y<=w&&E!==r&&E!==o&&$f(a,p,h,m,d,g,E.x,E.y)&&ii(E.prev,E,E.next)>=0||(E=E.prevZ,C.x>=y&&C.x<=A&&C.y>=S&&C.y<=w&&C!==r&&C!==o&&$f(a,p,h,m,d,g,C.x,C.y)&&ii(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;E&&E.z>=_;){if(E.x>=y&&E.x<=A&&E.y>=S&&E.y<=w&&E!==r&&E!==o&&$f(a,p,h,m,d,g,E.x,E.y)&&ii(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;C&&C.z<=T;){if(C.x>=y&&C.x<=A&&C.y>=S&&C.y<=w&&C!==r&&C!==o&&$f(a,p,h,m,d,g,C.x,C.y)&&ii(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function LG(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!ex(r,s)&&cI(r,i,i.next,s)&&lg(r,s)&&lg(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),ug(i),ug(i.next),i=n=s),i=i.next}while(i!==n);return ch(i)}function IG(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&HG(o,a)){let h=hI(o,a);o=ch(o,o.next),h=ch(h,h.next),ag(o,e,t,i,r,s,0),ag(h,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function OG(n,e,t,i){const r=[];let s,o,a,h,d;for(s=0,o=e.length;s<o;s++)a=e[s]*i,h=s<o-1?e[s+1]*i:n.length,d=uI(n,a,h,i,!1),d===d.next&&(d.steiner=!0),r.push(BG(d));for(r.sort(DG),s=0;s<r.length;s++)t=UG(r[s],t);return t}function DG(n,e){return n.x-e.x}function UG(n,e){const t=NG(n,e);if(!t)return e;const i=hI(t,n);return ch(i,i.next),ch(t,t.next)}function NG(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const g=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(g<=s&&g>i&&(i=g,r=t.x<t.next.x?t:t.next,g===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,h=r.x,d=r.y;let p=1/0,m;t=r;do s>=t.x&&t.x>=h&&s!==t.x&&$f(o<d?s:i,o,h,d,o<d?i:s,o,t.x,t.y)&&(m=Math.abs(o-t.y)/(s-t.x),lg(t,n)&&(m<p||m===p&&(t.x>r.x||t.x===r.x&&FG(r,t)))&&(r=t,p=m)),t=t.next;while(t!==a);return r}function FG(n,e){return ii(n.prev,n,e.prev)<0&&ii(e.next,n,n.next)<0}function zG(n,e,t,i){let r=n;do r.z===0&&(r.z=vE(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,kG(r)}function kG(n){let e,t,i,r,s,o,a,h,d=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<d&&(a++,i=i.nextZ,!!i);e++);for(h=d;a>0||h>0&&i;)a!==0&&(h===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,h--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,d*=2}while(o>1);return n}function vE(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function BG(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function $f(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function HG(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!VG(n,e)&&(lg(n,e)&&lg(e,n)&&GG(n,e)&&(ii(n.prev,n,e.prev)||ii(n,e.prev,e))||ex(n,e)&&ii(n.prev,n,n.next)>0&&ii(e.prev,e,e.next)>0)}function ii(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function ex(n,e){return n.x===e.x&&n.y===e.y}function cI(n,e,t,i){const r=$_(ii(n,e,t)),s=$_(ii(n,e,i)),o=$_(ii(t,i,n)),a=$_(ii(t,i,e));return!!(r!==s&&o!==a||r===0&&J_(n,t,e)||s===0&&J_(n,i,e)||o===0&&J_(t,n,i)||a===0&&J_(t,e,i))}function J_(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function $_(n){return n>0?1:n<0?-1:0}function VG(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&cI(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function lg(n,e){return ii(n.prev,n,n.next)<0?ii(n,e,n.next)>=0&&ii(n,n.prev,e)>=0:ii(n,e,n.prev)<0||ii(n,n.next,e)<0}function GG(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function hI(n,e){const t=new yE(n.i,n.x,n.y),i=new yE(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function Z2(n,e,t,i){const r=new yE(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function ug(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function yE(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function WG(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class wa{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return wa.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];j2(e),K2(i,e);let o=e.length;t.forEach(j2);for(let h=0;h<t.length;h++)r.push(o),o+=t[h].length,K2(i,t[h]);const a=RG.triangulate(i,r);for(let h=0;h<a.length;h+=3)s.push(a.slice(h,h+3));return s}}function j2(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function K2(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class tx extends rn{constructor(e=new th([new Pe(.5,.5),new Pe(-.5,.5),new Pe(-.5,-.5),new Pe(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,h=e.length;a<h;a++){const d=e[a];o(d)}this.setAttribute("position",new gt(r,3)),this.setAttribute("uv",new gt(s,2)),this.computeVertexNormals();function o(a){const h=[],d=t.curveSegments!==void 0?t.curveSegments:12,p=t.steps!==void 0?t.steps:1,m=t.depth!==void 0?t.depth:1;let g=t.bevelEnabled!==void 0?t.bevelEnabled:!0,y=t.bevelThickness!==void 0?t.bevelThickness:.2,S=t.bevelSize!==void 0?t.bevelSize:y-.1,A=t.bevelOffset!==void 0?t.bevelOffset:0,w=t.bevelSegments!==void 0?t.bevelSegments:3;const _=t.extrudePath,T=t.UVGenerator!==void 0?t.UVGenerator:XG;let E,C=!1,P,D,O,F;_&&(E=_.getSpacedPoints(p),C=!0,g=!1,P=_.computeFrenetFrames(p,!1),D=new V,O=new V,F=new V),g||(w=0,y=0,S=0,A=0);const L=a.extractPoints(d);let N=L.shape;const G=L.holes;if(!wa.isClockWise(N)){N=N.reverse();for(let j=0,Ue=G.length;j<Ue;j++){const we=G[j];wa.isClockWise(we)&&(G[j]=we.reverse())}}const le=wa.triangulateShape(N,G),Z=N;for(let j=0,Ue=G.length;j<Ue;j++){const we=G[j];N=N.concat(we)}function oe(j,Ue,we){return Ue||console.error("THREE.ExtrudeGeometry: vec does not exist"),j.clone().addScaledVector(Ue,we)}const me=N.length,de=le.length;function Y(j,Ue,we){let He,Le,ut;const $e=j.x-Ue.x,rt=j.y-Ue.y,xt=we.x-j.x,Nt=we.y-j.y,wn=$e*$e+rt*rt,X=$e*Nt-rt*xt;if(Math.abs(X)>Number.EPSILON){const k=Math.sqrt(wn),fe=Math.sqrt(xt*xt+Nt*Nt),ke=Ue.x-rt/k,De=Ue.y+$e/k,Ne=we.x-Nt/fe,ht=we.y+xt/fe,Ge=((Ne-ke)*Nt-(ht-De)*xt)/($e*Nt-rt*xt);He=ke+$e*Ge-j.x,Le=De+rt*Ge-j.y;const Ke=He*He+Le*Le;if(Ke<=2)return new Pe(He,Le);ut=Math.sqrt(Ke/2)}else{let k=!1;$e>Number.EPSILON?xt>Number.EPSILON&&(k=!0):$e<-Number.EPSILON?xt<-Number.EPSILON&&(k=!0):Math.sign(rt)===Math.sign(Nt)&&(k=!0),k?(He=-rt,Le=$e,ut=Math.sqrt(wn)):(He=$e,Le=rt,ut=Math.sqrt(wn/2))}return new Pe(He/ut,Le/ut)}const te=[];for(let j=0,Ue=Z.length,we=Ue-1,He=j+1;j<Ue;j++,we++,He++)we===Ue&&(we=0),He===Ue&&(He=0),te[j]=Y(Z[j],Z[we],Z[He]);const ee=[];let ce,ve=te.concat();for(let j=0,Ue=G.length;j<Ue;j++){const we=G[j];ce=[];for(let He=0,Le=we.length,ut=Le-1,$e=He+1;He<Le;He++,ut++,$e++)ut===Le&&(ut=0),$e===Le&&($e=0),ce[He]=Y(we[He],we[ut],we[$e]);ee.push(ce),ve=ve.concat(ce)}for(let j=0;j<w;j++){const Ue=j/w,we=y*Math.cos(Ue*Math.PI/2),He=S*Math.sin(Ue*Math.PI/2)+A;for(let Le=0,ut=Z.length;Le<ut;Le++){const $e=oe(Z[Le],te[Le],He);qe($e.x,$e.y,-we)}for(let Le=0,ut=G.length;Le<ut;Le++){const $e=G[Le];ce=ee[Le];for(let rt=0,xt=$e.length;rt<xt;rt++){const Nt=oe($e[rt],ce[rt],He);qe(Nt.x,Nt.y,-we)}}}const he=S+A;for(let j=0;j<me;j++){const Ue=g?oe(N[j],ve[j],he):N[j];C?(O.copy(P.normals[0]).multiplyScalar(Ue.x),D.copy(P.binormals[0]).multiplyScalar(Ue.y),F.copy(E[0]).add(O).add(D),qe(F.x,F.y,F.z)):qe(Ue.x,Ue.y,0)}for(let j=1;j<=p;j++)for(let Ue=0;Ue<me;Ue++){const we=g?oe(N[Ue],ve[Ue],he):N[Ue];C?(O.copy(P.normals[j]).multiplyScalar(we.x),D.copy(P.binormals[j]).multiplyScalar(we.y),F.copy(E[j]).add(O).add(D),qe(F.x,F.y,F.z)):qe(we.x,we.y,m/p*j)}for(let j=w-1;j>=0;j--){const Ue=j/w,we=y*Math.cos(Ue*Math.PI/2),He=S*Math.sin(Ue*Math.PI/2)+A;for(let Le=0,ut=Z.length;Le<ut;Le++){const $e=oe(Z[Le],te[Le],He);qe($e.x,$e.y,m+we)}for(let Le=0,ut=G.length;Le<ut;Le++){const $e=G[Le];ce=ee[Le];for(let rt=0,xt=$e.length;rt<xt;rt++){const Nt=oe($e[rt],ce[rt],He);C?qe(Nt.x,Nt.y+E[p-1].y,E[p-1].x+we):qe(Nt.x,Nt.y,m+we)}}}Me(),Ie();function Me(){const j=r.length/3;if(g){let Ue=0,we=me*Ue;for(let He=0;He<de;He++){const Le=le[He];Tt(Le[2]+we,Le[1]+we,Le[0]+we)}Ue=p+w*2,we=me*Ue;for(let He=0;He<de;He++){const Le=le[He];Tt(Le[0]+we,Le[1]+we,Le[2]+we)}}else{for(let Ue=0;Ue<de;Ue++){const we=le[Ue];Tt(we[2],we[1],we[0])}for(let Ue=0;Ue<de;Ue++){const we=le[Ue];Tt(we[0]+me*p,we[1]+me*p,we[2]+me*p)}}i.addGroup(j,r.length/3-j,0)}function Ie(){const j=r.length/3;let Ue=0;Ye(Z,Ue),Ue+=Z.length;for(let we=0,He=G.length;we<He;we++){const Le=G[we];Ye(Le,Ue),Ue+=Le.length}i.addGroup(j,r.length/3-j,1)}function Ye(j,Ue){let we=j.length;for(;--we>=0;){const He=we;let Le=we-1;Le<0&&(Le=j.length-1);for(let ut=0,$e=p+w*2;ut<$e;ut++){const rt=me*ut,xt=me*(ut+1),Nt=Ue+He+rt,wn=Ue+Le+rt,X=Ue+Le+xt,k=Ue+He+xt;wt(Nt,wn,X,k)}}}function qe(j,Ue,we){h.push(j),h.push(Ue),h.push(we)}function Tt(j,Ue,we){dt(j),dt(Ue),dt(we);const He=r.length/3,Le=T.generateTopUV(i,r,He-3,He-2,He-1);lt(Le[0]),lt(Le[1]),lt(Le[2])}function wt(j,Ue,we,He){dt(j),dt(Ue),dt(He),dt(Ue),dt(we),dt(He);const Le=r.length/3,ut=T.generateSideWallUV(i,r,Le-6,Le-3,Le-2,Le-1);lt(ut[0]),lt(ut[1]),lt(ut[3]),lt(ut[1]),lt(ut[2]),lt(ut[3])}function dt(j){r.push(h[j*3+0]),r.push(h[j*3+1]),r.push(h[j*3+2])}function lt(j){s.push(j.x),s.push(j.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return YG(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new dy[r.type]().fromJSON(r)),new tx(i,e.options)}}const XG={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],h=e[i*3+1],d=e[r*3],p=e[r*3+1];return[new Pe(s,o),new Pe(a,h),new Pe(d,p)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],h=e[t*3+2],d=e[i*3],p=e[i*3+1],m=e[i*3+2],g=e[r*3],y=e[r*3+1],S=e[r*3+2],A=e[s*3],w=e[s*3+1],_=e[s*3+2];return Math.abs(a-p)<Math.abs(o-d)?[new Pe(o,1-h),new Pe(d,1-m),new Pe(g,1-S),new Pe(A,1-_)]:[new Pe(a,1-h),new Pe(p,1-m),new Pe(y,1-S),new Pe(w,1-_)]}};function YG(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class nx extends Bu{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new nx(e.radius,e.detail)}}class Fg extends Bu{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Fg(e.radius,e.detail)}}class ix extends rn{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],h=[],d=[],p=[];let m=e;const g=(t-e)/r,y=new V,S=new Pe;for(let A=0;A<=r;A++){for(let w=0;w<=i;w++){const _=s+w/i*o;y.x=m*Math.cos(_),y.y=m*Math.sin(_),h.push(y.x,y.y,y.z),d.push(0,0,1),S.x=(y.x/t+1)/2,S.y=(y.y/t+1)/2,p.push(S.x,S.y)}m+=g}for(let A=0;A<r;A++){const w=A*(i+1);for(let _=0;_<i;_++){const T=_+w,E=T,C=T+i+1,P=T+i+2,D=T+1;a.push(E,C,D),a.push(C,P,D)}}this.setIndex(a),this.setAttribute("position",new gt(h,3)),this.setAttribute("normal",new gt(d,3)),this.setAttribute("uv",new gt(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ix(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class rx extends rn{constructor(e=new th([new Pe(0,.5),new Pe(-.5,-.5),new Pe(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,h=0;if(Array.isArray(e)===!1)d(e);else for(let p=0;p<e.length;p++)d(e[p]),this.addGroup(a,h,p),a+=h,h=0;this.setIndex(i),this.setAttribute("position",new gt(r,3)),this.setAttribute("normal",new gt(s,3)),this.setAttribute("uv",new gt(o,2));function d(p){const m=r.length/3,g=p.extractPoints(t);let y=g.shape;const S=g.holes;wa.isClockWise(y)===!1&&(y=y.reverse());for(let w=0,_=S.length;w<_;w++){const T=S[w];wa.isClockWise(T)===!0&&(S[w]=T.reverse())}const A=wa.triangulateShape(y,S);for(let w=0,_=S.length;w<_;w++){const T=S[w];y=y.concat(T)}for(let w=0,_=y.length;w<_;w++){const T=y[w];r.push(T.x,T.y,0),s.push(0,0,1),o.push(T.x,T.y)}for(let w=0,_=A.length;w<_;w++){const T=A[w],E=T[0]+m,C=T[1]+m,P=T[2]+m;i.push(E,C,P),h+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return qG(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new rx(i,e.curveSegments)}}function qG(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class zg extends rn{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const h=Math.min(o+a,Math.PI);let d=0;const p=[],m=new V,g=new V,y=[],S=[],A=[],w=[];for(let _=0;_<=i;_++){const T=[],E=_/i;let C=0;_===0&&o===0?C=.5/t:_===i&&h===Math.PI&&(C=-.5/t);for(let P=0;P<=t;P++){const D=P/t;m.x=-e*Math.cos(r+D*s)*Math.sin(o+E*a),m.y=e*Math.cos(o+E*a),m.z=e*Math.sin(r+D*s)*Math.sin(o+E*a),S.push(m.x,m.y,m.z),g.copy(m).normalize(),A.push(g.x,g.y,g.z),w.push(D+C,1-E),T.push(d++)}p.push(T)}for(let _=0;_<i;_++)for(let T=0;T<t;T++){const E=p[_][T+1],C=p[_][T],P=p[_+1][T],D=p[_+1][T+1];(_!==0||o>0)&&y.push(E,C,D),(_!==i-1||h<Math.PI)&&y.push(C,P,D)}this.setIndex(y),this.setAttribute("position",new gt(S,3)),this.setAttribute("normal",new gt(A,3)),this.setAttribute("uv",new gt(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zg(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class sx extends Bu{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new sx(e.radius,e.detail)}}class ox extends rn{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],h=[],d=[],p=new V,m=new V,g=new V;for(let y=0;y<=i;y++)for(let S=0;S<=r;S++){const A=S/r*s,w=y/i*Math.PI*2;m.x=(e+t*Math.cos(w))*Math.cos(A),m.y=(e+t*Math.cos(w))*Math.sin(A),m.z=t*Math.sin(w),a.push(m.x,m.y,m.z),p.x=e*Math.cos(A),p.y=e*Math.sin(A),g.subVectors(m,p).normalize(),h.push(g.x,g.y,g.z),d.push(S/r),d.push(y/i)}for(let y=1;y<=i;y++)for(let S=1;S<=r;S++){const A=(r+1)*y+S-1,w=(r+1)*(y-1)+S-1,_=(r+1)*(y-1)+S,T=(r+1)*y+S;o.push(A,w,T),o.push(w,_,T)}this.setIndex(o),this.setAttribute("position",new gt(a,3)),this.setAttribute("normal",new gt(h,3)),this.setAttribute("uv",new gt(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ox(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class ax extends rn{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],h=[],d=[],p=[],m=new V,g=new V,y=new V,S=new V,A=new V,w=new V,_=new V;for(let E=0;E<=i;++E){const C=E/i*s*Math.PI*2;T(C,s,o,e,y),T(C+.01,s,o,e,S),w.subVectors(S,y),_.addVectors(S,y),A.crossVectors(w,_),_.crossVectors(A,w),A.normalize(),_.normalize();for(let P=0;P<=r;++P){const D=P/r*Math.PI*2,O=-t*Math.cos(D),F=t*Math.sin(D);m.x=y.x+(O*_.x+F*A.x),m.y=y.y+(O*_.y+F*A.y),m.z=y.z+(O*_.z+F*A.z),h.push(m.x,m.y,m.z),g.subVectors(m,y).normalize(),d.push(g.x,g.y,g.z),p.push(E/i),p.push(P/r)}}for(let E=1;E<=i;E++)for(let C=1;C<=r;C++){const P=(r+1)*(E-1)+(C-1),D=(r+1)*E+(C-1),O=(r+1)*E+C,F=(r+1)*(E-1)+C;a.push(P,D,F),a.push(D,O,F)}this.setIndex(a),this.setAttribute("position",new gt(h,3)),this.setAttribute("normal",new gt(d,3)),this.setAttribute("uv",new gt(p,2));function T(E,C,P,D,O){const F=Math.cos(E),L=Math.sin(E),N=P/C*E,G=Math.cos(N);O.x=D*(2+G)*.5*F,O.y=D*(2+G)*L*.5,O.z=D*Math.sin(N)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ax(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class lx extends rn{constructor(e=new aT(new V(-1,-1,0),new V(-1,1,0),new V(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new V,h=new V,d=new Pe;let p=new V;const m=[],g=[],y=[],S=[];A(),this.setIndex(S),this.setAttribute("position",new gt(m,3)),this.setAttribute("normal",new gt(g,3)),this.setAttribute("uv",new gt(y,2));function A(){for(let E=0;E<t;E++)w(E);w(s===!1?t:0),T(),_()}function w(E){p=e.getPointAt(E/t,p);const C=o.normals[E],P=o.binormals[E];for(let D=0;D<=r;D++){const O=D/r*Math.PI*2,F=Math.sin(O),L=-Math.cos(O);h.x=L*C.x+F*P.x,h.y=L*C.y+F*P.y,h.z=L*C.z+F*P.z,h.normalize(),g.push(h.x,h.y,h.z),a.x=p.x+i*h.x,a.y=p.y+i*h.y,a.z=p.z+i*h.z,m.push(a.x,a.y,a.z)}}function _(){for(let E=1;E<=t;E++)for(let C=1;C<=r;C++){const P=(r+1)*(E-1)+(C-1),D=(r+1)*E+(C-1),O=(r+1)*E+C,F=(r+1)*(E-1)+C;S.push(P,D,F),S.push(D,O,F)}}function T(){for(let E=0;E<=t;E++)for(let C=0;C<=r;C++)d.x=E/t,d.y=C/r,y.push(d.x,d.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new lx(new dy[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class fI extends rn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new V,s=new V;if(e.index!==null){const o=e.attributes.position,a=e.index;let h=e.groups;h.length===0&&(h=[{start:0,count:a.count,materialIndex:0}]);for(let d=0,p=h.length;d<p;++d){const m=h[d],g=m.start,y=m.count;for(let S=g,A=g+y;S<A;S+=3)for(let w=0;w<3;w++){const _=a.getX(S+w),T=a.getX(S+(w+1)%3);r.fromBufferAttribute(o,_),s.fromBufferAttribute(o,T),Q2(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,h=o.count/3;a<h;a++)for(let d=0;d<3;d++){const p=3*a+d,m=3*a+(d+1)%3;r.fromBufferAttribute(o,p),s.fromBufferAttribute(o,m),Q2(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new gt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function Q2(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var J2=Object.freeze({__proto__:null,BoxGeometry:ku,CapsuleGeometry:Ky,CircleGeometry:Qy,ConeGeometry:Jy,CylinderGeometry:Pd,DodecahedronGeometry:$y,EdgesGeometry:lI,ExtrudeGeometry:tx,IcosahedronGeometry:nx,LatheGeometry:Ng,OctahedronGeometry:Fg,PlaneGeometry:Dg,PolyhedronGeometry:Bu,RingGeometry:ix,ShapeGeometry:rx,SphereGeometry:zg,TetrahedronGeometry:sx,TorusGeometry:ox,TorusKnotGeometry:ax,TubeGeometry:lx,WireframeGeometry:fI});class dI extends mr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new it(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class pI extends Ma{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class tl extends mr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new it(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new it(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fu,this.normalScale=new Pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class mI extends tl{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Pe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return di(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new it(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new it(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new it(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class gI extends mr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new it(16777215),this.specular=new it(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new it(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fu,this.normalScale=new Pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=bg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _I extends mr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new it(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new it(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fu,this.normalScale=new Pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class vI extends mr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fu,this.normalScale=new Pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class yI extends mr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new it(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new it(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fu,this.normalScale=new Pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=bg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class xI extends mr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new it(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fu,this.normalScale=new Pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class SI extends Zr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Zc(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function wI(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function EI(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function xE(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let h=0;h!==e;++h)r[o++]=n[a+h]}return r}function uT(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function ZG(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let h=0;h<s.tracks.length;++h){const d=s.tracks[h],p=d.getValueSize(),m=[],g=[];for(let y=0;y<d.times.length;++y){const S=d.times[y]*r;if(!(S<t||S>=i)){m.push(d.times[y]);for(let A=0;A<p;++A)g.push(d.values[y*p+A])}}m.length!==0&&(d.times=Zc(m,d.times.constructor),d.values=Zc(g,d.values.constructor),o.push(d))}s.tracks=o;let a=1/0;for(let h=0;h<s.tracks.length;++h)a>s.tracks[h].times[0]&&(a=s.tracks[h].times[0]);for(let h=0;h<s.tracks.length;++h)s.tracks[h].shift(-1*a);return s.resetDuration(),s}function jG(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],h=a.ValueTypeName;if(h==="bool"||h==="string")continue;const d=n.tracks.find(function(_){return _.name===a.name&&_.ValueTypeName===h});if(d===void 0)continue;let p=0;const m=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);let g=0;const y=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=y/3);const S=a.times.length-1;let A;if(s<=a.times[0]){const _=p,T=m-p;A=a.values.slice(_,T)}else if(s>=a.times[S]){const _=S*m+p,T=_+m-p;A=a.values.slice(_,T)}else{const _=a.createInterpolant(),T=p,E=m-p;_.evaluate(s),A=_.resultBuffer.slice(T,E)}h==="quaternion"&&new fr().fromArray(A).normalize().conjugate().toArray(A);const w=d.times.length;for(let _=0;_<w;++_){const T=_*y+g;if(h==="quaternion")fr.multiplyQuaternionsFlat(d.values,T,A,0,d.values,T);else{const E=y-g*2;for(let C=0;C<E;++C)d.values[T+C]-=A[C]}}}return n.blendMode=VM,n}const KG={convertArray:Zc,isTypedArray:wI,getKeyframeOrder:EI,sortedArray:xE,flattenJSON:uT,subclip:ZG,makeClipAdditive:jG};class kg{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let h=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===h)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class MI extends kg{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Xc,endingEnd:Xc}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],h=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Yc:s=e,a=2*t-i;break;case $m:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(h===void 0)switch(this.getSettings_().endingEnd){case Yc:o=e,h=2*i-t;break;case $m:o=1,h=i+r[1]-r[0];break;default:o=e-1,h=t}const d=(i-t)*.5,p=this.valueSize;this._weightPrev=d/(t-a),this._weightNext=d/(h-i),this._offsetPrev=s*p,this._offsetNext=o*p}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,h=e*a,d=h-a,p=this._offsetPrev,m=this._offsetNext,g=this._weightPrev,y=this._weightNext,S=(i-t)/(r-t),A=S*S,w=A*S,_=-g*w+2*g*A-g*S,T=(1+g)*w+(-1.5-2*g)*A+(-.5+g)*S+1,E=(-1-y)*w+(1.5+y)*A+.5*S,C=y*w-y*A;for(let P=0;P!==a;++P)s[P]=_*o[p+P]+T*o[d+P]+E*o[h+P]+C*o[m+P];return s}}class cT extends kg{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,h=e*a,d=h-a,p=(i-t)/(r-t),m=1-p;for(let g=0;g!==a;++g)s[g]=o[d+g]*m+o[h+g]*p;return s}}class TI extends kg{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Yo{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Zc(t,this.TimeBufferType),this.values=Zc(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Zc(e.times,Array),values:Zc(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new TI(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new cT(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new MI(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Qm:t=this.InterpolantFactoryMethodDiscrete;break;case Jm:t=this.InterpolantFactoryMethodLinear;break;case Ov:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Qm;case this.InterpolantFactoryMethodLinear:return Jm;case this.InterpolantFactoryMethodSmooth:return Ov}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const h=i[a];if(typeof h=="number"&&isNaN(h)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,h),e=!1;break}if(o!==null&&o>h){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,h,o),e=!1;break}o=h}if(r!==void 0&&wI(r))for(let a=0,h=r.length;a!==h;++a){const d=r[a];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,d),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===Ov,s=e.length-1;let o=1;for(let a=1;a<s;++a){let h=!1;const d=e[a],p=e[a+1];if(d!==p&&(a!==1||d!==e[0]))if(r)h=!0;else{const m=a*i,g=m-i,y=m+i;for(let S=0;S!==i;++S){const A=t[m+S];if(A!==t[g+S]||A!==t[y+S]){h=!0;break}}}if(h){if(a!==o){e[o]=e[a];const m=a*i,g=o*i;for(let y=0;y!==i;++y)t[g+y]=t[m+y]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,h=o*i,d=0;d!==i;++d)t[h+d]=t[a+d];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Yo.prototype.TimeBufferType=Float32Array;Yo.prototype.ValueBufferType=Float32Array;Yo.prototype.DefaultInterpolation=Jm;class mh extends Yo{}mh.prototype.ValueTypeName="bool";mh.prototype.ValueBufferType=Array;mh.prototype.DefaultInterpolation=Qm;mh.prototype.InterpolantFactoryMethodLinear=void 0;mh.prototype.InterpolantFactoryMethodSmooth=void 0;class hT extends Yo{}hT.prototype.ValueTypeName="color";class cg extends Yo{}cg.prototype.ValueTypeName="number";class AI extends kg{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,h=(i-t)/(r-t);let d=e*a;for(let p=d+a;d!==p;d+=4)fr.slerpFlat(s,0,o,d-a,o,d,h);return s}}class Ld extends Yo{InterpolantFactoryMethodLinear(e){return new AI(this.times,this.values,this.getValueSize(),e)}}Ld.prototype.ValueTypeName="quaternion";Ld.prototype.DefaultInterpolation=Jm;Ld.prototype.InterpolantFactoryMethodSmooth=void 0;class gh extends Yo{}gh.prototype.ValueTypeName="string";gh.prototype.ValueBufferType=Array;gh.prototype.DefaultInterpolation=Qm;gh.prototype.InterpolantFactoryMethodLinear=void 0;gh.prototype.InterpolantFactoryMethodSmooth=void 0;class hg extends Yo{}hg.prototype.ValueTypeName="vector";class fg{constructor(e,t=-1,i,r=ky){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=ks(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(JG(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Yo.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let h=[],d=[];h.push((a+s-1)%s,a,(a+1)%s),d.push(0,1,0);const p=EI(h);h=xE(h,1,p),d=xE(d,1,p),!r&&h[0]===0&&(h.push(s),d.push(d[0])),o.push(new cg(".morphTargetInfluences["+t[a].name+"]",h,d).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,h=e.length;a<h;a++){const d=e[a],p=d.name.match(s);if(p&&p.length>1){const m=p[1];let g=r[m];g||(r[m]=g=[]),g.push(d)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(m,g,y,S,A){if(y.length!==0){const w=[],_=[];uT(y,w,_,S),w.length!==0&&A.push(new m(g,w,_))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let h=e.length||-1;const d=e.hierarchy||[];for(let m=0;m<d.length;m++){const g=d[m].keys;if(!(!g||g.length===0))if(g[0].morphTargets){const y={};let S;for(S=0;S<g.length;S++)if(g[S].morphTargets)for(let A=0;A<g[S].morphTargets.length;A++)y[g[S].morphTargets[A]]=-1;for(const A in y){const w=[],_=[];for(let T=0;T!==g[S].morphTargets.length;++T){const E=g[S];w.push(E.time),_.push(E.morphTarget===A?1:0)}r.push(new cg(".morphTargetInfluence["+A+"]",w,_))}h=y.length*o}else{const y=".bones["+t[m].name+"]";i(hg,y+".position",g,"pos",r),i(Ld,y+".quaternion",g,"rot",r),i(hg,y+".scale",g,"scl",r)}}return r.length===0?null:new this(s,h,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function QG(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return cg;case"vector":case"vector2":case"vector3":case"vector4":return hg;case"color":return hT;case"quaternion":return Ld;case"bool":case"boolean":return mh;case"string":return gh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function JG(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=QG(n.type);if(n.times===void 0){const t=[],i=[];uT(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const hh={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class fT{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,h;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(p){a++,s===!1&&r.onStart!==void 0&&r.onStart(p,o,a),s=!0},this.itemEnd=function(p){o++,r.onProgress!==void 0&&r.onProgress(p,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(p){r.onError!==void 0&&r.onError(p)},this.resolveURL=function(p){return h?h(p):p},this.setURLModifier=function(p){return h=p,this},this.addHandler=function(p,m){return d.push(p,m),this},this.removeHandler=function(p){const m=d.indexOf(p);return m!==-1&&d.splice(m,2),this},this.getHandler=function(p){for(let m=0,g=d.length;m<g;m+=2){const y=d[m],S=d[m+1];if(y.global&&(y.lastIndex=0),y.test(p))return S}return null}}}const CI=new fT;class ms{constructor(e){this.manager=e!==void 0?e:CI,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}ms.DEFAULT_MATERIAL_NAME="__DEFAULT";const Qa={};class $G extends Error{constructor(e,t){super(e),this.response=t}}class pl extends ms{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=hh.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Qa[e]!==void 0){Qa[e].push({onLoad:t,onProgress:i,onError:r});return}Qa[e]=[],Qa[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,h=this.responseType;fetch(o).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const p=Qa[e],m=d.body.getReader(),g=d.headers.get("Content-Length")||d.headers.get("X-File-Size"),y=g?parseInt(g):0,S=y!==0;let A=0;const w=new ReadableStream({start(_){T();function T(){m.read().then(({done:E,value:C})=>{if(E)_.close();else{A+=C.byteLength;const P=new ProgressEvent("progress",{lengthComputable:S,loaded:A,total:y});for(let D=0,O=p.length;D<O;D++){const F=p[D];F.onProgress&&F.onProgress(P)}_.enqueue(C),T()}})}}});return new Response(w)}else throw new $G(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(h){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(p=>new DOMParser().parseFromString(p,a));case"json":return d.json();default:if(a===void 0)return d.text();{const m=/charset="?([^;"\s]*)"?/i.exec(a),g=m&&m[1]?m[1].toLowerCase():void 0,y=new TextDecoder(g);return d.arrayBuffer().then(S=>y.decode(S))}}}).then(d=>{hh.add(e,d);const p=Qa[e];delete Qa[e];for(let m=0,g=p.length;m<g;m++){const y=p[m];y.onLoad&&y.onLoad(d)}}).catch(d=>{const p=Qa[e];if(p===void 0)throw this.manager.itemError(e),d;delete Qa[e];for(let m=0,g=p.length;m<g;m++){const y=p[m];y.onError&&y.onError(d)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class eW extends ms{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new pl(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(h){r?r(h):console.error(h),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=fg.parse(e[i]);t.push(r)}return t}}class tW extends ms{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new Zy,h=new pl(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(s.withCredentials);let d=0;function p(m){h.load(e[m],function(g){const y=s.parse(g,!0);o[m]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},d+=1,d===6&&(y.mipmapCount===1&&(a.minFilter=ni),a.image=o,a.format=y.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let m=0,g=e.length;m<g;++m)p(m);else h.load(e,function(m){const g=s.parse(m,!0);if(g.isCubemap){const y=g.mipmaps.length/g.mipmapCount;for(let S=0;S<y;S++){o[S]={mipmaps:[]};for(let A=0;A<g.mipmapCount;A++)o[S].mipmaps.push(g.mipmaps[S*g.mipmapCount+A]),o[S].format=g.format,o[S].width=g.width,o[S].height=g.height}a.image=o}else a.image.width=g.width,a.image.height=g.height,a.mipmaps=g.mipmaps;g.mipmapCount===1&&(a.minFilter=ni),a.format=g.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class dg extends ms{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=hh.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=rg("img");function h(){p(),hh.add(e,this),t&&t(this),s.manager.itemEnd(e)}function d(m){p(),r&&r(m),s.manager.itemError(e),s.manager.itemEnd(e)}function p(){a.removeEventListener("load",h,!1),a.removeEventListener("error",d,!1)}return a.addEventListener("load",h,!1),a.addEventListener("error",d,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class nW extends ms{constructor(e){super(e)}load(e,t,i,r){const s=new Ig;s.colorSpace=Vi;const o=new dg(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function h(d){o.load(e[d],function(p){s.images[d]=p,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let d=0;d<e.length;++d)h(d);return s}}class iW extends ms{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new eh,a=new pl(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(h){let d;try{d=s.parse(h)}catch(p){if(r!==void 0)r(p);else{console.error(p);return}}d.image!==void 0?o.image=d.image:d.data!==void 0&&(o.image.width=d.width,o.image.height=d.height,o.image.data=d.data),o.wrapS=d.wrapS!==void 0?d.wrapS:Cr,o.wrapT=d.wrapT!==void 0?d.wrapT:Cr,o.magFilter=d.magFilter!==void 0?d.magFilter:ni,o.minFilter=d.minFilter!==void 0?d.minFilter:ni,o.anisotropy=d.anisotropy!==void 0?d.anisotropy:1,d.colorSpace!==void 0?o.colorSpace=d.colorSpace:d.encoding!==void 0&&(o.encoding=d.encoding),d.flipY!==void 0&&(o.flipY=d.flipY),d.format!==void 0&&(o.format=d.format),d.type!==void 0&&(o.type=d.type),d.mipmaps!==void 0&&(o.mipmaps=d.mipmaps,o.minFilter=Iu),d.mipmapCount===1&&(o.minFilter=ni),d.generateMipmaps!==void 0&&(o.generateMipmaps=d.generateMipmaps),o.needsUpdate=!0,t&&t(o,d)},i,r),o}}class rW extends ms{constructor(e){super(e)}load(e,t,i,r){const s=new pi,o=new dg(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class Hu extends fn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new it(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class RI extends Hu{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(fn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new it(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const hS=new yt,$2=new V,eR=new V;class dT{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Pe(512,512),this.map=null,this.mapPass=null,this.matrix=new yt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Og,this._frameExtents=new Pe(1,1),this._viewportCount=1,this._viewports=[new Cn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;$2.setFromMatrixPosition(e.matrixWorld),t.position.copy($2),eR.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(eR),t.updateMatrixWorld(),hS.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(hS),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(hS)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class sW extends dT{constructor(){super(new sr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=yd*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class bI extends Hu{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(fn.DEFAULT_UP),this.updateMatrix(),this.target=new fn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new sW}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const tR=new yt,Wp=new V,fS=new V;class oW extends dT{constructor(){super(new sr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Pe(4,2),this._viewportCount=6,this._viewports=[new Cn(2,1,1,1),new Cn(0,1,1,1),new Cn(3,1,1,1),new Cn(1,1,1,1),new Cn(3,0,1,1),new Cn(1,0,1,1)],this._cubeDirections=[new V(1,0,0),new V(-1,0,0),new V(0,0,1),new V(0,0,-1),new V(0,1,0),new V(0,-1,0)],this._cubeUps=[new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,0,1),new V(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Wp.setFromMatrixPosition(e.matrixWorld),i.position.copy(Wp),fS.copy(i.position),fS.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(fS),i.updateMatrixWorld(),r.makeTranslation(-Wp.x,-Wp.y,-Wp.z),tR.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(tR)}}class PI extends Hu{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new oW}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class aW extends dT{constructor(){super(new Ug(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class LI extends Hu{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(fn.DEFAULT_UP),this.updateMatrix(),this.target=new fn,this.shadow=new aW}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class II extends Hu{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class OI extends Hu{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class DI{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new V)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class UI extends Hu{constructor(e=new DI,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class ux extends ms{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new pl(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(h){r?r(h):console.error(h),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=ux.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new it().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new it().setHex(o.value);break;case"v2":r.uniforms[s].value=new Pe().fromArray(o.value);break;case"v3":r.uniforms[s].value=new V().fromArray(o.value);break;case"v4":r.uniforms[s].value=new Cn().fromArray(o.value);break;case"m3":r.uniforms[s].value=new an().fromArray(o.value);break;case"m4":r.uniforms[s].value=new yt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Pe().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Pe().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:dI,SpriteMaterial:eT,RawShaderMaterial:pI,ShaderMaterial:Ma,PointsMaterial:nT,MeshPhysicalMaterial:mI,MeshStandardMaterial:tl,MeshPhongMaterial:gI,MeshToonMaterial:_I,MeshNormalMaterial:vI,MeshLambertMaterial:yI,MeshDepthMaterial:QM,MeshDistanceMaterial:JM,MeshBasicMaterial:zu,MeshMatcapMaterial:xI,LineDashedMaterial:SI,LineBasicMaterial:Zr,Material:mr};return new t[e]}}class SE{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class NI extends rn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class FI extends ms{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new pl(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(h){r?r(h):console.error(h),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(y,S){if(t[S]!==void 0)return t[S];const w=y.interleavedBuffers[S],_=s(y,w.buffer),T=Kf(w.type,_),E=new Yy(T,w.stride);return E.uuid=w.uuid,t[S]=E,E}function s(y,S){if(i[S]!==void 0)return i[S];const w=y.arrayBuffers[S],_=new Uint32Array(w).buffer;return i[S]=_,_}const o=e.isInstancedBufferGeometry?new NI:new rn,a=e.data.index;if(a!==void 0){const y=Kf(a.type,a.array);o.setIndex(new Pn(y,1))}const h=e.data.attributes;for(const y in h){const S=h[y];let A;if(S.isInterleavedBufferAttribute){const w=r(e.data,S.data);A=new uh(w,S.itemSize,S.offset,S.normalized)}else{const w=Kf(S.type,S.array),_=S.isInstancedBufferAttribute?Sd:Pn;A=new _(w,S.itemSize,S.normalized)}S.name!==void 0&&(A.name=S.name),S.usage!==void 0&&A.setUsage(S.usage),o.setAttribute(y,A)}const d=e.data.morphAttributes;if(d)for(const y in d){const S=d[y],A=[];for(let w=0,_=S.length;w<_;w++){const T=S[w];let E;if(T.isInterleavedBufferAttribute){const C=r(e.data,T.data);E=new uh(C,T.itemSize,T.offset,T.normalized)}else{const C=Kf(T.type,T.array);E=new Pn(C,T.itemSize,T.normalized)}T.name!==void 0&&(E.name=T.name),A.push(E)}o.morphAttributes[y]=A}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const m=e.data.groups||e.data.drawcalls||e.data.offsets;if(m!==void 0)for(let y=0,S=m.length;y!==S;++y){const A=m[y];o.addGroup(A.start,A.count,A.materialIndex)}const g=e.data.boundingSphere;if(g!==void 0){const y=new V;g.center!==void 0&&y.fromArray(g.center),o.boundingSphere=new dr(y,g.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class lW extends ms{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?SE.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new pl(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(h){let d=null;try{d=JSON.parse(h)}catch(m){r!==void 0&&r(m),console.error("THREE:ObjectLoader: Can't parse "+e+".",m.message);return}const p=d.metadata;if(p===void 0||p.type===void 0||p.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(d,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?SE.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new pl(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),h=a.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(d)}),a=this.parseTextures(e.textures,o),h=this.parseMaterials(e.materials,a),d=this.parseObject(e.object,s,h,a,i),p=this.parseSkeletons(e.skeletons,d);if(this.bindSkeletons(d,p),t!==void 0){let m=!1;for(const g in o)if(o[g].data instanceof HTMLImageElement){m=!0;break}m===!1&&t(d)}return d}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),h=this.parseObject(e.object,r,a,o,t),d=this.parseSkeletons(e.skeletons,h);return this.bindSkeletons(h,d),h}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new th().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new qy().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new FI;for(let s=0,o=e.length;s<o;s++){let a;const h=e[s];switch(h.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(h);break;default:h.type in J2?a=J2[h.type].fromJSON(h,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${h.type}"`)}a.uuid=h.uuid,h.name!==void 0&&(a.name=h.name),h.userData!==void 0&&(a.userData=h.userData),i[h.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new ux;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const h=e[o];i[h.uuid]===void 0&&(i[h.uuid]=s.parse(h)),r[h.uuid]=i[h.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=fg.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(h){return i.manager.itemStart(h),s.load(h,function(){i.manager.itemEnd(h)},void 0,function(){i.manager.itemError(h),i.manager.itemEnd(h)})}function a(h){if(typeof h=="string"){const d=h,p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:i.resourcePath+d;return o(p)}else return h.data?{data:Kf(h.type,h.data),width:h.width,height:h.height}:null}if(e!==void 0&&e.length>0){const h=new fT(t);s=new dg(h),s.setCrossOrigin(this.crossOrigin);for(let d=0,p=e.length;d<p;d++){const m=e[d],g=m.url;if(Array.isArray(g)){const y=[];for(let S=0,A=g.length;S<A;S++){const w=g[S],_=a(w);_!==null&&(_ instanceof HTMLImageElement?y.push(_):y.push(new eh(_.data,_.width,_.height)))}r[m.uuid]=new qc(y)}else{const y=a(m.url);r[m.uuid]=new qc(y)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(h)}else return o.data?{data:Kf(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new dg(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const h=e[o],d=h.url;if(Array.isArray(d)){const p=[];for(let m=0,g=d.length;m<g;m++){const y=d[m],S=await s(y);S!==null&&(S instanceof HTMLImageElement?p.push(S):p.push(new eh(S.data,S.width,S.height)))}i[h.uuid]=new qc(p)}else{const p=await s(h.url);i[h.uuid]=new qc(p)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const h=t[a.image],d=h.data;let p;Array.isArray(d)?(p=new Ig,d.length===6&&(p.needsUpdate=!0)):(d&&d.data?p=new eh:p=new pi,d&&(p.needsUpdate=!0)),p.source=h,p.uuid=a.uuid,a.name!==void 0&&(p.name=a.name),a.mapping!==void 0&&(p.mapping=i(a.mapping,uW)),a.channel!==void 0&&(p.channel=a.channel),a.offset!==void 0&&p.offset.fromArray(a.offset),a.repeat!==void 0&&p.repeat.fromArray(a.repeat),a.center!==void 0&&p.center.fromArray(a.center),a.rotation!==void 0&&(p.rotation=a.rotation),a.wrap!==void 0&&(p.wrapS=i(a.wrap[0],nR),p.wrapT=i(a.wrap[1],nR)),a.format!==void 0&&(p.format=a.format),a.internalFormat!==void 0&&(p.internalFormat=a.internalFormat),a.type!==void 0&&(p.type=a.type),a.colorSpace!==void 0&&(p.colorSpace=a.colorSpace),a.encoding!==void 0&&(p.encoding=a.encoding),a.minFilter!==void 0&&(p.minFilter=i(a.minFilter,iR)),a.magFilter!==void 0&&(p.magFilter=i(a.magFilter,iR)),a.anisotropy!==void 0&&(p.anisotropy=a.anisotropy),a.flipY!==void 0&&(p.flipY=a.flipY),a.generateMipmaps!==void 0&&(p.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(p.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(p.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(p.compareFunction=a.compareFunction),a.userData!==void 0&&(p.userData=a.userData),r[a.uuid]=p}return r}parseObject(e,t,i,r,s){let o;function a(g){return t[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",g),t[g]}function h(g){if(g!==void 0){if(Array.isArray(g)){const y=[];for(let S=0,A=g.length;S<A;S++){const w=g[S];i[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",w),y.push(i[w])}return y}return i[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),i[g]}}function d(g){return r[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",g),r[g]}let p,m;switch(e.type){case"Scene":o=new sg,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new it(e.background):o.background=d(e.background)),e.environment!==void 0&&(o.environment=d(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Xy(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Wy(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new sr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Ug(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new II(e.color,e.intensity);break;case"DirectionalLight":o=new LI(e.color,e.intensity);break;case"PointLight":o=new PI(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new OI(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new bI(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new RI(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new UI().fromJSON(e);break;case"SkinnedMesh":p=a(e.geometry),m=h(e.material),o=new QL(p,m),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":p=a(e.geometry),m=h(e.material),o=new Wi(p,m);break;case"InstancedMesh":p=a(e.geometry),m=h(e.material);const g=e.count,y=e.instanceMatrix,S=e.instanceColor;o=new JL(p,m,g),o.instanceMatrix=new Sd(new Float32Array(y.array),16),S!==void 0&&(o.instanceColor=new Sd(new Float32Array(S.array),S.itemSize));break;case"BatchedMesh":p=a(e.geometry),m=h(e.material),o=new $L(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,m),o.geometry=p,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(A=>{const w=new Rr;w.min.fromArray(A.boxMin),w.max.fromArray(A.boxMax);const _=new dr;return _.radius=A.sphereRadius,_.center.fromArray(A.sphereCenter),{boxInitialized:A.boxInitialized,box:w,sphereInitialized:A.sphereInitialized,sphere:_}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=d(e.matricesTexture.uuid);break;case"LOD":o=new KL;break;case"Line":o=new Ou(a(e.geometry),h(e.material));break;case"LineLoop":o=new eI(a(e.geometry),h(e.material));break;case"LineSegments":o=new Aa(a(e.geometry),h(e.material));break;case"PointCloud":case"Points":o=new tI(a(e.geometry),h(e.material));break;case"Sprite":o=new jL(h(e.material));break;case"Group":o=new Jf;break;case"Bone":o=new tT;break;default:o=new fn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const g=e.children;for(let y=0;y<g.length;y++)o.add(this.parseObject(g[y],t,i,r,s))}if(e.animations!==void 0){const g=e.animations;for(let y=0;y<g.length;y++){const S=g[y];o.animations.push(s[S])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const g=e.levels;for(let y=0;y<g.length;y++){const S=g[y],A=o.getObjectByProperty("uuid",S.object);A!==void 0&&o.addLevel(A,S.distance,S.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const uW={UVMapping:Fy,CubeReflectionMapping:dl,CubeRefractionMapping:Lu,EquirectangularReflectionMapping:qm,EquirectangularRefractionMapping:Zm,CubeUVReflectionMapping:Cd},nR={RepeatWrapping:jm,ClampToEdgeWrapping:Cr,MirroredRepeatWrapping:Km},iR={NearestFilter:Ei,NearestMipmapNearestFilter:cy,NearestMipmapLinearFilter:xm,LinearFilter:ni,LinearMipmapNearestFilter:DM,LinearMipmapLinearFilter:Iu};class cW extends ms{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=hh.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(h){hh.add(e,h),t&&t(h),s.manager.itemEnd(e)}).catch(function(h){r&&r(h),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let ev;class pT{static getContext(){return ev===void 0&&(ev=new(window.AudioContext||window.webkitAudioContext)),ev}static setContext(e){ev=e}}class hW extends ms{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new pl(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(h){try{const d=h.slice(0);pT.getContext().decodeAudioData(d,function(m){t(m)}).catch(a)}catch(d){a(d)}},i,r);function a(h){r?r(h):console.error(h),s.manager.itemError(e)}}}const rR=new yt,sR=new yt,Rc=new yt;class fW{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new sr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new sr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Rc.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(Jc*t.fov*.5)/t.zoom;let a,h;sR.elements[12]=-r,rR.elements[12]=r,a=-o*t.aspect+s,h=o*t.aspect+s,Rc.elements[0]=2*t.near/(h-a),Rc.elements[8]=(h+a)/(h-a),this.cameraL.projectionMatrix.copy(Rc),a=-o*t.aspect-s,h=o*t.aspect-s,Rc.elements[0]=2*t.near/(h-a),Rc.elements[8]=(h+a)/(h-a),this.cameraR.projectionMatrix.copy(Rc)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(sR),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(rR)}}class mT{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=oR(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=oR();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function oR(){return(typeof performance>"u"?Date:performance).now()}const bc=new V,aR=new fr,dW=new V,Pc=new V;class pW extends fn{constructor(){super(),this.type="AudioListener",this.context=pT.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new mT}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(bc,aR,dW),Pc.set(0,0,-1).applyQuaternion(aR),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(bc.x,r),t.positionY.linearRampToValueAtTime(bc.y,r),t.positionZ.linearRampToValueAtTime(bc.z,r),t.forwardX.linearRampToValueAtTime(Pc.x,r),t.forwardY.linearRampToValueAtTime(Pc.y,r),t.forwardZ.linearRampToValueAtTime(Pc.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(bc.x,bc.y,bc.z),t.setOrientation(Pc.x,Pc.y,Pc.z,i.x,i.y,i.z)}}class zI extends fn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Lc=new V,lR=new fr,mW=new V,Ic=new V;class gW extends zI{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Lc,lR,mW),Ic.set(0,0,1).applyQuaternion(lR);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Lc.x,i),t.positionY.linearRampToValueAtTime(Lc.y,i),t.positionZ.linearRampToValueAtTime(Lc.z,i),t.orientationX.linearRampToValueAtTime(Ic.x,i),t.orientationY.linearRampToValueAtTime(Ic.y,i),t.orientationZ.linearRampToValueAtTime(Ic.z,i)}else t.setPosition(Lc.x,Lc.y,Lc.z),t.setOrientation(Ic.x,Ic.y,Ic.z)}}class _W{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class kI{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const h=t*this._origIndex;this._mixBufferRegion(i,r,h,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let h=t,d=t+t;h!==d;++h)if(i[h]!==i[h+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){fr.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;fr.multiplyQuaternionsFlat(e,o,e,t,e,i),fr.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const h=t+a;e[h]=e[h]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const gT="\\[\\]\\.:\\/",vW=new RegExp("["+gT+"]","g"),_T="[^"+gT+"]",yW="[^"+gT.replace("\\.","")+"]",xW=/((?:WC+[\/:])*)/.source.replace("WC",_T),SW=/(WCOD+)?/.source.replace("WCOD",yW),wW=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_T),EW=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_T),MW=new RegExp("^"+xW+SW+wW+EW+"$"),TW=["material","materials","bones","map"];class AW{constructor(e,t,i){const r=i||yn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class yn{constructor(e,t,i){this.path=t,this.parsedPath=i||yn.parseTrackName(t),this.node=yn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new yn.Composite(e,t,i):new yn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(vW,"")}static parseTrackName(e){const t=MW.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);TW.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const h=i(a.children);if(h)return h}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=yn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let d=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let p=0;p<e.length;p++)if(e[p].name===d){d=p;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(d!==void 0){if(e[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}const o=e[r];if(o===void 0){const d=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}h=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(h=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(h=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}yn.Composite=AW;yn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};yn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};yn.prototype.GetterByBindingType=[yn.prototype._getValue_direct,yn.prototype._getValue_array,yn.prototype._getValue_arrayElement,yn.prototype._getValue_toArray];yn.prototype.SetterByBindingTypeAndVersioning=[[yn.prototype._setValue_direct,yn.prototype._setValue_direct_setNeedsUpdate,yn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[yn.prototype._setValue_array,yn.prototype._setValue_array_setNeedsUpdate,yn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[yn.prototype._setValue_arrayElement,yn.prototype._setValue_arrayElement_setNeedsUpdate,yn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[yn.prototype._setValue_fromArray,yn.prototype._setValue_fromArray_setNeedsUpdate,yn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class CW{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ks(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,h=e.length,d=this.nCachedObjects_;for(let p=0,m=arguments.length;p!==m;++p){const g=arguments[p],y=g.uuid;let S=t[y];if(S===void 0){S=h++,t[y]=S,e.push(g);for(let A=0,w=o;A!==w;++A)s[A].push(new yn(g,i[A],r[A]))}else if(S<d){a=e[S];const A=--d,w=e[A];t[w.uuid]=S,e[S]=w,t[y]=A,e[A]=g;for(let _=0,T=o;_!==T;++_){const E=s[_],C=E[A];let P=E[S];E[S]=C,P===void 0&&(P=new yn(g,i[_],r[_])),E[A]=P}}else e[S]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=d}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const h=arguments[o],d=h.uuid,p=t[d];if(p!==void 0&&p>=s){const m=s++,g=e[m];t[g.uuid]=p,e[p]=g,t[d]=m,e[m]=h;for(let y=0,S=r;y!==S;++y){const A=i[y],w=A[m],_=A[p];A[p]=w,A[m]=_}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,h=arguments.length;a!==h;++a){const d=arguments[a],p=d.uuid,m=t[p];if(m!==void 0)if(delete t[p],m<s){const g=--s,y=e[g],S=--o,A=e[S];t[y.uuid]=m,e[m]=y,t[A.uuid]=g,e[g]=A,e.pop();for(let w=0,_=r;w!==_;++w){const T=i[w],E=T[g],C=T[S];T[m]=E,T[g]=C,T.pop()}}else{const g=--o,y=e[g];g>0&&(t[y.uuid]=m),e[m]=y,e.pop();for(let S=0,A=r;S!==A;++S){const w=i[S];w[m]=w[g],w.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,h=this._objects,d=h.length,p=this.nCachedObjects_,m=new Array(d);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(m);for(let g=p,y=h.length;g!==y;++g){const S=h[g];m[g]=new yn(S,e,t)}return m}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,h=o[a],d=e[a];t[d]=i,o[i]=h,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class BI{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),h={endingStart:Xc,endingEnd:Xc};for(let d=0;d!==o;++d){const p=s[d].createInterpolant(null);a[d]=p,p.settings=h}this._interpolantSettings=h,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=vL,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const h=a.parameterPositions,d=a.sampleValues;return h[0]=s,h[1]=s+i,d[0]=e/o,d[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const h=(e-s)*i;h<0||i===0?t=0:(this._startTime=null,t=i*h)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const h=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case VM:for(let p=0,m=h.length;p!==m;++p)h[p].evaluate(o),d[p].accumulateAdditive(a);break;case ky:default:for(let p=0,m=h.length;p!==m;++p)h[p].evaluate(o),d[p].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===yL;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===_L){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const h=this.repetitions-s;if(h<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(h===1){const d=e<0;this._setEndings(d,!d,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Yc,r.endingEnd=Yc):(e?r.endingStart=this.zeroSlopeAtStart?Yc:Xc:r.endingStart=$m,t?r.endingEnd=this.zeroSlopeAtEnd?Yc:Xc:r.endingEnd=$m)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,h=o.sampleValues;return a[0]=s,h[0]=t,a[1]=s+e,h[1]=i,this}}const RW=new Float32Array(1);class bW extends gl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,h=i.uuid,d=this._bindingsByRootAndName;let p=d[h];p===void 0&&(p={},d[h]=p);for(let m=0;m!==s;++m){const g=r[m],y=g.name;let S=p[y];if(S!==void 0)++S.referenceCount,o[m]=S;else{if(S=o[m],S!==void 0){S._cacheIndex===null&&(++S.referenceCount,this._addInactiveBinding(S,h,y));continue}const A=t&&t._propertyBindings[m].binding.parsedPath;S=new kI(yn.create(i,y,A),g.ValueTypeName,g.getValueSize()),++S.referenceCount,this._addInactiveBinding(S,h,y),o[m]=S}a[m].resultBuffer=S.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],h=a.knownActions,d=h[h.length-1],p=e._byClipCacheIndex;d._byClipCacheIndex=p,h[p]=d,h.pop(),e._byClipCacheIndex=null;const m=a.actionByRoot,g=(e._localRoot||this._root).uuid;delete m[g],h.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],h=t[t.length-1],d=e._cacheIndex;h._cacheIndex=d,t[d]=h,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new cT(new Float32Array(2),new Float32Array(2),1,RW),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?fg.findByName(r,e):e;const a=o!==null?o.uuid:e,h=this._actionsByClip[a];let d=null;if(i===void 0&&(o!==null?i=o.blendMode:i=ky),h!==void 0){const m=h.actionByRoot[s];if(m!==void 0&&m.blendMode===i)return m;d=h.knownActions[0],o===null&&(o=d._clip)}if(o===null)return null;const p=new BI(this,o,t,i);return this._bindAction(p,d),this._addInactiveAction(p,a,s),p}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?fg.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let d=0;d!==i;++d)t[d]._update(r,e,s,o);const a=this._bindings,h=this._nActiveBindings;for(let d=0;d!==h;++d)a[d].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,h=o.length;a!==h;++a){const d=o[a];this._deactivateAction(d);const p=d._cacheIndex,m=t[t.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,m._cacheIndex=p,t[p]=m,t.pop(),this._removeInactiveBindingsForAction(d)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,h=a[t];h!==void 0&&(this._deactivateAction(h),this._removeInactiveAction(h))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class vT{constructor(e){this.value=e}clone(){return new vT(this.value.clone===void 0?this.value:this.value.clone())}}let PW=0;class LW extends gl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:PW++}),this.name="",this.usage=ig,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++)this.uniforms.push(t[i].clone());return this}clone(){return new this.constructor().copy(this)}}class IW extends Yy{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class OW{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class cx{constructor(e,t,i=0,r=1/0){this.ray=new Rd(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new $c,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return wE(e,this,i,t),i.sort(uR),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)wE(e[r],this,i,t);return i.sort(uR),i}}function uR(n,e){return n.distance-e.distance}function wE(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)wE(r[s],e,t,!0)}}class HI{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(di(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class DW{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const cR=new Pe;class UW{constructor(e=new Pe(1/0,1/0),t=new Pe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=cR.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,cR).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const hR=new V,tv=new V;class NW{constructor(e=new V,t=new V){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){hR.subVectors(e,this.start),tv.subVectors(this.end,this.start);const i=tv.dot(tv);let s=tv.dot(hR)/i;return t&&(s=di(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const fR=new V;class FW extends fn{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new rn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,h=32;o<h;o++,a++){const d=o/h*Math.PI*2,p=a/h*Math.PI*2;r.push(Math.cos(d),Math.sin(d),1,Math.cos(p),Math.sin(p),1)}i.setAttribute("position",new gt(r,3));const s=new Zr({fog:!1,toneMapped:!1});this.cone=new Aa(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),fR.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(fR),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const iu=new V,nv=new yt,dS=new yt;class zW extends Aa{constructor(e){const t=VI(e),i=new rn,r=[],s=[],o=new it(0,0,1),a=new it(0,1,0);for(let d=0;d<t.length;d++){const p=t[d];p.parent&&p.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new gt(r,3)),i.setAttribute("color",new gt(s,3));const h=new Zr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,h),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");dS.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(nv.multiplyMatrices(dS,a.matrixWorld),iu.setFromMatrixPosition(nv),r.setXYZ(o,iu.x,iu.y,iu.z),nv.multiplyMatrices(dS,a.parent.matrixWorld),iu.setFromMatrixPosition(nv),r.setXYZ(o+1,iu.x,iu.y,iu.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function VI(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,VI(n.children[t]));return e}class kW extends Wi{constructor(e,t,i){const r=new zg(t,4,2),s=new zu({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const BW=new V,dR=new it,pR=new it;class HW extends fn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Fg(t);r.rotateY(Math.PI*.5),this.material=new zu({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Pn(o,3)),this.add(new Wi(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");dR.copy(this.light.color),pR.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?dR:pR;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(BW.setFromMatrixPosition(this.light.matrixWorld).negate())}}class VW extends Aa{constructor(e=10,t=10,i=4473924,r=8947848){i=new it(i),r=new it(r);const s=t/2,o=e/t,a=e/2,h=[],d=[];for(let g=0,y=0,S=-a;g<=t;g++,S+=o){h.push(-a,0,S,a,0,S),h.push(S,0,-a,S,0,a);const A=g===s?i:r;A.toArray(d,y),y+=3,A.toArray(d,y),y+=3,A.toArray(d,y),y+=3,A.toArray(d,y),y+=3}const p=new rn;p.setAttribute("position",new gt(h,3)),p.setAttribute("color",new gt(d,3));const m=new Zr({vertexColors:!0,toneMapped:!1});super(p,m),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class GW extends Aa{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new it(s),o=new it(o);const a=[],h=[];if(t>1)for(let m=0;m<t;m++){const g=m/t*(Math.PI*2),y=Math.sin(g)*e,S=Math.cos(g)*e;a.push(0,0,0),a.push(y,0,S);const A=m&1?s:o;h.push(A.r,A.g,A.b),h.push(A.r,A.g,A.b)}for(let m=0;m<i;m++){const g=m&1?s:o,y=e-e/i*m;for(let S=0;S<r;S++){let A=S/r*(Math.PI*2),w=Math.sin(A)*y,_=Math.cos(A)*y;a.push(w,0,_),h.push(g.r,g.g,g.b),A=(S+1)/r*(Math.PI*2),w=Math.sin(A)*y,_=Math.cos(A)*y,a.push(w,0,_),h.push(g.r,g.g,g.b)}}const d=new rn;d.setAttribute("position",new gt(a,3)),d.setAttribute("color",new gt(h,3));const p=new Zr({vertexColors:!0,toneMapped:!1});super(d,p),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const mR=new V,iv=new V,gR=new V;class WW extends fn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new rn;r.setAttribute("position",new gt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Zr({fog:!1,toneMapped:!1});this.lightPlane=new Ou(r,s),this.add(this.lightPlane),r=new rn,r.setAttribute("position",new gt([0,0,0,0,0,1],3)),this.targetLine=new Ou(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),mR.setFromMatrixPosition(this.light.matrixWorld),iv.setFromMatrixPosition(this.light.target.matrixWorld),gR.subVectors(iv,mR),this.lightPlane.lookAt(iv),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(iv),this.targetLine.scale.z=gR.length()}}const rv=new V,hi=new Lg;class XW extends Aa{constructor(e){const t=new rn,i=new Zr({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(S,A){h(S),h(A)}function h(S){r.push(0,0,0),s.push(0,0,0),o[S]===void 0&&(o[S]=[]),o[S].push(r.length/3-1)}t.setAttribute("position",new gt(r,3)),t.setAttribute("color",new gt(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const d=new it(16755200),p=new it(16711680),m=new it(43775),g=new it(16777215),y=new it(3355443);this.setColors(d,p,m,g,y)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;hi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),wi("c",t,e,hi,0,0,-1),wi("t",t,e,hi,0,0,1),wi("n1",t,e,hi,-i,-r,-1),wi("n2",t,e,hi,i,-r,-1),wi("n3",t,e,hi,-i,r,-1),wi("n4",t,e,hi,i,r,-1),wi("f1",t,e,hi,-i,-r,1),wi("f2",t,e,hi,i,-r,1),wi("f3",t,e,hi,-i,r,1),wi("f4",t,e,hi,i,r,1),wi("u1",t,e,hi,i*.7,r*1.1,-1),wi("u2",t,e,hi,-i*.7,r*1.1,-1),wi("u3",t,e,hi,0,r*2,-1),wi("cf1",t,e,hi,-i,0,1),wi("cf2",t,e,hi,i,0,1),wi("cf3",t,e,hi,0,-r,1),wi("cf4",t,e,hi,0,r,1),wi("cn1",t,e,hi,-i,0,-1),wi("cn2",t,e,hi,i,0,-1),wi("cn3",t,e,hi,0,-r,-1),wi("cn4",t,e,hi,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function wi(n,e,t,i,r,s,o){rv.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const h=t.getAttribute("position");for(let d=0,p=a.length;d<p;d++)h.setXYZ(a[d],rv.x,rv.y,rv.z)}}const sv=new Rr;class YW extends Aa{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new rn;s.setIndex(new Pn(i,1)),s.setAttribute("position",new Pn(r,3)),super(s,new Zr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&sv.setFromObject(this.object),sv.isEmpty())return;const t=sv.min,i=sv.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class qW extends Aa{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new rn;s.setIndex(new Pn(i,1)),s.setAttribute("position",new gt(r,3)),super(s,new Zr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class ZW extends Ou{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new rn;o.setAttribute("position",new gt(s,3)),o.computeBoundingSphere(),super(o,new Zr({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],h=new rn;h.setAttribute("position",new gt(a,3)),h.computeBoundingSphere(),this.add(new Wi(h,new zu({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const _R=new V;let ov,pS;class jW extends fn{constructor(e=new V(0,0,1),t=new V(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",ov===void 0&&(ov=new rn,ov.setAttribute("position",new gt([0,0,0,0,1,0],3)),pS=new Pd(0,.5,1,5,1),pS.translate(0,-.5,0)),this.position.copy(t),this.line=new Ou(ov,new Zr({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Wi(pS,new zu({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{_R.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(_R,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class KW extends Aa{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new rn;r.setAttribute("position",new gt(t,3)),r.setAttribute("color",new gt(i,3));const s=new Zr({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new it,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class QW{constructor(){this.type="ShapePath",this.color=new it,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new og,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(_){const T=[];for(let E=0,C=_.length;E<C;E++){const P=_[E],D=new th;D.curves=P.curves,T.push(D)}return T}function i(_,T){const E=T.length;let C=!1;for(let P=E-1,D=0;D<E;P=D++){let O=T[P],F=T[D],L=F.x-O.x,N=F.y-O.y;if(Math.abs(N)>Number.EPSILON){if(N<0&&(O=T[D],L=-L,F=T[P],N=-N),_.y<O.y||_.y>F.y)continue;if(_.y===O.y){if(_.x===O.x)return!0}else{const G=N*(_.x-O.x)-L*(_.y-O.y);if(G===0)return!0;if(G<0)continue;C=!C}}else{if(_.y!==O.y)continue;if(F.x<=_.x&&_.x<=O.x||O.x<=_.x&&_.x<=F.x)return!0}}return C}const r=wa.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,h;const d=[];if(s.length===1)return a=s[0],h=new th,h.curves=a.curves,d.push(h),d;let p=!r(s[0].getPoints());p=e?!p:p;const m=[],g=[];let y=[],S=0,A;g[S]=void 0,y[S]=[];for(let _=0,T=s.length;_<T;_++)a=s[_],A=a.getPoints(),o=r(A),o=e?!o:o,o?(!p&&g[S]&&S++,g[S]={s:new th,p:A},g[S].s.curves=a.curves,p&&S++,y[S]=[]):y[S].push({h:a,p:A[0]});if(!g[0])return t(s);if(g.length>1){let _=!1,T=0;for(let E=0,C=g.length;E<C;E++)m[E]=[];for(let E=0,C=g.length;E<C;E++){const P=y[E];for(let D=0;D<P.length;D++){const O=P[D];let F=!0;for(let L=0;L<g.length;L++)i(O.p,g[L].p)&&(E!==L&&T++,F?(F=!1,m[L].push(O)):_=!0);F&&m[E].push(O)}}T>0&&_===!1&&(y=m)}let w;for(let _=0,T=g.length;_<T;_++){h=g[_].s,d.push(h),w=y[_];for(let E=0,C=w.length;E<C;E++)h.holes.push(w[E].h)}return d}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Uy}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Uy);const GI=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:OM,AddEquation:hu,AddOperation:iL,AdditiveAnimationBlendMode:VM,AdditiveBlending:Uw,AlphaFormat:hL,AlwaysCompare:bL,AlwaysDepth:K3,AlwaysStencilFunc:fE,AmbientLight:II,AnimationAction:BI,AnimationClip:fg,AnimationLoader:eW,AnimationMixer:bW,AnimationObjectGroup:CW,AnimationUtils:KG,ArcCurve:iI,ArrayCamera:YL,ArrowHelper:jW,AttachedBindMode:Bw,Audio:zI,AudioAnalyser:_W,AudioContext:pT,AudioListener:pW,AudioLoader:hW,AxesHelper:KW,BackSide:Xr,BasicDepthPacking:xL,BasicShadowMap:I3,BatchedMesh:$L,Bone:tT,BooleanKeyframeTrack:mh,Box2:UW,Box3:Rr,Box3Helper:qW,BoxGeometry:ku,BoxHelper:YW,BufferAttribute:Pn,BufferGeometry:rn,BufferGeometryLoader:FI,ByteType:uL,Cache:hh,Camera:Lg,CameraHelper:XW,CanvasTexture:nI,CapsuleGeometry:Ky,CatmullRomCurve3:rI,CineonToneMapping:oL,CircleGeometry:Qy,ClampToEdgeWrapping:Cr,Clock:mT,Color:it,ColorKeyframeTrack:hT,ColorManagement:Rn,CompressedArrayTexture:yG,CompressedCubeTexture:xG,CompressedTexture:Zy,CompressedTextureLoader:tW,ConeGeometry:Jy,ConstantAlphaFactor:q3,ConstantColorFactor:X3,CubeCamera:FL,CubeReflectionMapping:dl,CubeRefractionMapping:Lu,CubeTexture:Ig,CubeTextureLoader:nW,CubeUVReflectionMapping:Cd,CubicBezierCurve:rT,CubicBezierCurve3:sI,CubicInterpolant:MI,CullFaceBack:Dw,CullFaceFront:L3,CullFaceFrontBack:cB,CullFaceNone:P3,Curve:Xo,CurvePath:aI,CustomBlending:O3,CustomToneMapping:aL,CylinderGeometry:Pd,Cylindrical:DW,Data3DTexture:qM,DataArrayTexture:Hy,DataTexture:eh,DataTextureLoader:iW,DataUtils:y5,DecrementStencilOp:wB,DecrementWrapStencilOp:MB,DefaultLoadingManager:CI,DepthFormat:Tu,DepthStencilFormat:lh,DepthTexture:Vy,DetachedBindMode:lL,DirectionalLight:LI,DirectionalLightHelper:WW,DiscreteInterpolant:TI,DisplayP3ColorSpace:By,DodecahedronGeometry:$y,DoubleSide:_a,DstAlphaFactor:B3,DstColorFactor:V3,DynamicCopyUsage:kB,DynamicDrawUsage:OB,DynamicReadUsage:NB,EdgesGeometry:lI,EllipseCurve:jy,EqualCompare:TL,EqualDepth:J3,EqualStencilFunc:RB,EquirectangularReflectionMapping:qm,EquirectangularRefractionMapping:Zm,Euler:Cu,EventDispatcher:gl,ExtrudeGeometry:tx,FileLoader:pl,Float16BufferAttribute:T5,Float32BufferAttribute:gt,Float64BufferAttribute:A5,FloatType:fo,Fog:Xy,FogExp2:Wy,FramebufferTexture:vG,FrontSide:fl,Frustum:Og,GLBufferAttribute:OW,GLSL1:HB,GLSL3:dE,GreaterCompare:AL,GreaterDepth:eL,GreaterEqualCompare:RL,GreaterEqualDepth:$3,GreaterEqualStencilFunc:IB,GreaterStencilFunc:PB,GridHelper:VW,Group:Jf,HalfFloatType:ah,HemisphereLight:RI,HemisphereLightHelper:HW,IcosahedronGeometry:nx,ImageBitmapLoader:cW,ImageLoader:dg,ImageUtils:YM,IncrementStencilOp:SB,IncrementWrapStencilOp:EB,InstancedBufferAttribute:Sd,InstancedBufferGeometry:NI,InstancedInterleavedBuffer:IW,InstancedMesh:JL,Int16BufferAttribute:E5,Int32BufferAttribute:M5,Int8BufferAttribute:x5,IntType:UM,InterleavedBuffer:Yy,InterleavedBufferAttribute:uh,Interpolant:kg,InterpolateDiscrete:Qm,InterpolateLinear:Jm,InterpolateSmooth:Ov,InvertStencilOp:TB,KeepStencilOp:Fc,KeyframeTrack:Yo,LOD:KL,LatheGeometry:Ng,Layers:$c,LessCompare:ML,LessDepth:Q3,LessEqualCompare:WM,LessEqualDepth:Ym,LessEqualStencilFunc:bB,LessStencilFunc:CB,Light:Hu,LightProbe:UI,Line:Ou,Line3:NW,LineBasicMaterial:Zr,LineCurve:sT,LineCurve3:oI,LineDashedMaterial:SI,LineLoop:eI,LineSegments:Aa,LinearDisplayP3ColorSpace:Pg,LinearEncoding:GM,LinearFilter:ni,LinearInterpolant:cT,LinearMipMapLinearFilter:mB,LinearMipMapNearestFilter:pB,LinearMipmapLinearFilter:Iu,LinearMipmapNearestFilter:DM,LinearSRGBColorSpace:Ea,LinearToneMapping:rL,LinearTransfer:eg,Loader:ms,LoaderUtils:SE,LoadingManager:fT,LoopOnce:_L,LoopPingPong:yL,LoopRepeat:vL,LuminanceAlphaFormat:dL,LuminanceFormat:fL,MOUSE:lB,Material:mr,MaterialLoader:ux,MathUtils:PL,Matrix3:an,Matrix4:yt,MaxEquation:kw,Mesh:Wi,MeshBasicMaterial:zu,MeshDepthMaterial:QM,MeshDistanceMaterial:JM,MeshLambertMaterial:yI,MeshMatcapMaterial:xI,MeshNormalMaterial:vI,MeshPhongMaterial:gI,MeshPhysicalMaterial:mI,MeshStandardMaterial:tl,MeshToonMaterial:_I,MinEquation:zw,MirroredRepeatWrapping:Km,MixOperation:nL,MultiplyBlending:Fw,MultiplyOperation:bg,NearestFilter:Ei,NearestMipMapLinearFilter:dB,NearestMipMapNearestFilter:fB,NearestMipmapLinearFilter:xm,NearestMipmapNearestFilter:cy,NeverCompare:EL,NeverDepth:j3,NeverStencilFunc:AB,NoBlending:al,NoColorSpace:Us,NoToneMapping:xa,NormalAnimationBlendMode:ky,NormalBlending:Qc,NotEqualCompare:CL,NotEqualDepth:tL,NotEqualStencilFunc:LB,NumberKeyframeTrack:cg,Object3D:fn,ObjectLoader:lW,ObjectSpaceNormalMap:wL,OctahedronGeometry:Fg,OneFactor:F3,OneMinusConstantAlphaFactor:Z3,OneMinusConstantColorFactor:Y3,OneMinusDstAlphaFactor:H3,OneMinusDstColorFactor:G3,OneMinusSrcAlphaFactor:uy,OneMinusSrcColorFactor:k3,OrthographicCamera:Ug,P3Primaries:ng,PCFShadowMap:Ny,PCFSoftShadowMap:ym,PMREMGenerator:mE,Path:og,PerspectiveCamera:sr,Plane:lu,PlaneGeometry:Dg,PlaneHelper:ZW,PointLight:PI,PointLightHelper:kW,Points:tI,PointsMaterial:nT,PolarGridHelper:GW,PolyhedronGeometry:Bu,PositionalAudio:gW,PropertyBinding:yn,PropertyMixer:kI,QuadraticBezierCurve:oT,QuadraticBezierCurve3:aT,Quaternion:fr,QuaternionKeyframeTrack:Ld,QuaternionLinearInterpolant:AI,RED_GREEN_RGTC2_Format:cE,RED_RGTC1_Format:gL,REVISION:Uy,RGBADepthPacking:SL,RGBAFormat:Gr,RGBAIntegerFormat:BM,RGBA_ASTC_10x10_Format:rE,RGBA_ASTC_10x5_Format:tE,RGBA_ASTC_10x6_Format:nE,RGBA_ASTC_10x8_Format:iE,RGBA_ASTC_12x10_Format:sE,RGBA_ASTC_12x12_Format:oE,RGBA_ASTC_4x4_Format:qw,RGBA_ASTC_5x4_Format:Zw,RGBA_ASTC_5x5_Format:jw,RGBA_ASTC_6x5_Format:Kw,RGBA_ASTC_6x6_Format:Qw,RGBA_ASTC_8x5_Format:Jw,RGBA_ASTC_8x6_Format:$w,RGBA_ASTC_8x8_Format:eE,RGBA_BPTC_Format:Iv,RGBA_ETC2_EAC_Format:Yw,RGBA_PVRTC_2BPPV1_Format:Ww,RGBA_PVRTC_4BPPV1_Format:Gw,RGBA_S3TC_DXT1_Format:bv,RGBA_S3TC_DXT3_Format:Pv,RGBA_S3TC_DXT5_Format:Lv,RGB_BPTC_SIGNED_Format:aE,RGB_BPTC_UNSIGNED_Format:lE,RGB_ETC1_Format:HM,RGB_ETC2_Format:Xw,RGB_PVRTC_2BPPV1_Format:Vw,RGB_PVRTC_4BPPV1_Format:Hw,RGB_S3TC_DXT1_Format:Rv,RGFormat:mL,RGIntegerFormat:kM,RawShaderMaterial:pI,Ray:Rd,Raycaster:cx,Rec709Primaries:tg,RectAreaLight:OI,RedFormat:pL,RedIntegerFormat:zM,ReinhardToneMapping:sL,RenderTarget:OL,RepeatWrapping:jm,ReplaceStencilOp:xB,ReverseSubtractEquation:U3,RingGeometry:ix,SIGNED_RED_GREEN_RGTC2_Format:hE,SIGNED_RED_RGTC1_Format:uE,SRGBColorSpace:Vi,SRGBTransfer:Hn,Scene:sg,ShaderChunk:tn,ShaderLib:zo,ShaderMaterial:Ma,ShadowMaterial:dI,Shape:th,ShapeGeometry:rx,ShapePath:QW,ShapeUtils:wa,ShortType:cL,Skeleton:qy,SkeletonHelper:zW,SkinnedMesh:QL,Source:qc,Sphere:dr,SphereGeometry:zg,Spherical:HI,SphericalHarmonics3:DI,SplineCurve:lT,SpotLight:bI,SpotLightHelper:FW,Sprite:jL,SpriteMaterial:eT,SrcAlphaFactor:ly,SrcAlphaSaturateFactor:W3,SrcColorFactor:z3,StaticCopyUsage:zB,StaticDrawUsage:ig,StaticReadUsage:UB,StereoCamera:fW,StreamCopyUsage:BB,StreamDrawUsage:DB,StreamReadUsage:FB,StringKeyframeTrack:gh,SubtractEquation:D3,SubtractiveBlending:Nw,TOUCH:uB,TangentSpaceNormalMap:Fu,TetrahedronGeometry:sx,Texture:pi,TextureLoader:rW,TorusGeometry:ox,TorusKnotGeometry:ax,Triangle:us,TriangleFanDrawMode:vB,TriangleStripDrawMode:_B,TrianglesDrawMode:gB,TubeGeometry:lx,TwoPassDoubleSide:hB,UVMapping:Fy,Uint16BufferAttribute:ZM,Uint32BufferAttribute:jM,Uint8BufferAttribute:S5,Uint8ClampedBufferAttribute:w5,Uniform:vT,UniformsGroup:LW,UniformsLib:Ze,UniformsUtils:NL,UnsignedByteType:Sa,UnsignedInt248Type:Mu,UnsignedIntType:sl,UnsignedShort4444Type:NM,UnsignedShort5551Type:FM,UnsignedShortType:zy,VSMShadowMap:Uo,Vector2:Pe,Vector3:V,Vector4:Cn,VectorKeyframeTrack:hg,VideoTexture:_G,WebGL1Renderer:qL,WebGL3DRenderTarget:a5,WebGLArrayRenderTarget:o5,WebGLCoordinateSystem:Bo,WebGLCubeRenderTarget:zL,WebGLMultipleRenderTargets:l5,WebGLRenderTarget:_o,WebGLRenderer:$M,WebGLUtils:XL,WebGPUCoordinateSystem:vd,WireframeGeometry:fI,WrapAroundEnding:$m,ZeroCurvatureEnding:Xc,ZeroFactor:N3,ZeroSlopeEnding:Yc,ZeroStencilOp:yB,_SRGBAFormat:hy,createCanvasElement:IL,sRGBEncoding:Au},Symbol.toStringTag,{value:"Module"}));var WI={exports:{}},_h={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */_h.ConcurrentRoot=1;_h.ContinuousEventPriority=4;_h.DefaultEventPriority=16;_h.DiscreteEventPriority=1;_h.IdleEventPriority=536870912;_h.LegacyRoot=0;WI.exports=_h;var ed=WI.exports;function JW(n){let e;const t=new Set,i=(d,p)=>{const m=typeof d=="function"?d(e):d;if(m!==e){const g=e;e=p?m:Object.assign({},e,m),t.forEach(y=>y(e,g))}},r=()=>e,s=(d,p=r,m=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let g=p(e);function y(){const S=p(e);if(!m(g,S)){const A=g;d(g=S,A)}}return t.add(y),()=>t.delete(y)},h={setState:i,getState:r,subscribe:(d,p,m)=>p||m?s(d,p,m):(t.add(d),()=>t.delete(d)),destroy:()=>t.clear()};return e=n(i,r,h),h}const $W=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),vR=$W?K.useEffect:K.useLayoutEffect;function XI(n){const e=typeof n=="function"?JW(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=K.useReducer(w=>w+1,0),o=e.getState(),a=K.useRef(o),h=K.useRef(i),d=K.useRef(r),p=K.useRef(!1),m=K.useRef();m.current===void 0&&(m.current=i(o));let g,y=!1;(a.current!==o||h.current!==i||d.current!==r||p.current)&&(g=i(o),y=!r(m.current,g)),vR(()=>{y&&(m.current=g),a.current=o,h.current=i,d.current=r,p.current=!1});const S=K.useRef(o);vR(()=>{const w=()=>{try{const T=e.getState(),E=h.current(T);d.current(m.current,E)||(a.current=T,m.current=E,s())}catch{p.current=!0,s()}},_=e.subscribe(w);return e.getState()!==S.current&&w(),_},[]);const A=y?g:m.current;return K.useDebugValue(A),A};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var YI={exports:{}},qI={exports:{}},ZI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(Y,te){var ee=Y.length;Y.push(te);e:for(;0<ee;){var ce=ee-1>>>1,ve=Y[ce];if(0<r(ve,te))Y[ce]=te,Y[ee]=ve,ee=ce;else break e}}function t(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var te=Y[0],ee=Y.pop();if(ee!==te){Y[0]=ee;e:for(var ce=0,ve=Y.length,he=ve>>>1;ce<he;){var Me=2*(ce+1)-1,Ie=Y[Me],Ye=Me+1,qe=Y[Ye];if(0>r(Ie,ee))Ye<ve&&0>r(qe,Ie)?(Y[ce]=qe,Y[Ye]=ee,ce=Ye):(Y[ce]=Ie,Y[Me]=ee,ce=Me);else if(Ye<ve&&0>r(qe,ee))Y[ce]=qe,Y[Ye]=ee,ce=Ye;else break e}}return te}function r(Y,te){var ee=Y.sortIndex-te.sortIndex;return ee!==0?ee:Y.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var h=[],d=[],p=1,m=null,g=3,y=!1,S=!1,A=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(Y){for(var te=t(d);te!==null;){if(te.callback===null)i(d);else if(te.startTime<=Y)i(d),te.sortIndex=te.expirationTime,e(h,te);else break;te=t(d)}}function C(Y){if(A=!1,E(Y),!S)if(t(h)!==null)S=!0,me(P);else{var te=t(d);te!==null&&de(C,te.startTime-Y)}}function P(Y,te){S=!1,A&&(A=!1,_(F),F=-1),y=!0;var ee=g;try{for(E(te),m=t(h);m!==null&&(!(m.expirationTime>te)||Y&&!G());){var ce=m.callback;if(typeof ce=="function"){m.callback=null,g=m.priorityLevel;var ve=ce(m.expirationTime<=te);te=n.unstable_now(),typeof ve=="function"?m.callback=ve:m===t(h)&&i(h),E(te)}else i(h);m=t(h)}if(m!==null)var he=!0;else{var Me=t(d);Me!==null&&de(C,Me.startTime-te),he=!1}return he}finally{m=null,g=ee,y=!1}}var D=!1,O=null,F=-1,L=5,N=-1;function G(){return!(n.unstable_now()-N<L)}function Q(){if(O!==null){var Y=n.unstable_now();N=Y;var te=!0;try{te=O(!0,Y)}finally{te?le():(D=!1,O=null)}}else D=!1}var le;if(typeof T=="function")le=function(){T(Q)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,oe=Z.port2;Z.port1.onmessage=Q,le=function(){oe.postMessage(null)}}else le=function(){w(Q,0)};function me(Y){O=Y,D||(D=!0,le())}function de(Y,te){F=w(function(){Y(n.unstable_now())},te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_continueExecution=function(){S||y||(S=!0,me(P))},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(Y){switch(g){case 1:case 2:case 3:var te=3;break;default:te=g}var ee=g;g=te;try{return Y()}finally{g=ee}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Y,te){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ee=g;g=Y;try{return te()}finally{g=ee}},n.unstable_scheduleCallback=function(Y,te,ee){var ce=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ce+ee:ce):ee=ce,Y){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=ee+ve,Y={id:p++,callback:te,priorityLevel:Y,startTime:ee,expirationTime:ve,sortIndex:-1},ee>ce?(Y.sortIndex=ee,e(d,Y),t(h)===null&&Y===t(d)&&(A?(_(F),F=-1):A=!0,de(C,ee-ce))):(Y.sortIndex=ve,e(h,Y),S||y||(S=!0,me(P))),Y},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(Y){var te=g;return function(){var ee=g;g=te;try{return Y.apply(this,arguments)}finally{g=ee}}}})(ZI);qI.exports=ZI;var EE=qI.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e9=function(e){var t={},i=K,r=EE,s=Object.assign;function o(u){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+u,v=1;v<arguments.length;v++)c+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,h=Symbol.for("react.element"),d=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),S=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),C=Symbol.for("react.offscreen"),P=Symbol.iterator;function D(u){return u===null||typeof u!="object"?null:(u=P&&u[P]||u["@@iterator"],typeof u=="function"?u:null)}function O(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case p:return"Fragment";case d:return"Portal";case g:return"Profiler";case m:return"StrictMode";case w:return"Suspense";case _:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case S:return(u.displayName||"Context")+".Consumer";case y:return(u._context.displayName||"Context")+".Provider";case A:var c=u.render;return u=u.displayName,u||(u=c.displayName||c.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case T:return c=u.displayName||null,c!==null?c:O(u.type)||"Memo";case E:c=u._payload,u=u._init;try{return O(u(c))}catch{}}return null}function F(u){var c=u.type;switch(u.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=c.render,u=u.displayName||u.name||"",c.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return O(c);case 8:return c===m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function L(u){var c=u,v=u;if(u.alternate)for(;c.return;)c=c.return;else{u=c;do c=u,c.flags&4098&&(v=c.return),u=c.return;while(u)}return c.tag===3?v:null}function N(u){if(L(u)!==u)throw Error(o(188))}function G(u){var c=u.alternate;if(!c){if(c=L(u),c===null)throw Error(o(188));return c!==u?null:u}for(var v=u,M=c;;){var R=v.return;if(R===null)break;var I=R.alternate;if(I===null){if(M=R.return,M!==null){v=M;continue}break}if(R.child===I.child){for(I=R.child;I;){if(I===v)return N(R),u;if(I===M)return N(R),c;I=I.sibling}throw Error(o(188))}if(v.return!==M.return)v=R,M=I;else{for(var W=!1,ne=R.child;ne;){if(ne===v){W=!0,v=R,M=I;break}if(ne===M){W=!0,M=R,v=I;break}ne=ne.sibling}if(!W){for(ne=I.child;ne;){if(ne===v){W=!0,v=I,M=R;break}if(ne===M){W=!0,M=I,v=R;break}ne=ne.sibling}if(!W)throw Error(o(189))}}if(v.alternate!==M)throw Error(o(190))}if(v.tag!==3)throw Error(o(188));return v.stateNode.current===v?u:c}function Q(u){return u=G(u),u!==null?le(u):null}function le(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var c=le(u);if(c!==null)return c;u=u.sibling}return null}function Z(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){if(u.tag!==4){var c=Z(u);if(c!==null)return c}u=u.sibling}return null}var oe=Array.isArray,me=e.getPublicInstance,de=e.getRootHostContext,Y=e.getChildHostContext,te=e.prepareForCommit,ee=e.resetAfterCommit,ce=e.createInstance,ve=e.appendInitialChild,he=e.finalizeInitialChildren,Me=e.prepareUpdate,Ie=e.shouldSetTextContent,Ye=e.createTextInstance,qe=e.scheduleTimeout,Tt=e.cancelTimeout,wt=e.noTimeout,dt=e.isPrimaryRenderer,lt=e.supportsMutation,j=e.supportsPersistence,Ue=e.supportsHydration,we=e.getInstanceFromNode,He=e.preparePortalMount,Le=e.getCurrentEventPriority,ut=e.detachDeletedInstance,$e=e.supportsMicrotasks,rt=e.scheduleMicrotask,xt=e.supportsTestSelectors,Nt=e.findFiberRoot,wn=e.getBoundingRect,X=e.getTextContent,k=e.isHiddenSubtree,fe=e.matchAccessibilityRole,ke=e.setFocusIfFocusable,De=e.setupIntersectionObserver,Ne=e.appendChild,ht=e.appendChildToContainer,Ge=e.commitTextUpdate,Ke=e.commitMount,bt=e.commitUpdate,un=e.insertBefore,Be=e.insertInContainerBefore,gn=e.removeChild,kt=e.removeChildFromContainer,Ct=e.resetTextContent,St=e.hideInstance,st=e.hideTextInstance,sn=e.unhideInstance,ie=e.unhideTextInstance,et=e.clearContainer,Ve=e.cloneInstance,Ae=e.createContainerChildSet,Xe=e.appendChildToContainerChildSet,Pt=e.finalizeContainerChildren,ln=e.replaceContainerChildren,Kn=e.cloneHiddenInstance,Ti=e.cloneHiddenTextInstance,En=e.canHydrateInstance,mi=e.canHydrateTextInstance,jr=e.canHydrateSuspenseInstance,Ca=e.isSuspenseInstancePending,Vu=e.isSuspenseInstanceFallback,_l=e.registerSuspenseInstanceRetry,qo=e.getNextHydratableSibling,vl=e.getFirstHydratableChild,vh=e.getFirstHydratableChildWithinContainer,yh=e.getFirstHydratableChildWithinSuspenseInstance,Od=e.hydrateInstance,Dd=e.hydrateTextInstance,xh=e.hydrateSuspenseInstance,H=e.getNextHydratableInstanceAfterSuspenseInstance,ae=e.commitHydratedContainer,_e=e.commitHydratedSuspenseInstance,xe=e.clearSuspenseBoundary,ge=e.clearSuspenseBoundaryFromContainer,tt=e.shouldDeleteUnhydratedTailInstances,ft=e.didNotMatchHydratedContainerTextInstance,Rt=e.didNotMatchHydratedTextInstance,Et;function Ht(u){if(Et===void 0)try{throw Error()}catch(v){var c=v.stack.trim().match(/\n( *(at )?)/);Et=c&&c[1]||""}return`
`+Et+u}var Bt=!1;function Vt(u,c){if(!u||Bt)return"";Bt=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(Fe){var M=Fe}Reflect.construct(u,[],c)}else{try{c.call()}catch(Fe){M=Fe}u.call(c.prototype)}else{try{throw Error()}catch(Fe){M=Fe}u()}}catch(Fe){if(Fe&&M&&typeof Fe.stack=="string"){for(var R=Fe.stack.split(`
`),I=M.stack.split(`
`),W=R.length-1,ne=I.length-1;1<=W&&0<=ne&&R[W]!==I[ne];)ne--;for(;1<=W&&0<=ne;W--,ne--)if(R[W]!==I[ne]){if(W!==1||ne!==1)do if(W--,ne--,0>ne||R[W]!==I[ne]){var Se=`
`+R[W].replace(" at new "," at ");return u.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",u.displayName)),Se}while(1<=W&&0<=ne);break}}}finally{Bt=!1,Error.prepareStackTrace=v}return(u=u?u.displayName||u.name:"")?Ht(u):""}var Fn=Object.prototype.hasOwnProperty,Ai=[],Ln=-1;function Ci(u){return{current:u}}function Lt(u){0>Ln||(u.current=Ai[Ln],Ai[Ln]=null,Ln--)}function ot(u,c){Ln++,Ai[Ln]=u.current,u.current=c}var Kr={},jt=Ci(Kr),Gn=Ci(!1),gs=Kr;function gr(u,c){var v=u.type.contextTypes;if(!v)return Kr;var M=u.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===c)return M.__reactInternalMemoizedMaskedChildContext;var R={},I;for(I in v)R[I]=c[I];return M&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=c,u.__reactInternalMemoizedMaskedChildContext=R),R}function Ri(u){return u=u.childContextTypes,u!=null}function Yn(){Lt(Gn),Lt(jt)}function Pr(u,c,v){if(jt.current!==Kr)throw Error(o(168));ot(jt,c),ot(Gn,v)}function Ra(u,c,v){var M=u.stateNode;if(c=c.childContextTypes,typeof M.getChildContext!="function")return v;M=M.getChildContext();for(var R in M)if(!(R in c))throw Error(o(108,F(u)||"Unknown",R));return s({},v,M)}function Ni(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||Kr,gs=jt.current,ot(jt,u),ot(Gn,Gn.current),!0}function ba(u,c,v){var M=u.stateNode;if(!M)throw Error(o(169));v?(u=Ra(u,c,gs),M.__reactInternalMemoizedMergedChildContext=u,Lt(Gn),Lt(jt),ot(jt,u)):Lt(Gn),ot(Gn,v)}var _r=Math.clz32?Math.clz32:Wg,yl=Math.log,xx=Math.LN2;function Wg(u){return u>>>=0,u===0?32:31-(yl(u)/xx|0)|0}var xl=64,Sl=4194304;function Gs(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function Gu(u,c){var v=u.pendingLanes;if(v===0)return 0;var M=0,R=u.suspendedLanes,I=u.pingedLanes,W=v&268435455;if(W!==0){var ne=W&~R;ne!==0?M=Gs(ne):(I&=W,I!==0&&(M=Gs(I)))}else W=v&~R,W!==0?M=Gs(W):I!==0&&(M=Gs(I));if(M===0)return 0;if(c!==0&&c!==M&&!(c&R)&&(R=M&-M,I=c&-c,R>=I||R===16&&(I&4194240)!==0))return c;if(M&4&&(M|=v&16),c=u.entangledLanes,c!==0)for(u=u.entanglements,c&=M;0<c;)v=31-_r(c),R=1<<v,M|=u[v],c&=~R;return M}function Xg(u,c){switch(u){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sx(u,c){for(var v=u.suspendedLanes,M=u.pingedLanes,R=u.expirationTimes,I=u.pendingLanes;0<I;){var W=31-_r(I),ne=1<<W,Se=R[W];Se===-1?(!(ne&v)||ne&M)&&(R[W]=Xg(ne,c)):Se<=c&&(u.expiredLanes|=ne),I&=~ne}}function Sh(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function wh(u){for(var c=[],v=0;31>v;v++)c.push(u);return c}function wl(u,c,v){u.pendingLanes|=c,c!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,c=31-_r(c),u[c]=v}function Yg(u,c){var v=u.pendingLanes&~c;u.pendingLanes=c,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=c,u.mutableReadLanes&=c,u.entangledLanes&=c,c=u.entanglements;var M=u.eventTimes;for(u=u.expirationTimes;0<v;){var R=31-_r(v),I=1<<R;c[R]=0,M[R]=-1,u[R]=-1,v&=~I}}function Ud(u,c){var v=u.entangledLanes|=c;for(u=u.entanglements;v;){var M=31-_r(v),R=1<<M;R&c|u[M]&c&&(u[M]|=c),v&=~R}}var _n=0;function qg(u){return u&=-u,1<u?4<u?u&268435455?16:536870912:4:1}var Eh=r.unstable_scheduleCallback,Zg=r.unstable_cancelCallback,wx=r.unstable_shouldYield,Ex=r.unstable_requestPaint,bi=r.unstable_now,Wu=r.unstable_ImmediatePriority,Mx=r.unstable_UserBlockingPriority,Nd=r.unstable_NormalPriority,Tx=r.unstable_IdlePriority,Mh=null,Ws=null;function On(u){if(Ws&&typeof Ws.onCommitFiberRoot=="function")try{Ws.onCommitFiberRoot(Mh,u,void 0,(u.current.flags&128)===128)}catch{}}function In(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var Xs=typeof Object.is=="function"?Object.is:In,yo=null,Th=!1,Fd=!1;function jg(u){yo===null?yo=[u]:yo.push(u)}function Ax(u){Th=!0,jg(u)}function _s(){if(!Fd&&yo!==null){Fd=!0;var u=0,c=_n;try{var v=yo;for(_n=1;u<v.length;u++){var M=v[u];do M=M(!0);while(M!==null)}yo=null,Th=!1}catch(R){throw yo!==null&&(yo=yo.slice(u+1)),Eh(Wu,_s),R}finally{_n=c,Fd=!1}}return null}var Cx=a.ReactCurrentBatchConfig;function oi(u,c){if(Xs(u,c))return!0;if(typeof u!="object"||u===null||typeof c!="object"||c===null)return!1;var v=Object.keys(u),M=Object.keys(c);if(v.length!==M.length)return!1;for(M=0;M<v.length;M++){var R=v[M];if(!Fn.call(c,R)||!Xs(u[R],c[R]))return!1}return!0}function zd(u){switch(u.tag){case 5:return Ht(u.type);case 16:return Ht("Lazy");case 13:return Ht("Suspense");case 19:return Ht("SuspenseList");case 0:case 2:case 15:return u=Vt(u.type,!1),u;case 11:return u=Vt(u.type.render,!1),u;case 1:return u=Vt(u.type,!0),u;default:return""}}function Fi(u,c){if(u&&u.defaultProps){c=s({},c),u=u.defaultProps;for(var v in u)c[v]===void 0&&(c[v]=u[v]);return c}return c}var Xu=Ci(null),El=null,zi=null,Ah=null;function Ch(){Ah=zi=El=null}function kd(u,c,v){dt?(ot(Xu,c._currentValue),c._currentValue=v):(ot(Xu,c._currentValue2),c._currentValue2=v)}function Rh(u){var c=Xu.current;Lt(Xu),dt?u._currentValue=c:u._currentValue2=c}function bh(u,c,v){for(;u!==null;){var M=u.alternate;if((u.childLanes&c)!==c?(u.childLanes|=c,M!==null&&(M.childLanes|=c)):M!==null&&(M.childLanes&c)!==c&&(M.childLanes|=c),u===v)break;u=u.return}}function Pa(u,c){El=u,Ah=zi=null,u=u.dependencies,u!==null&&u.firstContext!==null&&(u.lanes&c&&(Ir=!0),u.firstContext=null)}function zn(u){var c=dt?u._currentValue:u._currentValue2;if(Ah!==u)if(u={context:u,memoizedValue:c,next:null},zi===null){if(El===null)throw Error(o(308));zi=u,El.dependencies={lanes:0,firstContext:u}}else zi=zi.next=u;return c}var Ys=null,gi=!1;function Bd(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hd(u,c){u=u.updateQueue,c.updateQueue===u&&(c.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function qi(u,c){return{eventTime:u,lane:c,tag:0,payload:null,callback:null,next:null}}function vs(u,c){var v=u.updateQueue;v!==null&&(v=v.shared,ai!==null&&u.mode&1&&!(Kt&2)?(u=v.interleaved,u===null?(c.next=c,Ys===null?Ys=[v]:Ys.push(v)):(c.next=u.next,u.next=c),v.interleaved=c):(u=v.pending,u===null?c.next=c:(c.next=u.next,u.next=c),v.pending=c))}function Ml(u,c,v){if(c=c.updateQueue,c!==null&&(c=c.shared,(v&4194240)!==0)){var M=c.lanes;M&=u.pendingLanes,v|=M,c.lanes=v,Ud(u,v)}}function Dn(u,c){var v=u.updateQueue,M=u.alternate;if(M!==null&&(M=M.updateQueue,v===M)){var R=null,I=null;if(v=v.firstBaseUpdate,v!==null){do{var W={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};I===null?R=I=W:I=I.next=W,v=v.next}while(v!==null);I===null?R=I=c:I=I.next=c}else R=I=c;v={baseState:M.baseState,firstBaseUpdate:R,lastBaseUpdate:I,shared:M.shared,effects:M.effects},u.updateQueue=v;return}u=v.lastBaseUpdate,u===null?v.firstBaseUpdate=c:u.next=c,v.lastBaseUpdate=c}function ys(u,c,v,M){var R=u.updateQueue;gi=!1;var I=R.firstBaseUpdate,W=R.lastBaseUpdate,ne=R.shared.pending;if(ne!==null){R.shared.pending=null;var Se=ne,Fe=Se.next;Se.next=null,W===null?I=Fe:W.next=Fe,W=Se;var at=u.alternate;at!==null&&(at=at.updateQueue,ne=at.lastBaseUpdate,ne!==W&&(ne===null?at.firstBaseUpdate=Fe:ne.next=Fe,at.lastBaseUpdate=Se))}if(I!==null){var Wt=R.baseState;W=0,at=Fe=Se=null,ne=I;do{var vt=ne.lane,Mn=ne.eventTime;if((M&vt)===vt){at!==null&&(at=at.next={eventTime:Mn,lane:0,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null});e:{var pt=u,tr=ne;switch(vt=c,Mn=v,tr.tag){case 1:if(pt=tr.payload,typeof pt=="function"){Wt=pt.call(Mn,Wt,vt);break e}Wt=pt;break e;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=tr.payload,vt=typeof pt=="function"?pt.call(Mn,Wt,vt):pt,vt==null)break e;Wt=s({},Wt,vt);break e;case 2:gi=!0}}ne.callback!==null&&ne.lane!==0&&(u.flags|=64,vt=R.effects,vt===null?R.effects=[ne]:vt.push(ne))}else Mn={eventTime:Mn,lane:vt,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null},at===null?(Fe=at=Mn,Se=Wt):at=at.next=Mn,W|=vt;if(ne=ne.next,ne===null){if(ne=R.shared.pending,ne===null)break;vt=ne,ne=vt.next,vt.next=null,R.lastBaseUpdate=vt,R.shared.pending=null}}while(1);if(at===null&&(Se=Wt),R.baseState=Se,R.firstBaseUpdate=Fe,R.lastBaseUpdate=at,c=R.shared.interleaved,c!==null){R=c;do W|=R.lane,R=R.next;while(R!==c)}else I===null&&(R.shared.lanes=0);Xl|=W,u.lanes=W,u.memoizedState=Wt}}function Ph(u,c,v){if(u=c.effects,c.effects=null,u!==null)for(c=0;c<u.length;c++){var M=u[c],R=M.callback;if(R!==null){if(M.callback=null,M=v,typeof R!="function")throw Error(o(191,R));R.call(M)}}}var Kg=new i.Component().refs;function Yu(u,c,v,M){c=u.memoizedState,v=v(M,c),v=v==null?c:s({},c,v),u.memoizedState=v,u.lanes===0&&(u.updateQueue.baseState=v)}var Lh={isMounted:function(u){return(u=u._reactInternals)?L(u)===u:!1},enqueueSetState:function(u,c,v){u=u._reactInternals;var M=Qi(),R=$s(u),I=qi(M,R);I.payload=c,v!=null&&(I.callback=v),vs(u,I),c=Jr(u,R,M),c!==null&&Ml(c,u,R)},enqueueReplaceState:function(u,c,v){u=u._reactInternals;var M=Qi(),R=$s(u),I=qi(M,R);I.tag=1,I.payload=c,v!=null&&(I.callback=v),vs(u,I),c=Jr(u,R,M),c!==null&&Ml(c,u,R)},enqueueForceUpdate:function(u,c){u=u._reactInternals;var v=Qi(),M=$s(u),R=qi(v,M);R.tag=2,c!=null&&(R.callback=c),vs(u,R),c=Jr(u,M,v),c!==null&&Ml(c,u,M)}};function Qg(u,c,v,M,R,I,W){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(M,I,W):c.prototype&&c.prototype.isPureReactComponent?!oi(v,M)||!oi(R,I):!0}function Jg(u,c,v){var M=!1,R=Kr,I=c.contextType;return typeof I=="object"&&I!==null?I=zn(I):(R=Ri(c)?gs:jt.current,M=c.contextTypes,I=(M=M!=null)?gr(u,R):Kr),c=new c(v,I),u.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Lh,u.stateNode=c,c._reactInternals=u,M&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=R,u.__reactInternalMemoizedMaskedChildContext=I),c}function Vd(u,c,v,M){u=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(v,M),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(v,M),c.state!==u&&Lh.enqueueReplaceState(c,c.state,null)}function Tl(u,c,v,M){var R=u.stateNode;R.props=v,R.state=u.memoizedState,R.refs=Kg,Bd(u);var I=c.contextType;typeof I=="object"&&I!==null?R.context=zn(I):(I=Ri(c)?gs:jt.current,R.context=gr(u,I)),R.state=u.memoizedState,I=c.getDerivedStateFromProps,typeof I=="function"&&(Yu(u,c,I,v),R.state=u.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(c=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),c!==R.state&&Lh.enqueueReplaceState(R,R.state,null),ys(u,v,R,M),R.state=u.memoizedState),typeof R.componentDidMount=="function"&&(u.flags|=4194308)}var xs=[],Al=0,qu=null,Zu=0,vr=[],yr=0,Zo=null,xo=1,Ss="";function So(u,c){xs[Al++]=Zu,xs[Al++]=qu,qu=u,Zu=c}function $g(u,c,v){vr[yr++]=xo,vr[yr++]=Ss,vr[yr++]=Zo,Zo=u;var M=xo;u=Ss;var R=32-_r(M)-1;M&=~(1<<R),v+=1;var I=32-_r(c)+R;if(30<I){var W=R-R%5;I=(M&(1<<W)-1).toString(32),M>>=W,R-=W,xo=1<<32-_r(c)+R|v<<R|M,Ss=I+u}else xo=1<<I|v<<R|M,Ss=u}function Ih(u){u.return!==null&&(So(u,1),$g(u,1,0))}function ar(u){for(;u===qu;)qu=xs[--Al],xs[Al]=null,Zu=xs[--Al],xs[Al]=null;for(;u===Zo;)Zo=vr[--yr],vr[yr]=null,Ss=vr[--yr],vr[yr]=null,xo=vr[--yr],vr[yr]=null}var lr=null,ki=null,Un=!1,Cl=!1,ws=null;function e0(u,c){var v=$r(5,null,null,0);v.elementType="DELETED",v.stateNode=c,v.return=u,c=u.deletions,c===null?(u.deletions=[v],u.flags|=16):c.push(v)}function t0(u,c){switch(u.tag){case 5:return c=En(c,u.type,u.pendingProps),c!==null?(u.stateNode=c,lr=u,ki=vl(c),!0):!1;case 6:return c=mi(c,u.pendingProps),c!==null?(u.stateNode=c,lr=u,ki=null,!0):!1;case 13:if(c=jr(c),c!==null){var v=Zo!==null?{id:xo,overflow:Ss}:null;return u.memoizedState={dehydrated:c,treeContext:v,retryLane:1073741824},v=$r(18,null,null,0),v.stateNode=c,v.return=u,u.child=v,lr=u,ki=null,!0}return!1;default:return!1}}function Gd(u){return(u.mode&1)!==0&&(u.flags&128)===0}function Wd(u){if(Un){var c=ki;if(c){var v=c;if(!t0(u,c)){if(Gd(u))throw Error(o(418));c=qo(v);var M=lr;c&&t0(u,c)?e0(M,v):(u.flags=u.flags&-4097|2,Un=!1,lr=u)}}else{if(Gd(u))throw Error(o(418));u.flags=u.flags&-4097|2,Un=!1,lr=u}}}function La(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;lr=u}function ju(u){if(!Ue||u!==lr)return!1;if(!Un)return La(u),Un=!0,!1;if(u.tag!==3&&(u.tag!==5||tt(u.type)&&!Ie(u.type,u.memoizedProps))){var c=ki;if(c){if(Gd(u)){for(u=ki;u;)u=qo(u);throw Error(o(418))}for(;c;)e0(u,c),c=qo(c)}}if(La(u),u.tag===13){if(!Ue)throw Error(o(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));ki=H(u)}else ki=lr?qo(u.stateNode):null;return!0}function Rl(){Ue&&(ki=lr=null,Cl=Un=!1)}function Ku(u){ws===null?ws=[u]:ws.push(u)}function bl(u,c,v){if(u=v.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(o(309));var M=v.stateNode}if(!M)throw Error(o(147,u));var R=M,I=""+u;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===I?c.ref:(c=function(W){var ne=R.refs;ne===Kg&&(ne=R.refs={}),W===null?delete ne[I]:ne[I]=W},c._stringRef=I,c)}if(typeof u!="string")throw Error(o(284));if(!v._owner)throw Error(o(290,u))}return u}function Es(u,c){throw u=Object.prototype.toString.call(c),Error(o(31,u==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":u))}function Qu(u){var c=u._init;return c(u._payload)}function n0(u){function c(ue,re){if(u){var ye=ue.deletions;ye===null?(ue.deletions=[re],ue.flags|=16):ye.push(re)}}function v(ue,re){if(!u)return null;for(;re!==null;)c(ue,re),re=re.sibling;return null}function M(ue,re){for(ue=new Map;re!==null;)re.key!==null?ue.set(re.key,re):ue.set(re.index,re),re=re.sibling;return ue}function R(ue,re){return ue=Ao(ue,re),ue.index=0,ue.sibling=null,ue}function I(ue,re,ye){return ue.index=ye,u?(ye=ue.alternate,ye!==null?(ye=ye.index,ye<re?(ue.flags|=2,re):ye):(ue.flags|=2,re)):(ue.flags|=1048576,re)}function W(ue){return u&&ue.alternate===null&&(ue.flags|=2),ue}function ne(ue,re,ye,Je){return re===null||re.tag!==6?(re=er(ye,ue.mode,Je),re.return=ue,re):(re=R(re,ye),re.return=ue,re)}function Se(ue,re,ye,Je){var mt=ye.type;return mt===p?at(ue,re,ye.props.children,Je,ye.key):re!==null&&(re.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===E&&Qu(mt)===re.type)?(Je=R(re,ye.props),Je.ref=bl(ue,re,ye),Je.return=ue,Je):(Je=Jh(ye.type,ye.key,ye.props,null,ue.mode,Je),Je.ref=bl(ue,re,ye),Je.return=ue,Je)}function Fe(ue,re,ye,Je){return re===null||re.tag!==4||re.stateNode.containerInfo!==ye.containerInfo||re.stateNode.implementation!==ye.implementation?(re=es(ye,ue.mode,Je),re.return=ue,re):(re=R(re,ye.children||[]),re.return=ue,re)}function at(ue,re,ye,Je,mt){return re===null||re.tag!==7?(re=la(ye,ue.mode,Je,mt),re.return=ue,re):(re=R(re,ye),re.return=ue,re)}function Wt(ue,re,ye){if(typeof re=="string"&&re!==""||typeof re=="number")return re=er(""+re,ue.mode,ye),re.return=ue,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case h:return ye=Jh(re.type,re.key,re.props,null,ue.mode,ye),ye.ref=bl(ue,null,re),ye.return=ue,ye;case d:return re=es(re,ue.mode,ye),re.return=ue,re;case E:var Je=re._init;return Wt(ue,Je(re._payload),ye)}if(oe(re)||D(re))return re=la(re,ue.mode,ye,null),re.return=ue,re;Es(ue,re)}return null}function vt(ue,re,ye,Je){var mt=re!==null?re.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number")return mt!==null?null:ne(ue,re,""+ye,Je);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case h:return ye.key===mt?Se(ue,re,ye,Je):null;case d:return ye.key===mt?Fe(ue,re,ye,Je):null;case E:return mt=ye._init,vt(ue,re,mt(ye._payload),Je)}if(oe(ye)||D(ye))return mt!==null?null:at(ue,re,ye,Je,null);Es(ue,ye)}return null}function Mn(ue,re,ye,Je,mt){if(typeof Je=="string"&&Je!==""||typeof Je=="number")return ue=ue.get(ye)||null,ne(re,ue,""+Je,mt);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case h:return ue=ue.get(Je.key===null?ye:Je.key)||null,Se(re,ue,Je,mt);case d:return ue=ue.get(Je.key===null?ye:Je.key)||null,Fe(re,ue,Je,mt);case E:var Qt=Je._init;return Mn(ue,re,ye,Qt(Je._payload),mt)}if(oe(Je)||D(Je))return ue=ue.get(ye)||null,at(re,ue,Je,mt,null);Es(re,Je)}return null}function pt(ue,re,ye,Je){for(var mt=null,Qt=null,Xt=re,Jt=re=0,ui=null;Xt!==null&&Jt<ye.length;Jt++){Xt.index>Jt?(ui=Xt,Xt=null):ui=Xt.sibling;var hn=vt(ue,Xt,ye[Jt],Je);if(hn===null){Xt===null&&(Xt=ui);break}u&&Xt&&hn.alternate===null&&c(ue,Xt),re=I(hn,re,Jt),Qt===null?mt=hn:Qt.sibling=hn,Qt=hn,Xt=ui}if(Jt===ye.length)return v(ue,Xt),Un&&So(ue,Jt),mt;if(Xt===null){for(;Jt<ye.length;Jt++)Xt=Wt(ue,ye[Jt],Je),Xt!==null&&(re=I(Xt,re,Jt),Qt===null?mt=Xt:Qt.sibling=Xt,Qt=Xt);return Un&&So(ue,Jt),mt}for(Xt=M(ue,Xt);Jt<ye.length;Jt++)ui=Mn(Xt,ue,Jt,ye[Jt],Je),ui!==null&&(u&&ui.alternate!==null&&Xt.delete(ui.key===null?Jt:ui.key),re=I(ui,re,Jt),Qt===null?mt=ui:Qt.sibling=ui,Qt=ui);return u&&Xt.forEach(function(to){return c(ue,to)}),Un&&So(ue,Jt),mt}function tr(ue,re,ye,Je){var mt=D(ye);if(typeof mt!="function")throw Error(o(150));if(ye=mt.call(ye),ye==null)throw Error(o(151));for(var Qt=mt=null,Xt=re,Jt=re=0,ui=null,hn=ye.next();Xt!==null&&!hn.done;Jt++,hn=ye.next()){Xt.index>Jt?(ui=Xt,Xt=null):ui=Xt.sibling;var to=vt(ue,Xt,hn.value,Je);if(to===null){Xt===null&&(Xt=ui);break}u&&Xt&&to.alternate===null&&c(ue,Xt),re=I(to,re,Jt),Qt===null?mt=to:Qt.sibling=to,Qt=to,Xt=ui}if(hn.done)return v(ue,Xt),Un&&So(ue,Jt),mt;if(Xt===null){for(;!hn.done;Jt++,hn=ye.next())hn=Wt(ue,hn.value,Je),hn!==null&&(re=I(hn,re,Jt),Qt===null?mt=hn:Qt.sibling=hn,Qt=hn);return Un&&So(ue,Jt),mt}for(Xt=M(ue,Xt);!hn.done;Jt++,hn=ye.next())hn=Mn(Xt,ue,Jt,hn.value,Je),hn!==null&&(u&&hn.alternate!==null&&Xt.delete(hn.key===null?Jt:hn.key),re=I(hn,re,Jt),Qt===null?mt=hn:Qt.sibling=hn,Qt=hn);return u&&Xt.forEach(function(ef){return c(ue,ef)}),Un&&So(ue,Jt),mt}function Fr(ue,re,ye,Je){if(typeof ye=="object"&&ye!==null&&ye.type===p&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case h:e:{for(var mt=ye.key,Qt=re;Qt!==null;){if(Qt.key===mt){if(mt=ye.type,mt===p){if(Qt.tag===7){v(ue,Qt.sibling),re=R(Qt,ye.props.children),re.return=ue,ue=re;break e}}else if(Qt.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===E&&Qu(mt)===Qt.type){v(ue,Qt.sibling),re=R(Qt,ye.props),re.ref=bl(ue,Qt,ye),re.return=ue,ue=re;break e}v(ue,Qt);break}else c(ue,Qt);Qt=Qt.sibling}ye.type===p?(re=la(ye.props.children,ue.mode,Je,ye.key),re.return=ue,ue=re):(Je=Jh(ye.type,ye.key,ye.props,null,ue.mode,Je),Je.ref=bl(ue,re,ye),Je.return=ue,ue=Je)}return W(ue);case d:e:{for(Qt=ye.key;re!==null;){if(re.key===Qt)if(re.tag===4&&re.stateNode.containerInfo===ye.containerInfo&&re.stateNode.implementation===ye.implementation){v(ue,re.sibling),re=R(re,ye.children||[]),re.return=ue,ue=re;break e}else{v(ue,re);break}else c(ue,re);re=re.sibling}re=es(ye,ue.mode,Je),re.return=ue,ue=re}return W(ue);case E:return Qt=ye._init,Fr(ue,re,Qt(ye._payload),Je)}if(oe(ye))return pt(ue,re,ye,Je);if(D(ye))return tr(ue,re,ye,Je);Es(ue,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"?(ye=""+ye,re!==null&&re.tag===6?(v(ue,re.sibling),re=R(re,ye),re.return=ue,ue=re):(v(ue,re),re=er(ye,ue.mode,Je),re.return=ue,ue=re),W(ue)):v(ue,re)}return Fr}var Pl=n0(!0),i0=n0(!1),qs={},qn=Ci(qs),Ll=Ci(qs),Il=Ci(qs);function Zs(u){if(u===qs)throw Error(o(174));return u}function Xd(u,c){ot(Il,c),ot(Ll,u),ot(qn,qs),u=de(c),Lt(qn),ot(qn,u)}function Ol(){Lt(qn),Lt(Ll),Lt(Il)}function r0(u){var c=Zs(Il.current),v=Zs(qn.current);c=Y(v,u.type,c),v!==c&&(ot(Ll,u),ot(qn,c))}function jo(u){Ll.current===u&&(Lt(qn),Lt(Ll))}var $=Ci(0);function Ee(u){for(var c=u;c!==null;){if(c.tag===13){var v=c.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||Ca(v)||Vu(v)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break;for(;c.sibling===null;){if(c.return===null||c.return===u)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var pe=[];function nt(){for(var u=0;u<pe.length;u++){var c=pe[u];dt?c._workInProgressVersionPrimary=null:c._workInProgressVersionSecondary=null}pe.length=0}var Ft=a.ReactCurrentDispatcher,Yt=a.ReactCurrentBatchConfig,kn=0,Ot=null,Pi=null,Li=null,ur=!1,Ko=!1,Ju=0,Dl=0;function _i(){throw Error(o(321))}function Ul(u,c){if(c===null)return!1;for(var v=0;v<c.length&&v<u.length;v++)if(!Xs(u[v],c[v]))return!1;return!0}function vn(u,c,v,M,R,I){if(kn=I,Ot=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Ft.current=u===null||u.memoizedState===null?oc:Jd,u=v(M,R),Ko){I=0;do{if(Ko=!1,Ju=0,25<=I)throw Error(o(301));I+=1,Li=Pi=null,c.updateQueue=null,Ft.current=zl,u=v(M,R)}while(Ko)}if(Ft.current=Fl,c=Pi!==null&&Pi.next!==null,kn=0,Li=Pi=Ot=null,ur=!1,c)throw Error(o(300));return u}function Yd(){var u=Ju!==0;return Ju=0,u}function js(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Li===null?Ot.memoizedState=Li=u:Li=Li.next=u,Li}function Lr(){if(Pi===null){var u=Ot.alternate;u=u!==null?u.memoizedState:null}else u=Pi.next;var c=Li===null?Ot.memoizedState:Li.next;if(c!==null)Li=c,Pi=u;else{if(u===null)throw Error(o(310));Pi=u,u={memoizedState:Pi.memoizedState,baseState:Pi.baseState,baseQueue:Pi.baseQueue,queue:Pi.queue,next:null},Li===null?Ot.memoizedState=Li=u:Li=Li.next=u}return Li}function Ia(u,c){return typeof c=="function"?c(u):c}function Oh(u){var c=Lr(),v=c.queue;if(v===null)throw Error(o(311));v.lastRenderedReducer=u;var M=Pi,R=M.baseQueue,I=v.pending;if(I!==null){if(R!==null){var W=R.next;R.next=I.next,I.next=W}M.baseQueue=R=I,v.pending=null}if(R!==null){I=R.next,M=M.baseState;var ne=W=null,Se=null,Fe=I;do{var at=Fe.lane;if((kn&at)===at)Se!==null&&(Se=Se.next={lane:0,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null}),M=Fe.hasEagerState?Fe.eagerState:u(M,Fe.action);else{var Wt={lane:at,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null};Se===null?(ne=Se=Wt,W=M):Se=Se.next=Wt,Ot.lanes|=at,Xl|=at}Fe=Fe.next}while(Fe!==null&&Fe!==I);Se===null?W=M:Se.next=ne,Xs(M,c.memoizedState)||(Ir=!0),c.memoizedState=M,c.baseState=W,c.baseQueue=Se,v.lastRenderedState=M}if(u=v.interleaved,u!==null){R=u;do I=R.lane,Ot.lanes|=I,Xl|=I,R=R.next;while(R!==u)}else R===null&&(v.lanes=0);return[c.memoizedState,v.dispatch]}function Dh(u){var c=Lr(),v=c.queue;if(v===null)throw Error(o(311));v.lastRenderedReducer=u;var M=v.dispatch,R=v.pending,I=c.memoizedState;if(R!==null){v.pending=null;var W=R=R.next;do I=u(I,W.action),W=W.next;while(W!==R);Xs(I,c.memoizedState)||(Ir=!0),c.memoizedState=I,c.baseQueue===null&&(c.baseState=I),v.lastRenderedState=I}return[I,M]}function $u(){}function wo(u,c){var v=Ot,M=Lr(),R=c(),I=!Xs(M.memoizedState,R);if(I&&(M.memoizedState=R,Ir=!0),M=M.queue,nc(tc.bind(null,v,M,u),[u]),M.getSnapshot!==c||I||Li!==null&&Li.memoizedState.tag&1){if(v.flags|=2048,Qo(9,qd.bind(null,v,M,R,c),void 0,null),ai===null)throw Error(o(349));kn&30||ec(v,c,R)}return R}function ec(u,c,v){u.flags|=16384,u={getSnapshot:c,value:v},c=Ot.updateQueue,c===null?(c={lastEffect:null,stores:null},Ot.updateQueue=c,c.stores=[u]):(v=c.stores,v===null?c.stores=[u]:v.push(u))}function qd(u,c,v,M){c.value=v,c.getSnapshot=M,Zd(c)&&Jr(u,1,-1)}function tc(u,c,v){return v(function(){Zd(c)&&Jr(u,1,-1)})}function Zd(u){var c=u.getSnapshot;u=u.value;try{var v=c();return!Xs(u,v)}catch{return!0}}function Uh(u){var c=js();return typeof u=="function"&&(u=u()),c.memoizedState=c.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:u},c.queue=u,u=u.dispatch=Zi.bind(null,Ot,u),[c.memoizedState,u]}function Qo(u,c,v,M){return u={tag:u,create:c,destroy:v,deps:M,next:null},c=Ot.updateQueue,c===null?(c={lastEffect:null,stores:null},Ot.updateQueue=c,c.lastEffect=u.next=u):(v=c.lastEffect,v===null?c.lastEffect=u.next=u:(M=v.next,v.next=u,u.next=M,c.lastEffect=u)),u}function jd(){return Lr().memoizedState}function Jo(u,c,v,M){var R=js();Ot.flags|=u,R.memoizedState=Qo(1|c,v,void 0,M===void 0?null:M)}function Ks(u,c,v,M){var R=Lr();M=M===void 0?null:M;var I=void 0;if(Pi!==null){var W=Pi.memoizedState;if(I=W.destroy,M!==null&&Ul(M,W.deps)){R.memoizedState=Qo(c,v,I,M);return}}Ot.flags|=u,R.memoizedState=Qo(1|c,v,I,M)}function Nl(u,c){return Jo(8390656,8,u,c)}function nc(u,c){return Ks(2048,8,u,c)}function s0(u,c){return Ks(4,2,u,c)}function o0(u,c){return Ks(4,4,u,c)}function ic(u,c){if(typeof c=="function")return u=u(),c(u),function(){c(null)};if(c!=null)return u=u(),c.current=u,function(){c.current=null}}function rc(u,c,v){return v=v!=null?v.concat([u]):null,Ks(4,4,ic.bind(null,c,u),v)}function sc(){}function a0(u,c){var v=Lr();c=c===void 0?null:c;var M=v.memoizedState;return M!==null&&c!==null&&Ul(c,M[1])?M[0]:(v.memoizedState=[u,c],u)}function Kd(u,c){var v=Lr();c=c===void 0?null:c;var M=v.memoizedState;return M!==null&&c!==null&&Ul(c,M[1])?M[0]:(u=u(),v.memoizedState=[u,c],u)}function Rx(u,c){var v=_n;_n=v!==0&&4>v?v:4,u(!0);var M=Yt.transition;Yt.transition={};try{u(!1),c()}finally{_n=v,Yt.transition=M}}function l0(){return Lr().memoizedState}function vi(u,c,v){var M=$s(u);v={lane:M,action:v,hasEagerState:!1,eagerState:null,next:null},u0(u)?c0(c,v):(Qd(u,c,v),v=Qi(),u=Jr(u,M,v),u!==null&&h0(u,c,M))}function Zi(u,c,v){var M=$s(u),R={lane:M,action:v,hasEagerState:!1,eagerState:null,next:null};if(u0(u))c0(c,R);else{Qd(u,c,R);var I=u.alternate;if(u.lanes===0&&(I===null||I.lanes===0)&&(I=c.lastRenderedReducer,I!==null))try{var W=c.lastRenderedState,ne=I(W,v);if(R.hasEagerState=!0,R.eagerState=ne,Xs(ne,W))return}catch{}finally{}v=Qi(),u=Jr(u,M,v),u!==null&&h0(u,c,M)}}function u0(u){var c=u.alternate;return u===Ot||c!==null&&c===Ot}function c0(u,c){Ko=ur=!0;var v=u.pending;v===null?c.next=c:(c.next=v.next,v.next=c),u.pending=c}function Qd(u,c,v){ai!==null&&u.mode&1&&!(Kt&2)?(u=c.interleaved,u===null?(v.next=v,Ys===null?Ys=[c]:Ys.push(c)):(v.next=u.next,u.next=v),c.interleaved=v):(u=c.pending,u===null?v.next=v:(v.next=u.next,u.next=v),c.pending=v)}function h0(u,c,v){if(v&4194240){var M=c.lanes;M&=u.pendingLanes,v|=M,c.lanes=v,Ud(u,v)}}var Fl={readContext:zn,useCallback:_i,useContext:_i,useEffect:_i,useImperativeHandle:_i,useInsertionEffect:_i,useLayoutEffect:_i,useMemo:_i,useReducer:_i,useRef:_i,useState:_i,useDebugValue:_i,useDeferredValue:_i,useTransition:_i,useMutableSource:_i,useSyncExternalStore:_i,useId:_i,unstable_isNewReconciler:!1},oc={readContext:zn,useCallback:function(u,c){return js().memoizedState=[u,c===void 0?null:c],u},useContext:zn,useEffect:Nl,useImperativeHandle:function(u,c,v){return v=v!=null?v.concat([u]):null,Jo(4194308,4,ic.bind(null,c,u),v)},useLayoutEffect:function(u,c){return Jo(4194308,4,u,c)},useInsertionEffect:function(u,c){return Jo(4,2,u,c)},useMemo:function(u,c){var v=js();return c=c===void 0?null:c,u=u(),v.memoizedState=[u,c],u},useReducer:function(u,c,v){var M=js();return c=v!==void 0?v(c):c,M.memoizedState=M.baseState=c,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:c},M.queue=u,u=u.dispatch=vi.bind(null,Ot,u),[M.memoizedState,u]},useRef:function(u){var c=js();return u={current:u},c.memoizedState=u},useState:Uh,useDebugValue:sc,useDeferredValue:function(u){var c=Uh(u),v=c[0],M=c[1];return Nl(function(){var R=Yt.transition;Yt.transition={};try{M(u)}finally{Yt.transition=R}},[u]),v},useTransition:function(){var u=Uh(!1),c=u[0];return u=Rx.bind(null,u[1]),js().memoizedState=u,[c,u]},useMutableSource:function(){},useSyncExternalStore:function(u,c,v){var M=Ot,R=js();if(Un){if(v===void 0)throw Error(o(407));v=v()}else{if(v=c(),ai===null)throw Error(o(349));kn&30||ec(M,c,v)}R.memoizedState=v;var I={value:v,getSnapshot:c};return R.queue=I,Nl(tc.bind(null,M,I,u),[u]),M.flags|=2048,Qo(9,qd.bind(null,M,I,v,c),void 0,null),v},useId:function(){var u=js(),c=ai.identifierPrefix;if(Un){var v=Ss,M=xo;v=(M&~(1<<32-_r(M)-1)).toString(32)+v,c=":"+c+"R"+v,v=Ju++,0<v&&(c+="H"+v.toString(32)),c+=":"}else v=Dl++,c=":"+c+"r"+v.toString(32)+":";return u.memoizedState=c},unstable_isNewReconciler:!1},Jd={readContext:zn,useCallback:a0,useContext:zn,useEffect:nc,useImperativeHandle:rc,useInsertionEffect:s0,useLayoutEffect:o0,useMemo:Kd,useReducer:Oh,useRef:jd,useState:function(){return Oh(Ia)},useDebugValue:sc,useDeferredValue:function(u){var c=Oh(Ia),v=c[0],M=c[1];return nc(function(){var R=Yt.transition;Yt.transition={};try{M(u)}finally{Yt.transition=R}},[u]),v},useTransition:function(){var u=Oh(Ia)[0],c=Lr().memoizedState;return[u,c]},useMutableSource:$u,useSyncExternalStore:wo,useId:l0,unstable_isNewReconciler:!1},zl={readContext:zn,useCallback:a0,useContext:zn,useEffect:nc,useImperativeHandle:rc,useInsertionEffect:s0,useLayoutEffect:o0,useMemo:Kd,useReducer:Dh,useRef:jd,useState:function(){return Dh(Ia)},useDebugValue:sc,useDeferredValue:function(u){var c=Dh(Ia),v=c[0],M=c[1];return nc(function(){var R=Yt.transition;Yt.transition={};try{M(u)}finally{Yt.transition=R}},[u]),v},useTransition:function(){var u=Dh(Ia)[0],c=Lr().memoizedState;return[u,c]},useMutableSource:$u,useSyncExternalStore:wo,useId:l0,unstable_isNewReconciler:!1};function Oa(u,c){try{var v="",M=c;do v+=zd(M),M=M.return;while(M);var R=v}catch(I){R=`
Error generating stack: `+I.message+`
`+I.stack}return{value:u,source:c,stack:R}}function Da(u,c){try{console.error(c.value)}catch(v){setTimeout(function(){throw v})}}var Nh=typeof WeakMap=="function"?WeakMap:Map;function Ua(u,c,v){v=qi(-1,v),v.tag=3,v.payload={element:null};var M=c.value;return v.callback=function(){pc||(pc=!0,Wh=M),Da(u,c)},v}function f0(u,c,v){v=qi(-1,v),v.tag=3;var M=u.type.getDerivedStateFromError;if(typeof M=="function"){var R=c.value;v.payload=function(){return M(R)},v.callback=function(){Da(u,c)}}var I=u.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(v.callback=function(){Da(u,c),typeof M!="function"&&(Rs===null?Rs=new Set([this]):Rs.add(this));var W=c.stack;this.componentDidCatch(c.value,{componentStack:W!==null?W:""})}),v}function d0(u,c,v){var M=u.pingCache;if(M===null){M=u.pingCache=new Nh;var R=new Set;M.set(c,R)}else R=M.get(c),R===void 0&&(R=new Set,M.set(c,R));R.has(v)||(R.add(v),u=oa.bind(null,u,c,v),c.then(u,u))}function p0(u){do{var c;if((c=u.tag===13)&&(c=u.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return u;u=u.return}while(u!==null);return null}function m0(u,c,v,M,R){return u.mode&1?(u.flags|=65536,u.lanes=R,u):(u===c?u.flags|=65536:(u.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(c=qi(-1,1),c.tag=2,vs(v,c))),v.lanes|=1),u)}function Qs(u){u.flags|=4}function ac(u,c){if(u!==null&&u.child===c.child)return!0;if(c.flags&16)return!1;for(u=c.child;u!==null;){if(u.flags&12854||u.subtreeFlags&12854)return!1;u=u.sibling}return!0}var Eo,kl,z,Mo;if(lt)Eo=function(u,c){for(var v=c.child;v!==null;){if(v.tag===5||v.tag===6)ve(u,v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===c)break;for(;v.sibling===null;){if(v.return===null||v.return===c)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},kl=function(){},z=function(u,c,v,M,R){if(u=u.memoizedProps,u!==M){var I=c.stateNode,W=Zs(qn.current);v=Me(I,v,u,M,R,W),(c.updateQueue=v)&&Qs(c)}},Mo=function(u,c,v,M){v!==M&&Qs(c)};else if(j){Eo=function(u,c,v,M){for(var R=c.child;R!==null;){if(R.tag===5){var I=R.stateNode;v&&M&&(I=Kn(I,R.type,R.memoizedProps,R)),ve(u,I)}else if(R.tag===6)I=R.stateNode,v&&M&&(I=Ti(I,R.memoizedProps,R)),ve(u,I);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)I=R.child,I!==null&&(I.return=R),Eo(u,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===c)break;for(;R.sibling===null;){if(R.return===null||R.return===c)return;R=R.return}R.sibling.return=R.return,R=R.sibling}};var lc=function(u,c,v,M){for(var R=c.child;R!==null;){if(R.tag===5){var I=R.stateNode;v&&M&&(I=Kn(I,R.type,R.memoizedProps,R)),Xe(u,I)}else if(R.tag===6)I=R.stateNode,v&&M&&(I=Ti(I,R.memoizedProps,R)),Xe(u,I);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)I=R.child,I!==null&&(I.return=R),lc(u,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===c)break;for(;R.sibling===null;){if(R.return===null||R.return===c)return;R=R.return}R.sibling.return=R.return,R=R.sibling}};kl=function(u,c){var v=c.stateNode;if(!ac(u,c)){u=v.containerInfo;var M=Ae(u);lc(M,c,!1,!1),v.pendingChildren=M,Qs(c),Pt(u,M)}},z=function(u,c,v,M,R){var I=u.stateNode,W=u.memoizedProps;if((u=ac(u,c))&&W===M)c.stateNode=I;else{var ne=c.stateNode,Se=Zs(qn.current),Fe=null;W!==M&&(Fe=Me(ne,v,W,M,R,Se)),u&&Fe===null?c.stateNode=I:(I=Ve(I,Fe,v,W,M,c,u,ne),he(I,v,M,R,Se)&&Qs(c),c.stateNode=I,u?Qs(c):Eo(I,c,!1,!1))}},Mo=function(u,c,v,M){v!==M?(u=Zs(Il.current),v=Zs(qn.current),c.stateNode=Ye(M,u,v,c),Qs(c)):c.stateNode=u.stateNode}}else kl=function(){},z=function(){},Mo=function(){};function ji(u,c){if(!Un)switch(u.tailMode){case"hidden":c=u.tail;for(var v=null;c!==null;)c.alternate!==null&&(v=c),c=c.sibling;v===null?u.tail=null:v.sibling=null;break;case"collapsed":v=u.tail;for(var M=null;v!==null;)v.alternate!==null&&(M=v),v=v.sibling;M===null?c||u.tail===null?u.tail=null:u.tail.sibling=null:M.sibling=null}}function At(u){var c=u.alternate!==null&&u.alternate.child===u.child,v=0,M=0;if(c)for(var R=u.child;R!==null;)v|=R.lanes|R.childLanes,M|=R.subtreeFlags&14680064,M|=R.flags&14680064,R.return=u,R=R.sibling;else for(R=u.child;R!==null;)v|=R.lanes|R.childLanes,M|=R.subtreeFlags,M|=R.flags,R.return=u,R=R.sibling;return u.subtreeFlags|=M,u.childLanes=v,c}function bx(u,c,v){var M=c.pendingProps;switch(ar(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(c),null;case 1:return Ri(c.type)&&Yn(),At(c),null;case 3:return M=c.stateNode,Ol(),Lt(Gn),Lt(jt),nt(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(u===null||u.child===null)&&(ju(c)?Qs(c):u===null||u.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,ws!==null&&(Ba(ws),ws=null))),kl(u,c),At(c),null;case 5:jo(c),v=Zs(Il.current);var R=c.type;if(u!==null&&c.stateNode!=null)z(u,c,R,M,v),u.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!M){if(c.stateNode===null)throw Error(o(166));return At(c),null}if(u=Zs(qn.current),ju(c)){if(!Ue)throw Error(o(175));u=Od(c.stateNode,c.type,c.memoizedProps,v,u,c,!Cl),c.updateQueue=u,u!==null&&Qs(c)}else{var I=ce(R,M,v,u,c);Eo(I,c,!1,!1),c.stateNode=I,he(I,R,M,v,u)&&Qs(c)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return At(c),null;case 6:if(u&&c.stateNode!=null)Mo(u,c,u.memoizedProps,M);else{if(typeof M!="string"&&c.stateNode===null)throw Error(o(166));if(u=Zs(Il.current),v=Zs(qn.current),ju(c)){if(!Ue)throw Error(o(176));if(u=c.stateNode,M=c.memoizedProps,(v=Dd(u,M,c,!Cl))&&(R=lr,R!==null))switch(I=(R.mode&1)!==0,R.tag){case 3:ft(R.stateNode.containerInfo,u,M,I);break;case 5:Rt(R.type,R.memoizedProps,R.stateNode,u,M,I)}v&&Qs(c)}else c.stateNode=Ye(M,u,v,c)}return At(c),null;case 13:if(Lt($),M=c.memoizedState,Un&&ki!==null&&c.mode&1&&!(c.flags&128)){for(u=ki;u;)u=qo(u);return Rl(),c.flags|=98560,c}if(M!==null&&M.dehydrated!==null){if(M=ju(c),u===null){if(!M)throw Error(o(318));if(!Ue)throw Error(o(344));if(u=c.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));xh(u,c)}else Rl(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;return At(c),null}return ws!==null&&(Ba(ws),ws=null),c.flags&128?(c.lanes=v,c):(M=M!==null,v=!1,u===null?ju(c):v=u.memoizedState!==null,M&&!v&&(c.child.flags|=8192,c.mode&1&&(u===null||$.current&1?$n===0&&($n=3):jh())),c.updateQueue!==null&&(c.flags|=4),At(c),null);case 4:return Ol(),kl(u,c),u===null&&He(c.stateNode.containerInfo),At(c),null;case 10:return Rh(c.type._context),At(c),null;case 17:return Ri(c.type)&&Yn(),At(c),null;case 19:if(Lt($),R=c.memoizedState,R===null)return At(c),null;if(M=(c.flags&128)!==0,I=R.rendering,I===null)if(M)ji(R,!1);else{if($n!==0||u!==null&&u.flags&128)for(u=c.child;u!==null;){if(I=Ee(u),I!==null){for(c.flags|=128,ji(R,!1),u=I.updateQueue,u!==null&&(c.updateQueue=u,c.flags|=4),c.subtreeFlags=0,u=v,M=c.child;M!==null;)v=M,R=u,v.flags&=14680066,I=v.alternate,I===null?(v.childLanes=0,v.lanes=R,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=I.childLanes,v.lanes=I.lanes,v.child=I.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=I.memoizedProps,v.memoizedState=I.memoizedState,v.updateQueue=I.updateQueue,v.type=I.type,R=I.dependencies,v.dependencies=R===null?null:{lanes:R.lanes,firstContext:R.firstContext}),M=M.sibling;return ot($,$.current&1|2),c.child}u=u.sibling}R.tail!==null&&bi()>dc&&(c.flags|=128,M=!0,ji(R,!1),c.lanes=4194304)}else{if(!M)if(u=Ee(I),u!==null){if(c.flags|=128,M=!0,u=u.updateQueue,u!==null&&(c.updateQueue=u,c.flags|=4),ji(R,!0),R.tail===null&&R.tailMode==="hidden"&&!I.alternate&&!Un)return At(c),null}else 2*bi()-R.renderingStartTime>dc&&v!==1073741824&&(c.flags|=128,M=!0,ji(R,!1),c.lanes=4194304);R.isBackwards?(I.sibling=c.child,c.child=I):(u=R.last,u!==null?u.sibling=I:c.child=I,R.last=I)}return R.tail!==null?(c=R.tail,R.rendering=c,R.tail=c.sibling,R.renderingStartTime=bi(),c.sibling=null,u=$.current,ot($,M?u&1|2:u&1),c):(At(c),null);case 22:case 23:return pp(),M=c.memoizedState!==null,u!==null&&u.memoizedState!==null!==M&&(c.flags|=8192),M&&c.mode&1?Ur&1073741824&&(At(c),lt&&c.subtreeFlags&6&&(c.flags|=8192)):At(c),null;case 24:return null;case 25:return null}throw Error(o(156,c.tag))}var Px=a.ReactCurrentOwner,Ir=!1;function Qn(u,c,v,M){c.child=u===null?i0(c,null,v,M):Pl(c,u.child,v,M)}function g0(u,c,v,M,R){v=v.render;var I=c.ref;return Pa(c,R),M=vn(u,c,v,M,I,R),v=Yd(),u!==null&&!Ir?(c.updateQueue=u.updateQueue,c.flags&=-2053,u.lanes&=~R,yi(u,c,R)):(Un&&v&&Ih(c),c.flags|=1,Qn(u,c,M,R),c.child)}function _0(u,c,v,M,R){if(u===null){var I=v.type;return typeof I=="function"&&!xp(I)&&I.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(c.tag=15,c.type=I,v0(u,c,I,M,R)):(u=Jh(v.type,null,M,c,c.mode,R),u.ref=c.ref,u.return=c,c.child=u)}if(I=u.child,!(u.lanes&R)){var W=I.memoizedProps;if(v=v.compare,v=v!==null?v:oi,v(W,M)&&u.ref===c.ref)return yi(u,c,R)}return c.flags|=1,u=Ao(I,M),u.ref=c.ref,u.return=c,c.child=u}function v0(u,c,v,M,R){if(u!==null&&oi(u.memoizedProps,M)&&u.ref===c.ref)if(Ir=!1,(u.lanes&R)!==0)u.flags&131072&&(Ir=!0);else return c.lanes=u.lanes,yi(u,c,R);return Ms(u,c,v,M,R)}function y0(u,c,v){var M=c.pendingProps,R=M.children,I=u!==null?u.memoizedState:null;if(M.mode==="hidden")if(!(c.mode&1))c.memoizedState={baseLanes:0,cachePool:null},ot(Gl,Ur),Ur|=v;else if(v&1073741824)c.memoizedState={baseLanes:0,cachePool:null},M=I!==null?I.baseLanes:v,ot(Gl,Ur),Ur|=M;else return u=I!==null?I.baseLanes|v:v,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:u,cachePool:null},c.updateQueue=null,ot(Gl,Ur),Ur|=u,null;else I!==null?(M=I.baseLanes|v,c.memoizedState=null):M=v,ot(Gl,Ur),Ur|=M;return Qn(u,c,R,v),c.child}function x0(u,c){var v=c.ref;(u===null&&v!==null||u!==null&&u.ref!==v)&&(c.flags|=512,c.flags|=2097152)}function Ms(u,c,v,M,R){var I=Ri(v)?gs:jt.current;return I=gr(c,I),Pa(c,R),v=vn(u,c,v,M,I,R),M=Yd(),u!==null&&!Ir?(c.updateQueue=u.updateQueue,c.flags&=-2053,u.lanes&=~R,yi(u,c,R)):(Un&&M&&Ih(c),c.flags|=1,Qn(u,c,v,R),c.child)}function S0(u,c,v,M,R){if(Ri(v)){var I=!0;Ni(c)}else I=!1;if(Pa(c,R),c.stateNode===null)u!==null&&(u.alternate=null,c.alternate=null,c.flags|=2),Jg(c,v,M),Tl(c,v,M,R),M=!0;else if(u===null){var W=c.stateNode,ne=c.memoizedProps;W.props=ne;var Se=W.context,Fe=v.contextType;typeof Fe=="object"&&Fe!==null?Fe=zn(Fe):(Fe=Ri(v)?gs:jt.current,Fe=gr(c,Fe));var at=v.getDerivedStateFromProps,Wt=typeof at=="function"||typeof W.getSnapshotBeforeUpdate=="function";Wt||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(ne!==M||Se!==Fe)&&Vd(c,W,M,Fe),gi=!1;var vt=c.memoizedState;W.state=vt,ys(c,M,W,R),Se=c.memoizedState,ne!==M||vt!==Se||Gn.current||gi?(typeof at=="function"&&(Yu(c,v,at,M),Se=c.memoizedState),(ne=gi||Qg(c,v,ne,M,vt,Se,Fe))?(Wt||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(c.flags|=4194308)):(typeof W.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=M,c.memoizedState=Se),W.props=M,W.state=Se,W.context=Fe,M=ne):(typeof W.componentDidMount=="function"&&(c.flags|=4194308),M=!1)}else{W=c.stateNode,Hd(u,c),ne=c.memoizedProps,Fe=c.type===c.elementType?ne:Fi(c.type,ne),W.props=Fe,Wt=c.pendingProps,vt=W.context,Se=v.contextType,typeof Se=="object"&&Se!==null?Se=zn(Se):(Se=Ri(v)?gs:jt.current,Se=gr(c,Se));var Mn=v.getDerivedStateFromProps;(at=typeof Mn=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(ne!==Wt||vt!==Se)&&Vd(c,W,M,Se),gi=!1,vt=c.memoizedState,W.state=vt,ys(c,M,W,R);var pt=c.memoizedState;ne!==Wt||vt!==pt||Gn.current||gi?(typeof Mn=="function"&&(Yu(c,v,Mn,M),pt=c.memoizedState),(Fe=gi||Qg(c,v,Fe,M,vt,pt,Se)||!1)?(at||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(M,pt,Se),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(M,pt,Se)),typeof W.componentDidUpdate=="function"&&(c.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof W.componentDidUpdate!="function"||ne===u.memoizedProps&&vt===u.memoizedState||(c.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||ne===u.memoizedProps&&vt===u.memoizedState||(c.flags|=1024),c.memoizedProps=M,c.memoizedState=pt),W.props=M,W.state=pt,W.context=Se,M=Fe):(typeof W.componentDidUpdate!="function"||ne===u.memoizedProps&&vt===u.memoizedState||(c.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||ne===u.memoizedProps&&vt===u.memoizedState||(c.flags|=1024),M=!1)}return $d(u,c,v,M,I,R)}function $d(u,c,v,M,R,I){x0(u,c);var W=(c.flags&128)!==0;if(!M&&!W)return R&&ba(c,v,!1),yi(u,c,I);M=c.stateNode,Px.current=c;var ne=W&&typeof v.getDerivedStateFromError!="function"?null:M.render();return c.flags|=1,u!==null&&W?(c.child=Pl(c,u.child,null,I),c.child=Pl(c,null,ne,I)):Qn(u,c,ne,I),c.memoizedState=M.state,R&&ba(c,v,!0),c.child}function w0(u){var c=u.stateNode;c.pendingContext?Pr(u,c.pendingContext,c.pendingContext!==c.context):c.context&&Pr(u,c.context,!1),Xd(u,c.containerInfo)}function E0(u,c,v,M,R){return Rl(),Ku(R),c.flags|=256,Qn(u,c,v,M),c.child}var Fh={dehydrated:null,treeContext:null,retryLane:0};function Qr(u){return{baseLanes:u,cachePool:null}}function M0(u,c,v){var M=c.pendingProps,R=$.current,I=!1,W=(c.flags&128)!==0,ne;if((ne=W)||(ne=u!==null&&u.memoizedState===null?!1:(R&2)!==0),ne?(I=!0,c.flags&=-129):(u===null||u.memoizedState!==null)&&(R|=1),ot($,R&1),u===null)return Wd(c),u=c.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?(c.mode&1?Vu(u)?c.lanes=8:c.lanes=1073741824:c.lanes=1,null):(R=M.children,u=M.fallback,I?(M=c.mode,I=c.child,R={mode:"hidden",children:R},!(M&1)&&I!==null?(I.childLanes=0,I.pendingProps=R):I=vc(R,M,0,null),u=la(u,M,v,null),I.return=c,u.return=c,I.sibling=u,c.child=I,c.child.memoizedState=Qr(v),c.memoizedState=Fh,u):ep(c,R));if(R=u.memoizedState,R!==null){if(ne=R.dehydrated,ne!==null){if(W)return c.flags&256?(c.flags&=-257,zh(u,c,v,Error(o(422)))):c.memoizedState!==null?(c.child=u.child,c.flags|=128,null):(I=M.fallback,R=c.mode,M=vc({mode:"visible",children:M.children},R,0,null),I=la(I,R,v,null),I.flags|=2,M.return=c,I.return=c,M.sibling=I,c.child=M,c.mode&1&&Pl(c,u.child,null,v),c.child.memoizedState=Qr(v),c.memoizedState=Fh,I);if(!(c.mode&1))c=zh(u,c,v,null);else if(Vu(ne))c=zh(u,c,v,Error(o(419)));else if(M=(v&u.childLanes)!==0,Ir||M){if(M=ai,M!==null){switch(v&-v){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}M=I&(M.suspendedLanes|v)?0:I,M!==0&&M!==R.retryLane&&(R.retryLane=M,Jr(u,M,-1))}jh(),c=zh(u,c,v,Error(o(421)))}else Ca(ne)?(c.flags|=128,c.child=u.child,c=aa.bind(null,u),_l(ne,c),c=null):(v=R.treeContext,Ue&&(ki=yh(ne),lr=c,Un=!0,ws=null,Cl=!1,v!==null&&(vr[yr++]=xo,vr[yr++]=Ss,vr[yr++]=Zo,xo=v.id,Ss=v.overflow,Zo=c)),c=ep(c,c.pendingProps.children),c.flags|=4096);return c}return I?(M=A0(u,c,M.children,M.fallback,v),I=c.child,R=u.child.memoizedState,I.memoizedState=R===null?Qr(v):{baseLanes:R.baseLanes|v,cachePool:null},I.childLanes=u.childLanes&~v,c.memoizedState=Fh,M):(v=T0(u,c,M.children,v),c.memoizedState=null,v)}return I?(M=A0(u,c,M.children,M.fallback,v),I=c.child,R=u.child.memoizedState,I.memoizedState=R===null?Qr(v):{baseLanes:R.baseLanes|v,cachePool:null},I.childLanes=u.childLanes&~v,c.memoizedState=Fh,M):(v=T0(u,c,M.children,v),c.memoizedState=null,v)}function ep(u,c){return c=vc({mode:"visible",children:c},u.mode,0,null),c.return=u,u.child=c}function T0(u,c,v,M){var R=u.child;return u=R.sibling,v=Ao(R,{mode:"visible",children:v}),!(c.mode&1)&&(v.lanes=M),v.return=c,v.sibling=null,u!==null&&(M=c.deletions,M===null?(c.deletions=[u],c.flags|=16):M.push(u)),c.child=v}function A0(u,c,v,M,R){var I=c.mode;u=u.child;var W=u.sibling,ne={mode:"hidden",children:v};return!(I&1)&&c.child!==u?(v=c.child,v.childLanes=0,v.pendingProps=ne,c.deletions=null):(v=Ao(u,ne),v.subtreeFlags=u.subtreeFlags&14680064),W!==null?M=Ao(W,M):(M=la(M,I,R,null),M.flags|=2),M.return=c,v.return=c,v.sibling=M,c.child=v,M}function zh(u,c,v,M){return M!==null&&Ku(M),Pl(c,u.child,null,v),u=ep(c,c.pendingProps.children),u.flags|=2,c.memoizedState=null,u}function $o(u,c,v){u.lanes|=c;var M=u.alternate;M!==null&&(M.lanes|=c),bh(u.return,c,v)}function tp(u,c,v,M,R){var I=u.memoizedState;I===null?u.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:M,tail:v,tailMode:R}:(I.isBackwards=c,I.rendering=null,I.renderingStartTime=0,I.last=M,I.tail=v,I.tailMode=R)}function C0(u,c,v){var M=c.pendingProps,R=M.revealOrder,I=M.tail;if(Qn(u,c,M.children,v),M=$.current,M&2)M=M&1|2,c.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=c.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&$o(u,v,c);else if(u.tag===19)$o(u,v,c);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break e;for(;u.sibling===null;){if(u.return===null||u.return===c)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}M&=1}if(ot($,M),!(c.mode&1))c.memoizedState=null;else switch(R){case"forwards":for(v=c.child,R=null;v!==null;)u=v.alternate,u!==null&&Ee(u)===null&&(R=v),v=v.sibling;v=R,v===null?(R=c.child,c.child=null):(R=v.sibling,v.sibling=null),tp(c,!1,R,v,I);break;case"backwards":for(v=null,R=c.child,c.child=null;R!==null;){if(u=R.alternate,u!==null&&Ee(u)===null){c.child=R;break}u=R.sibling,R.sibling=v,v=R,R=u}tp(c,!0,v,null,I);break;case"together":tp(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function yi(u,c,v){if(u!==null&&(c.dependencies=u.dependencies),Xl|=c.lanes,!(v&c.childLanes))return null;if(u!==null&&c.child!==u.child)throw Error(o(153));if(c.child!==null){for(u=c.child,v=Ao(u,u.pendingProps),c.child=v,v.return=c;u.sibling!==null;)u=u.sibling,v=v.sibling=Ao(u,u.pendingProps),v.return=c;v.sibling=null}return c.child}function Lx(u,c,v){switch(c.tag){case 3:w0(c),Rl();break;case 5:r0(c);break;case 1:Ri(c.type)&&Ni(c);break;case 4:Xd(c,c.stateNode.containerInfo);break;case 10:kd(c,c.type._context,c.memoizedProps.value);break;case 13:var M=c.memoizedState;if(M!==null)return M.dehydrated!==null?(ot($,$.current&1),c.flags|=128,null):v&c.child.childLanes?M0(u,c,v):(ot($,$.current&1),u=yi(u,c,v),u!==null?u.sibling:null);ot($,$.current&1);break;case 19:if(M=(v&c.childLanes)!==0,u.flags&128){if(M)return C0(u,c,v);c.flags|=128}var R=c.memoizedState;if(R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),ot($,$.current),M)break;return null;case 22:case 23:return c.lanes=0,y0(u,c,v)}return yi(u,c,v)}function Ix(u,c){switch(ar(c),c.tag){case 1:return Ri(c.type)&&Yn(),u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 3:return Ol(),Lt(Gn),Lt(jt),nt(),u=c.flags,u&65536&&!(u&128)?(c.flags=u&-65537|128,c):null;case 5:return jo(c),null;case 13:if(Lt($),u=c.memoizedState,u!==null&&u.dehydrated!==null){if(c.alternate===null)throw Error(o(340));Rl()}return u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 19:return Lt($),null;case 4:return Ol(),null;case 10:return Rh(c.type._context),null;case 22:case 23:return pp(),null;case 24:return null;default:return null}}var kh=!1,Na=!1,Ox=typeof WeakSet=="function"?WeakSet:Set,je=null;function uc(u,c){var v=u.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(M){$i(u,c,M)}else v.current=null}function np(u,c,v){try{v()}catch(M){$i(u,c,M)}}var R0=!1;function ip(u,c){for(te(u.containerInfo),je=c;je!==null;)if(u=je,c=u.child,(u.subtreeFlags&1028)!==0&&c!==null)c.return=u,je=c;else for(;je!==null;){u=je;try{var v=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var M=v.memoizedProps,R=v.memoizedState,I=u.stateNode,W=I.getSnapshotBeforeUpdate(u.elementType===u.type?M:Fi(u.type,M),R);I.__reactInternalSnapshotBeforeUpdate=W}break;case 3:lt&&et(u.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ne){$i(u,u.return,ne)}if(c=u.sibling,c!==null){c.return=u.return,je=c;break}je=u.return}return v=R0,R0=!1,v}function Ts(u,c,v){var M=c.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var R=M=M.next;do{if((R.tag&u)===u){var I=R.destroy;R.destroy=void 0,I!==void 0&&np(c,v,I)}R=R.next}while(R!==M)}}function ea(u,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var v=c=c.next;do{if((v.tag&u)===u){var M=v.create;v.destroy=M()}v=v.next}while(v!==c)}}function rp(u){var c=u.ref;if(c!==null){var v=u.stateNode;switch(u.tag){case 5:u=me(v);break;default:u=v}typeof c=="function"?c(u):c.current=u}}function sp(u,c,v){if(Ws&&typeof Ws.onCommitFiberUnmount=="function")try{Ws.onCommitFiberUnmount(Mh,c)}catch{}switch(c.tag){case 0:case 11:case 14:case 15:if(u=c.updateQueue,u!==null&&(u=u.lastEffect,u!==null)){var M=u=u.next;do{var R=M,I=R.destroy;R=R.tag,I!==void 0&&(R&2||R&4)&&np(c,v,I),M=M.next}while(M!==u)}break;case 1:if(uc(c,v),u=c.stateNode,typeof u.componentWillUnmount=="function")try{u.props=c.memoizedProps,u.state=c.memoizedState,u.componentWillUnmount()}catch(W){$i(c,v,W)}break;case 5:uc(c,v);break;case 4:lt?ap(u,c,v):j&&j&&(c=c.stateNode.containerInfo,v=Ae(c),ln(c,v))}}function b0(u,c,v){for(var M=c;;)if(sp(u,M,v),M.child===null||lt&&M.tag===4){if(M===c)break;for(;M.sibling===null;){if(M.return===null||M.return===c)return;M=M.return}M.sibling.return=M.return,M=M.sibling}else M.child.return=M,M=M.child}function Js(u){var c=u.alternate;c!==null&&(u.alternate=null,Js(c)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(c=u.stateNode,c!==null&&ut(c)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function Bh(u){return u.tag===5||u.tag===3||u.tag===4}function ta(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||Bh(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function Or(u){if(lt){e:{for(var c=u.return;c!==null;){if(Bh(c))break e;c=c.return}throw Error(o(160))}var v=c;switch(v.tag){case 5:c=v.stateNode,v.flags&32&&(Ct(c),v.flags&=-33),v=ta(u),Hh(u,v,c);break;case 3:case 4:c=v.stateNode.containerInfo,v=ta(u),op(u,v,c);break;default:throw Error(o(161))}}}function op(u,c,v){var M=u.tag;if(M===5||M===6)u=u.stateNode,c?Be(v,u,c):ht(v,u);else if(M!==4&&(u=u.child,u!==null))for(op(u,c,v),u=u.sibling;u!==null;)op(u,c,v),u=u.sibling}function Hh(u,c,v){var M=u.tag;if(M===5||M===6)u=u.stateNode,c?un(v,u,c):Ne(v,u);else if(M!==4&&(u=u.child,u!==null))for(Hh(u,c,v),u=u.sibling;u!==null;)Hh(u,c,v),u=u.sibling}function ap(u,c,v){for(var M=c,R=!1,I,W;;){if(!R){R=M.return;e:for(;;){if(R===null)throw Error(o(160));switch(I=R.stateNode,R.tag){case 5:W=!1;break e;case 3:I=I.containerInfo,W=!0;break e;case 4:I=I.containerInfo,W=!0;break e}R=R.return}R=!0}if(M.tag===5||M.tag===6)b0(u,M,v),W?kt(I,M.stateNode):gn(I,M.stateNode);else if(M.tag===18)W?ge(I,M.stateNode):xe(I,M.stateNode);else if(M.tag===4){if(M.child!==null){I=M.stateNode.containerInfo,W=!0,M.child.return=M,M=M.child;continue}}else if(sp(u,M,v),M.child!==null){M.child.return=M,M=M.child;continue}if(M===c)break;for(;M.sibling===null;){if(M.return===null||M.return===c)return;M=M.return,M.tag===4&&(R=!1)}M.sibling.return=M.return,M=M.sibling}}function Fa(u,c){if(lt){switch(c.tag){case 0:case 11:case 14:case 15:Ts(3,c,c.return),ea(3,c),Ts(5,c,c.return);return;case 1:return;case 5:var v=c.stateNode;if(v!=null){var M=c.memoizedProps;u=u!==null?u.memoizedProps:M;var R=c.type,I=c.updateQueue;c.updateQueue=null,I!==null&&bt(v,I,R,u,M,c)}return;case 6:if(c.stateNode===null)throw Error(o(162));v=c.memoizedProps,Ge(c.stateNode,u!==null?u.memoizedProps:v,v);return;case 3:Ue&&u!==null&&u.memoizedState.isDehydrated&&ae(c.stateNode.containerInfo);return;case 12:return;case 13:As(c);return;case 19:As(c);return;case 17:return}throw Error(o(163))}switch(c.tag){case 0:case 11:case 14:case 15:Ts(3,c,c.return),ea(3,c),Ts(5,c,c.return);return;case 12:return;case 13:As(c);return;case 19:As(c);return;case 3:Ue&&u!==null&&u.memoizedState.isDehydrated&&ae(c.stateNode.containerInfo);break;case 22:case 23:return}e:if(j){switch(c.tag){case 1:case 5:case 6:break e;case 3:case 4:c=c.stateNode,ln(c.containerInfo,c.pendingChildren);break e}throw Error(o(163))}}function As(u){var c=u.updateQueue;if(c!==null){u.updateQueue=null;var v=u.stateNode;v===null&&(v=u.stateNode=new Ox),c.forEach(function(M){var R=F0.bind(null,u,M);v.has(M)||(v.add(M),M.then(R,R))})}}function P0(u,c){for(je=c;je!==null;){c=je;var v=c.deletions;if(v!==null)for(var M=0;M<v.length;M++){var R=v[M];try{var I=u;lt?ap(I,R,c):b0(I,R,c);var W=R.alternate;W!==null&&(W.return=null),R.return=null}catch(mt){$i(R,c,mt)}}if(v=c.child,c.subtreeFlags&12854&&v!==null)v.return=c,je=v;else for(;je!==null;){c=je;try{var ne=c.flags;if(ne&32&&lt&&Ct(c.stateNode),ne&512){var Se=c.alternate;if(Se!==null){var Fe=Se.ref;Fe!==null&&(typeof Fe=="function"?Fe(null):Fe.current=null)}}if(ne&8192)switch(c.tag){case 13:if(c.memoizedState!==null){var at=c.alternate;(at===null||at.memoizedState===null)&&(fp=bi())}break;case 22:var Wt=c.memoizedState!==null,vt=c.alternate,Mn=vt!==null&&vt.memoizedState!==null;if(v=c,lt){e:if(M=v,R=Wt,I=null,lt)for(var pt=M;;){if(pt.tag===5){if(I===null){I=pt;var tr=pt.stateNode;R?St(tr):sn(pt.stateNode,pt.memoizedProps)}}else if(pt.tag===6){if(I===null){var Fr=pt.stateNode;R?st(Fr):ie(Fr,pt.memoizedProps)}}else if((pt.tag!==22&&pt.tag!==23||pt.memoizedState===null||pt===M)&&pt.child!==null){pt.child.return=pt,pt=pt.child;continue}if(pt===M)break;for(;pt.sibling===null;){if(pt.return===null||pt.return===M)break e;I===pt&&(I=null),pt=pt.return}I===pt&&(I=null),pt.sibling.return=pt.return,pt=pt.sibling}}if(Wt&&!Mn&&v.mode&1){je=v;for(var ue=v.child;ue!==null;){for(v=je=ue;je!==null;){M=je;var re=M.child;switch(M.tag){case 0:case 11:case 14:case 15:Ts(4,M,M.return);break;case 1:uc(M,M.return);var ye=M.stateNode;if(typeof ye.componentWillUnmount=="function"){var Je=M.return;try{ye.props=M.memoizedProps,ye.state=M.memoizedState,ye.componentWillUnmount()}catch(mt){$i(M,Je,mt)}}break;case 5:uc(M,M.return);break;case 22:if(M.memoizedState!==null){lp(v);continue}}re!==null?(re.return=M,je=re):lp(v)}ue=ue.sibling}}}switch(ne&4102){case 2:Or(c),c.flags&=-3;break;case 6:Or(c),c.flags&=-3,Fa(c.alternate,c);break;case 4096:c.flags&=-4097;break;case 4100:c.flags&=-4097,Fa(c.alternate,c);break;case 4:Fa(c.alternate,c)}}catch(mt){$i(c,c.return,mt)}if(v=c.sibling,v!==null){v.return=c.return,je=v;break}je=c.return}}}function Dx(u,c,v){je=u,cc(u)}function cc(u,c,v){for(var M=(u.mode&1)!==0;je!==null;){var R=je,I=R.child;if(R.tag===22&&M){var W=R.memoizedState!==null||kh;if(!W){var ne=R.alternate,Se=ne!==null&&ne.memoizedState!==null||Na;ne=kh;var Fe=Na;if(kh=W,(Na=Se)&&!Fe)for(je=R;je!==null;)W=je,Se=W.child,W.tag===22&&W.memoizedState!==null?Ii(R):Se!==null?(Se.return=W,je=Se):Ii(R);for(;I!==null;)je=I,cc(I),I=I.sibling;je=R,kh=ne,Na=Fe}L0(u)}else R.subtreeFlags&8772&&I!==null?(I.return=R,je=I):L0(u)}}function L0(u){for(;je!==null;){var c=je;if(c.flags&8772){var v=c.alternate;try{if(c.flags&8772)switch(c.tag){case 0:case 11:case 15:Na||ea(5,c);break;case 1:var M=c.stateNode;if(c.flags&4&&!Na)if(v===null)M.componentDidMount();else{var R=c.elementType===c.type?v.memoizedProps:Fi(c.type,v.memoizedProps);M.componentDidUpdate(R,v.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var I=c.updateQueue;I!==null&&Ph(c,I,M);break;case 3:var W=c.updateQueue;if(W!==null){if(v=null,c.child!==null)switch(c.child.tag){case 5:v=me(c.child.stateNode);break;case 1:v=c.child.stateNode}Ph(c,W,v)}break;case 5:var ne=c.stateNode;v===null&&c.flags&4&&Ke(ne,c.type,c.memoizedProps,c);break;case 6:break;case 4:break;case 12:break;case 13:if(Ue&&c.memoizedState===null){var Se=c.alternate;if(Se!==null){var Fe=Se.memoizedState;if(Fe!==null){var at=Fe.dehydrated;at!==null&&_e(at)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Na||c.flags&512&&rp(c)}catch(Wt){$i(c,c.return,Wt)}}if(c===u){je=null;break}if(v=c.sibling,v!==null){v.return=c.return,je=v;break}je=c.return}}function lp(u){for(;je!==null;){var c=je;if(c===u){je=null;break}var v=c.sibling;if(v!==null){v.return=c.return,je=v;break}je=c.return}}function Ii(u){for(;je!==null;){var c=je;try{switch(c.tag){case 0:case 11:case 15:var v=c.return;try{ea(4,c)}catch(Se){$i(c,v,Se)}break;case 1:var M=c.stateNode;if(typeof M.componentDidMount=="function"){var R=c.return;try{M.componentDidMount()}catch(Se){$i(c,R,Se)}}var I=c.return;try{rp(c)}catch(Se){$i(c,I,Se)}break;case 5:var W=c.return;try{rp(c)}catch(Se){$i(c,W,Se)}}}catch(Se){$i(c,c.return,Se)}if(c===u){je=null;break}var ne=c.sibling;if(ne!==null){ne.return=c.return,je=ne;break}je=c.return}}var Bl=0,hc=1,Dr=2,Hl=3,za=4;if(typeof Symbol=="function"&&Symbol.for){var Cs=Symbol.for;Bl=Cs("selector.component"),hc=Cs("selector.has_pseudo_class"),Dr=Cs("selector.role"),Hl=Cs("selector.test_id"),za=Cs("selector.text")}function Vh(u){var c=we(u);if(c!=null){if(typeof c.memoizedProps["data-testname"]!="string")throw Error(o(364));return c}if(u=Nt(u),u===null)throw Error(o(362));return u.stateNode.current}function Bi(u,c){switch(c.$$typeof){case Bl:if(u.type===c.value)return!0;break;case hc:e:{c=c.value,u=[u,0];for(var v=0;v<u.length;){var M=u[v++],R=u[v++],I=c[R];if(M.tag!==5||!k(M)){for(;I!=null&&Bi(M,I);)R++,I=c[R];if(R===c.length){c=!0;break e}else for(M=M.child;M!==null;)u.push(M,R),M=M.sibling}}c=!1}return c;case Dr:if(u.tag===5&&fe(u.stateNode,c.value))return!0;break;case za:if((u.tag===5||u.tag===6)&&(u=X(u),u!==null&&0<=u.indexOf(c.value)))return!0;break;case Hl:if(u.tag===5&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===c.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function fc(u){switch(u.$$typeof){case Bl:return"<"+(O(u.value)||"Unknown")+">";case hc:return":has("+(fc(u)||"")+")";case Dr:return'[role="'+u.value+'"]';case za:return'"'+u.value+'"';case Hl:return'[data-testname="'+u.value+'"]';default:throw Error(o(365))}}function I0(u,c){var v=[];u=[u,0];for(var M=0;M<u.length;){var R=u[M++],I=u[M++],W=c[I];if(R.tag!==5||!k(R)){for(;W!=null&&Bi(R,W);)I++,W=c[I];if(I===c.length)v.push(R);else for(R=R.child;R!==null;)u.push(R,I),R=R.sibling}}return v}function up(u,c){if(!xt)throw Error(o(363));u=Vh(u),u=I0(u,c),c=[],u=Array.from(u);for(var v=0;v<u.length;){var M=u[v++];if(M.tag===5)k(M)||c.push(M.stateNode);else for(M=M.child;M!==null;)u.push(M),M=M.sibling}return c}var Ux=Math.ceil,Vl=a.ReactCurrentDispatcher,cp=a.ReactCurrentOwner,Nn=a.ReactCurrentBatchConfig,Kt=0,ai=null,li=null,Jn=0,Ur=0,Gl=Ci(0),$n=0,Wl=null,Xl=0,Gh=0,hp=0,Yl=null,Ki=null,fp=0,dc=1/0;function ka(){dc=bi()+500}var pc=!1,Wh=null,Rs=null,Xh=!1,To=null,mc=0,gc=0,Yh=null,qh=-1,ql=0;function Qi(){return Kt&6?bi():qh!==-1?qh:qh=bi()}function $s(u){return u.mode&1?Kt&2&&Jn!==0?Jn&-Jn:Cx.transition!==null?(ql===0&&(u=xl,xl<<=1,!(xl&4194240)&&(xl=64),ql=u),ql):(u=_n,u!==0?u:Le()):1}function Jr(u,c,v){if(50<gc)throw gc=0,Yh=null,Error(o(185));var M=Zl(u,c);return M===null?null:(wl(M,c,v),(!(Kt&2)||M!==ai)&&(M===ai&&(!(Kt&2)&&(Gh|=c),$n===4&&na(M,Jn)),Mt(M,v),c===1&&Kt===0&&!(u.mode&1)&&(ka(),Th&&_s())),M)}function Zl(u,c){u.lanes|=c;var v=u.alternate;for(v!==null&&(v.lanes|=c),v=u,u=u.return;u!==null;)u.childLanes|=c,v=u.alternate,v!==null&&(v.childLanes|=c),v=u,u=u.return;return v.tag===3?v.stateNode:null}function Mt(u,c){var v=u.callbackNode;Sx(u,c);var M=Gu(u,u===ai?Jn:0);if(M===0)v!==null&&Zg(v),u.callbackNode=null,u.callbackPriority=0;else if(c=M&-M,u.callbackPriority!==c){if(v!=null&&Zg(v),c===1)u.tag===0?Ax(U0.bind(null,u)):jg(U0.bind(null,u)),$e?rt(function(){Kt===0&&_s()}):Eh(Wu,_s),v=null;else{switch(qg(M)){case 1:v=Wu;break;case 4:v=Mx;break;case 16:v=Nd;break;case 536870912:v=Tx;break;default:v=Nd}v=Qh(v,O0.bind(null,u))}u.callbackPriority=c,u.callbackNode=v}}function O0(u,c){if(qh=-1,ql=0,Kt&6)throw Error(o(327));var v=u.callbackNode;if(sa()&&u.callbackNode!==v)return null;var M=Gu(u,u===ai?Jn:0);if(M===0)return null;if(M&30||M&u.expiredLanes||c)c=Ji(u,M);else{c=M;var R=Kt;Kt|=2;var I=mp();(ai!==u||Jn!==c)&&(ka(),eo(u,c));do try{gp();break}catch(ne){Zh(u,ne)}while(1);Ch(),Vl.current=I,Kt=R,li!==null?c=0:(ai=null,Jn=0,c=$n)}if(c!==0){if(c===2&&(R=Sh(u),R!==0&&(M=R,c=dp(u,R))),c===1)throw v=Wl,eo(u,0),na(u,M),Mt(u,bi()),v;if(c===6)na(u,M);else{if(R=u.current.alternate,!(M&30)&&!D0(R)&&(c=Ji(u,M),c===2&&(I=Sh(u),I!==0&&(M=I,c=dp(u,I))),c===1))throw v=Wl,eo(u,0),na(u,M),Mt(u,bi()),v;switch(u.finishedWork=R,u.finishedLanes=M,c){case 0:case 1:throw Error(o(345));case 2:ra(u,Ki);break;case 3:if(na(u,M),(M&130023424)===M&&(c=fp+500-bi(),10<c)){if(Gu(u,0)!==0)break;if(R=u.suspendedLanes,(R&M)!==M){Qi(),u.pingedLanes|=u.suspendedLanes&R;break}u.timeoutHandle=qe(ra.bind(null,u,Ki),c);break}ra(u,Ki);break;case 4:if(na(u,M),(M&4194240)===M)break;for(c=u.eventTimes,R=-1;0<M;){var W=31-_r(M);I=1<<W,W=c[W],W>R&&(R=W),M&=~I}if(M=R,M=bi()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*Ux(M/1960))-M,10<M){u.timeoutHandle=qe(ra.bind(null,u,Ki),M);break}ra(u,Ki);break;case 5:ra(u,Ki);break;default:throw Error(o(329))}}}return Mt(u,bi()),u.callbackNode===v?O0.bind(null,u):null}function dp(u,c){var v=Yl;return u.current.memoizedState.isDehydrated&&(eo(u,c).flags|=256),u=Ji(u,c),u!==2&&(c=Ki,Ki=v,c!==null&&Ba(c)),u}function Ba(u){Ki===null?Ki=u:Ki.push.apply(Ki,u)}function D0(u){for(var c=u;;){if(c.flags&16384){var v=c.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var M=0;M<v.length;M++){var R=v[M],I=R.getSnapshot;R=R.value;try{if(!Xs(I(),R))return!1}catch{return!1}}}if(v=c.child,c.subtreeFlags&16384&&v!==null)v.return=c,c=v;else{if(c===u)break;for(;c.sibling===null;){if(c.return===null||c.return===u)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function na(u,c){for(c&=~hp,c&=~Gh,u.suspendedLanes|=c,u.pingedLanes&=~c,u=u.expirationTimes;0<c;){var v=31-_r(c),M=1<<v;u[v]=-1,c&=~M}}function U0(u){if(Kt&6)throw Error(o(327));sa();var c=Gu(u,0);if(!(c&1))return Mt(u,bi()),null;var v=Ji(u,c);if(u.tag!==0&&v===2){var M=Sh(u);M!==0&&(c=M,v=dp(u,M))}if(v===1)throw v=Wl,eo(u,0),na(u,c),Mt(u,bi()),v;if(v===6)throw Error(o(345));return u.finishedWork=u.current.alternate,u.finishedLanes=c,ra(u,Ki),Mt(u,bi()),null}function Nr(u){To!==null&&To.tag===0&&!(Kt&6)&&sa();var c=Kt;Kt|=1;var v=Nn.transition,M=_n;try{if(Nn.transition=null,_n=1,u)return u()}finally{_n=M,Nn.transition=v,Kt=c,!(Kt&6)&&_s()}}function pp(){Ur=Gl.current,Lt(Gl)}function eo(u,c){u.finishedWork=null,u.finishedLanes=0;var v=u.timeoutHandle;if(v!==wt&&(u.timeoutHandle=wt,Tt(v)),li!==null)for(v=li.return;v!==null;){var M=v;switch(ar(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&Yn();break;case 3:Ol(),Lt(Gn),Lt(jt),nt();break;case 5:jo(M);break;case 4:Ol();break;case 13:Lt($);break;case 19:Lt($);break;case 10:Rh(M.type._context);break;case 22:case 23:pp()}v=v.return}if(ai=u,li=u=Ao(u.current,null),Jn=Ur=c,$n=0,Wl=null,hp=Gh=Xl=0,Ki=Yl=null,Ys!==null){for(c=0;c<Ys.length;c++)if(v=Ys[c],M=v.interleaved,M!==null){v.interleaved=null;var R=M.next,I=v.pending;if(I!==null){var W=I.next;I.next=R,M.next=W}v.pending=M}Ys=null}return u}function Zh(u,c){do{var v=li;try{if(Ch(),Ft.current=Fl,ur){for(var M=Ot.memoizedState;M!==null;){var R=M.queue;R!==null&&(R.pending=null),M=M.next}ur=!1}if(kn=0,Li=Pi=Ot=null,Ko=!1,Ju=0,cp.current=null,v===null||v.return===null){$n=1,Wl=c,li=null;break}e:{var I=u,W=v.return,ne=v,Se=c;if(c=Jn,ne.flags|=32768,Se!==null&&typeof Se=="object"&&typeof Se.then=="function"){var Fe=Se,at=ne,Wt=at.tag;if(!(at.mode&1)&&(Wt===0||Wt===11||Wt===15)){var vt=at.alternate;vt?(at.updateQueue=vt.updateQueue,at.memoizedState=vt.memoizedState,at.lanes=vt.lanes):(at.updateQueue=null,at.memoizedState=null)}var Mn=p0(W);if(Mn!==null){Mn.flags&=-257,m0(Mn,W,ne,I,c),Mn.mode&1&&d0(I,Fe,c),c=Mn,Se=Fe;var pt=c.updateQueue;if(pt===null){var tr=new Set;tr.add(Se),c.updateQueue=tr}else pt.add(Se);break e}else{if(!(c&1)){d0(I,Fe,c),jh();break e}Se=Error(o(426))}}else if(Un&&ne.mode&1){var Fr=p0(W);if(Fr!==null){!(Fr.flags&65536)&&(Fr.flags|=256),m0(Fr,W,ne,I,c),Ku(Se);break e}}I=Se,$n!==4&&($n=2),Yl===null?Yl=[I]:Yl.push(I),Se=Oa(Se,ne),ne=W;do{switch(ne.tag){case 3:ne.flags|=65536,c&=-c,ne.lanes|=c;var ue=Ua(ne,Se,c);Dn(ne,ue);break e;case 1:I=Se;var re=ne.type,ye=ne.stateNode;if(!(ne.flags&128)&&(typeof re.getDerivedStateFromError=="function"||ye!==null&&typeof ye.componentDidCatch=="function"&&(Rs===null||!Rs.has(ye)))){ne.flags|=65536,c&=-c,ne.lanes|=c;var Je=f0(ne,I,c);Dn(ne,Je);break e}}ne=ne.return}while(ne!==null)}_c(v)}catch(mt){c=mt,li===v&&v!==null&&(li=v=v.return);continue}break}while(1)}function mp(){var u=Vl.current;return Vl.current=Fl,u===null?Fl:u}function jh(){($n===0||$n===3||$n===2)&&($n=4),ai===null||!(Xl&268435455)&&!(Gh&268435455)||na(ai,Jn)}function Ji(u,c){var v=Kt;Kt|=2;var M=mp();ai===u&&Jn===c||eo(u,c);do try{ia();break}catch(R){Zh(u,R)}while(1);if(Ch(),Kt=v,Vl.current=M,li!==null)throw Error(o(261));return ai=null,Jn=0,$n}function ia(){for(;li!==null;)_p(li)}function gp(){for(;li!==null&&!wx();)_p(li)}function _p(u){var c=yp(u.alternate,u,Ur);u.memoizedProps=u.pendingProps,c===null?_c(u):li=c,cp.current=null}function _c(u){var c=u;do{var v=c.alternate;if(u=c.return,c.flags&32768){if(v=Ix(v,c),v!==null){v.flags&=32767,li=v;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{$n=6,li=null;return}}else if(v=bx(v,c,Ur),v!==null){li=v;return}if(c=c.sibling,c!==null){li=c;return}li=c=u}while(c!==null);$n===0&&($n=5)}function ra(u,c){var v=_n,M=Nn.transition;try{Nn.transition=null,_n=1,vp(u,c,v)}finally{Nn.transition=M,_n=v}return null}function vp(u,c,v){do sa();while(To!==null);if(Kt&6)throw Error(o(327));var M=u.finishedWork,R=u.finishedLanes;if(M===null)return null;if(u.finishedWork=null,u.finishedLanes=0,M===u.current)throw Error(o(177));u.callbackNode=null,u.callbackPriority=0;var I=M.lanes|M.childLanes;if(Yg(u,I),u===ai&&(li=ai=null,Jn=0),!(M.subtreeFlags&2064)&&!(M.flags&2064)||Xh||(Xh=!0,Qh(Nd,function(){return sa(),null})),I=(M.flags&15990)!==0,M.subtreeFlags&15990||I){I=Nn.transition,Nn.transition=null;var W=_n;_n=1;var ne=Kt;Kt|=4,cp.current=null,ip(u,M),P0(u,M),ee(u.containerInfo),u.current=M,Dx(M),Ex(),Kt=ne,_n=W,Nn.transition=I}else u.current=M;if(Xh&&(Xh=!1,To=u,mc=R),I=u.pendingLanes,I===0&&(Rs=null),On(M.stateNode),Mt(u,bi()),c!==null)for(v=u.onRecoverableError,M=0;M<c.length;M++)v(c[M]);if(pc)throw pc=!1,u=Wh,Wh=null,u;return mc&1&&u.tag!==0&&sa(),I=u.pendingLanes,I&1?u===Yh?gc++:(gc=0,Yh=u):gc=0,_s(),null}function sa(){if(To!==null){var u=qg(mc),c=Nn.transition,v=_n;try{if(Nn.transition=null,_n=16>u?16:u,To===null)var M=!1;else{if(u=To,To=null,mc=0,Kt&6)throw Error(o(331));var R=Kt;for(Kt|=4,je=u.current;je!==null;){var I=je,W=I.child;if(je.flags&16){var ne=I.deletions;if(ne!==null){for(var Se=0;Se<ne.length;Se++){var Fe=ne[Se];for(je=Fe;je!==null;){var at=je;switch(at.tag){case 0:case 11:case 15:Ts(8,at,I)}var Wt=at.child;if(Wt!==null)Wt.return=at,je=Wt;else for(;je!==null;){at=je;var vt=at.sibling,Mn=at.return;if(Js(at),at===Fe){je=null;break}if(vt!==null){vt.return=Mn,je=vt;break}je=Mn}}}var pt=I.alternate;if(pt!==null){var tr=pt.child;if(tr!==null){pt.child=null;do{var Fr=tr.sibling;tr.sibling=null,tr=Fr}while(tr!==null)}}je=I}}if(I.subtreeFlags&2064&&W!==null)W.return=I,je=W;else e:for(;je!==null;){if(I=je,I.flags&2048)switch(I.tag){case 0:case 11:case 15:Ts(9,I,I.return)}var ue=I.sibling;if(ue!==null){ue.return=I.return,je=ue;break e}je=I.return}}var re=u.current;for(je=re;je!==null;){W=je;var ye=W.child;if(W.subtreeFlags&2064&&ye!==null)ye.return=W,je=ye;else e:for(W=re;je!==null;){if(ne=je,ne.flags&2048)try{switch(ne.tag){case 0:case 11:case 15:ea(9,ne)}}catch(mt){$i(ne,ne.return,mt)}if(ne===W){je=null;break e}var Je=ne.sibling;if(Je!==null){Je.return=ne.return,je=Je;break e}je=ne.return}}if(Kt=R,_s(),Ws&&typeof Ws.onPostCommitFiberRoot=="function")try{Ws.onPostCommitFiberRoot(Mh,u)}catch{}M=!0}return M}finally{_n=v,Nn.transition=c}}return!1}function Kh(u,c,v){c=Oa(v,c),c=Ua(u,c,1),vs(u,c),c=Qi(),u=Zl(u,1),u!==null&&(wl(u,1,c),Mt(u,c))}function $i(u,c,v){if(u.tag===3)Kh(u,u,v);else for(;c!==null;){if(c.tag===3){Kh(c,u,v);break}else if(c.tag===1){var M=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(Rs===null||!Rs.has(M))){u=Oa(v,u),u=f0(c,u,1),vs(c,u),u=Qi(),c=Zl(c,1),c!==null&&(wl(c,1,u),Mt(c,u));break}}c=c.return}}function oa(u,c,v){var M=u.pingCache;M!==null&&M.delete(c),c=Qi(),u.pingedLanes|=u.suspendedLanes&v,ai===u&&(Jn&v)===v&&($n===4||$n===3&&(Jn&130023424)===Jn&&500>bi()-fp?eo(u,0):hp|=v),Mt(u,c)}function N0(u,c){c===0&&(u.mode&1?(c=Sl,Sl<<=1,!(Sl&130023424)&&(Sl=4194304)):c=1);var v=Qi();u=Zl(u,c),u!==null&&(wl(u,c,v),Mt(u,v))}function aa(u){var c=u.memoizedState,v=0;c!==null&&(v=c.retryLane),N0(u,v)}function F0(u,c){var v=0;switch(u.tag){case 13:var M=u.stateNode,R=u.memoizedState;R!==null&&(v=R.retryLane);break;case 19:M=u.stateNode;break;default:throw Error(o(314))}M!==null&&M.delete(c),N0(u,v)}var yp;yp=function(u,c,v){if(u!==null)if(u.memoizedProps!==c.pendingProps||Gn.current)Ir=!0;else{if(!(u.lanes&v)&&!(c.flags&128))return Ir=!1,Lx(u,c,v);Ir=!!(u.flags&131072)}else Ir=!1,Un&&c.flags&1048576&&$g(c,Zu,c.index);switch(c.lanes=0,c.tag){case 2:var M=c.type;u!==null&&(u.alternate=null,c.alternate=null,c.flags|=2),u=c.pendingProps;var R=gr(c,jt.current);Pa(c,v),R=vn(null,c,M,u,R,v);var I=Yd();return c.flags|=1,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Ri(M)?(I=!0,Ni(c)):I=!1,c.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,Bd(c),R.updater=Lh,c.stateNode=R,R._reactInternals=c,Tl(c,M,u,v),c=$d(null,c,M,!0,I,v)):(c.tag=0,Un&&I&&Ih(c),Qn(null,c,R,v),c=c.child),c;case 16:M=c.elementType;e:{switch(u!==null&&(u.alternate=null,c.alternate=null,c.flags|=2),u=c.pendingProps,R=M._init,M=R(M._payload),c.type=M,R=c.tag=z0(M),u=Fi(M,u),R){case 0:c=Ms(null,c,M,u,v);break e;case 1:c=S0(null,c,M,u,v);break e;case 11:c=g0(null,c,M,u,v);break e;case 14:c=_0(null,c,M,Fi(M.type,u),v);break e}throw Error(o(306,M,""))}return c;case 0:return M=c.type,R=c.pendingProps,R=c.elementType===M?R:Fi(M,R),Ms(u,c,M,R,v);case 1:return M=c.type,R=c.pendingProps,R=c.elementType===M?R:Fi(M,R),S0(u,c,M,R,v);case 3:e:{if(w0(c),u===null)throw Error(o(387));M=c.pendingProps,I=c.memoizedState,R=I.element,Hd(u,c),ys(c,M,null,v);var W=c.memoizedState;if(M=W.element,Ue&&I.isDehydrated)if(I={element:M,isDehydrated:!1,cache:W.cache,transitions:W.transitions},c.updateQueue.baseState=I,c.memoizedState=I,c.flags&256){R=Error(o(423)),c=E0(u,c,M,v,R);break e}else if(M!==R){R=Error(o(424)),c=E0(u,c,M,v,R);break e}else for(Ue&&(ki=vh(c.stateNode.containerInfo),lr=c,Un=!0,ws=null,Cl=!1),v=i0(c,null,M,v),c.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(Rl(),M===R){c=yi(u,c,v);break e}Qn(u,c,M,v)}c=c.child}return c;case 5:return r0(c),u===null&&Wd(c),M=c.type,R=c.pendingProps,I=u!==null?u.memoizedProps:null,W=R.children,Ie(M,R)?W=null:I!==null&&Ie(M,I)&&(c.flags|=32),x0(u,c),Qn(u,c,W,v),c.child;case 6:return u===null&&Wd(c),null;case 13:return M0(u,c,v);case 4:return Xd(c,c.stateNode.containerInfo),M=c.pendingProps,u===null?c.child=Pl(c,null,M,v):Qn(u,c,M,v),c.child;case 11:return M=c.type,R=c.pendingProps,R=c.elementType===M?R:Fi(M,R),g0(u,c,M,R,v);case 7:return Qn(u,c,c.pendingProps,v),c.child;case 8:return Qn(u,c,c.pendingProps.children,v),c.child;case 12:return Qn(u,c,c.pendingProps.children,v),c.child;case 10:e:{if(M=c.type._context,R=c.pendingProps,I=c.memoizedProps,W=R.value,kd(c,M,W),I!==null)if(Xs(I.value,W)){if(I.children===R.children&&!Gn.current){c=yi(u,c,v);break e}}else for(I=c.child,I!==null&&(I.return=c);I!==null;){var ne=I.dependencies;if(ne!==null){W=I.child;for(var Se=ne.firstContext;Se!==null;){if(Se.context===M){if(I.tag===1){Se=qi(-1,v&-v),Se.tag=2;var Fe=I.updateQueue;if(Fe!==null){Fe=Fe.shared;var at=Fe.pending;at===null?Se.next=Se:(Se.next=at.next,at.next=Se),Fe.pending=Se}}I.lanes|=v,Se=I.alternate,Se!==null&&(Se.lanes|=v),bh(I.return,v,c),ne.lanes|=v;break}Se=Se.next}}else if(I.tag===10)W=I.type===c.type?null:I.child;else if(I.tag===18){if(W=I.return,W===null)throw Error(o(341));W.lanes|=v,ne=W.alternate,ne!==null&&(ne.lanes|=v),bh(W,v,c),W=I.sibling}else W=I.child;if(W!==null)W.return=I;else for(W=I;W!==null;){if(W===c){W=null;break}if(I=W.sibling,I!==null){I.return=W.return,W=I;break}W=W.return}I=W}Qn(u,c,R.children,v),c=c.child}return c;case 9:return R=c.type,M=c.pendingProps.children,Pa(c,v),R=zn(R),M=M(R),c.flags|=1,Qn(u,c,M,v),c.child;case 14:return M=c.type,R=Fi(M,c.pendingProps),R=Fi(M.type,R),_0(u,c,M,R,v);case 15:return v0(u,c,c.type,c.pendingProps,v);case 17:return M=c.type,R=c.pendingProps,R=c.elementType===M?R:Fi(M,R),u!==null&&(u.alternate=null,c.alternate=null,c.flags|=2),c.tag=1,Ri(M)?(u=!0,Ni(c)):u=!1,Pa(c,v),Jg(c,M,R),Tl(c,M,R,v),$d(null,c,M,!0,u,v);case 19:return C0(u,c,v);case 22:return y0(u,c,v)}throw Error(o(156,c.tag))};function Qh(u,c){return Eh(u,c)}function Nx(u,c,v,M){this.tag=u,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $r(u,c,v,M){return new Nx(u,c,v,M)}function xp(u){return u=u.prototype,!(!u||!u.isReactComponent)}function z0(u){if(typeof u=="function")return xp(u)?1:0;if(u!=null){if(u=u.$$typeof,u===A)return 11;if(u===T)return 14}return 2}function Ao(u,c){var v=u.alternate;return v===null?(v=$r(u.tag,c,u.key,u.mode),v.elementType=u.elementType,v.type=u.type,v.stateNode=u.stateNode,v.alternate=u,u.alternate=v):(v.pendingProps=c,v.type=u.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=u.flags&14680064,v.childLanes=u.childLanes,v.lanes=u.lanes,v.child=u.child,v.memoizedProps=u.memoizedProps,v.memoizedState=u.memoizedState,v.updateQueue=u.updateQueue,c=u.dependencies,v.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},v.sibling=u.sibling,v.index=u.index,v.ref=u.ref,v}function Jh(u,c,v,M,R,I){var W=2;if(M=u,typeof u=="function")xp(u)&&(W=1);else if(typeof u=="string")W=5;else e:switch(u){case p:return la(v.children,R,I,c);case m:W=8,R|=8;break;case g:return u=$r(12,v,c,R|2),u.elementType=g,u.lanes=I,u;case w:return u=$r(13,v,c,R),u.elementType=w,u.lanes=I,u;case _:return u=$r(19,v,c,R),u.elementType=_,u.lanes=I,u;case C:return vc(v,R,I,c);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case y:W=10;break e;case S:W=9;break e;case A:W=11;break e;case T:W=14;break e;case E:W=16,M=null;break e}throw Error(o(130,u==null?u:typeof u,""))}return c=$r(W,v,c,R),c.elementType=u,c.type=M,c.lanes=I,c}function la(u,c,v,M){return u=$r(7,u,M,c),u.lanes=v,u}function vc(u,c,v,M){return u=$r(22,u,M,c),u.elementType=C,u.lanes=v,u.stateNode={},u}function er(u,c,v){return u=$r(6,u,null,c),u.lanes=v,u}function es(u,c,v){return c=$r(4,u.children!==null?u.children:[],u.key,c),c.lanes=v,c.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},c}function Fx(u,c,v,M,R){this.tag=c,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=wt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wh(0),this.expirationTimes=wh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wh(0),this.identifierPrefix=M,this.onRecoverableError=R,Ue&&(this.mutableSourceEagerHydrationData=null)}function k0(u,c,v,M,R,I,W,ne,Se){return u=new Fx(u,c,v,ne,Se),c===1?(c=1,I===!0&&(c|=8)):c=0,I=$r(3,null,null,c),u.current=I,I.stateNode=u,I.memoizedState={element:M,isDehydrated:v,cache:null,transitions:null},Bd(I),u}function yc(u){if(!u)return Kr;u=u._reactInternals;e:{if(L(u)!==u||u.tag!==1)throw Error(o(170));var c=u;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Ri(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(o(171))}if(u.tag===1){var v=u.type;if(Ri(v))return Ra(u,v,c)}return c}function Ha(u){var c=u._reactInternals;if(c===void 0)throw typeof u.render=="function"?Error(o(188)):(u=Object.keys(u).join(","),Error(o(268,u)));return u=Q(c),u===null?null:u.stateNode}function Sp(u,c){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var v=u.retryLane;u.retryLane=v!==0&&v<c?v:c}}function $h(u,c){Sp(u,c),(u=u.alternate)&&Sp(u,c)}function zx(u){return u=Q(u),u===null?null:u.stateNode}function B0(){return null}return t.attemptContinuousHydration=function(u){if(u.tag===13){var c=Qi();Jr(u,134217728,c),$h(u,134217728)}},t.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var c=Qi(),v=$s(u);Jr(u,v,c),$h(u,v)}},t.attemptSynchronousHydration=function(u){switch(u.tag){case 3:var c=u.stateNode;if(c.current.memoizedState.isDehydrated){var v=Gs(c.pendingLanes);v!==0&&(Ud(c,v|1),Mt(c,bi()),!(Kt&6)&&(ka(),_s()))}break;case 13:var M=Qi();Nr(function(){return Jr(u,1,M)}),$h(u,1)}},t.batchedUpdates=function(u,c){var v=Kt;Kt|=1;try{return u(c)}finally{Kt=v,Kt===0&&(ka(),Th&&_s())}},t.createComponentSelector=function(u){return{$$typeof:Bl,value:u}},t.createContainer=function(u,c,v,M,R,I,W){return k0(u,c,!1,null,v,M,R,I,W)},t.createHasPseudoClassSelector=function(u){return{$$typeof:hc,value:u}},t.createHydrationContainer=function(u,c,v,M,R,I,W,ne,Se){return u=k0(v,M,!0,u,R,I,W,ne,Se),u.context=yc(null),v=u.current,M=Qi(),R=$s(v),I=qi(M,R),I.callback=c??null,vs(v,I),u.current.lanes=R,wl(u,R,M),Mt(u,M),u},t.createPortal=function(u,c,v){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:M==null?null:""+M,children:u,containerInfo:c,implementation:v}},t.createRoleSelector=function(u){return{$$typeof:Dr,value:u}},t.createTestNameSelector=function(u){return{$$typeof:Hl,value:u}},t.createTextSelector=function(u){return{$$typeof:za,value:u}},t.deferredUpdates=function(u){var c=_n,v=Nn.transition;try{return Nn.transition=null,_n=16,u()}finally{_n=c,Nn.transition=v}},t.discreteUpdates=function(u,c,v,M,R){var I=_n,W=Nn.transition;try{return Nn.transition=null,_n=1,u(c,v,M,R)}finally{_n=I,Nn.transition=W,Kt===0&&ka()}},t.findAllNodes=up,t.findBoundingRects=function(u,c){if(!xt)throw Error(o(363));c=up(u,c),u=[];for(var v=0;v<c.length;v++)u.push(wn(c[v]));for(c=u.length-1;0<c;c--){v=u[c];for(var M=v.x,R=M+v.width,I=v.y,W=I+v.height,ne=c-1;0<=ne;ne--)if(c!==ne){var Se=u[ne],Fe=Se.x,at=Fe+Se.width,Wt=Se.y,vt=Wt+Se.height;if(M>=Fe&&I>=Wt&&R<=at&&W<=vt){u.splice(c,1);break}else if(M!==Fe||v.width!==Se.width||vt<I||Wt>W){if(!(I!==Wt||v.height!==Se.height||at<M||Fe>R)){Fe>M&&(Se.width+=Fe-M,Se.x=M),at<R&&(Se.width=R-Fe),u.splice(c,1);break}}else{Wt>I&&(Se.height+=Wt-I,Se.y=I),vt<W&&(Se.height=W-Wt),u.splice(c,1);break}}}return u},t.findHostInstance=Ha,t.findHostInstanceWithNoPortals=function(u){return u=G(u),u=u!==null?Z(u):null,u===null?null:u.stateNode},t.findHostInstanceWithWarning=function(u){return Ha(u)},t.flushControlled=function(u){var c=Kt;Kt|=1;var v=Nn.transition,M=_n;try{Nn.transition=null,_n=1,u()}finally{_n=M,Nn.transition=v,Kt=c,Kt===0&&(ka(),_s())}},t.flushPassiveEffects=sa,t.flushSync=Nr,t.focusWithin=function(u,c){if(!xt)throw Error(o(363));for(u=Vh(u),c=I0(u,c),c=Array.from(c),u=0;u<c.length;){var v=c[u++];if(!k(v)){if(v.tag===5&&ke(v.stateNode))return!0;for(v=v.child;v!==null;)c.push(v),v=v.sibling}}return!1},t.getCurrentUpdatePriority=function(){return _n},t.getFindAllNodesFailureDescription=function(u,c){if(!xt)throw Error(o(363));var v=0,M=[];u=[Vh(u),0];for(var R=0;R<u.length;){var I=u[R++],W=u[R++],ne=c[W];if((I.tag!==5||!k(I))&&(Bi(I,ne)&&(M.push(fc(ne)),W++,W>v&&(v=W)),W<c.length))for(I=I.child;I!==null;)u.push(I,W),I=I.sibling}if(v<c.length){for(u=[];v<c.length;v++)u.push(fc(c[v]));return`findAllNodes was able to match part of the selector:
  `+(M.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},t.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return me(u.child.stateNode);default:return u.child.stateNode}},t.injectIntoDevTools=function(u){if(u={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:zx,findFiberByHostInstance:u.findFiberByHostInstance||B0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(c.isDisabled||!c.supportsFiber)u=!0;else{try{Mh=c.inject(u),Ws=c}catch{}u=!!c.checkDCE}}return u},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(u,c,v,M){if(!xt)throw Error(o(363));u=up(u,c);var R=De(u,v,M).disconnect;return{disconnect:function(){R()}}},t.registerMutableSourceForHydration=function(u,c){var v=c._getVersion;v=v(c._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[c,v]:u.mutableSourceEagerHydrationData.push(c,v)},t.runWithPriority=function(u,c){var v=_n;try{return _n=u,c()}finally{_n=v}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(u,c,v,M){var R=c.current,I=Qi(),W=$s(R);return v=yc(v),c.context===null?c.context=v:c.pendingContext=v,c=qi(I,W),c.payload={element:u},M=M===void 0?null:M,M!==null&&(c.callback=M),vs(R,c),u=Jr(R,W,I),u!==null&&Ml(u,R,W),W},t};YI.exports=e9;var t9=YI.exports;const n9=zE(t9),yT={},jI=n=>void Object.assign(yT,n);function i9(n,e){function t(p,{args:m=[],attach:g,...y},S){let A=`${p[0].toUpperCase()}${p.slice(1)}`,w;if(p==="primitive"){if(y.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const _=y.object;w=Nf(_,{type:p,root:S,attach:g,primitive:!0})}else{const _=yT[A];if(!_)throw new Error(`R3F: ${A} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(m))throw new Error("R3F: The args prop must be an array!");w=Nf(new _(...m),{type:p,root:S,attach:g,memoizedProps:{args:m}})}return w.__r3f.attach===void 0&&(w instanceof rn?w.__r3f.attach="geometry":w instanceof mr&&(w.__r3f.attach="material")),A!=="inject"&&_S(w,y),w}function i(p,m){let g=!1;if(m){var y,S;(y=m.__r3f)!=null&&y.attach?gS(p,m,m.__r3f.attach):m.isObject3D&&p.isObject3D&&(p.add(m),g=!0),g||(S=p.__r3f)==null||S.objects.push(m),m.__r3f||Nf(m,{}),m.__r3f.parent=p,TE(m),Ff(m)}}function r(p,m,g){let y=!1;if(m){var S,A;if((S=m.__r3f)!=null&&S.attach)gS(p,m,m.__r3f.attach);else if(m.isObject3D&&p.isObject3D){m.parent=p,m.dispatchEvent({type:"added"});const w=p.children.filter(T=>T!==m),_=w.indexOf(g);p.children=[...w.slice(0,_),m,...w.slice(_)],y=!0}y||(A=p.__r3f)==null||A.objects.push(m),m.__r3f||Nf(m,{}),m.__r3f.parent=p,TE(m),Ff(m)}}function s(p,m,g=!1){p&&[...p].forEach(y=>o(m,y,g))}function o(p,m,g){if(m){var y,S,A;if(m.__r3f&&(m.__r3f.parent=null),(y=p.__r3f)!=null&&y.objects&&(p.__r3f.objects=p.__r3f.objects.filter(C=>C!==m)),(S=m.__r3f)!=null&&S.attach)ER(p,m,m.__r3f.attach);else if(m.isObject3D&&p.isObject3D){var w;p.remove(m),(w=m.__r3f)!=null&&w.root&&c9(m.__r3f.root,m)}const T=(A=m.__r3f)==null?void 0:A.primitive,E=!T&&(g===void 0?m.dispose!==null:g);if(!T){var _;s((_=m.__r3f)==null?void 0:_.objects,m,E),s(m.children,m,E)}if(delete m.__r3f,E&&m.dispose&&m.type!=="Scene"){const C=()=>{try{m.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?EE.unstable_scheduleCallback(EE.unstable_IdlePriority,C):C()}Ff(p)}}function a(p,m,g,y){var S;const A=(S=p.__r3f)==null?void 0:S.parent;if(!A)return;const w=t(m,g,p.__r3f.root);if(p.children){for(const _ of p.children)_.__r3f&&i(w,_);p.children=p.children.filter(_=>!_.__r3f)}p.__r3f.objects.forEach(_=>i(w,_)),p.__r3f.objects=[],p.__r3f.autoRemovedBeforeAppend||o(A,p),w.parent&&(w.__r3f.autoRemovedBeforeAppend=!0),i(A,w),w.raycast&&w.__r3f.eventCount&&w.__r3f.root.getState().internal.interaction.push(w),[y,y.alternate].forEach(_=>{_!==null&&(_.stateNode=w,_.ref&&(typeof _.ref=="function"?_.ref(w):_.ref.current=w))})}const h=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:n9({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(p,m)=>{if(!m)return;const g=p.getState().scene;g.__r3f&&(g.__r3f.root=p,i(g,m))},removeChildFromContainer:(p,m)=>{m&&o(p.getState().scene,m)},insertInContainerBefore:(p,m,g)=>{if(!m||!g)return;const y=p.getState().scene;y.__r3f&&r(y,m,g)},getRootHostContext:()=>null,getChildHostContext:p=>p,finalizeInitialChildren(p){var m;return!!((m=p==null?void 0:p.__r3f)!=null?m:{}).handlers},prepareUpdate(p,m,g,y){var S;if(((S=p==null?void 0:p.__r3f)!=null?S:{}).primitive&&y.object&&y.object!==p)return[!0];{const{args:w=[],children:_,...T}=y,{args:E=[],children:C,...P}=g;if(!Array.isArray(w))throw new Error("R3F: the args prop must be an array!");if(w.some((O,F)=>O!==E[F]))return[!0];const D=nO(p,T,P,!0);return D.changes.length?[!1,D]:null}},commitUpdate(p,[m,g],y,S,A,w){m?a(p,y,A,w):_S(p,g)},commitMount(p,m,g,y){var S;const A=(S=p.__r3f)!=null?S:{};p.raycast&&A.handlers&&A.eventCount&&p.__r3f.root.getState().internal.interaction.push(p)},getPublicInstance:p=>p,prepareForCommit:()=>null,preparePortalMount:p=>Nf(p.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(p){var m;const{attach:g,parent:y}=(m=p.__r3f)!=null?m:{};g&&y&&ER(y,p,g),p.isObject3D&&(p.visible=!1),Ff(p)},unhideInstance(p,m){var g;const{attach:y,parent:S}=(g=p.__r3f)!=null?g:{};y&&S&&gS(S,p,y),(p.isObject3D&&m.visible==null||m.visible)&&(p.visible=!0),Ff(p)},createTextInstance:h,hideTextInstance:h,unhideTextInstance:h,getCurrentEventPriority:()=>e?e():ed.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Zn.fun(performance.now)?performance.now:Zn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Zn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Zn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:_S}}var yR,xR;const mS=n=>"colorSpace"in n||"outputColorSpace"in n,KI=()=>{var n;return(n=yT.ColorManagement)!=null?n:null},QI=n=>n&&n.isOrthographicCamera,r9=n=>n&&n.hasOwnProperty("current"),Bg=typeof window<"u"&&((yR=window.document)!=null&&yR.createElement||((xR=window.navigator)==null?void 0:xR.product)==="ReactNative")?K.useLayoutEffect:K.useEffect;function JI(n){const e=K.useRef(n);return Bg(()=>void(e.current=n),[n]),e}function s9({set:n}){return Bg(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class $I extends K.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}$I.getDerivedStateFromError=()=>({error:!0});const eO="__default",SR=new Map,o9=n=>n&&!!n.memoized&&!!n.changes;function tO(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Xp=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},Zn={obj:n=>n===Object(n)&&!Zn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Zn.str(n)||Zn.num(n))return n===e;const s=Zn.obj(n);if(s&&i==="reference")return n===e;const o=Zn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!Zn.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(Zn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function a9(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Nf(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function ME(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const wR=/-\d+$/;function gS(n,e,t){if(Zn.str(t)){if(wR.test(t)){const s=t.replace(wR,""),{target:o,key:a}=ME(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=ME(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function ER(n,e,t){var i,r;if(Zn.str(t)){const{target:s,key:o}=ME(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function nO(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...h}={},d=!1){var p;const m=(p=n==null?void 0:n.__r3f)!=null?p:{},g=Object.entries(r),y=[];if(d){const A=Object.keys(h);for(let w=0;w<A.length;w++)r.hasOwnProperty(A[w])||g.unshift([A[w],eO+"remove"])}g.forEach(([A,w])=>{var _;if((_=n.__r3f)!=null&&_.primitive&&A==="object"||Zn.equ(w,h[A]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(A))return y.push([A,w,!0,[]]);let T=[];A.includes("-")&&(T=A.split("-")),y.push([A,w,!1,T]);for(const E in r){const C=r[E];E.startsWith(`${A}-`)&&y.push([E,C,!1,E.split("-")])}});const S={...r};return m.memoizedProps&&m.memoizedProps.args&&(S.args=m.memoizedProps.args),m.memoizedProps&&m.memoizedProps.attach&&(S.attach=m.memoizedProps.attach),{memoized:S,changes:y}}const l9=typeof process<"u"&&!1;function _S(n,e){var t,i,r;const s=(t=n.__r3f)!=null?t:{},o=s.root,a=(i=o==null||o.getState==null?void 0:o.getState())!=null?i:{},{memoized:h,changes:d}=o9(e)?e:nO(n,e),p=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=h);for(let g=0;g<d.length;g++){let[y,S,A,w]=d[g];if(mS(n)){const C="srgb",P="srgb-linear";y==="encoding"?(y="colorSpace",S=S===3001?C:P):y==="outputEncoding"&&(y="outputColorSpace",S=S===3001?C:P)}let _=n,T=_[y];if(w.length&&(T=w.reduce((E,C)=>E[C],n),!(T&&T.set))){const[E,...C]=w.reverse();_=C.reverse().reduce((P,D)=>P[D],n),y=E}if(S===eO+"remove")if(_.constructor){let E=SR.get(_.constructor);E||(E=new _.constructor,SR.set(_.constructor,E)),S=E[y]}else S=0;if(A)S?s.handlers[y]=S:delete s.handlers[y],s.eventCount=Object.keys(s.handlers).length;else if(T&&T.set&&(T.copy||T instanceof $c)){if(Array.isArray(S))T.fromArray?T.fromArray(S):T.set(...S);else if(T.copy&&S&&S.constructor&&(l9?T.constructor.name===S.constructor.name:T.constructor===S.constructor))T.copy(S);else if(S!==void 0){const E=T instanceof it;!E&&T.setScalar?T.setScalar(S):T instanceof $c&&S instanceof $c?T.mask=S.mask:T.set(S),!KI()&&!a.linear&&E&&T.convertSRGBToLinear()}}else if(_[y]=S,_[y]instanceof pi&&_[y].format===Gr&&_[y].type===Sa){const E=_[y];mS(E)&&mS(a.gl)?E.colorSpace=a.gl.outputColorSpace:E.encoding=a.gl.outputEncoding}Ff(n)}if(s.parent&&a.internal&&n.raycast&&p!==s.eventCount){const g=a.internal.interaction.indexOf(n);g>-1&&a.internal.interaction.splice(g,1),s.eventCount&&a.internal.interaction.push(n)}return!(d.length===1&&d[0][0]==="onUpdate")&&d.length&&(r=n.__r3f)!=null&&r.parent&&TE(n),n}function Ff(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function TE(n){n.onUpdate==null||n.onUpdate(n)}function iO(n,e){n.manual||(QI(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function av(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function u9(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return ed.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return ed.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return ed.ContinuousEventPriority;default:return ed.DefaultEventPriority}}function rO(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function c9(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{rO(t.capturedMap,e,i,r)})}function h9(n){function e(h){const{internal:d}=n.getState(),p=h.offsetX-d.initialClick[0],m=h.offsetY-d.initialClick[1];return Math.round(Math.sqrt(p*p+m*m))}function t(h){return h.filter(d=>["Move","Over","Enter","Out","Leave"].some(p=>{var m;return(m=d.__r3f)==null?void 0:m.handlers["onPointer"+p]}))}function i(h,d){const p=n.getState(),m=new Set,g=[],y=d?d(p.internal.interaction):p.internal.interaction;for(let _=0;_<y.length;_++){const T=Xp(y[_]);T&&(T.raycaster.camera=void 0)}p.previousRoot||p.events.compute==null||p.events.compute(h,p);function S(_){const T=Xp(_);if(!T||!T.events.enabled||T.raycaster.camera===null)return[];if(T.raycaster.camera===void 0){var E;T.events.compute==null||T.events.compute(h,T,(E=T.previousRoot)==null?void 0:E.getState()),T.raycaster.camera===void 0&&(T.raycaster.camera=null)}return T.raycaster.camera?T.raycaster.intersectObject(_,!0):[]}let A=y.flatMap(S).sort((_,T)=>{const E=Xp(_.object),C=Xp(T.object);return!E||!C?_.distance-T.distance:C.events.priority-E.events.priority||_.distance-T.distance}).filter(_=>{const T=av(_);return m.has(T)?!1:(m.add(T),!0)});p.events.filter&&(A=p.events.filter(A,p));for(const _ of A){let T=_.object;for(;T;){var w;(w=T.__r3f)!=null&&w.eventCount&&g.push({..._,eventObject:T}),T=T.parent}}if("pointerId"in h&&p.internal.capturedMap.has(h.pointerId))for(let _ of p.internal.capturedMap.get(h.pointerId).values())m.has(av(_.intersection))||g.push(_.intersection);return g}function r(h,d,p,m){const g=n.getState();if(h.length){const y={stopped:!1};for(const S of h){const A=Xp(S.object)||g,{raycaster:w,pointer:_,camera:T,internal:E}=A,C=new V(_.x,_.y,0).unproject(T),P=N=>{var G,Q;return(G=(Q=E.capturedMap.get(N))==null?void 0:Q.has(S.eventObject))!=null?G:!1},D=N=>{const G={intersection:S,target:d.target};E.capturedMap.has(N)?E.capturedMap.get(N).set(S.eventObject,G):E.capturedMap.set(N,new Map([[S.eventObject,G]])),d.target.setPointerCapture(N)},O=N=>{const G=E.capturedMap.get(N);G&&rO(E.capturedMap,S.eventObject,G,N)};let F={};for(let N in d){let G=d[N];typeof G!="function"&&(F[N]=G)}let L={...S,...F,pointer:_,intersections:h,stopped:y.stopped,delta:p,unprojectedPoint:C,ray:w.ray,camera:T,stopPropagation(){const N="pointerId"in d&&E.capturedMap.get(d.pointerId);if((!N||N.has(S.eventObject))&&(L.stopped=y.stopped=!0,E.hovered.size&&Array.from(E.hovered.values()).find(G=>G.eventObject===S.eventObject))){const G=h.slice(0,h.indexOf(S));s([...G,S])}},target:{hasPointerCapture:P,setPointerCapture:D,releasePointerCapture:O},currentTarget:{hasPointerCapture:P,setPointerCapture:D,releasePointerCapture:O},nativeEvent:d};if(m(L),y.stopped===!0)break}}return h}function s(h){const{internal:d}=n.getState();for(const p of d.hovered.values())if(!h.length||!h.find(m=>m.object===p.object&&m.index===p.index&&m.instanceId===p.instanceId)){const g=p.eventObject.__r3f,y=g==null?void 0:g.handlers;if(d.hovered.delete(av(p)),g!=null&&g.eventCount){const S={...p,intersections:h};y.onPointerOut==null||y.onPointerOut(S),y.onPointerLeave==null||y.onPointerLeave(S)}}}function o(h,d){for(let p=0;p<d.length;p++){const m=d[p].__r3f;m==null||m.handlers.onPointerMissed==null||m.handlers.onPointerMissed(h)}}function a(h){switch(h){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return d=>{const{internal:p}=n.getState();"pointerId"in d&&p.capturedMap.has(d.pointerId)&&requestAnimationFrame(()=>{p.capturedMap.has(d.pointerId)&&(p.capturedMap.delete(d.pointerId),s([]))})}}return function(p){const{onPointerMissed:m,internal:g}=n.getState();g.lastEvent.current=p;const y=h==="onPointerMove",S=h==="onClick"||h==="onContextMenu"||h==="onDoubleClick",w=i(p,y?t:void 0),_=S?e(p):0;h==="onPointerDown"&&(g.initialClick=[p.offsetX,p.offsetY],g.initialHits=w.map(E=>E.eventObject)),S&&!w.length&&_<=2&&(o(p,g.interaction),m&&m(p)),y&&s(w);function T(E){const C=E.eventObject,P=C.__r3f,D=P==null?void 0:P.handlers;if(P!=null&&P.eventCount)if(y){if(D.onPointerOver||D.onPointerEnter||D.onPointerOut||D.onPointerLeave){const O=av(E),F=g.hovered.get(O);F?F.stopped&&E.stopPropagation():(g.hovered.set(O,E),D.onPointerOver==null||D.onPointerOver(E),D.onPointerEnter==null||D.onPointerEnter(E))}D.onPointerMove==null||D.onPointerMove(E)}else{const O=D[h];O?(!S||g.initialHits.includes(C))&&(o(p,g.interaction.filter(F=>!g.initialHits.includes(F))),O(E)):S&&g.initialHits.includes(C)&&o(p,g.interaction.filter(F=>!g.initialHits.includes(F)))}}r(w,p,_,T)}}return{handlePointer:a}}const f9=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],sO=n=>!!(n!=null&&n.render),xT=K.createContext(null),d9=(n,e)=>{const t=XI((a,h)=>{const d=new V,p=new V,m=new V;function g(_=h().camera,T=p,E=h().size){const{width:C,height:P,top:D,left:O}=E,F=C/P;T instanceof V?m.copy(T):m.set(...T);const L=_.getWorldPosition(d).distanceTo(m);if(QI(_))return{width:C/_.zoom,height:P/_.zoom,top:D,left:O,factor:1,distance:L,aspect:F};{const N=_.fov*Math.PI/180,G=2*Math.tan(N/2)*L,Q=G*(C/P);return{width:Q,height:G,top:D,left:O,factor:C/Q,distance:L,aspect:F}}}let y;const S=_=>a(T=>({performance:{...T.performance,current:_}})),A=new Pe;return{set:a,get:h,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(_=1)=>n(h(),_),advance:(_,T)=>e(_,T,h()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new mT,pointer:A,mouse:A,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const _=h();y&&clearTimeout(y),_.performance.current!==_.performance.min&&S(_.performance.min),y=setTimeout(()=>S(h().performance.max),_.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:g},setEvents:_=>a(T=>({...T,events:{...T.events,..._}})),setSize:(_,T,E,C,P)=>{const D=h().camera,O={width:_,height:T,top:C||0,left:P||0,updateStyle:E};a(F=>({size:O,viewport:{...F.viewport,...g(D,p,O)}}))},setDpr:_=>a(T=>{const E=tO(_);return{viewport:{...T.viewport,dpr:E,initialDpr:T.viewport.initialDpr||E}}}),setFrameloop:(_="always")=>{const T=h().clock;T.stop(),T.elapsedTime=0,_!=="never"&&(T.start(),T.elapsedTime=0),a(()=>({frameloop:_}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:K.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(_,T,E)=>{const C=h().internal;return C.priority=C.priority+(T>0?1:0),C.subscribers.push({ref:_,priority:T,store:E}),C.subscribers=C.subscribers.sort((P,D)=>P.priority-D.priority),()=>{const P=h().internal;P!=null&&P.subscribers&&(P.priority=P.priority-(T>0?1:0),P.subscribers=P.subscribers.filter(D=>D.ref!==_))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:h,viewport:d,gl:p,set:m}=t.getState();if(h.width!==r.width||h.height!==r.height||d.dpr!==s){var g;r=h,s=d.dpr,iO(a,h),p.setPixelRatio(d.dpr);const y=(g=h.updateStyle)!=null?g:typeof HTMLCanvasElement<"u"&&p.domElement instanceof HTMLCanvasElement;p.setSize(h.width,h.height,y)}a!==o&&(o=a,m(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};function p9(n,e){const t={callback:n};return e.add(t),()=>void e.delete(t)}let lv,oO=new Set,m9=new Set,g9=new Set;const _9=n=>p9(n,oO);function vS(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Yp(n,e){switch(n){case"before":return vS(oO,e);case"after":return vS(m9,e);case"tail":return vS(g9,e)}}let yS,xS;function SS(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),yS=e.internal.subscribers,lv=0;lv<yS.length;lv++)xS=yS[lv],xS.ref.current(xS.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function v9(n){let e=!1,t,i,r;function s(h){i=requestAnimationFrame(s),e=!0,t=0,Yp("before",h);for(const p of n.values()){var d;r=p.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((d=r.gl.xr)!=null&&d.isPresenting)&&(t+=SS(h,r))}if(Yp("after",h),t===0)return Yp("tail",h),e=!1,cancelAnimationFrame(i)}function o(h,d=1){var p;if(!h)return n.forEach(m=>o(m.store.getState()),d);(p=h.gl.xr)!=null&&p.isPresenting||!h.internal.active||h.frameloop==="never"||(h.internal.frames=Math.min(60,h.internal.frames+d),e||(e=!0,requestAnimationFrame(s)))}function a(h,d=!0,p,m){if(d&&Yp("before",h),p)SS(h,p,m);else for(const g of n.values())SS(h,g.store.getState());d&&Yp("after",h)}return{loop:s,invalidate:o,advance:a}}function ST(){const n=K.useContext(xT);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Di(n=t=>t,e){return ST()(n,e)}function hx(n,e=0){const t=ST(),i=t.getState().internal.subscribe,r=JI(n);return Bg(()=>i(r,e,t),[e,i,t]),null}const wd=new Map,{invalidate:MR,advance:TR}=v9(wd),{reconciler:pg,applyProps:kc}=i9(wd,u9),Cf={objects:"shallow",strict:!1},y9=(n,e)=>{const t=typeof n=="function"?n(e):n;return sO(t)?t:new $M({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function x9(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function S9(n){const e=wd.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||d9(MR,TR),o=t||pg.createContainer(s,ed.ConcurrentRoot,null,!1,null,"",r,null);e||wd.set(n,{fiber:o,store:s});let a,h=!1,d;return{configure(p={}){let{gl:m,size:g,scene:y,events:S,onCreated:A,shadows:w=!1,linear:_=!1,flat:T=!1,legacy:E=!1,orthographic:C=!1,frameloop:P="always",dpr:D=[1,2],performance:O,raycaster:F,camera:L,onPointerMissed:N}=p,G=s.getState(),Q=G.gl;G.gl||G.set({gl:Q=y9(m,n)});let le=G.raycaster;le||G.set({raycaster:le=new cx});const{params:Z,...oe}=F||{};if(Zn.equ(oe,le,Cf)||kc(le,{...oe}),Zn.equ(Z,le.params,Cf)||kc(le,{params:{...le.params,...Z}}),!G.camera||G.camera===d&&!Zn.equ(d,L,Cf)){d=L;const ve=L instanceof Lg,he=ve?L:C?new Ug(0,0,0,0,.1,1e3):new sr(75,0,.1,1e3);ve||(he.position.z=5,L&&kc(he,L),!G.camera&&!(L!=null&&L.rotation)&&he.lookAt(0,0,0)),G.set({camera:he}),le.camera=he}if(!G.scene){let ve;y instanceof sg?ve=y:(ve=new sg,y&&kc(ve,y)),G.set({scene:Nf(ve)})}if(!G.xr){var me;const ve=(Ie,Ye)=>{const qe=s.getState();qe.frameloop!=="never"&&TR(Ie,!0,qe,Ye)},he=()=>{const Ie=s.getState();Ie.gl.xr.enabled=Ie.gl.xr.isPresenting,Ie.gl.xr.setAnimationLoop(Ie.gl.xr.isPresenting?ve:null),Ie.gl.xr.isPresenting||MR(Ie)},Me={connect(){const Ie=s.getState().gl;Ie.xr.addEventListener("sessionstart",he),Ie.xr.addEventListener("sessionend",he)},disconnect(){const Ie=s.getState().gl;Ie.xr.removeEventListener("sessionstart",he),Ie.xr.removeEventListener("sessionend",he)}};typeof((me=Q.xr)==null?void 0:me.addEventListener)=="function"&&Me.connect(),G.set({xr:Me})}if(Q.shadowMap){const ve=Q.shadowMap.enabled,he=Q.shadowMap.type;if(Q.shadowMap.enabled=!!w,Zn.boo(w))Q.shadowMap.type=ym;else if(Zn.str(w)){var de;const Me={basic:I3,percentage:Ny,soft:ym,variance:Uo};Q.shadowMap.type=(de=Me[w])!=null?de:ym}else Zn.obj(w)&&Object.assign(Q.shadowMap,w);(ve!==Q.shadowMap.enabled||he!==Q.shadowMap.type)&&(Q.shadowMap.needsUpdate=!0)}const Y=KI();Y&&("enabled"in Y?Y.enabled=!E:"legacyMode"in Y&&(Y.legacyMode=E)),kc(Q,{outputEncoding:_?3e3:3001,toneMapping:T?xa:OM}),G.legacy!==E&&G.set(()=>({legacy:E})),G.linear!==_&&G.set(()=>({linear:_})),G.flat!==T&&G.set(()=>({flat:T})),m&&!Zn.fun(m)&&!sO(m)&&!Zn.equ(m,Q,Cf)&&kc(Q,m),S&&!G.events.handlers&&G.set({events:S(s)});const ce=x9(n,g);return Zn.equ(ce,G.size,Cf)||G.setSize(ce.width,ce.height,ce.updateStyle,ce.top,ce.left),D&&G.viewport.dpr!==tO(D)&&G.setDpr(D),G.frameloop!==P&&G.setFrameloop(P),G.onPointerMissed||G.set({onPointerMissed:N}),O&&!Zn.equ(O,G.performance,Cf)&&G.set(ve=>({performance:{...ve.performance,...O}})),a=A,h=!0,this},render(p){return h||this.configure(),pg.updateContainer(K.createElement(w9,{store:s,children:p,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){aO(n)}}}function w9({store:n,children:e,onCreated:t,rootElement:i}){return Bg(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),K.createElement(xT.Provider,{value:n},e)}function aO(n,e){const t=wd.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),pg.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,h;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(h=r.gl)!=null&&h.xr&&r.xr.disconnect(),a9(r),wd.delete(n),e&&e(n)}catch{}},500)})}}function E9(n,e,t){return K.createElement(M9,{key:e.uuid,children:n,container:e,state:t})}function M9({state:n={},children:e,container:t}){const{events:i,size:r,...s}=n,o=ST(),[a]=K.useState(()=>new cx),[h]=K.useState(()=>new Pe),d=K.useCallback((m,g)=>{const y={...m};Object.keys(m).forEach(A=>{(f9.includes(A)||m[A]!==g[A]&&g[A])&&delete y[A]});let S;if(g&&r){const A=g.camera;S=m.viewport.getCurrentViewport(A,new V,r),A!==m.camera&&iO(A,r)}return{...y,scene:t,raycaster:a,pointer:h,mouse:h,previousRoot:o,events:{...m.events,...g==null?void 0:g.events,...i},size:{...m.size,...r},viewport:{...m.viewport,...S},...s}},[n]),[p]=K.useState(()=>{const m=o.getState();return XI((y,S)=>({...m,scene:t,raycaster:a,pointer:h,mouse:h,previousRoot:o,events:{...m.events,...i},size:{...m.size,...r},...s,set:y,get:S,setEvents:A=>y(w=>({...w,events:{...w.events,...A}}))}))});return K.useEffect(()=>{const m=o.subscribe(g=>p.setState(y=>d(g,y)));return()=>{m(),p.destroy()}},[]),K.useEffect(()=>{p.setState(m=>d(o.getState(),m))},[d]),K.createElement(K.Fragment,null,pg.createPortal(K.createElement(xT.Provider,{value:p},e),p,null))}pg.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:K.version});function os(){return os=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},os.apply(this,arguments)}function AE(n,e,t){var i,r,s,o,a;e==null&&(e=100);function h(){var p=Date.now()-o;p<e&&p>=0?i=setTimeout(h,e-p):(i=null,t||(a=n.apply(s,r),s=r=null))}var d=function(){s=this,r=arguments,o=Date.now();var p=t&&!i;return i||(i=setTimeout(h,e)),p&&(a=n.apply(s,r),s=r=null),a};return d.clear=function(){i&&(clearTimeout(i),i=null)},d.flush=function(){i&&(a=n.apply(s,r),s=r=null,clearTimeout(i),i=null)},d}AE.debounce=AE;var T9=AE;const AR=zE(T9);function A9(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:r}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=K.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),h=K.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),d=e?typeof e=="number"?e:e.scroll:null,p=e?typeof e=="number"?e:e.resize:null,m=K.useRef(!1);K.useEffect(()=>(m.current=!0,()=>void(m.current=!1)));const[g,y,S]=K.useMemo(()=>{const T=()=>{if(!h.current.element)return;const{left:E,top:C,width:P,height:D,bottom:O,right:F,x:L,y:N}=h.current.element.getBoundingClientRect(),G={left:E,top:C,width:P,height:D,bottom:O,right:F,x:L,y:N};h.current.element instanceof HTMLElement&&r&&(G.height=h.current.element.offsetHeight,G.width=h.current.element.offsetWidth),Object.freeze(G),m.current&&!P9(h.current.lastBounds,G)&&a(h.current.lastBounds=G)};return[T,p?AR(T,p):T,d?AR(T,d):T]},[a,r,d,p]);function A(){h.current.scrollContainers&&(h.current.scrollContainers.forEach(T=>T.removeEventListener("scroll",S,!0)),h.current.scrollContainers=null),h.current.resizeObserver&&(h.current.resizeObserver.disconnect(),h.current.resizeObserver=null)}function w(){h.current.element&&(h.current.resizeObserver=new s(S),h.current.resizeObserver.observe(h.current.element),t&&h.current.scrollContainers&&h.current.scrollContainers.forEach(T=>T.addEventListener("scroll",S,{capture:!0,passive:!0})))}const _=T=>{!T||T===h.current.element||(A(),h.current.element=T,h.current.scrollContainers=lO(T),w())};return R9(S,!!t),C9(y),K.useEffect(()=>{A(),w()},[t,S,y]),K.useEffect(()=>A,[]),[_,o,g]}function C9(n){K.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function R9(n,e){K.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function lO(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...lO(n.parentElement)]}const b9=["x","y","top","bottom","left","right","width","height"],P9=(n,e)=>b9.every(t=>n[t]===e[t]);var L9=Object.defineProperty,I9=Object.defineProperties,O9=Object.getOwnPropertyDescriptors,CR=Object.getOwnPropertySymbols,D9=Object.prototype.hasOwnProperty,U9=Object.prototype.propertyIsEnumerable,RR=(n,e,t)=>e in n?L9(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,bR=(n,e)=>{for(var t in e||(e={}))D9.call(e,t)&&RR(n,t,e[t]);if(CR)for(var t of CR(e))U9.call(e,t)&&RR(n,t,e[t]);return n},N9=(n,e)=>I9(n,O9(e));function uO(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=uO(i,e,t);if(r)return r;i=e?null:i.sibling}}function cO(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const wT=cO(K.createContext(null));class hO extends K.Component{render(){return K.createElement(wT.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:PR,ReactCurrentDispatcher:LR}=K.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function F9(){const n=K.useContext(wT);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=K.useId();return K.useMemo(()=>{for(const i of[PR==null?void 0:PR.current,n,n==null?void 0:n.alternate]){if(!i)continue;const r=uO(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function z9(){var n,e;const t=F9(),[i]=K.useState(()=>new Map);i.clear();let r=t;for(;r;){const s=(n=r.type)==null?void 0:n._context;s&&s!==wT&&!i.has(s)&&i.set(s,(e=LR==null?void 0:LR.current)==null?void 0:e.readContext(cO(s))),r=r.return}return i}function k9(){const n=z9();return K.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>K.createElement(e,null,K.createElement(t.Provider,N9(bR({},i),{value:n.get(t)}))),e=>K.createElement(hO,bR({},e))),[n])}const wS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function B9(n){const{handlePointer:e}=h9(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(wS).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[h,d]=wS[o];t.addEventListener(h,a,{passive:d})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=wS[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const H9=K.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=B9,eventSource:a,eventPrefix:h,shadows:d,linear:p,flat:m,legacy:g,orthographic:y,frameloop:S,dpr:A,performance:w,raycaster:_,camera:T,scene:E,onPointerMissed:C,onCreated:P,...D},O){K.useMemo(()=>jI(GI),[]);const F=k9(),[L,N]=A9({scroll:!0,debounce:{scroll:50,resize:0},...i}),G=K.useRef(null),Q=K.useRef(null);K.useImperativeHandle(O,()=>G.current);const le=JI(C),[Z,oe]=K.useState(!1),[me,de]=K.useState(!1);if(Z)throw Z;if(me)throw me;const Y=K.useRef(null);Bg(()=>{const ee=G.current;N.width>0&&N.height>0&&ee&&(Y.current||(Y.current=S9(ee)),Y.current.configure({gl:s,events:o,shadows:d,linear:p,flat:m,legacy:g,orthographic:y,frameloop:S,dpr:A,performance:w,raycaster:_,camera:T,scene:E,size:N,onPointerMissed:(...ce)=>le.current==null?void 0:le.current(...ce),onCreated:ce=>{ce.events.connect==null||ce.events.connect(a?r9(a)?a.current:a:Q.current),h&&ce.setEvents({compute:(ve,he)=>{const Me=ve[h+"X"],Ie=ve[h+"Y"];he.pointer.set(Me/he.size.width*2-1,-(Ie/he.size.height)*2+1),he.raycaster.setFromCamera(he.pointer,he.camera)}}),P==null||P(ce)}}),Y.current.render(K.createElement(F,null,K.createElement($I,{set:de},K.createElement(K.Suspense,{fallback:K.createElement(s9,{set:oe})},e)))))}),K.useEffect(()=>{const ee=G.current;if(ee)return()=>aO(ee)},[]);const te=a?"none":"auto";return K.createElement("div",os({ref:Q,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:te,...r}},D),K.createElement("div",{ref:L,style:{width:"100%",height:"100%"}},K.createElement("canvas",{ref:G,style:{display:"block"}},t)))}),V9=K.forwardRef(function(e,t){return K.createElement(hO,null,K.createElement(H9,os({},e,{ref:t})))});function G9(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}function W9(n,e,t){const i=Di(g=>g.size),r=Di(g=>g.viewport),s=typeof n=="number"?n:i.width*r.dpr,o=typeof e=="number"?e:i.height*r.dpr,a=(typeof n=="number"?t:n)||{},{samples:h=0,depth:d,...p}=a,m=K.useMemo(()=>{const g=new _o(s,o,{minFilter:ni,magFilter:ni,type:ah,...p});return d&&(g.depthTexture=new Vy(s,o,fo)),g.samples=h,g},[]);return K.useLayoutEffect(()=>{m.setSize(s,o),h&&(m.samples=h)},[h,m,s,o]),K.useEffect(()=>()=>m.dispose(),[]),m}const X9=n=>typeof n=="function",Y9=K.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,children:i,makeDefault:r,...s},o)=>{const a=Di(({set:w})=>w),h=Di(({camera:w})=>w),d=Di(({size:w})=>w),p=K.useRef(null),m=K.useRef(null),g=W9(e);K.useLayoutEffect(()=>{s.manual||p.current.updateProjectionMatrix()},[d,s]),K.useLayoutEffect(()=>{p.current.updateProjectionMatrix()}),K.useLayoutEffect(()=>{if(r){const w=h;return a(()=>({camera:p.current})),()=>a(()=>({camera:w}))}},[p,r,a]);let y=0,S=null;const A=X9(i);return hx(w=>{A&&(t===1/0||y<t)&&(m.current.visible=!1,w.gl.setRenderTarget(g),S=w.scene.background,n&&(w.scene.background=n),w.gl.render(w.scene,p.current),w.scene.background=S,w.gl.setRenderTarget(null),m.current.visible=!0,y++)}),K.createElement(K.Fragment,null,K.createElement("orthographicCamera",os({left:d.width/-2,right:d.width/2,top:d.height/2,bottom:d.height/-2,ref:G9([p,o])},s),!A&&i),K.createElement("group",{ref:m},A&&i(g.texture)))});/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const Gt={LEFT:1,RIGHT:2,MIDDLE:4},Te=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),Rf={NONE:0,IN:1,OUT:-1};function Oc(n){return n.isPerspectiveCamera}function su(n){return n.isOrthographicCamera}const bf=Math.PI*2,IR=Math.PI/2,fO=1e-5,qp=Math.PI/180;function Oo(n,e,t){return Math.max(e,Math.min(t,n))}function Bn(n,e=fO){return Math.abs(n)<e}function An(n,e,t=fO){return Bn(n-e,t)}function OR(n,e){return Math.round(n/e)*e}function Zp(n){return isFinite(n)?n:n<0?-Number.MAX_VALUE:Number.MAX_VALUE}function jp(n){return Math.abs(n)<Number.MAX_VALUE?n:n*(1/0)}function uv(n,e,t,i,r=1/0,s){i=Math.max(1e-4,i);const o=2/i,a=o*s,h=1/(1+a+.48*a*a+.235*a*a*a);let d=n-e;const p=e,m=r*i;d=Oo(d,-m,m),e=n-d;const g=(t.value+o*d)*s;t.value=(t.value-o*g)*h;let y=e+(d+g)*h;return p-n>0==y>p&&(y=p,t.value=(y-p)/s),y}function DR(n,e,t,i,r=1/0,s,o){i=Math.max(1e-4,i);const a=2/i,h=a*s,d=1/(1+h+.48*h*h+.235*h*h*h);let p=e.x,m=e.y,g=e.z,y=n.x-p,S=n.y-m,A=n.z-g;const w=p,_=m,T=g,E=r*i,C=E*E,P=y*y+S*S+A*A;if(P>C){const oe=Math.sqrt(P);y=y/oe*E,S=S/oe*E,A=A/oe*E}p=n.x-y,m=n.y-S,g=n.z-A;const D=(t.x+a*y)*s,O=(t.y+a*S)*s,F=(t.z+a*A)*s;t.x=(t.x-a*D)*d,t.y=(t.y-a*O)*d,t.z=(t.z-a*F)*d,o.x=p+(y+D)*d,o.y=m+(S+O)*d,o.z=g+(A+F)*d;const L=w-n.x,N=_-n.y,G=T-n.z,Q=o.x-w,le=o.y-_,Z=o.z-T;return L*Q+N*le+G*Z>0&&(o.x=w,o.y=_,o.z=T,t.x=(o.x-w)/s,t.y=(o.y-_)/s,t.z=(o.z-T)/s),o}function ES(n,e){e.set(0,0),n.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=n.length,e.y/=n.length}function MS(n,e){return su(n)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}class q9{constructor(){this._listeners={}}addEventListener(e,t){const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e)}}}const Z9="2.7.3",cv=1/8,dO=typeof window<"u",j9=dO&&/Mac/.test(navigator.platform),K9=!(dO&&"PointerEvent"in window);let zt,UR,hv,TS,rs,en,Sn,Pf,Kp,fa,da,Dc,NR,FR,so,Qp,Lf,zR,AS,kR,CS,RS,fv,bS=class CE extends q9{static install(e){zt=e.THREE,UR=Object.freeze(new zt.Vector3(0,0,0)),hv=Object.freeze(new zt.Vector3(0,1,0)),TS=Object.freeze(new zt.Vector3(0,0,1)),rs=new zt.Vector2,en=new zt.Vector3,Sn=new zt.Vector3,Pf=new zt.Vector3,Kp=new zt.Vector3,fa=new zt.Vector3,da=new zt.Vector3,Dc=new zt.Vector3,NR=new zt.Vector3,FR=new zt.Vector3,so=new zt.Spherical,Qp=new zt.Spherical,Lf=new zt.Box3,zR=new zt.Box3,AS=new zt.Sphere,kR=new zt.Quaternion,CS=new zt.Quaternion,RS=new zt.Matrix4,fv=new zt.Raycaster}static get ACTION(){return Te}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=Te.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=Rf.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new zt.Vector3,this._focalOffsetVelocity=new zt.Vector3,this._zoomVelocity={value:0},this._truckInternal=(C,P,D)=>{let O,F;if(Oc(this._camera)){const L=en.copy(this._camera.position).sub(this._target),N=this._camera.getEffectiveFOV()*qp,G=L.length()*Math.tan(N*.5);O=this.truckSpeed*C*G/this._elementRect.height,F=this.truckSpeed*P*G/this._elementRect.height}else if(su(this._camera)){const L=this._camera;O=C*(L.right-L.left)/L.zoom/this._elementRect.width,F=P*(L.top-L.bottom)/L.zoom/this._elementRect.height}else return;this.verticalDragToForward?(D?this.setFocalOffset(this._focalOffsetEnd.x+O,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(O,0,!0),this.forward(-F,!0)):D?this.setFocalOffset(this._focalOffsetEnd.x+O,this._focalOffsetEnd.y+F,this._focalOffsetEnd.z,!0):this.truck(O,F,!0)},this._rotateInternal=(C,P)=>{const D=bf*this.azimuthRotateSpeed*C/this._elementRect.height,O=bf*this.polarRotateSpeed*P/this._elementRect.height;this.rotate(D,O,!0)},this._dollyInternal=(C,P,D)=>{const O=Math.pow(.95,-C*this.dollySpeed),F=this._sphericalEnd.radius,L=this._sphericalEnd.radius*O,N=Oo(L,this.minDistance,this.maxDistance),G=N-L;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(L,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(G,!0),this._dollyToNoClamp(N,!0)):this._dollyToNoClamp(N,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?L:N)-F,this._dollyControlCoord.set(P,D)),this._lastDollyDirection=Math.sign(-C)},this._zoomInternal=(C,P,D)=>{const O=Math.pow(.95,C*this.dollySpeed),F=this._zoom,L=this._zoom*O;this.zoomTo(L,!0),this.dollyToCursor&&(this._changedZoom+=L-F,this._dollyControlCoord.set(P,D))},typeof zt>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new zt.Quaternion().setFromUnitVectors(this._camera.up,hv),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=Te.NONE,this._target=new zt.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new zt.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new zt.Spherical().setFromVector3(en.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new zt.Vector3,new zt.Vector3,new zt.Vector3,new zt.Vector3],this._updateNearPlaneCorners(),this._boundary=new zt.Box3(new zt.Vector3(-1/0,-1/0,-1/0),new zt.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new zt.Vector2,this.mouseButtons={left:Te.ROTATE,middle:Te.DOLLY,right:Te.TRUCK,wheel:Oc(this._camera)?Te.DOLLY:su(this._camera)?Te.ZOOM:Te.NONE},this.touches={one:Te.TOUCH_ROTATE,two:Oc(this._camera)?Te.TOUCH_DOLLY_TRUCK:su(this._camera)?Te.TOUCH_ZOOM_TRUCK:Te.NONE,three:Te.TOUCH_TRUCK};const i=new zt.Vector2,r=new zt.Vector2,s=new zt.Vector2,o=C=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const O=this._domElement.getBoundingClientRect(),F=C.clientX/O.width,L=C.clientY/O.height;if(F<this._interactiveArea.left||F>this._interactiveArea.right||L<this._interactiveArea.top||L>this._interactiveArea.bottom)return}const P=C.pointerType!=="mouse"?null:(C.buttons&Gt.LEFT)===Gt.LEFT?Gt.LEFT:(C.buttons&Gt.MIDDLE)===Gt.MIDDLE?Gt.MIDDLE:(C.buttons&Gt.RIGHT)===Gt.RIGHT?Gt.RIGHT:null;if(P!==null){const O=this._findPointerByMouseButton(P);O&&this._disposePointer(O)}if((C.buttons&Gt.LEFT)===Gt.LEFT&&this._lockedPointer)return;const D={pointerId:C.pointerId,clientX:C.clientX,clientY:C.clientY,deltaX:0,deltaY:0,mouseButton:P};this._activePointers.push(D),this._domElement.ownerDocument.removeEventListener("pointermove",h,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",p),this._domElement.ownerDocument.addEventListener("pointermove",h,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",p),this._isDragging=!0,A(C)},a=C=>{if(!this._enabled||!this._domElement||this._lockedPointer)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const O=this._domElement.getBoundingClientRect(),F=C.clientX/O.width,L=C.clientY/O.height;if(F<this._interactiveArea.left||F>this._interactiveArea.right||L<this._interactiveArea.top||L>this._interactiveArea.bottom)return}const P=(C.buttons&Gt.LEFT)===Gt.LEFT?Gt.LEFT:(C.buttons&Gt.MIDDLE)===Gt.MIDDLE?Gt.MIDDLE:(C.buttons&Gt.RIGHT)===Gt.RIGHT?Gt.RIGHT:null;if(P!==null){const O=this._findPointerByMouseButton(P);O&&this._disposePointer(O)}const D={pointerId:1,clientX:C.clientX,clientY:C.clientY,deltaX:0,deltaY:0,mouseButton:(C.buttons&Gt.LEFT)===Gt.LEFT?Gt.LEFT:(C.buttons&Gt.MIDDLE)===Gt.LEFT?Gt.MIDDLE:(C.buttons&Gt.RIGHT)===Gt.LEFT?Gt.RIGHT:null};this._activePointers.push(D),this._domElement.ownerDocument.removeEventListener("mousemove",d),this._domElement.ownerDocument.removeEventListener("mouseup",m),this._domElement.ownerDocument.addEventListener("mousemove",d),this._domElement.ownerDocument.addEventListener("mouseup",m),this._isDragging=!0,A(C)},h=C=>{C.cancelable&&C.preventDefault();const P=C.pointerId,D=this._lockedPointer||this._findPointerById(P);if(D){if(D.clientX=C.clientX,D.clientY=C.clientY,D.deltaX=C.movementX,D.deltaY=C.movementY,this._state=0,C.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(C.buttons&Gt.LEFT)===Gt.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(C.buttons&Gt.MIDDLE)===Gt.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(C.buttons&Gt.RIGHT)===Gt.RIGHT&&(this._state=this._state|this.mouseButtons.right);w()}},d=C=>{const P=this._lockedPointer||this._findPointerById(1);P&&(P.clientX=C.clientX,P.clientY=C.clientY,P.deltaX=C.movementX,P.deltaY=C.movementY,this._state=0,(this._lockedPointer||(C.buttons&Gt.LEFT)===Gt.LEFT)&&(this._state=this._state|this.mouseButtons.left),(C.buttons&Gt.MIDDLE)===Gt.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(C.buttons&Gt.RIGHT)===Gt.RIGHT&&(this._state=this._state|this.mouseButtons.right),w())},p=C=>{const P=this._findPointerById(C.pointerId);if(!(P&&P===this._lockedPointer)){if(P&&this._disposePointer(P),C.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=Te.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=Te.NONE;_()}},m=()=>{const C=this._findPointerById(1);C&&C===this._lockedPointer||(C&&this._disposePointer(C),this._state=Te.NONE,_())};let g=-1;const y=C=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===Te.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const L=this._domElement.getBoundingClientRect(),N=C.clientX/L.width,G=C.clientY/L.height;if(N<this._interactiveArea.left||N>this._interactiveArea.right||G<this._interactiveArea.top||G>this._interactiveArea.bottom)return}if(C.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===Te.ROTATE||this.mouseButtons.wheel===Te.TRUCK){const L=performance.now();g-L<1e3&&this._getClientRect(this._elementRect),g=L}const P=j9?-1:-3,D=C.deltaMode===1?C.deltaY/P:C.deltaY/(P*10),O=this.dollyToCursor?(C.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,F=this.dollyToCursor?(C.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case Te.ROTATE:{this._rotateInternal(C.deltaX,C.deltaY),this._isUserControllingRotate=!0;break}case Te.TRUCK:{this._truckInternal(C.deltaX,C.deltaY,!1),this._isUserControllingTruck=!0;break}case Te.OFFSET:{this._truckInternal(C.deltaX,C.deltaY,!0),this._isUserControllingOffset=!0;break}case Te.DOLLY:{this._dollyInternal(-D,O,F),this._isUserControllingDolly=!0;break}case Te.ZOOM:{this._zoomInternal(-D,O,F),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},S=C=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===CE.ACTION.NONE){const P=C instanceof PointerEvent?C.pointerId:(C instanceof MouseEvent,0),D=this._findPointerById(P);D&&this._disposePointer(D),this._domElement.ownerDocument.removeEventListener("pointermove",h,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",p),this._domElement.ownerDocument.removeEventListener("mousemove",d),this._domElement.ownerDocument.removeEventListener("mouseup",m);return}C.preventDefault()}},A=C=>{if(!this._enabled)return;if(ES(this._activePointers,rs),this._getClientRect(this._elementRect),i.copy(rs),r.copy(rs),this._activePointers.length>=2){const D=rs.x-this._activePointers[1].clientX,O=rs.y-this._activePointers[1].clientY,F=Math.sqrt(D*D+O*O);s.set(0,F);const L=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,N=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;r.set(L,N)}if(this._state=0,!C)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in C&&C.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(C.buttons&Gt.LEFT)===Gt.LEFT&&(this._state=this._state|this.mouseButtons.left),(C.buttons&Gt.MIDDLE)===Gt.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(C.buttons&Gt.RIGHT)===Gt.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&Te.ROTATE)===Te.ROTATE||(this._state&Te.TOUCH_ROTATE)===Te.TOUCH_ROTATE||(this._state&Te.TOUCH_DOLLY_ROTATE)===Te.TOUCH_DOLLY_ROTATE||(this._state&Te.TOUCH_ZOOM_ROTATE)===Te.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&Te.TRUCK)===Te.TRUCK||(this._state&Te.TOUCH_TRUCK)===Te.TOUCH_TRUCK||(this._state&Te.TOUCH_DOLLY_TRUCK)===Te.TOUCH_DOLLY_TRUCK||(this._state&Te.TOUCH_ZOOM_TRUCK)===Te.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&Te.DOLLY)===Te.DOLLY||(this._state&Te.TOUCH_DOLLY)===Te.TOUCH_DOLLY||(this._state&Te.TOUCH_DOLLY_TRUCK)===Te.TOUCH_DOLLY_TRUCK||(this._state&Te.TOUCH_DOLLY_OFFSET)===Te.TOUCH_DOLLY_OFFSET||(this._state&Te.TOUCH_DOLLY_ROTATE)===Te.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&Te.ZOOM)===Te.ZOOM||(this._state&Te.TOUCH_ZOOM)===Te.TOUCH_ZOOM||(this._state&Te.TOUCH_ZOOM_TRUCK)===Te.TOUCH_ZOOM_TRUCK||(this._state&Te.TOUCH_ZOOM_OFFSET)===Te.TOUCH_ZOOM_OFFSET||(this._state&Te.TOUCH_ZOOM_ROTATE)===Te.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&Te.OFFSET)===Te.OFFSET||(this._state&Te.TOUCH_OFFSET)===Te.TOUCH_OFFSET||(this._state&Te.TOUCH_DOLLY_OFFSET)===Te.TOUCH_DOLLY_OFFSET||(this._state&Te.TOUCH_ZOOM_OFFSET)===Te.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},w=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,ES(this._activePointers,rs);const P=this._domElement&&document.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,D=P?-P.deltaX:r.x-rs.x,O=P?-P.deltaY:r.y-rs.y;if(r.copy(rs),((this._state&Te.ROTATE)===Te.ROTATE||(this._state&Te.TOUCH_ROTATE)===Te.TOUCH_ROTATE||(this._state&Te.TOUCH_DOLLY_ROTATE)===Te.TOUCH_DOLLY_ROTATE||(this._state&Te.TOUCH_ZOOM_ROTATE)===Te.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(D,O),this._isUserControllingRotate=!0),(this._state&Te.DOLLY)===Te.DOLLY||(this._state&Te.ZOOM)===Te.ZOOM){const F=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,L=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0,N=this.dollyDragInverted?-1:1;(this._state&Te.DOLLY)===Te.DOLLY?(this._dollyInternal(N*O*cv,F,L),this._isUserControllingDolly=!0):(this._zoomInternal(N*O*cv,F,L),this._isUserControllingZoom=!0)}if((this._state&Te.TOUCH_DOLLY)===Te.TOUCH_DOLLY||(this._state&Te.TOUCH_ZOOM)===Te.TOUCH_ZOOM||(this._state&Te.TOUCH_DOLLY_TRUCK)===Te.TOUCH_DOLLY_TRUCK||(this._state&Te.TOUCH_ZOOM_TRUCK)===Te.TOUCH_ZOOM_TRUCK||(this._state&Te.TOUCH_DOLLY_OFFSET)===Te.TOUCH_DOLLY_OFFSET||(this._state&Te.TOUCH_ZOOM_OFFSET)===Te.TOUCH_ZOOM_OFFSET||(this._state&Te.TOUCH_DOLLY_ROTATE)===Te.TOUCH_DOLLY_ROTATE||(this._state&Te.TOUCH_ZOOM_ROTATE)===Te.TOUCH_ZOOM_ROTATE){const F=rs.x-this._activePointers[1].clientX,L=rs.y-this._activePointers[1].clientY,N=Math.sqrt(F*F+L*L),G=s.y-N;s.set(0,N);const Q=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,le=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&Te.TOUCH_DOLLY)===Te.TOUCH_DOLLY||(this._state&Te.TOUCH_DOLLY_ROTATE)===Te.TOUCH_DOLLY_ROTATE||(this._state&Te.TOUCH_DOLLY_TRUCK)===Te.TOUCH_DOLLY_TRUCK||(this._state&Te.TOUCH_DOLLY_OFFSET)===Te.TOUCH_DOLLY_OFFSET?(this._dollyInternal(G*cv,Q,le),this._isUserControllingDolly=!0):(this._zoomInternal(G*cv,Q,le),this._isUserControllingZoom=!0)}((this._state&Te.TRUCK)===Te.TRUCK||(this._state&Te.TOUCH_TRUCK)===Te.TOUCH_TRUCK||(this._state&Te.TOUCH_DOLLY_TRUCK)===Te.TOUCH_DOLLY_TRUCK||(this._state&Te.TOUCH_ZOOM_TRUCK)===Te.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(D,O,!1),this._isUserControllingTruck=!0),((this._state&Te.OFFSET)===Te.OFFSET||(this._state&Te.TOUCH_OFFSET)===Te.TOUCH_OFFSET||(this._state&Te.TOUCH_DOLLY_OFFSET)===Te.TOUCH_DOLLY_OFFSET||(this._state&Te.TOUCH_ZOOM_OFFSET)===Te.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(D,O,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},_=()=>{ES(this._activePointers,rs),r.copy(rs),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",h,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",d),this._domElement.ownerDocument.removeEventListener("pointerup",p),this._domElement.ownerDocument.removeEventListener("mouseup",m),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",h,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",p),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",T),this._domElement.ownerDocument.addEventListener("pointerlockerror",E),this._domElement.ownerDocument.addEventListener("pointermove",h,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",p),A())},this.unlockPointer=()=>{this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),document.exitPointerLock(),this.cancel(),this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointerlockchange",T),this._domElement.ownerDocument.removeEventListener("pointerlockerror",E))};const T=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},E=()=>{this.unlockPointer()};this._addAllEventListeners=C=>{this._domElement=C,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",o),K9&&this._domElement.addEventListener("mousedown",a),this._domElement.addEventListener("pointercancel",p),this._domElement.addEventListener("wheel",y,{passive:!1}),this._domElement.addEventListener("contextmenu",S)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",o),this._domElement.removeEventListener("mousedown",a),this._domElement.removeEventListener("pointercancel",p),this._domElement.removeEventListener("wheel",y,{passive:!1}),this._domElement.removeEventListener("contextmenu",S),this._domElement.ownerDocument.removeEventListener("pointermove",h,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",d),this._domElement.ownerDocument.removeEventListener("pointerup",p),this._domElement.ownerDocument.removeEventListener("mouseup",m),this._domElement.ownerDocument.removeEventListener("pointerlockchange",T),this._domElement.ownerDocument.removeEventListener("pointerlockerror",E))},this.cancel=()=>{this._state!==Te.NONE&&(this._state=Te.NONE,this._activePointers.length=0,_())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=Oo(e.width,0,1),this._interactiveArea.height=Oo(e.height,0,1),this._interactiveArea.x=Oo(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=Oo(e.y,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,i=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,i)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,i=!1){this._isUserControllingRotate=!1;const r=Oo(e,this.minAzimuthAngle,this.maxAzimuthAngle),s=Oo(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=s,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,i||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const o=!i||An(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&An(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=Rf.NONE,this._changedDolly=0,this._dollyToNoClamp(Oo(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const i=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const o=this._collisionTest(),a=An(o,this._spherical.radius);if(!(i>e)&&a)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,o)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const s=!t||An(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(s)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(Kp).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const i=!t||An(this._target.x,this._targetEnd.x,this.restThreshold)&&An(this._target.y,this._targetEnd.y,this.restThreshold)&&An(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=Oo(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const i=!t||An(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(i)}pan(e,t,i=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,i)}truck(e,t,i=!1){this._camera.updateMatrix(),fa.setFromMatrixColumn(this._camera.matrix,0),da.setFromMatrixColumn(this._camera.matrix,1),fa.multiplyScalar(e),da.multiplyScalar(-t);const r=en.copy(fa).add(da),s=Sn.copy(this._targetEnd).add(r);return this.moveTo(s.x,s.y,s.z,i)}forward(e,t=!1){en.setFromMatrixColumn(this._camera.matrix,0),en.crossVectors(this._camera.up,en),en.multiplyScalar(e);const i=Sn.copy(this._targetEnd).add(en);return this.moveTo(i.x,i.y,i.z,t)}elevate(e,t=!1){return en.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+en.x,this._targetEnd.y+en.y,this._targetEnd.z+en.z,t)}moveTo(e,t,i,r=!1){this._isUserControllingTruck=!1;const s=en.set(e,t,i).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,s,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);const o=!r||An(this._target.x,this._targetEnd.x,this.restThreshold)&&An(this._target.y,this._targetEnd.y,this.restThreshold)&&An(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}lookInDirectionOf(e,t,i,r=!1){const a=en.set(e,t,i).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius);return this.setPosition(a.x,a.y,a.z,r)}fitToBox(e,t,{cover:i=!1,paddingLeft:r=0,paddingRight:s=0,paddingBottom:o=0,paddingTop:a=0}={}){const h=[],d=e.isBox3?Lf.copy(e):Lf.setFromObject(e);d.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const p=OR(this._sphericalEnd.theta,IR),m=OR(this._sphericalEnd.phi,IR);h.push(this.rotateTo(p,m,t));const g=en.setFromSpherical(this._sphericalEnd).normalize(),y=kR.setFromUnitVectors(g,TS),S=An(Math.abs(g.y),1);S&&y.multiply(CS.setFromAxisAngle(hv,p)),y.multiply(this._yAxisUpSpaceInverse);const A=zR.makeEmpty();Sn.copy(d.min).applyQuaternion(y),A.expandByPoint(Sn),Sn.copy(d.min).setX(d.max.x).applyQuaternion(y),A.expandByPoint(Sn),Sn.copy(d.min).setY(d.max.y).applyQuaternion(y),A.expandByPoint(Sn),Sn.copy(d.max).setZ(d.min.z).applyQuaternion(y),A.expandByPoint(Sn),Sn.copy(d.min).setZ(d.max.z).applyQuaternion(y),A.expandByPoint(Sn),Sn.copy(d.max).setY(d.min.y).applyQuaternion(y),A.expandByPoint(Sn),Sn.copy(d.max).setX(d.min.x).applyQuaternion(y),A.expandByPoint(Sn),Sn.copy(d.max).applyQuaternion(y),A.expandByPoint(Sn),A.min.x-=r,A.min.y-=o,A.max.x+=s,A.max.y+=a,y.setFromUnitVectors(TS,g),S&&y.premultiply(CS.invert()),y.premultiply(this._yAxisUpSpace);const w=A.getSize(en),_=A.getCenter(Sn).applyQuaternion(y);if(Oc(this._camera)){const T=this.getDistanceToFitBox(w.x,w.y,w.z,i);h.push(this.moveTo(_.x,_.y,_.z,t)),h.push(this.dollyTo(T,t)),h.push(this.setFocalOffset(0,0,0,t))}else if(su(this._camera)){const T=this._camera,E=T.right-T.left,C=T.top-T.bottom,P=i?Math.max(E/w.x,C/w.y):Math.min(E/w.x,C/w.y);h.push(this.moveTo(_.x,_.y,_.z,t)),h.push(this.zoomTo(P,t)),h.push(this.setFocalOffset(0,0,0,t))}return Promise.all(h)}fitToSphere(e,t){const i=[],s=e instanceof zt.Sphere?AS.copy(e):CE.createBoundingSphere(e,AS);if(i.push(this.moveTo(s.center.x,s.center.y,s.center.z,t)),Oc(this._camera)){const o=this.getDistanceToFitSphere(s.radius);i.push(this.dollyTo(o,t))}else if(su(this._camera)){const o=this._camera.right-this._camera.left,a=this._camera.top-this._camera.bottom,h=2*s.radius,d=Math.min(o/h,a/h);i.push(this.zoomTo(d,t))}return i.push(this.setFocalOffset(0,0,0,t)),Promise.all(i)}setLookAt(e,t,i,r,s,o,a=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Rf.NONE,this._changedDolly=0;const h=Sn.set(r,s,o),d=en.set(e,t,i);this._targetEnd.copy(h),this._sphericalEnd.setFromVector3(d.sub(h).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,a||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const p=!a||An(this._target.x,this._targetEnd.x,this.restThreshold)&&An(this._target.y,this._targetEnd.y,this.restThreshold)&&An(this._target.z,this._targetEnd.z,this.restThreshold)&&An(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&An(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&An(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(p)}lerpLookAt(e,t,i,r,s,o,a,h,d,p,m,g,y,S=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Rf.NONE,this._changedDolly=0;const A=en.set(r,s,o),w=Sn.set(e,t,i);so.setFromVector3(w.sub(A).applyQuaternion(this._yAxisUpSpace));const _=Pf.set(p,m,g),T=Sn.set(a,h,d);Qp.setFromVector3(T.sub(_).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(A.lerp(_,y));const E=Qp.theta-so.theta,C=Qp.phi-so.phi,P=Qp.radius-so.radius;this._sphericalEnd.set(so.radius+P*y,so.phi+C*y,so.theta+E*y),this.normalizeRotations(),this._needsUpdate=!0,S||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const D=!S||An(this._target.x,this._targetEnd.x,this.restThreshold)&&An(this._target.y,this._targetEnd.y,this.restThreshold)&&An(this._target.z,this._targetEnd.z,this.restThreshold)&&An(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&An(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&An(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(D)}setPosition(e,t,i,r=!1){return this.setLookAt(e,t,i,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,t,i,r=!1){const s=this.getPosition(en),o=this.setLookAt(s.x,s.y,s.z,e,t,i,r);return this._sphericalEnd.phi=Oo(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),o}setFocalOffset(e,t,i,r=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,i),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);const s=!r||An(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&An(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&An(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}setOrbitPoint(e,t,i){this._camera.updateMatrixWorld(),fa.setFromMatrixColumn(this._camera.matrixWorldInverse,0),da.setFromMatrixColumn(this._camera.matrixWorldInverse,1),Dc.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const r=en.set(e,t,i),s=r.distanceTo(this._camera.position),o=r.sub(this._camera.position);fa.multiplyScalar(o.x),da.multiplyScalar(o.y),Dc.multiplyScalar(o.z),en.copy(fa).add(da).add(Dc),en.z=en.z+s,this.dollyTo(s,!1),this.setFocalOffset(-en.x,en.y,-en.z,!1),this.moveTo(e,t,i,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,i,r){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new zt.Vector4,typeof e=="number"?this._viewport.set(e,t,i,r):this._viewport.copy(e)}getDistanceToFitBox(e,t,i,r=!1){if(MS(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const s=e/t,o=this._camera.getEffectiveFOV()*qp,a=this._camera.aspect;return((r?s>a:s<a)?t:e/a)*.5/Math.tan(o*.5)+i*.5}getDistanceToFitSphere(e){if(MS(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*qp,i=Math.atan(Math.tan(t*.5)*this._camera.aspect)*2,r=1<this._camera.aspect?t:i;return e/Math.sin(r*.5)}getTarget(e,t=!0){return(e&&e.isVector3?e:new zt.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&&e.isVector3?e:new zt.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e&&e instanceof zt.Spherical?e:new zt.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&&e.isVector3?e:new zt.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%bf,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=bf),this._spherical.theta+=bf*Math.round((this._sphericalEnd.theta-this._spherical.theta)/bf)}reset(e=!1){if(!An(this._camera.up.x,this._cameraUp0.x)||!An(this._camera.up.y,this._cameraUp0.y)||!An(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const i=this.getPosition(en);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,hv),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=en.subVectors(this._target,this._camera.position).normalize(),t=Sn.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e).normalize(),this._camera.updateMatrixWorld();const i=this.getPosition(en);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,i=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,s=NR.subVectors(this._targetEnd,this._target),o=FR.subVectors(this._focalOffsetEnd,this._focalOffset),a=this._zoomEnd-this._zoom;if(Bn(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const m=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=uv(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,m,1/0,e),this._needsUpdate=!0}if(Bn(i))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const m=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=uv(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,m,1/0,e),this._needsUpdate=!0}if(Bn(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const m=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=uv(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,m,this.maxSpeed,e),this._needsUpdate=!0}if(Bn(s.x)&&Bn(s.y)&&Bn(s.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const m=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;DR(this._target,this._targetEnd,this._targetVelocity,m,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(Bn(o.x)&&Bn(o.y)&&Bn(o.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const m=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;DR(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,m,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(Bn(a))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const m=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=uv(this._zoom,this._zoomEnd,this._zoomVelocity,m,1/0,e)}if(this.dollyToCursor){if(Oc(this._camera)&&this._changedDolly!==0){const m=this._spherical.radius-this._lastDistance,g=this._camera,y=this._getCameraDirection(Kp),S=en.copy(y).cross(g.up).normalize();S.lengthSq()===0&&(S.x=1);const A=Sn.crossVectors(S,y),w=this._sphericalEnd.radius*Math.tan(g.getEffectiveFOV()*qp*.5),T=(this._sphericalEnd.radius-m-this._sphericalEnd.radius)/this._sphericalEnd.radius,E=Pf.copy(this._targetEnd).add(S.multiplyScalar(this._dollyControlCoord.x*w*g.aspect)).add(A.multiplyScalar(this._dollyControlCoord.y*w)),C=en.copy(this._targetEnd).lerp(E,T),P=this._lastDollyDirection===Rf.IN&&this._spherical.radius<=this.minDistance,D=this._lastDollyDirection===Rf.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(P||D)){this._sphericalEnd.radius-=m,this._spherical.radius-=m;const F=Sn.copy(y).multiplyScalar(-m);C.add(F)}this._boundary.clampPoint(C,C);const O=Sn.subVectors(C,this._targetEnd);this._targetEnd.copy(C),this._target.add(O),this._changedDolly-=m,Bn(this._changedDolly)&&(this._changedDolly=0)}else if(su(this._camera)&&this._changedZoom!==0){const m=this._zoom-this._lastZoom,g=this._camera,y=en.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(g.near+g.far)/(g.near-g.far)).unproject(g),S=Sn.set(0,0,-1).applyQuaternion(g.quaternion),A=Pf.copy(y).add(S.multiplyScalar(-y.dot(g.up))),_=-(this._zoom-m-this._zoom)/this._zoom,T=this._getCameraDirection(Kp),E=this._targetEnd.dot(T),C=en.copy(this._targetEnd).lerp(A,_),P=C.dot(T),D=T.multiplyScalar(P-E);C.sub(D),this._boundary.clampPoint(C,C);const O=Sn.subVectors(C,this._targetEnd);this._targetEnd.copy(C),this._target.add(O),this._changedZoom-=m,Bn(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const h=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,h),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!Bn(this._focalOffset.x)||!Bn(this._focalOffset.y)||!Bn(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),fa.setFromMatrixColumn(this._camera.matrix,0),da.setFromMatrixColumn(this._camera.matrix,1),Dc.setFromMatrixColumn(this._camera.matrix,2),fa.multiplyScalar(this._focalOffset.x),da.multiplyScalar(-this._focalOffset.y),Dc.multiplyScalar(this._focalOffset.z),en.copy(fa).add(da).add(Dc),this._camera.position.add(en)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),en.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const p=this._needsUpdate;return p&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):p?(this.dispatchEvent({type:"update"}),Bn(t,this.restThreshold)&&Bn(i,this.restThreshold)&&Bn(r,this.restThreshold)&&Bn(s.x,this.restThreshold)&&Bn(s.y,this.restThreshold)&&Bn(s.z,this.restThreshold)&&Bn(o.x,this.restThreshold)&&Bn(o.y,this.restThreshold)&&Bn(o.z,this.restThreshold)&&Bn(a,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!p&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=p,this._needsUpdate=!1,p}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:Zp(this.maxDistance),minZoom:this.minZoom,maxZoom:Zp(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:Zp(this.maxPolarAngle),minAzimuthAngle:Zp(this.minAzimuthAngle),maxAzimuthAngle:Zp(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:en.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const i=JSON.parse(e);this.enabled=i.enabled,this.minDistance=i.minDistance,this.maxDistance=jp(i.maxDistance),this.minZoom=i.minZoom,this.maxZoom=jp(i.maxZoom),this.minPolarAngle=i.minPolarAngle,this.maxPolarAngle=jp(i.maxPolarAngle),this.minAzimuthAngle=jp(i.minAzimuthAngle),this.maxAzimuthAngle=jp(i.maxAzimuthAngle),this.smoothTime=i.smoothTime,this.draggingSmoothTime=i.draggingSmoothTime,this.dollySpeed=i.dollySpeed,this.truckSpeed=i.truckSpeed,this.dollyToCursor=i.dollyToCursor,this.verticalDragToForward=i.verticalDragToForward,this._target0.fromArray(i.target0),this._position0.fromArray(i.position0),this._zoom0=i.zoom0,this._focalOffset0.fromArray(i.focalOffset0),this.moveTo(i.target[0],i.target[1],i.target[2],t),so.setFromVector3(en.fromArray(i.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(so.theta,so.phi,t),this.dollyTo(so.radius,t),this.zoomTo(i.zoom,t),this.setFocalOffset(i.focalOffset[0],i.focalOffset[1],i.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",Z9),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=>t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=>t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,i){const r=t.lengthSq();if(r===0)return e;const s=Sn.copy(t).add(e),a=this._boundary.clampPoint(s,Pf).sub(s),h=a.lengthSq();if(h===0)return e.add(t);if(h===r)return e;if(i===0)return e.add(t).add(a);{const d=1+i*h/t.dot(a);return e.add(Sn.copy(t).multiplyScalar(d)).add(a.multiplyScalar(1-i))}}_updateNearPlaneCorners(){if(Oc(this._camera)){const e=this._camera,t=e.near,i=e.getEffectiveFOV()*qp,r=Math.tan(i*.5)*t,s=r*e.aspect;this._nearPlaneCorners[0].set(-s,-r,0),this._nearPlaneCorners[1].set(s,-r,0),this._nearPlaneCorners[2].set(s,r,0),this._nearPlaneCorners[3].set(-s,r,0)}else if(su(this._camera)){const e=this._camera,t=1/e.zoom,i=e.left*t,r=e.right*t,s=e.top*t,o=e.bottom*t;this._nearPlaneCorners[0].set(i,s,0),this._nearPlaneCorners[1].set(r,s,0),this._nearPlaneCorners[2].set(r,o,0),this._nearPlaneCorners[3].set(i,o,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||MS(this._camera,"_collisionTest"))return e;const i=this._getTargetDirection(Kp);RS.lookAt(UR,i,this._camera.up);for(let r=0;r<4;r++){const s=Sn.copy(this._nearPlaneCorners[r]);s.applyMatrix4(RS);const o=Pf.addVectors(this._target,s);fv.set(o,i),fv.far=this._spherical.radius+1;const a=fv.intersectObjects(this.colliderMeshes);a.length!==0&&a[0].distance<e&&(e=a[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(t=>{const i=()=>{this.removeEventListener("rest",i),t()};this.addEventListener("rest",i)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,t=new zt.Sphere){const i=t,r=i.center;Lf.makeEmpty(),e.traverseVisible(o=>{o.isMesh&&Lf.expandByObject(o)}),Lf.getCenter(r);let s=0;return e.traverseVisible(o=>{if(!o.isMesh)return;const a=o,h=a.geometry.clone();h.applyMatrix4(a.matrixWorld);const p=h.attributes.position;for(let m=0,g=p.count;m<g;m++)en.fromBufferAttribute(p,m),s=Math.max(s,r.distanceToSquared(en))}),i.radius=Math.sqrt(s),i}};const Q9=K.forwardRef((n,e)=>{K.useMemo(()=>{const P={Box3:Rr,MathUtils:{clamp:PL.clamp},Matrix4:yt,Quaternion:fr,Raycaster:cx,Sphere:dr,Spherical:HI,Vector2:Pe,Vector3:V,Vector4:Cn};bS.install({THREE:P}),jI({CameraControlsImpl:bS})},[]);const{camera:t,domElement:i,makeDefault:r,onStart:s,onEnd:o,onChange:a,regress:h,...d}=n,p=Di(P=>P.camera),m=Di(P=>P.gl),g=Di(P=>P.invalidate),y=Di(P=>P.events),S=Di(P=>P.setEvents),A=Di(P=>P.set),w=Di(P=>P.get),_=Di(P=>P.performance),T=t||p,E=i||y.connected||m.domElement,C=K.useMemo(()=>new bS(T),[T]);return hx((P,D)=>{C.enabled&&C.update(D)},-1),K.useEffect(()=>(C.connect(E),()=>void C.disconnect()),[E,C]),K.useEffect(()=>{const P=F=>{g(),h&&_.regress(),a&&a(F)},D=F=>{s&&s(F)},O=F=>{o&&o(F)};return C.addEventListener("update",P),C.addEventListener("controlstart",D),C.addEventListener("controlend",O),C.addEventListener("control",P),C.addEventListener("transitionstart",P),C.addEventListener("wake",P),()=>{C.removeEventListener("update",P),C.removeEventListener("controlstart",D),C.removeEventListener("controlend",O),C.removeEventListener("control",P),C.removeEventListener("transitionstart",P),C.removeEventListener("wake",P)}},[C,s,o,g,S,h,a]),K.useEffect(()=>{if(r){const P=w().controls;return A({controls:C}),()=>A({controls:P})}},[r,C]),K.createElement("primitive",os({ref:e,object:C},d))});function J9({defaultScene:n,defaultCamera:e,renderPriority:t=1}){const{gl:i,scene:r,camera:s}=Di();let o;return hx(()=>{o=i.autoClear,t===1&&(i.autoClear=!0,i.render(n,e)),i.autoClear=!1,i.clearDepth(),i.render(r,s),i.autoClear=o},t),K.createElement("group",{onPointerOver:()=>null})}function $9({children:n,renderPriority:e=1}){const{scene:t,camera:i}=Di(),[r]=K.useState(()=>new sg);return K.createElement(K.Fragment,null,E9(K.createElement(K.Fragment,null,n,K.createElement(J9,{defaultScene:t,defaultCamera:i,renderPriority:e})),r,{events:{priority:e+1}}))}const pO=K.createContext({}),e7=()=>K.useContext(pO),t7=2*Math.PI,PS=new fn,BR=new yt,[If,LS]=[new fr,new fr],HR=new V,VR=new V,n7=n=>"minPolarAngle"in n,i7=({alignment:n="bottom-right",margin:e=[80,80],renderPriority:t=1,onUpdate:i,onTarget:r,children:s})=>{const o=Di(D=>D.size),a=Di(D=>D.camera),h=Di(D=>D.controls),d=Di(D=>D.invalidate),p=K.useRef(null),m=K.useRef(null),g=K.useRef(!1),y=K.useRef(0),S=K.useRef(new V(0,0,0)),A=K.useRef(new V(0,0,0));K.useEffect(()=>{A.current.copy(a.up)},[a]);const w=K.useCallback(D=>{g.current=!0,(h||r)&&(S.current=(h==null?void 0:h.target)||(r==null?void 0:r())),y.current=a.position.distanceTo(HR),If.copy(a.quaternion),VR.copy(D).multiplyScalar(y.current).add(HR),PS.lookAt(VR),PS.up.copy(a.up),LS.copy(PS.quaternion),d()},[h,a,r,d]);hx((D,O)=>{if(m.current&&p.current){var F;if(g.current)if(If.angleTo(LS)<.01)g.current=!1,n7(h)&&a.up.copy(A.current);else{const L=O*t7;If.rotateTowards(LS,L),a.position.set(0,0,1).applyQuaternion(If).multiplyScalar(y.current).add(S.current),a.up.set(0,1,0).applyQuaternion(If).normalize(),a.quaternion.copy(If),i?i():h&&h.update(),d()}BR.copy(a.matrix).invert(),(F=p.current)==null||F.quaternion.setFromRotationMatrix(BR)}});const _=K.useMemo(()=>({tweenCamera:w}),[w]),[T,E]=e,C=n.endsWith("-center")?0:n.endsWith("-left")?-o.width/2+T:o.width/2-T,P=n.startsWith("center-")?0:n.startsWith("top-")?o.height/2-E:-o.height/2+E;return K.createElement($9,{renderPriority:t},K.createElement(pO.Provider,{value:_},K.createElement(Y9,{makeDefault:!0,ref:m,position:[0,0,200]}),K.createElement("group",{ref:p,position:[C,P,0]},s)))};function IS({scale:n=[.8,.05,.05],color:e,rotation:t}){return K.createElement("group",{rotation:t},K.createElement("mesh",{position:[.4,0,0]},K.createElement("boxGeometry",{args:n}),K.createElement("meshBasicMaterial",{color:e,toneMapped:!1})))}function Of({onClick:n,font:e,disabled:t,arcStyle:i,label:r,labelColor:s,axisHeadScale:o=1,...a}){const h=Di(A=>A.gl),d=K.useMemo(()=>{const A=document.createElement("canvas");A.width=64,A.height=64;const w=A.getContext("2d");return w.beginPath(),w.arc(32,32,16,0,2*Math.PI),w.closePath(),w.fillStyle=i,w.fill(),r&&(w.font=e,w.textAlign="center",w.fillStyle=s,w.fillText(r,32,41)),new nI(A)},[i,r,s,e]),[p,m]=K.useState(!1),g=(r?1:.75)*(p?1.2:1)*o,y=A=>{A.stopPropagation(),m(!0)},S=A=>{A.stopPropagation(),m(!1)};return K.createElement("sprite",os({scale:g,onPointerOver:t?void 0:y,onPointerOut:t?void 0:n||S},a),K.createElement("spriteMaterial",{map:d,"map-anisotropy":h.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:r?1:.75,toneMapped:!1}))}const r7=({hideNegativeAxes:n,hideAxisHeads:e,disabled:t,font:i="18px Inter var, Arial, sans-serif",axisColors:r=["#ff2060","#20df80","#2080ff"],axisHeadScale:s=1,axisScale:o,labels:a=["X","Y","Z"],labelColor:h="#000",onClick:d,...p})=>{const[m,g,y]=r,{tweenCamera:S}=e7(),A={font:i,disabled:t,labelColor:h,onClick:d,axisHeadScale:s,onPointerDown:t?void 0:w=>{S(w.object.position),w.stopPropagation()}};return K.createElement("group",os({scale:40},p),K.createElement(IS,{color:m,rotation:[0,0,0],scale:o}),K.createElement(IS,{color:g,rotation:[0,0,Math.PI/2],scale:o}),K.createElement(IS,{color:y,rotation:[0,-Math.PI/2,0],scale:o}),!e&&K.createElement(K.Fragment,null,K.createElement(Of,os({arcStyle:m,position:[1,0,0],label:a[0]},A)),K.createElement(Of,os({arcStyle:g,position:[0,1,0],label:a[1]},A)),K.createElement(Of,os({arcStyle:y,position:[0,0,1],label:a[2]},A)),!n&&K.createElement(K.Fragment,null,K.createElement(Of,os({arcStyle:m,position:[-1,0,0]},A)),K.createElement(Of,os({arcStyle:g,position:[0,-1,0]},A)),K.createElement(Of,os({arcStyle:y,position:[0,0,-1]},A)))))},s7=n=>n===0?0:Math.pow(2,10*n-10);function o7({children:n,floor:e=.25,segments:t=20,receiveShadow:i,...r}){const s=K.useRef(null);return K.useLayoutEffect(()=>{let o=0;const a=t/t/2,h=s.current.attributes.position;for(let d=0;d<t+1;d++)for(let p=0;p<t+1;p++)h.setXYZ(o++,d/t-a+(d===0?-e:0),p/t-a,s7(d/t));h.needsUpdate=!0,s.current.computeVertexNormals()},[t,e]),K.createElement("group",r,K.createElement("mesh",{receiveShadow:i,rotation:[-Math.PI/2,0,Math.PI/2]},K.createElement("planeGeometry",{ref:s,args:[1,1,t,t]}),n))}var a7=Object.defineProperty,l7=(n,e)=>{for(var t in e)a7(n,t,{get:e[t],enumerable:!0})},vo={};l7(vo,{assign:()=>h7,colors:()=>Ru,createStringInterpolator:()=>bT,skipAnimation:()=>SO,to:()=>xO,willAdvance:()=>PT});var ET=Vg(),qt=n=>Hg(n,ET),MT=Vg();qt.write=n=>Hg(n,MT);var fx=Vg();qt.onStart=n=>Hg(n,fx);var TT=Vg();qt.onFrame=n=>Hg(n,TT);var AT=Vg();qt.onFinish=n=>Hg(n,AT);var ld=[];qt.setTimeout=(n,e)=>{const t=qt.now()+e,i=()=>{const s=ld.findIndex(o=>o.cancel==i);~s&&ld.splice(s,1),mu-=~s?1:0},r={time:t,handler:n,cancel:i};return ld.splice(mO(t),0,r),mu+=1,gO(),r};var mO=n=>~(~ld.findIndex(e=>e.time>n)||~ld.length);qt.cancel=n=>{fx.delete(n),TT.delete(n),AT.delete(n),ET.delete(n),MT.delete(n)};qt.sync=n=>{RE=!0,qt.batchedUpdates(n),RE=!1};qt.throttle=n=>{let e;function t(){try{n(...e)}finally{e=null}}function i(...r){e=r,qt.onStart(t)}return i.handler=n,i.cancel=()=>{fx.delete(t),e=null},i};var CT=typeof window<"u"?window.requestAnimationFrame:()=>{};qt.use=n=>CT=n;qt.now=typeof performance<"u"?()=>performance.now():Date.now;qt.batchedUpdates=n=>n();qt.catch=console.error;qt.frameLoop="always";qt.advance=()=>{qt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):vO()};var pu=-1,mu=0,RE=!1;function Hg(n,e){RE?(e.delete(n),n(0)):(e.add(n),gO())}function gO(){pu<0&&(pu=0,qt.frameLoop!=="demand"&&CT(_O))}function u7(){pu=-1}function _O(){~pu&&(CT(_O),qt.batchedUpdates(vO))}function vO(){const n=pu;pu=qt.now();const e=mO(pu);if(e&&(yO(ld.splice(0,e),t=>t.handler()),mu-=e),!mu){u7();return}fx.flush(),ET.flush(n?Math.min(64,pu-n):16.667),TT.flush(),MT.flush(),AT.flush()}function Vg(){let n=new Set,e=n;return{add(t){mu+=e==n&&!n.has(t)?1:0,n.add(t)},delete(t){return mu-=e==n&&n.has(t)?1:0,n.delete(t)},flush(t){e.size&&(n=new Set,mu-=e.size,yO(e,i=>i(t)&&n.add(i)),mu+=n.size,e=n)}}}function yO(n,e){n.forEach(t=>{try{e(t)}catch(i){qt.catch(i)}})}function bE(){}var c7=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),We={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0};function $a(n,e){if(We.arr(n)){if(!We.arr(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return n===e}var mn=(n,e)=>n.forEach(e);function Ta(n,e,t){if(We.arr(n)){for(let i=0;i<n.length;i++)e.call(t,n[i],`${i}`);return}for(const i in n)n.hasOwnProperty(i)&&e.call(t,n[i],i)}var Fs=n=>We.und(n)?[]:We.arr(n)?n:[n];function Tm(n,e){if(n.size){const t=Array.from(n);n.clear(),mn(t,e)}}var lm=(n,...e)=>Tm(n,t=>t(...e)),RT=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),bT,xO,Ru=null,SO=!1,PT=bE,h7=n=>{n.to&&(xO=n.to),n.now&&(qt.now=n.now),n.colors!==void 0&&(Ru=n.colors),n.skipAnimation!=null&&(SO=n.skipAnimation),n.createStringInterpolator&&(bT=n.createStringInterpolator),n.requestAnimationFrame&&qt.use(n.requestAnimationFrame),n.batchedUpdates&&(qt.batchedUpdates=n.batchedUpdates),n.willAdvance&&(PT=n.willAdvance),n.frameLoop&&(qt.frameLoop=n.frameLoop)},Am=new Set,co=[],OS=[],py=0,dx={get idle(){return!Am.size&&!co.length},start(n){py>n.priority?(Am.add(n),qt.onStart(f7)):(wO(n),qt(PE))},advance:PE,sort(n){if(py)qt.onFrame(()=>dx.sort(n));else{const e=co.indexOf(n);~e&&(co.splice(e,1),EO(n))}},clear(){co=[],Am.clear()}};function f7(){Am.forEach(wO),Am.clear(),qt(PE)}function wO(n){co.includes(n)||EO(n)}function EO(n){co.splice(d7(co,e=>e.priority>n.priority),0,n)}function PE(n){const e=OS;for(let t=0;t<co.length;t++){const i=co[t];py=i.priority,i.idle||(PT(i),i.advance(n),i.idle||e.push(i))}return py=0,OS=co,OS.length=0,co=e,co.length>0}function d7(n,e){const t=n.findIndex(e);return t<0?n.length:t}var p7=(n,e,t)=>Math.min(Math.max(t,n),e),MO={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Ho="[-+]?\\d*\\.?\\d+",my=Ho+"%";function px(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}var m7=new RegExp("rgb"+px(Ho,Ho,Ho)),g7=new RegExp("rgba"+px(Ho,Ho,Ho,Ho)),_7=new RegExp("hsl"+px(Ho,my,my)),v7=new RegExp("hsla"+px(Ho,my,my,Ho)),y7=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,x7=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,S7=/^#([0-9a-fA-F]{6})$/,w7=/^#([0-9a-fA-F]{8})$/;function E7(n){let e;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(e=S7.exec(n))?parseInt(e[1]+"ff",16)>>>0:Ru&&Ru[n]!==void 0?Ru[n]:(e=m7.exec(n))?(Df(e[1])<<24|Df(e[2])<<16|Df(e[3])<<8|255)>>>0:(e=g7.exec(n))?(Df(e[1])<<24|Df(e[2])<<16|Df(e[3])<<8|XR(e[4]))>>>0:(e=y7.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=w7.exec(n))?parseInt(e[1],16)>>>0:(e=x7.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=_7.exec(n))?(GR(WR(e[1]),dv(e[2]),dv(e[3]))|255)>>>0:(e=v7.exec(n))?(GR(WR(e[1]),dv(e[2]),dv(e[3]))|XR(e[4]))>>>0:null}function DS(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function GR(n,e,t){const i=t<.5?t*(1+e):t+e-t*e,r=2*t-i,s=DS(r,i,n+1/3),o=DS(r,i,n),a=DS(r,i,n-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Df(n){const e=parseInt(n,10);return e<0?0:e>255?255:e}function WR(n){return(parseFloat(n)%360+360)%360/360}function XR(n){const e=parseFloat(n);return e<0?0:e>1?255:Math.round(e*255)}function dv(n){const e=parseFloat(n);return e<0?0:e>100?1:e/100}function YR(n){let e=E7(n);if(e===null)return n;e=e||0;const t=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${t}, ${i}, ${r}, ${s})`}var mg=(n,e,t)=>{if(We.fun(n))return n;if(We.arr(n))return mg({range:n,output:e,extrapolate:t});if(We.str(n.output[0]))return bT(n);const i=n,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",h=i.easing||(d=>d);return d=>{const p=T7(d,s);return M7(d,s[p],s[p+1],r[p],r[p+1],h,o,a,i.map)}};function M7(n,e,t,i,r,s,o,a,h){let d=h?h(n):n;if(d<e){if(o==="identity")return d;o==="clamp"&&(d=e)}if(d>t){if(a==="identity")return d;a==="clamp"&&(d=t)}return i===r?i:e===t?n<=e?i:r:(e===-1/0?d=-d:t===1/0?d=d-e:d=(d-e)/(t-e),d=s(d),i===-1/0?d=-d:r===1/0?d=d+i:d=d*(r-i)+i,d)}function T7(n,e){for(var t=1;t<e.length-1&&!(e[t]>=n);++t);return t-1}var A7=(n,e="end")=>t=>{t=e==="end"?Math.min(t,.999):Math.max(t,.001);const i=t*n,r=e==="end"?Math.floor(i):Math.ceil(i);return p7(0,1,r/n)},gy=1.70158,pv=gy*1.525,qR=gy+1,ZR=2*Math.PI/3,jR=2*Math.PI/4.5,mv=n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,C7={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>1-(1-n)*(1-n),easeInOutQuad:n=>n<.5?2*n*n:1-Math.pow(-2*n+2,2)/2,easeInCubic:n=>n*n*n,easeOutCubic:n=>1-Math.pow(1-n,3),easeInOutCubic:n=>n<.5?4*n*n*n:1-Math.pow(-2*n+2,3)/2,easeInQuart:n=>n*n*n*n,easeOutQuart:n=>1-Math.pow(1-n,4),easeInOutQuart:n=>n<.5?8*n*n*n*n:1-Math.pow(-2*n+2,4)/2,easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>1-Math.pow(1-n,5),easeInOutQuint:n=>n<.5?16*n*n*n*n*n:1-Math.pow(-2*n+2,5)/2,easeInSine:n=>1-Math.cos(n*Math.PI/2),easeOutSine:n=>Math.sin(n*Math.PI/2),easeInOutSine:n=>-(Math.cos(Math.PI*n)-1)/2,easeInExpo:n=>n===0?0:Math.pow(2,10*n-10),easeOutExpo:n=>n===1?1:1-Math.pow(2,-10*n),easeInOutExpo:n=>n===0?0:n===1?1:n<.5?Math.pow(2,20*n-10)/2:(2-Math.pow(2,-20*n+10))/2,easeInCirc:n=>1-Math.sqrt(1-Math.pow(n,2)),easeOutCirc:n=>Math.sqrt(1-Math.pow(n-1,2)),easeInOutCirc:n=>n<.5?(1-Math.sqrt(1-Math.pow(2*n,2)))/2:(Math.sqrt(1-Math.pow(-2*n+2,2))+1)/2,easeInBack:n=>qR*n*n*n-gy*n*n,easeOutBack:n=>1+qR*Math.pow(n-1,3)+gy*Math.pow(n-1,2),easeInOutBack:n=>n<.5?Math.pow(2*n,2)*((pv+1)*2*n-pv)/2:(Math.pow(2*n-2,2)*((pv+1)*(n*2-2)+pv)+2)/2,easeInElastic:n=>n===0?0:n===1?1:-Math.pow(2,10*n-10)*Math.sin((n*10-10.75)*ZR),easeOutElastic:n=>n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n*10-.75)*ZR)+1,easeInOutElastic:n=>n===0?0:n===1?1:n<.5?-(Math.pow(2,20*n-10)*Math.sin((20*n-11.125)*jR))/2:Math.pow(2,-20*n+10)*Math.sin((20*n-11.125)*jR)/2+1,easeInBounce:n=>1-mv(1-n),easeOutBounce:mv,easeInOutBounce:n=>n<.5?(1-mv(1-2*n))/2:(1+mv(2*n-1))/2,steps:A7},gg=Symbol.for("FluidValue.get"),Ed=Symbol.for("FluidValue.observers"),uo=n=>!!(n&&n[gg]),as=n=>n&&n[gg]?n[gg]():n,KR=n=>n[Ed]||null;function R7(n,e){n.eventObserved?n.eventObserved(e):n(e)}function _g(n,e){const t=n[Ed];t&&t.forEach(i=>{R7(i,e)})}var TO=class{constructor(n){if(!n&&!(n=this.get))throw Error("Unknown getter");b7(this,n)}},b7=(n,e)=>AO(n,gg,e);function Id(n,e){if(n[gg]){let t=n[Ed];t||AO(n,Ed,t=new Set),t.has(e)||(t.add(e),n.observerAdded&&n.observerAdded(t.size,e))}return e}function vg(n,e){const t=n[Ed];if(t&&t.has(e)){const i=t.size-1;i?t.delete(e):n[Ed]=null,n.observerRemoved&&n.observerRemoved(i,e)}}var AO=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),Uv=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,P7=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,QR=new RegExp(`(${Uv.source})(%|[a-z]+)`,"i"),L7=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,mx=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,CO=n=>{const[e,t]=I7(n);if(!e||RT())return n;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(t&&t.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);return r||n}else{if(t&&mx.test(t))return CO(t);if(t)return t}return n},I7=n=>{const e=mx.exec(n);if(!e)return[,];const[,t,i]=e;return[t,i]},US,O7=(n,e,t,i,r)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(i)}, ${r})`,LT=n=>{US||(US=Ru?new RegExp(`(${Object.keys(Ru).join("|")})(?!\\w)`,"g"):/^\b$/);const e=n.output.map(s=>as(s).replace(mx,CO).replace(P7,YR).replace(US,YR)),t=e.map(s=>s.match(Uv).map(Number)),r=t[0].map((s,o)=>t.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>mg({...n,output:s}));return s=>{var h;const o=!QR.test(e[0])&&((h=e.find(d=>QR.test(d)))==null?void 0:h.replace(Uv,""));let a=0;return e[0].replace(Uv,()=>`${r[a++](s)}${o||""}`).replace(L7,O7)}},IT="react-spring: ",RO=n=>{const e=n;let t=!1;if(typeof e!="function")throw new TypeError(`${IT}once requires a function parameter`);return(...i)=>{t||(e(...i),t=!0)}},D7=RO(console.warn);function U7(){D7(`${IT}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var N7=RO(console.warn);function F7(){N7(`${IT}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function gx(n){return We.str(n)&&(n[0]=="#"||/\d/.test(n)||!RT()&&mx.test(n)||n in(Ru||{}))}var OT=RT()?K.useEffect:K.useLayoutEffect,z7=()=>{const n=K.useRef(!1);return OT(()=>(n.current=!0,()=>{n.current=!1}),[]),n};function bO(){const n=K.useState()[1],e=z7();return()=>{e.current&&n(Math.random())}}function k7(n,e){const[t]=K.useState(()=>({inputs:e,result:n()})),i=K.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&B7(e,s.inputs)||(s={inputs:e,result:n()}):s=t,K.useEffect(()=>{i.current=s,r==t&&(t.inputs=t.result=void 0)},[s]),s.result}function B7(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}var PO=n=>K.useEffect(n,H7),H7=[];function JR(n){const e=K.useRef();return K.useEffect(()=>{e.current=n}),e.current}var yg=Symbol.for("Animated:node"),V7=n=>!!n&&n[yg]===n,ma=n=>n&&n[yg],DT=(n,e)=>c7(n,yg,e),_x=n=>n&&n[yg]&&n[yg].getPayload(),LO=class{constructor(){DT(this,this)}getPayload(){return this.payload||[]}},Gg=class extends LO{constructor(n){super(),this._value=n,this.done=!0,this.durationProgress=0,We.num(this._value)&&(this.lastPosition=this._value)}static create(n){return new Gg(n)}getPayload(){return[this]}getValue(){return this._value}setValue(n,e){return We.num(n)&&(this.lastPosition=n,e&&(n=Math.round(n/e)*e,this.done&&(this.lastPosition=n))),this._value===n?!1:(this._value=n,!0)}reset(){const{done:n}=this;this.done=!1,We.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,n&&(this.lastVelocity=null),this.v0=null)}},xg=class extends Gg{constructor(n){super(0),this._string=null,this._toString=mg({output:[n,n]})}static create(n){return new xg(n)}getValue(){const n=this._string;return n??(this._string=this._toString(this._value))}setValue(n){if(We.str(n)){if(n==this._string)return!1;this._string=n,this._value=1}else if(super.setValue(n))this._string=null;else return!1;return!0}reset(n){n&&(this._toString=mg({output:[this.getValue(),n]})),this._value=0,super.reset()}},_y={dependencies:null},vx=class extends LO{constructor(n){super(),this.source=n,this.setValue(n)}getValue(n){const e={};return Ta(this.source,(t,i)=>{V7(t)?e[i]=t.getValue(n):uo(t)?e[i]=as(t):n||(e[i]=t)}),e}setValue(n){this.source=n,this.payload=this._makePayload(n)}reset(){this.payload&&mn(this.payload,n=>n.reset())}_makePayload(n){if(n){const e=new Set;return Ta(n,this._addToPayload,e),Array.from(e)}}_addToPayload(n){_y.dependencies&&uo(n)&&_y.dependencies.add(n);const e=_x(n);e&&mn(e,t=>this.add(t))}},IO=class extends vx{constructor(n){super(n)}static create(n){return new IO(n)}getValue(){return this.source.map(n=>n.getValue())}setValue(n){const e=this.getPayload();return n.length==e.length?e.map((t,i)=>t.setValue(n[i])).some(Boolean):(super.setValue(n.map(G7)),!0)}};function G7(n){return(gx(n)?xg:Gg).create(n)}function LE(n){const e=ma(n);return e?e.constructor:We.arr(n)?IO:gx(n)?xg:Gg}var $R=(n,e)=>{const t=!We.fun(n)||n.prototype&&n.prototype.isReactComponent;return K.forwardRef((i,r)=>{const s=K.useRef(null),o=t&&K.useCallback(S=>{s.current=Y7(r,S)},[r]),[a,h]=X7(i,e),d=bO(),p=()=>{const S=s.current;if(t&&!S)return;(S?e.applyAnimatedValues(S,a.getValue(!0)):!1)===!1&&d()},m=new W7(p,h),g=K.useRef();OT(()=>(g.current=m,mn(h,S=>Id(S,m)),()=>{g.current&&(mn(g.current.deps,S=>vg(S,g.current)),qt.cancel(g.current.update))})),K.useEffect(p,[]),PO(()=>()=>{const S=g.current;mn(S.deps,A=>vg(A,S))});const y=e.getComponentProps(a.getValue());return K.createElement(n,{...y,ref:o})})},W7=class{constructor(n,e){this.update=n,this.deps=e}eventObserved(n){n.type=="change"&&qt.write(this.update)}};function X7(n,e){const t=new Set;return _y.dependencies=t,n.style&&(n={...n,style:e.createAnimatedStyle(n.style)}),n=new vx(n),_y.dependencies=null,[n,t]}function Y7(n,e){return n&&(We.fun(n)?n(e):n.current=e),e}var eb=Symbol.for("AnimatedComponent"),OO=(n,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=r=>new vx(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:i},s=o=>{const a=tb(o)||"Anonymous";return We.str(o)?o=s[o]||(s[o]=$R(o,r)):o=o[eb]||(o[eb]=$R(o,r)),o.displayName=`Animated(${a})`,o};return Ta(n,(o,a)=>{We.arr(n)&&(a=tb(o)),s[a]=s(o)}),{animated:s}},tb=n=>We.str(n)?n:n&&We.str(n.displayName)?n.displayName:We.fun(n)&&n.name||null;function Hc(n,...e){return We.fun(n)?n(...e):n}var Cm=(n,e)=>n===!0||!!(e&&n&&(We.fun(n)?n(e):Fs(n).includes(e))),DO=(n,e)=>We.obj(n)?e&&n[e]:n,UO=(n,e)=>n.default===!0?n[e]:n.default?n.default[e]:void 0,q7=n=>n,UT=(n,e=q7)=>{let t=Z7;n.default&&n.default!==!0&&(n=n.default,t=Object.keys(n));const i={};for(const r of t){const s=e(n[r],r);We.und(s)||(i[r]=s)}return i},Z7=["config","onProps","onStart","onChange","onPause","onResume","onRest"],j7={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function K7(n){const e={};let t=0;if(Ta(n,(i,r)=>{j7[r]||(e[r]=i,t++)}),t)return e}function NO(n){const e=K7(n);if(e){const t={to:e};return Ta(n,(i,r)=>r in e||(t[r]=i)),t}return{...n}}function Sg(n){return n=as(n),We.arr(n)?n.map(Sg):gx(n)?vo.createStringInterpolator({range:[0,1],output:[n,n]})(1):n}function Q7(n){for(const e in n)return!0;return!1}function IE(n){return We.fun(n)||We.arr(n)&&We.obj(n[0])}function J7(n,e){var t;(t=n.ref)==null||t.delete(n),e==null||e.delete(n)}function $7(n,e){var t;e&&n.ref!==e&&((t=n.ref)==null||t.delete(n),e.add(n),n.ref=e)}var eX={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},OE={...eX.default,mass:1,damping:1,easing:C7.linear,clamp:!1},tX=class{constructor(){this.velocity=0,Object.assign(this,OE)}};function nX(n,e,t){t&&(t={...t},nb(t,e),e={...t,...e}),nb(n,e),Object.assign(n,e);for(const o in OE)n[o]==null&&(n[o]=OE[o]);let{frequency:i,damping:r}=n;const{mass:s}=n;return We.und(i)||(i<.01&&(i=.01),r<0&&(r=0),n.tension=Math.pow(2*Math.PI/i,2)*s,n.friction=4*Math.PI*r*s/i),n}function nb(n,e){if(!We.und(e.decay))n.duration=void 0;else{const t=!We.und(e.tension)||!We.und(e.friction);(t||!We.und(e.frequency)||!We.und(e.damping)||!We.und(e.mass))&&(n.duration=void 0,n.decay=void 0),t&&(n.frequency=void 0)}}var ib=[],iX=class{constructor(){this.changed=!1,this.values=ib,this.toValues=null,this.fromValues=ib,this.config=new tX,this.immediate=!1}};function FO(n,{key:e,props:t,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let h,d,p=Cm(t.cancel??(i==null?void 0:i.cancel),e);if(p)y();else{We.und(t.pause)||(r.paused=Cm(t.pause,e));let S=i==null?void 0:i.pause;S!==!0&&(S=r.paused||Cm(S,e)),h=Hc(t.delay||0,e),S?(r.resumeQueue.add(g),s.pause()):(s.resume(),g())}function m(){r.resumeQueue.add(g),r.timeouts.delete(d),d.cancel(),h=d.time-qt.now()}function g(){h>0&&!vo.skipAnimation?(r.delayed=!0,d=qt.setTimeout(y,h),r.pauseQueue.add(m),r.timeouts.add(d)):y()}function y(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(m),r.timeouts.delete(d),n<=(r.cancelId||0)&&(p=!0);try{s.start({...t,callId:n,cancel:p},o)}catch(S){a(S)}}})}var NT=(n,e)=>e.length==1?e[0]:e.some(t=>t.cancelled)?ud(n.get()):e.every(t=>t.noop)?zO(n.get()):ko(n.get(),e.every(t=>t.finished)),zO=n=>({value:n,noop:!0,finished:!0,cancelled:!1}),ko=(n,e,t=!1)=>({value:n,finished:e,cancelled:t}),ud=n=>({value:n,cancelled:!0,finished:!1});function kO(n,e,t,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:h}=t;return!s&&n===a&&!e.reset?h:t.promise=(async()=>{t.asyncId=r,t.asyncTo=n;const d=UT(e,(w,_)=>_==="onRest"?void 0:w);let p,m;const g=new Promise((w,_)=>(p=w,m=_)),y=w=>{const _=r<=(t.cancelId||0)&&ud(i)||r!==t.asyncId&&ko(i,!1);if(_)throw w.result=_,m(w),w},S=(w,_)=>{const T=new rb,E=new sb;return(async()=>{if(vo.skipAnimation)throw wg(t),E.result=ko(i,!1),m(E),E;y(T);const C=We.obj(w)?{...w}:{..._,to:w};C.parentId=r,Ta(d,(D,O)=>{We.und(C[O])&&(C[O]=D)});const P=await i.start(C);return y(T),t.paused&&await new Promise(D=>{t.resumeQueue.add(D)}),P})()};let A;if(vo.skipAnimation)return wg(t),ko(i,!1);try{let w;We.arr(n)?w=(async _=>{for(const T of _)await S(T)})(n):w=Promise.resolve(n(S,i.stop.bind(i))),await Promise.all([w.then(p),g]),A=ko(i.get(),!0,!1)}catch(w){if(w instanceof rb)A=w.result;else if(w instanceof sb)A=w.result;else throw w}finally{r==t.asyncId&&(t.asyncId=s,t.asyncTo=s?a:void 0,t.promise=s?h:void 0)}return We.fun(o)&&qt.batchedUpdates(()=>{o(A,i,i.item)}),A})()}function wg(n,e){Tm(n.timeouts,t=>t.cancel()),n.pauseQueue.clear(),n.resumeQueue.clear(),n.asyncId=n.asyncTo=n.promise=void 0,e&&(n.cancelId=e)}var rb=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},sb=class extends Error{constructor(){super("SkipAnimationSignal")}},DE=n=>n instanceof FT,rX=1,FT=class extends TO{constructor(){super(...arguments),this.id=rX++,this._priority=0}get priority(){return this._priority}set priority(n){this._priority!=n&&(this._priority=n,this._onPriorityChange(n))}get(){const n=ma(this);return n&&n.getValue()}to(...n){return vo.to(this,n)}interpolate(...n){return U7(),vo.to(this,n)}toJSON(){return this.get()}observerAdded(n){n==1&&this._attach()}observerRemoved(n){n==0&&this._detach()}_attach(){}_detach(){}_onChange(n,e=!1){_g(this,{type:"change",parent:this,value:n,idle:e})}_onPriorityChange(n){this.idle||dx.sort(this),_g(this,{type:"priority",parent:this,priority:n})}},fh=Symbol.for("SpringPhase"),BO=1,UE=2,NE=4,NS=n=>(n[fh]&BO)>0,ru=n=>(n[fh]&UE)>0,Jp=n=>(n[fh]&NE)>0,ob=(n,e)=>e?n[fh]|=UE|BO:n[fh]&=~UE,ab=(n,e)=>e?n[fh]|=NE:n[fh]&=~NE,sX=class extends FT{constructor(n,e){if(super(),this.animation=new iX,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!We.und(n)||!We.und(e)){const t=We.obj(n)?{...n}:{...e,from:n};We.und(t.default)&&(t.default=!0),this.start(t)}}get idle(){return!(ru(this)||this._state.asyncTo)||Jp(this)}get goal(){return as(this.animation.to)}get velocity(){const n=ma(this);return n instanceof Gg?n.lastVelocity||0:n.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return NS(this)}get isAnimating(){return ru(this)}get isPaused(){return Jp(this)}get isDelayed(){return this._state.delayed}advance(n){let e=!0,t=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=_x(i.to);!o&&uo(i.to)&&(r=Fs(as(i.to))),i.values.forEach((d,p)=>{if(d.done)return;const m=d.constructor==xg?1:o?o[p].lastPosition:r[p];let g=i.immediate,y=m;if(!g){if(y=d.lastPosition,s.tension<=0){d.done=!0;return}let S=d.elapsedTime+=n;const A=i.fromValues[p],w=d.v0!=null?d.v0:d.v0=We.arr(s.velocity)?s.velocity[p]:s.velocity;let _;const T=s.precision||(A==m?.005:Math.min(1,Math.abs(m-A)*.001));if(We.und(s.duration))if(s.decay){const E=s.decay===!0?.998:s.decay,C=Math.exp(-(1-E)*S);y=A+w/(1-E)*(1-C),g=Math.abs(d.lastPosition-y)<=T,_=w*C}else{_=d.lastVelocity==null?w:d.lastVelocity;const E=s.restVelocity||T/10,C=s.clamp?0:s.bounce,P=!We.und(C),D=A==m?d.v0>0:A<m;let O,F=!1;const L=1,N=Math.ceil(n/L);for(let G=0;G<N&&(O=Math.abs(_)>E,!(!O&&(g=Math.abs(m-y)<=T,g)));++G){P&&(F=y==m||y>m==D,F&&(_=-_*C,y=m));const Q=-s.tension*1e-6*(y-m),le=-s.friction*.001*_,Z=(Q+le)/s.mass;_=_+Z*L,y=y+_*L}}else{let E=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,d.durationProgress>0&&(d.elapsedTime=s.duration*d.durationProgress,S=d.elapsedTime+=n)),E=(s.progress||0)+S/this._memoizedDuration,E=E>1?1:E<0?0:E,d.durationProgress=E),y=A+s.easing(E)*(m-A),_=(y-d.lastPosition)/n,g=E==1}d.lastVelocity=_,Number.isNaN(y)&&(console.warn("Got NaN while animating:",this),g=!0)}o&&!o[p].done&&(g=!1),g?d.done=!0:e=!1,d.setValue(y,s.round)&&(t=!0)});const a=ma(this),h=a.getValue();if(e){const d=as(i.to);(h!==d||t)&&!s.decay?(a.setValue(d),this._onChange(d)):t&&s.decay&&this._onChange(h),this._stop()}else t&&this._onChange(h)}set(n){return qt.batchedUpdates(()=>{this._stop(),this._focus(n),this._set(n)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(ru(this)){const{to:n,config:e}=this.animation;qt.batchedUpdates(()=>{this._onStart(),e.decay||this._set(n,!1),this._stop()})}return this}update(n){return(this.queue||(this.queue=[])).push(n),this}start(n,e){let t;return We.und(n)?(t=this.queue||[],this.queue=[]):t=[We.obj(n)?n:{...e,to:n}],Promise.all(t.map(i=>this._update(i))).then(i=>NT(this,i))}stop(n){const{to:e}=this.animation;return this._focus(this.get()),wg(this._state,n&&this._lastCallId),qt.batchedUpdates(()=>this._stop(e,n)),this}reset(){this._update({reset:!0})}eventObserved(n){n.type=="change"?this._start():n.type=="priority"&&(this.priority=n.priority+1)}_prepareNode(n){const e=this.key||"";let{to:t,from:i}=n;t=We.obj(t)?t[e]:t,(t==null||IE(t))&&(t=void 0),i=We.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:t,from:i};return NS(this)||(n.reverse&&([t,i]=[i,t]),i=as(i),We.und(i)?ma(this)||this._set(t):this._set(i)),r}_update({...n},e){const{key:t,defaultProps:i}=this;n.default&&Object.assign(i,UT(n,(o,a)=>/^on/.test(a)?DO(o,t):o)),ub(this,n,"onProps"),em(this,"onProps",n,this);const r=this._prepareNode(n);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return FO(++this._lastCallId,{key:t,props:n,defaultProps:i,state:s,actions:{pause:()=>{Jp(this)||(ab(this,!0),lm(s.pauseQueue),em(this,"onPause",ko(this,$p(this,this.animation.to)),this))},resume:()=>{Jp(this)&&(ab(this,!1),ru(this)&&this._resume(),lm(s.resumeQueue),em(this,"onResume",ko(this,$p(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(n.loop&&o.finished&&!(e&&o.noop)){const a=HO(n);if(a)return this._update(a,!0)}return o})}_merge(n,e,t){if(e.cancel)return this.stop(!0),t(ud(this));const i=!We.und(n.to),r=!We.und(n.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return t(ud(this));const{key:s,defaultProps:o,animation:a}=this,{to:h,from:d}=a;let{to:p=h,from:m=d}=n;r&&!i&&(!e.default||We.und(p))&&(p=m),e.reverse&&([p,m]=[m,p]);const g=!$a(m,d);g&&(a.from=m),m=as(m);const y=!$a(p,h);y&&this._focus(p);const S=IE(e.to),{config:A}=a,{decay:w,velocity:_}=A;(i||r)&&(A.velocity=0),e.config&&!S&&nX(A,Hc(e.config,s),e.config!==o.config?Hc(o.config,s):void 0);let T=ma(this);if(!T||We.und(p))return t(ko(this,!0));const E=We.und(e.reset)?r&&!e.default:!We.und(m)&&Cm(e.reset,s),C=E?m:this.get(),P=Sg(p),D=We.num(P)||We.arr(P)||gx(P),O=!S&&(!D||Cm(o.immediate||e.immediate,s));if(y){const G=LE(p);if(G!==T.constructor)if(O)T=this._set(P);else throw Error(`Cannot animate between ${T.constructor.name} and ${G.name}, as the "to" prop suggests`)}const F=T.constructor;let L=uo(p),N=!1;if(!L){const G=E||!NS(this)&&g;(y||G)&&(N=$a(Sg(C),P),L=!N),(!$a(a.immediate,O)&&!O||!$a(A.decay,w)||!$a(A.velocity,_))&&(L=!0)}if(N&&ru(this)&&(a.changed&&!E?L=!0:L||this._stop(h)),!S&&((L||uo(h))&&(a.values=T.getPayload(),a.toValues=uo(p)?null:F==xg?[1]:Fs(P)),a.immediate!=O&&(a.immediate=O,!O&&!E&&this._set(h)),L)){const{onRest:G}=a;mn(aX,le=>ub(this,e,le));const Q=ko(this,$p(this,h));lm(this._pendingCalls,Q),this._pendingCalls.add(t),a.changed&&qt.batchedUpdates(()=>{var le;a.changed=!E,G==null||G(Q,this),E?Hc(o.onRest,Q):(le=a.onStart)==null||le.call(a,Q,this)})}E&&this._set(C),S?t(kO(e.to,e,this._state,this)):L?this._start():ru(this)&&!y?this._pendingCalls.add(t):t(zO(C))}_focus(n){const e=this.animation;n!==e.to&&(KR(this)&&this._detach(),e.to=n,KR(this)&&this._attach())}_attach(){let n=0;const{to:e}=this.animation;uo(e)&&(Id(e,this),DE(e)&&(n=e.priority+1)),this.priority=n}_detach(){const{to:n}=this.animation;uo(n)&&vg(n,this)}_set(n,e=!0){const t=as(n);if(!We.und(t)){const i=ma(this);if(!i||!$a(t,i.getValue())){const r=LE(t);!i||i.constructor!=r?DT(this,r.create(t)):i.setValue(t),i&&qt.batchedUpdates(()=>{this._onChange(t,e)})}}return ma(this)}_onStart(){const n=this.animation;n.changed||(n.changed=!0,em(this,"onStart",ko(this,$p(this,n.to)),this))}_onChange(n,e){e||(this._onStart(),Hc(this.animation.onChange,n,this)),Hc(this.defaultProps.onChange,n,this),super._onChange(n,e)}_start(){const n=this.animation;ma(this).reset(as(n.to)),n.immediate||(n.fromValues=n.values.map(e=>e.lastPosition)),ru(this)||(ob(this,!0),Jp(this)||this._resume())}_resume(){vo.skipAnimation?this.finish():dx.start(this)}_stop(n,e){if(ru(this)){ob(this,!1);const t=this.animation;mn(t.values,r=>{r.done=!0}),t.toValues&&(t.onChange=t.onPause=t.onResume=void 0),_g(this,{type:"idle",parent:this});const i=e?ud(this.get()):ko(this.get(),$p(this,n??t.to));lm(this._pendingCalls,i),t.changed&&(t.changed=!1,em(this,"onRest",i,this))}}};function $p(n,e){const t=Sg(e),i=Sg(n.get());return $a(i,t)}function HO(n,e=n.loop,t=n.to){const i=Hc(e);if(i){const r=i!==!0&&NO(i),s=(r||n).reverse,o=!r||r.reset;return Eg({...n,loop:e,default:!1,pause:void 0,to:!s||IE(t)?t:void 0,from:o?n.from:void 0,reset:o,...r})}}function Eg(n){const{to:e,from:t}=n=NO(n),i=new Set;return We.obj(e)&&lb(e,i),We.obj(t)&&lb(t,i),n.keys=i.size?Array.from(i):null,n}function oX(n){const e=Eg(n);return We.und(e.default)&&(e.default=UT(e)),e}function lb(n,e){Ta(n,(t,i)=>t!=null&&e.add(i))}var aX=["onStart","onRest","onChange","onPause","onResume"];function ub(n,e,t){n.animation[t]=e[t]!==UO(e,t)?DO(e[t],n.key):void 0}function em(n,e,...t){var i,r,s,o;(r=(i=n.animation)[e])==null||r.call(i,...t),(o=(s=n.defaultProps)[e])==null||o.call(s,...t)}var lX=["onStart","onChange","onRest"],uX=1,cX=class{constructor(n,e){this.id=uX++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),n&&this.start({default:!0,...n})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(n=>n.idle&&!n.isDelayed&&!n.isPaused)}get item(){return this._item}set item(n){this._item=n}get(){const n={};return this.each((e,t)=>n[t]=e.get()),n}set(n){for(const e in n){const t=n[e];We.und(t)||this.springs[e].set(t)}}update(n){return n&&this.queue.push(Eg(n)),this}start(n){let{queue:e}=this;return n?e=Fs(n).map(Eg):this.queue=[],this._flush?this._flush(this,e):(YO(this,e),FE(this,e))}stop(n,e){if(n!==!!n&&(e=n),e){const t=this.springs;mn(Fs(e),i=>t[i].stop(!!n))}else wg(this._state,this._lastAsyncId),this.each(t=>t.stop(!!n));return this}pause(n){if(We.und(n))this.start({pause:!0});else{const e=this.springs;mn(Fs(n),t=>e[t].pause())}return this}resume(n){if(We.und(n))this.start({pause:!1});else{const e=this.springs;mn(Fs(n),t=>e[t].resume())}return this}each(n){Ta(this.springs,n)}_onFrame(){const{onStart:n,onChange:e,onRest:t}=this._events,i=this._active.size>0,r=this._changed.size>0;(i&&!this._started||r&&!this._started)&&(this._started=!0,Tm(n,([a,h])=>{h.value=this.get(),a(h,this,this._item)}));const s=!i&&this._started,o=r||s&&t.size?this.get():null;r&&e.size&&Tm(e,([a,h])=>{h.value=o,a(h,this,this._item)}),s&&(this._started=!1,Tm(t,([a,h])=>{h.value=o,a(h,this,this._item)}))}eventObserved(n){if(n.type=="change")this._changed.add(n.parent),n.idle||this._active.add(n.parent);else if(n.type=="idle")this._active.delete(n.parent);else return;qt.onFrame(this._onFrame)}};function FE(n,e){return Promise.all(e.map(t=>VO(n,t))).then(t=>NT(n,t))}async function VO(n,e,t){const{keys:i,to:r,from:s,loop:o,onRest:a,onResolve:h}=e,d=We.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const p=We.arr(r)||We.fun(r)?r:void 0;p?(e.to=void 0,e.onRest=void 0,d&&(d.onRest=void 0)):mn(lX,A=>{const w=e[A];if(We.fun(w)){const _=n._events[A];e[A]=({finished:T,cancelled:E})=>{const C=_.get(w);C?(T||(C.finished=!1),E&&(C.cancelled=!0)):_.set(w,{value:null,finished:T||!1,cancelled:E||!1})},d&&(d[A]=e[A])}});const m=n._state;e.pause===!m.paused?(m.paused=e.pause,lm(e.pause?m.pauseQueue:m.resumeQueue)):m.paused&&(e.pause=!0);const g=(i||Object.keys(n.springs)).map(A=>n.springs[A].start(e)),y=e.cancel===!0||UO(e,"cancel")===!0;(p||y&&m.asyncId)&&g.push(FO(++n._lastAsyncId,{props:e,state:m,actions:{pause:bE,resume:bE,start(A,w){y?(wg(m,n._lastAsyncId),w(ud(n))):(A.onRest=a,w(kO(p,A,m,n)))}}})),m.paused&&await new Promise(A=>{m.resumeQueue.add(A)});const S=NT(n,await Promise.all(g));if(o&&S.finished&&!(t&&S.noop)){const A=HO(e,o,r);if(A)return YO(n,[A]),VO(n,A,!0)}return h&&qt.batchedUpdates(()=>h(S,n,n.item)),S}function cb(n,e){const t={...n.springs};return e&&mn(Fs(e),i=>{We.und(i.keys)&&(i=Eg(i)),We.obj(i.to)||(i={...i,to:void 0}),XO(t,i,r=>WO(r))}),GO(n,t),t}function GO(n,e){Ta(e,(t,i)=>{n.springs[i]||(n.springs[i]=t,Id(t,n))})}function WO(n,e){const t=new sX;return t.key=n,e&&Id(t,e),t}function XO(n,e,t){e.keys&&mn(e.keys,i=>{(n[i]||(n[i]=t(i)))._prepareNode(e)})}function YO(n,e){mn(e,t=>{XO(n.springs,t,i=>WO(i,n))})}var yx=({children:n,...e})=>{const t=K.useContext(vy),i=e.pause||!!t.pause,r=e.immediate||!!t.immediate;e=k7(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=vy;return K.createElement(s,{value:e},n)},vy=hX(yx,{});yx.Provider=vy.Provider;yx.Consumer=vy.Consumer;function hX(n,e){return Object.assign(n,K.createContext(e)),n.Provider._context=n,n.Consumer._context=n,n}var qO=()=>{const n=[],e=function(i){F7();const r=[];return mn(n,(s,o)=>{if(We.und(i))r.push(s.start());else{const a=t(i,s,o);a&&r.push(s.start(a))}}),r};e.current=n,e.add=function(i){n.includes(i)||n.push(i)},e.delete=function(i){const r=n.indexOf(i);~r&&n.splice(r,1)},e.pause=function(){return mn(n,i=>i.pause(...arguments)),this},e.resume=function(){return mn(n,i=>i.resume(...arguments)),this},e.set=function(i){mn(n,(r,s)=>{const o=We.fun(i)?i(s,r):i;o&&r.set(o)})},e.start=function(i){const r=[];return mn(n,(s,o)=>{if(We.und(i))r.push(s.start());else{const a=this._getProps(i,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return mn(n,i=>i.stop(...arguments)),this},e.update=function(i){return mn(n,(r,s)=>r.update(this._getProps(i,r,s))),this};const t=function(i,r,s){return We.fun(i)?i(s,r):i};return e._getProps=t,e};function fX(n,e,t){const i=We.fun(e)&&e;i&&!t&&(t=[]);const r=K.useMemo(()=>i||arguments.length==3?qO():void 0,[]),s=K.useRef(0),o=bO(),a=K.useMemo(()=>({ctrls:[],queue:[],flush(_,T){const E=cb(_,T);return s.current>0&&!a.queue.length&&!Object.keys(E).some(P=>!_.springs[P])?FE(_,T):new Promise(P=>{GO(_,E),a.queue.push(()=>{P(FE(_,T))}),o()})}}),[]),h=K.useRef([...a.ctrls]),d=[],p=JR(n)||0;K.useMemo(()=>{mn(h.current.slice(n,p),_=>{J7(_,r),_.stop(!0)}),h.current.length=n,m(p,n)},[n]),K.useMemo(()=>{m(0,Math.min(p,n))},t);function m(_,T){for(let E=_;E<T;E++){const C=h.current[E]||(h.current[E]=new cX(null,a.flush)),P=i?i(E,C):e[E];P&&(d[E]=oX(P))}}const g=h.current.map((_,T)=>cb(_,d[T])),y=K.useContext(yx),S=JR(y),A=y!==S&&Q7(y);OT(()=>{s.current++,a.ctrls=h.current;const{queue:_}=a;_.length&&(a.queue=[],mn(_,T=>T())),mn(h.current,(T,E)=>{r==null||r.add(T),A&&T.start({default:y});const C=d[E];C&&($7(T,C.ref),T.ref?T.queue.push(C):T.start(C))})}),PO(()=>()=>{mn(a.ctrls,_=>_.stop(!0))});const w=g.map(_=>({..._}));return r?[w,r]:w}function ZO(n,e){const t=We.fun(n),[[i],r]=fX(1,t?n:[n],t?e||[]:e);return t||arguments.length==2?[i,r]:i}var dX=()=>qO(),pX=()=>K.useState(dX)[0],mX=class extends FT{constructor(n,e){super(),this.source=n,this.idle=!0,this._active=new Set,this.calc=mg(...e);const t=this._get(),i=LE(t);DT(this,i.create(t))}advance(n){const e=this._get(),t=this.get();$a(e,t)||(ma(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&hb(this._active)&&FS(this)}_get(){const n=We.arr(this.source)?this.source.map(as):Fs(as(this.source));return this.calc(...n)}_start(){this.idle&&!hb(this._active)&&(this.idle=!1,mn(_x(this),n=>{n.done=!1}),vo.skipAnimation?(qt.batchedUpdates(()=>this.advance()),FS(this)):dx.start(this))}_attach(){let n=1;mn(Fs(this.source),e=>{uo(e)&&Id(e,this),DE(e)&&(e.idle||this._active.add(e),n=Math.max(n,e.priority+1))}),this.priority=n,this._start()}_detach(){mn(Fs(this.source),n=>{uo(n)&&vg(n,this)}),this._active.clear(),FS(this)}eventObserved(n){n.type=="change"?n.idle?this.advance():(this._active.add(n.parent),this._start()):n.type=="idle"?this._active.delete(n.parent):n.type=="priority"&&(this.priority=Fs(this.source).reduce((e,t)=>Math.max(e,(DE(t)?t.priority:0)+1),0))}};function gX(n){return n.idle!==!1}function hb(n){return!n.size||Array.from(n).every(gX)}function FS(n){n.idle||(n.idle=!0,mn(_x(n),e=>{e.done=!0}),_g(n,{type:"idle",parent:n}))}vo.assign({createStringInterpolator:LT,to:(n,e)=>new mX(n,e)});var _X=["primitive"].concat(Object.keys(GI).filter(n=>/^[A-Z]/.test(n)).map(n=>n[0].toLowerCase()+n.slice(1)));vo.assign({createStringInterpolator:LT,colors:MO,frameLoop:"demand"});_9(()=>{qt.advance()});var vX=OO(_X,{applyAnimatedValues:kc}),yX=vX.animated,jO=/^--/;function xX(n,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!jO.test(n)&&!(Rm.hasOwnProperty(n)&&Rm[n])?e+"px":(""+e).trim()}var fb={};function SX(n,e){if(!n.nodeType||!n.setAttribute)return!1;const t=n.nodeName==="filter"||n.parentNode&&n.parentNode.nodeName==="filter",{style:i,children:r,scrollTop:s,scrollLeft:o,viewBox:a,...h}=e,d=Object.values(h),p=Object.keys(h).map(m=>t||n.hasAttribute(m)?m:fb[m]||(fb[m]=m.replace(/([A-Z])/g,g=>"-"+g.toLowerCase())));r!==void 0&&(n.textContent=r);for(const m in i)if(i.hasOwnProperty(m)){const g=xX(m,i[m]);jO.test(m)?n.style.setProperty(m,g):n.style[m]=g}p.forEach((m,g)=>{n.setAttribute(m,d[g])}),s!==void 0&&(n.scrollTop=s),o!==void 0&&(n.scrollLeft=o),a!==void 0&&n.setAttribute("viewBox",a)}var Rm={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wX=(n,e)=>n+e.charAt(0).toUpperCase()+e.substring(1),EX=["Webkit","Ms","Moz","O"];Rm=Object.keys(Rm).reduce((n,e)=>(EX.forEach(t=>n[wX(t,e)]=n[e]),n),Rm);var MX=/^(matrix|translate|scale|rotate|skew)/,TX=/^(translate)/,AX=/^(rotate|skew)/,zS=(n,e)=>We.num(n)&&n!==0?n+e:n,Nv=(n,e)=>We.arr(n)?n.every(t=>Nv(t,e)):We.num(n)?n===e:parseFloat(n)===e,CX=class extends vx{constructor({x:n,y:e,z:t,...i}){const r=[],s=[];(n||e||t)&&(r.push([n||0,e||0,t||0]),s.push(o=>[`translate3d(${o.map(a=>zS(a,"px")).join(",")})`,Nv(o,0)])),Ta(i,(o,a)=>{if(a==="transform")r.push([o||""]),s.push(h=>[h,h===""]);else if(MX.test(a)){if(delete i[a],We.und(o))return;const h=TX.test(a)?"px":AX.test(a)?"deg":"";r.push(Fs(o)),s.push(a==="rotate3d"?([d,p,m,g])=>[`rotate3d(${d},${p},${m},${zS(g,h)})`,Nv(g,0)]:d=>[`${a}(${d.map(p=>zS(p,h)).join(",")})`,Nv(d,a.startsWith("scale")?1:0)])}}),r.length&&(i.transform=new RX(r,s)),super(i)}},RX=class extends TO{constructor(n,e){super(),this.inputs=n,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let n="",e=!0;return mn(this.inputs,(t,i)=>{const r=as(t[0]),[s,o]=this.transforms[i](We.arr(r)?r:t.map(as));n+=" "+s,e=e&&o}),e?"none":n}observerAdded(n){n==1&&mn(this.inputs,e=>mn(e,t=>uo(t)&&Id(t,this)))}observerRemoved(n){n==0&&mn(this.inputs,e=>mn(e,t=>uo(t)&&vg(t,this)))}eventObserved(n){n.type=="change"&&(this._value=null),_g(this,n)}},bX=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];vo.assign({batchedUpdates:C3.unstable_batchedUpdates,createStringInterpolator:LT,colors:MO});OO(bX,{applyAnimatedValues:SX,createAnimatedStyle:n=>new CX(n),getComponentProps:({scrollTop:n,scrollLeft:e,...t})=>t});const tm=new V;function oo(n,e,t,i,r,s){const o=2*Math.PI*r/4,a=Math.max(s-2*r,0),h=Math.PI/4;tm.copy(e),tm[i]=0,tm.normalize();const d=.5*o/(o+a),p=1-tm.angleTo(n)/h;return Math.sign(tm[t])===1?p*d:a/(o+a)+d+d*(1-p)}class PX extends ku{constructor(e=1,t=1,i=1,r=2,s=.1){if(r=r*2+1,s=Math.min(e/2,t/2,i/2,s),super(1,1,1,r,r,r),r===1)return;const o=this.toNonIndexed();this.index=null,this.attributes.position=o.attributes.position,this.attributes.normal=o.attributes.normal,this.attributes.uv=o.attributes.uv;const a=new V,h=new V,d=new V(e,t,i).divideScalar(2).subScalar(s),p=this.attributes.position.array,m=this.attributes.normal.array,g=this.attributes.uv.array,y=p.length/6,S=new V,A=.5/r;for(let w=0,_=0;w<p.length;w+=3,_+=2)switch(a.fromArray(p,w),h.copy(a),h.x-=Math.sign(h.x)*A,h.y-=Math.sign(h.y)*A,h.z-=Math.sign(h.z)*A,h.normalize(),p[w+0]=d.x*Math.sign(a.x)+h.x*s,p[w+1]=d.y*Math.sign(a.y)+h.y*s,p[w+2]=d.z*Math.sign(a.z)+h.z*s,m[w+0]=h.x,m[w+1]=h.y,m[w+2]=h.z,Math.floor(w/y)){case 0:S.set(1,0,0),g[_+0]=oo(S,h,"z","y",s,i),g[_+1]=1-oo(S,h,"y","z",s,t);break;case 1:S.set(-1,0,0),g[_+0]=1-oo(S,h,"z","y",s,i),g[_+1]=1-oo(S,h,"y","z",s,t);break;case 2:S.set(0,1,0),g[_+0]=1-oo(S,h,"x","z",s,e),g[_+1]=oo(S,h,"z","x",s,i);break;case 3:S.set(0,-1,0),g[_+0]=1-oo(S,h,"x","z",s,e),g[_+1]=1-oo(S,h,"z","x",s,i);break;case 4:S.set(0,0,1),g[_+0]=1-oo(S,h,"x","y",s,e),g[_+1]=1-oo(S,h,"y","x",s,t);break;case 5:S.set(0,0,-1),g[_+0]=oo(S,h,"x","y",s,e),g[_+1]=1-oo(S,h,"y","x",s,t);break}}}const LX=.1,kS=1-LX,KO=new PX(kS,kS,kS),Uf={roughness:0,metalness:.2,emissive:0,castShadow:!0},QO=[new tl({color:"#BD2827",...Uf}),new tl({color:"#EC702D",...Uf}),new tl({color:"#EECF4E",...Uf}),new tl({color:"#FFFFFF",...Uf}),new tl({color:"#2C5DA6",...Uf}),new tl({color:"#7CCF57",...Uf})];function JO(n){switch(n){case"#BD2827":return[0,-Math.PI/2,0];case"#EC702D":return[0,Math.PI/2,0];case"#EECF4E":return[Math.PI/2,0,0];case"#FFFFFF":return[-Math.PI/2,0,0];case"#2C5DA6":default:return[0,0,0];case"#7CCF57":return[0,Math.PI,0]}}function IX({tileSize:n,rubickFaces:e,width:t,height:i}){const r=K.useRef(null),s=K.useRef(new V),o=K.useRef([]),a=K.useRef(0),h=K.useRef([]),d=e.length*9*3,p=K.useMemo(()=>({x:t/2,y:i/2}),[t,i]),m=pX();ZO({ref:m,from:{rotationStep:0},to:{rotationStep:1},config:{duration:200},delay:500,reset:!0,onRest:()=>{if(h.current=h.current.map(O=>({...O,currentMove:O.currentMove+1})),a.current=0,D()){m.stop();return}m.start({from:{rotationStep:0},to:{rotationStep:1}})},onChange:({value:{rotationStep:O}})=>{e.length>0&&w((O-a.current)*(Math.PI/2)),a.current=O}});function g(){o.current=[],h.current=[],s.current.set(0,0,0);let O=0;e.forEach((F,L)=>{for(let le=-1;le<=1;le++){F.forEach(({x:me,y:de,color:Y})=>{var ee;const te=new fn;te.position.set(me/n+s.current.x,-(de/n)+s.current.y,le+s.current.z),te.rotation.set(...JO(Y)),te.updateMatrix(),(ee=r.current)==null||ee.setMatrixAt(O,te.matrix),O++});const{x:Z,y:oe}=F[0];o.current.push(new V(Z/n,oe/n,le))}const{x:N,y:G}=F[0],Q=A(L,S(N,G),3);h.current.push(Q)})}function y(O,F){const L=Math.abs(p.x-O),N=Math.abs(p.y-F);return Math.sqrt(L*L+N*N)/40}function S(O,F){let L=[];const G=Math.ceil(y(O,F))+10;console.log(G);for(let Q=0;Q<G;Q++){const le=vm.sample(["X","Y","Z"]),Z=vm.sample([0,1,2]),oe=vm.sample([-1,1]);L.push({axis:le,face:Z,direction:oe})}for(let Q=G-1;Q>=0;Q--){const{axis:le,face:Z,direction:oe}=L[Q];L.push({axis:le,face:Z,direction:-oe})}return{movesLength:G*2,currentMove:0,moves:L}}function A(O,F,L){const{movesLength:N,moves:G}=F;if(L>N)return{movesLength:N,moves:G,currentMove:0};for(let Q=0;Q<L;Q++)_(G[Q].axis,O,G[Q].face,G[Q].direction*Math.PI/2);return{movesLength:N,moves:G,currentMove:L}}function w(O){r.current&&(e.forEach((F,L)=>{const{moves:N,currentMove:G,movesLength:Q}=h.current[L];if(G>=Q)return;const{axis:le,face:Z,direction:oe}=N[G];_(le,L,Z,oe*O)}),r.current.instanceMatrix.needsUpdate=!0)}function _(O,F,L,N){const G=o.current[F*3+L];E(O,F,L,G).forEach(({id:le,object:Z})=>{var Y;const[oe,me]=T(O,L,G,s.current),de=new yt().makeRotationFromEuler(P(O,N));Z.applyMatrix4(oe.multiply(de).multiply(me)),(Y=r.current)==null||Y.setMatrixAt(le,Z.matrix)})}function T(O,F,L,N){switch(O){case"X":default:return[new yt().setPosition(new V(0,-(N.y+1)-L.y,N.z+L.z+(1-F))),new yt().setPosition(new V(0,-(N.y-1)+L.y,-N.z-L.z-(1-F)))];case"Y":return[new yt().setPosition(new V(N.x+1+L.x,0,N.z+L.z+(1-F))),new yt().setPosition(new V(-(N.x+1)-L.x,0,-N.z-L.z-(1-F)))];case"Z":return[new yt().setPosition(new V(N.x+1+L.x,-(N.y+1)-L.y,0)),new yt().setPosition(new V(-(N.x+1)-L.x,-(N.y-1)+L.y,0))]}}function E(O,F,L,N){var le;let G=[];const Q=F*3*9;for(let Z=Q;Z<27+Q;Z++){const oe=new fn,me=new yt;(le=r.current)==null||le.getMatrixAt(Z,me),me.decompose(oe.position,oe.quaternion,oe.scale),C(O,L,N,oe.position)&&G.push({id:Z,object:oe})}return G}function C(O,F,L,N){switch(O){case"X":return Math.round(N.x)-s.current.x-L.x===F;case"Y":return Math.round(-N.y)-s.current.y-L.y===F;case"Z":return Math.round(N.z)-s.current.z===F-1;default:return!1}}function P(O,F){switch(O){case"X":default:return new Cu(F,0,0);case"Y":return new Cu(0,F,0);case"Z":return new Cu(0,0,F)}}function D(){return h.current.filter(F=>F.currentMove>=F.movesLength).length===h.current.length}return K.useEffect(()=>{r!=null&&r.current!=null&&(e.length<=0||(g(),a.current=0,m.start(),r.current.instanceMatrix.needsUpdate=!0))},[e.length]),Ce.jsx("instancedMesh",{receiveShadow:!0,ref:r,args:[KO,QO,d]})}function OX({tileSize:n,rubickFaces:e}){const t=K.useRef(null),i=e.length*9;function r(){let s=0;e.forEach(o=>{o.forEach(({x:a,y:h,color:d})=>{var m;const p=new fn;p.position.set(a/n,-(h/n),0),p.rotation.set(...JO(d)),p.updateMatrix(),(m=t.current)==null||m.setMatrixAt(s,p.matrix),s++})})}return K.useEffect(()=>{t!=null&&t.current!=null&&(e.length<=0||(r(),t.current.instanceMatrix.needsUpdate=!0))},[e]),Ce.jsx("instancedMesh",{ref:t,args:[KO,QO,i]})}function DX({width:n,height:e,tileSize:t,rubickFaces:i}){const r=K.useRef(null),s=K.useRef(null),[o,a]=K.useState(!1),[h,d]=K.useState(!1),{toggleFullscreen:p}=b3({target:s}),m=Math.max(n,e)/t,[{position:g,rotation:y},S]=ZO(()=>({position:[-(n/2/t),e/2/t,0],rotation:[0,0,0],config:{mass:5,tension:500,friction:150,precision:1e-4}}));K.useEffect(()=>{A()},[i.length,r.current]),K.useEffect(()=>{h?S.start({from:{position:[-(n/2/t),e/2/t,0],rotation:[0,0,0]},to:{position:[n/2/t,e/2/t,0],rotation:[0,Math.PI,0]}}):S.start({to:{position:[-(n/2/t),e/2/t,0],rotation:[0,0,0]},from:{position:[n/2/t,e/2/t,0],rotation:[0,Math.PI,0]}})},[h,n,t]);function A(){r&&r.current&&r.current.setLookAt(0,0,m*2,0,0,0,!0)}return console.log("ratio: ",m*2.5),Ce.jsxs(Ce.Fragment,{children:[Ce.jsx(_d,{label:"Hide other faces (improve performances)",value:o,toggle:()=>a(!o)}),Ce.jsx(_d,{label:"Invert",value:h,toggle:()=>d(!h)}),Ce.jsx("div",{className:"flex flex-col gap-5 w-full h-full",children:Ce.jsxs(V9,{camera:{position:[0,0,1],fov:35,far:1e3},dpr:window.devicePixelRatio,onDoubleClick:p,ref:s,style:{width:"100%",height:"95%"},children:[Ce.jsx("color",{attach:"background",args:["#c0d6e9"]}),Ce.jsx(Ce.Fragment,{}),Ce.jsx("ambientLight",{color:0,intensity:.2}),Ce.jsx("directionalLight",{color:16777215,position:[-5,1,0],intensity:1.5}),Ce.jsx("directionalLight",{color:16777215,position:[-5,1,-5],intensity:1}),Ce.jsx("directionalLight",{color:16777215,position:[5,0,5],intensity:3}),Ce.jsx(o7,{scale:[n,e/t*3,50],position:[0,-(e/2/t)-5,-n/t],floor:10,segments:20,receiveShadow:!0,children:Ce.jsx("meshStandardMaterial",{color:"#FF0000",metalness:1,emissive:"#45A5FF",flatShading:!0})}),Ce.jsx(yX.group,{rotation:y,position:g,children:o?Ce.jsx(OX,{tileSize:t,rubickFaces:i}):Ce.jsx(IX,{tileSize:t,rubickFaces:i,width:n,height:e})}),Ce.jsx(i7,{alignment:"bottom-right",margin:[50,50],children:Ce.jsx(r7,{labelColor:"white",axisHeadScale:1})}),Ce.jsx(Q9,{minPolarAngle:0,maxPolarAngle:Math.PI/1.9,minAzimuthAngle:-.55,maxAzimuthAngle:.55,makeDefault:!0,maxDistance:m*2,ref:r})]})})]})}const db=32;function UX(){const[n,e]=K.useState(""),[t,i]=K.useState(),[r,s]=K.useState(!0),{computePossibleSize:o,setPossibleSize:a,possibleWidth:h,possibleHeight:d,ratio:p,setRatio:m,bestProportion:g,setBestProportion:y,setTileSize:S}=eB({initialTileSize:db}),{optimizedGenerateImage:A,setOption:w,noise:_,tileSize:T,rubickFaces:E}=nB({initialTileSize:db});K.useEffect(()=>{t&&o(t.width,t.height)},[t,g,p,T]);function C(O){i(O),a(O.width,O.height),y(!0),m(1),O.width===0?e("Error! The image has 0 pixels as width"):O.height===0?e("Error! The image has 0 pixels as height"):O.width<T||O.height<T?e("Error! The image has a dimension below the tileSize"):e("")}function P(){if(!t){e("Error! Please upload an image");return}A(t,h,d)}function D(){if(!t)return Ce.jsx(Ce.Fragment,{});const O=h,F=d;return Ce.jsxs("div",{className:"flex flex-row gap-3 w-full",children:[Ce.jsxs("div",{className:"tooltip flex flex-row items-center gap-1","data-tip":`${O} pixels`,children:[Ce.jsx("span",{className:"font-semibold",children:"Width:"}),Ce.jsxs("span",{className:"italic",children:[O/T," cubes"]}),Ce.jsx("img",{src:Ow,width:"16px",alt:"rubick's cubes"})]}),Ce.jsxs("div",{className:"tooltip flex flex-row items-center gap-1","data-tip":`${F} pixels`,children:[Ce.jsx("span",{className:"font-semibold",children:"Height:"}),Ce.jsxs("span",{className:"italic",children:[F/T," cubes"]}),Ce.jsx("img",{src:Ow,width:"16px",alt:"rubick's cubes"})]})]})}return Ce.jsx("div",{className:"container mx-auto md:px-0 px-5",children:Ce.jsxs("div",{className:"flex flex-col gap-4",children:[Ce.jsx(iB,{}),Ce.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[Ce.jsxs("div",{className:"flex flex-col gap-3",children:[Ce.jsxs(p_,{title:"Upload your image",children:[n!==""&&Ce.jsx(oB,{errorMessage:n}),Ce.jsx(sB,{onChange:C,value:t})]}),Ce.jsx(p_,{title:"Image Settings",children:Ce.jsxs("div",{children:[Ce.jsx(VC,{label:"tileSize",value:T,max:128,min:16,step:8,onChange:O=>{w("tileSize",O),S(O),O<((t==null?void 0:t.width)||0)&&O<((t==null?void 0:t.height)||0)&&e("")}}),Ce.jsx(VC,{label:"noise",value:_,max:50,onChange:O=>w("noise",O)})]})}),Ce.jsx(p_,{title:"Image Size",children:Ce.jsxs("div",{children:[Ce.jsxs("div",{children:[Ce.jsx(_d,{label:"Best proportion",value:g,toggle:()=>{y(!g),m(1)}}),Ce.jsxs("div",{children:[Ce.jsx("label",{children:"Ratio"}),Ce.jsx("input",{disabled:g,type:"range",min:3,max:9,step:3,value:p,onChange:O=>m(parseInt(O.target.value)),className:`range ${g?"range-error":"range-primary"}`}),Ce.jsx("span",{children:p})]})]}),h/T*(d/T)>5e3?Ce.jsxs("div",{role:"alert",className:"alert alert-warning",children:[Ce.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:Ce.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),Ce.jsx("span",{children:"Warning: The number of cubes can be too much in 3D"})]}):Ce.jsx(Ce.Fragment,{}),D()]})}),Ce.jsx("button",{className:"btn btn-accent",onClick:P,children:"Generate"})]}),Ce.jsx("div",{className:"basis-3/4",children:Ce.jsxs(p_,{title:"Result",children:[Ce.jsx(_d,{label:"3D views",value:r,toggle:()=>s(!r)}),Ce.jsx("div",{style:{width:"100%",height:"65vh"},children:r?Ce.jsx(DX,{width:h,height:d,tileSize:T,rubickFaces:E}):Ce.jsx(aB,{width:h,height:d,tileSize:T,rubickFaces:E})})]})})]}),Ce.jsx(rB,{})]})})}BS.createRoot(document.getElementById("root")).render(Ce.jsx(Vz.StrictMode,{children:Ce.jsx(UX,{})}));
